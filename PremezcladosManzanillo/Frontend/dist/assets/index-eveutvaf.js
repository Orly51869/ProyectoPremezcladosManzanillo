const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-BP6Y0MBi.js","assets/react-vendor-BG1QAoaV.js","assets/ui-vendor-b2TiaR90.js","assets/auth-vendor-CeMO4WeT.js"])))=>i.map(i=>d[i]);
import{j as l,L as Nc,a as Pu,M as Gm,S as Xm,X as Ji,b as ah,H as Db,P as Jm,R as Fb,C as oh,m as Kt,U as zc,F as Uc,D as Km,T as Cf,c as Zm,d as Fa,e as bn,f as qc,g as Wc,h as Hc,i as $o,k as lh,l as Qm,n as Pn,o as e0,B as Rb,W as Mb,p as Lu,q as ch,E as Eu,r as Tb,s as t0,t as Pf,u as Lf,v as Ou,w as Ef,x as Ib,y as r0,z as Bb,A as Of,I as n0,G as cc,J as s0,K as dh,N as zb,O as Ub,Q as uh,V as i0,Y as a0,Z as qb,_ as Wb,$ as Hb,a0 as o0,a1 as Vb,a2 as $b,a3 as Yb,a4 as Gb,a5 as Xb,a6 as Jb,a7 as Kb,a8 as Zb,a9 as Qb}from"./ui-vendor-b2TiaR90.js";import{b as e2,r as Z,L as Ft,f as Jt,g as l0,u as c0,c as t2,d as Vc,O as hh,B as r2,R as n2,e as Wt,N as s2}from"./react-vendor-BG1QAoaV.js";import{u as Mr,A as i2}from"./auth-vendor-CeMO4WeT.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var Tl={},Df;function a2(){if(Df)return Tl;Df=1;var t=e2();return Tl.createRoot=t.createRoot,Tl.hydrateRoot=t.hydrateRoot,Tl}var o2=a2();function d0(t,e){return function(){return t.apply(e,arguments)}}const{toString:l2}=Object.prototype,{getPrototypeOf:fh}=Object,{iterator:$c,toStringTag:u0}=Symbol,Yc=(t=>e=>{const r=l2.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),$n=t=>(t=t.toLowerCase(),e=>Yc(e)===t),Gc=t=>e=>typeof e===t,{isArray:Ra}=Array,La=Gc("undefined");function Yo(t){return t!==null&&!La(t)&&t.constructor!==null&&!La(t.constructor)&&nn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const h0=$n("ArrayBuffer");function c2(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&h0(t.buffer),e}const d2=Gc("string"),nn=Gc("function"),f0=Gc("number"),Go=t=>t!==null&&typeof t=="object",u2=t=>t===!0||t===!1,dc=t=>{if(Yc(t)!=="object")return!1;const e=fh(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(u0 in t)&&!($c in t)},h2=t=>{if(!Go(t)||Yo(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},f2=$n("Date"),p2=$n("File"),g2=$n("Blob"),m2=$n("FileList"),x2=t=>Go(t)&&nn(t.pipe),b2=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||nn(t.append)&&((e=Yc(t))==="formdata"||e==="object"&&nn(t.toString)&&t.toString()==="[object FormData]"))},y2=$n("URLSearchParams"),[v2,w2,k2,N2]=["ReadableStream","Request","Response","Headers"].map($n),j2=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Xo(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,s;if(typeof t!="object"&&(t=[t]),Ra(t))for(n=0,s=t.length;n<s;n++)e.call(null,t[n],n,t);else{if(Yo(t))return;const i=r?Object.getOwnPropertyNames(t):Object.keys(t),a=i.length;let o;for(n=0;n<a;n++)o=i[n],e.call(null,t[o],o,t)}}function p0(t,e){if(Yo(t))return null;e=e.toLowerCase();const r=Object.keys(t);let n=r.length,s;for(;n-- >0;)if(s=r[n],e===s.toLowerCase())return s;return null}const Ui=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,g0=t=>!La(t)&&t!==Ui;function Du(){const{caseless:t,skipUndefined:e}=g0(this)&&this||{},r={},n=(s,i)=>{const a=t&&p0(r,i)||i;dc(r[a])&&dc(s)?r[a]=Du(r[a],s):dc(s)?r[a]=Du({},s):Ra(s)?r[a]=s.slice():(!e||!La(s))&&(r[a]=s)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&Xo(arguments[s],n);return r}const _2=(t,e,r,{allOwnKeys:n}={})=>(Xo(e,(s,i)=>{r&&nn(s)?t[i]=d0(s,r):t[i]=s},{allOwnKeys:n}),t),S2=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),A2=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},C2=(t,e,r,n)=>{let s,i,a;const o={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)a=s[i],(!n||n(a,t,e))&&!o[a]&&(e[a]=t[a],o[a]=!0);t=r!==!1&&fh(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},P2=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},L2=t=>{if(!t)return null;if(Ra(t))return t;let e=t.length;if(!f0(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},E2=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&fh(Uint8Array)),O2=(t,e)=>{const n=(t&&t[$c]).call(t);let s;for(;(s=n.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},D2=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},F2=$n("HTMLFormElement"),R2=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),Ff=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),M2=$n("RegExp"),m0=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};Xo(r,(s,i)=>{let a;(a=e(s,i,t))!==!1&&(n[i]=a||s)}),Object.defineProperties(t,n)},T2=t=>{m0(t,(e,r)=>{if(nn(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(nn(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},I2=(t,e)=>{const r={},n=s=>{s.forEach(i=>{r[i]=!0})};return Ra(t)?n(t):n(String(t).split(e)),r},B2=()=>{},z2=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function U2(t){return!!(t&&nn(t.append)&&t[u0]==="FormData"&&t[$c])}const q2=t=>{const e=new Array(10),r=(n,s)=>{if(Go(n)){if(e.indexOf(n)>=0)return;if(Yo(n))return n;if(!("toJSON"in n)){e[s]=n;const i=Ra(n)?[]:{};return Xo(n,(a,o)=>{const c=r(a,s+1);!La(c)&&(i[o]=c)}),e[s]=void 0,i}}return n};return r(t,0)},W2=$n("AsyncFunction"),H2=t=>t&&(Go(t)||nn(t))&&nn(t.then)&&nn(t.catch),x0=((t,e)=>t?setImmediate:e?((r,n)=>(Ui.addEventListener("message",({source:s,data:i})=>{s===Ui&&i===r&&n.length&&n.shift()()},!1),s=>{n.push(s),Ui.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",nn(Ui.postMessage)),V2=typeof queueMicrotask<"u"?queueMicrotask.bind(Ui):typeof process<"u"&&process.nextTick||x0,$2=t=>t!=null&&nn(t[$c]),be={isArray:Ra,isArrayBuffer:h0,isBuffer:Yo,isFormData:b2,isArrayBufferView:c2,isString:d2,isNumber:f0,isBoolean:u2,isObject:Go,isPlainObject:dc,isEmptyObject:h2,isReadableStream:v2,isRequest:w2,isResponse:k2,isHeaders:N2,isUndefined:La,isDate:f2,isFile:p2,isBlob:g2,isRegExp:M2,isFunction:nn,isStream:x2,isURLSearchParams:y2,isTypedArray:E2,isFileList:m2,forEach:Xo,merge:Du,extend:_2,trim:j2,stripBOM:S2,inherits:A2,toFlatObject:C2,kindOf:Yc,kindOfTest:$n,endsWith:P2,toArray:L2,forEachEntry:O2,matchAll:D2,isHTMLForm:F2,hasOwnProperty:Ff,hasOwnProp:Ff,reduceDescriptors:m0,freezeMethods:T2,toObjectSet:I2,toCamelCase:R2,noop:B2,toFiniteNumber:z2,findKey:p0,global:Ui,isContextDefined:g0,isSpecCompliantForm:U2,toJSONObject:q2,isAsyncFn:W2,isThenable:H2,setImmediate:x0,asap:V2,isIterable:$2};function ft(t,e,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}be.inherits(ft,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:be.toJSONObject(this.config),code:this.code,status:this.status}}});const b0=ft.prototype,y0={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{y0[t]={value:t}});Object.defineProperties(ft,y0);Object.defineProperty(b0,"isAxiosError",{value:!0});ft.from=(t,e,r,n,s,i)=>{const a=Object.create(b0);be.toFlatObject(t,a,function(u){return u!==Error.prototype},d=>d!=="isAxiosError");const o=t&&t.message?t.message:"Error",c=e==null&&t?t.code:e;return ft.call(a,o,c,r,n,s),t&&a.cause==null&&Object.defineProperty(a,"cause",{value:t,configurable:!0}),a.name=t&&t.name||"Error",i&&Object.assign(a,i),a};const Y2=null;function Fu(t){return be.isPlainObject(t)||be.isArray(t)}function v0(t){return be.endsWith(t,"[]")?t.slice(0,-2):t}function Rf(t,e,r){return t?t.concat(e).map(function(s,i){return s=v0(s),!r&&i?"["+s+"]":s}).join(r?".":""):e}function G2(t){return be.isArray(t)&&!t.some(Fu)}const X2=be.toFlatObject(be,{},null,function(e){return/^is[A-Z]/.test(e)});function Xc(t,e,r){if(!be.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=be.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,y){return!be.isUndefined(y[v])});const n=r.metaTokens,s=r.visitor||u,i=r.dots,a=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&be.isSpecCompliantForm(e);if(!be.isFunction(s))throw new TypeError("visitor must be a function");function d(x){if(x===null)return"";if(be.isDate(x))return x.toISOString();if(be.isBoolean(x))return x.toString();if(!c&&be.isBlob(x))throw new ft("Blob is not supported. Use a Buffer instead.");return be.isArrayBuffer(x)||be.isTypedArray(x)?c&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function u(x,v,y){let k=x;if(x&&!y&&typeof x=="object"){if(be.endsWith(v,"{}"))v=n?v:v.slice(0,-2),x=JSON.stringify(x);else if(be.isArray(x)&&G2(x)||(be.isFileList(x)||be.endsWith(v,"[]"))&&(k=be.toArray(x)))return v=v0(v),k.forEach(function(D,L){!(be.isUndefined(D)||D===null)&&e.append(a===!0?Rf([v],L,i):a===null?v:v+"[]",d(D))}),!1}return Fu(x)?!0:(e.append(Rf(y,v,i),d(x)),!1)}const g=[],m=Object.assign(X2,{defaultVisitor:u,convertValue:d,isVisitable:Fu});function f(x,v){if(!be.isUndefined(x)){if(g.indexOf(x)!==-1)throw Error("Circular reference detected in "+v.join("."));g.push(x),be.forEach(x,function(k,A){(!(be.isUndefined(k)||k===null)&&s.call(e,k,be.isString(A)?A.trim():A,v,m))===!0&&f(k,v?v.concat(A):[A])}),g.pop()}}if(!be.isObject(t))throw new TypeError("data must be an object");return f(t),e}function Mf(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function ph(t,e){this._pairs=[],t&&Xc(t,this,e)}const w0=ph.prototype;w0.append=function(e,r){this._pairs.push([e,r])};w0.toString=function(e){const r=e?function(n){return e.call(this,n,Mf)}:Mf;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function J2(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function k0(t,e,r){if(!e)return t;const n=r&&r.encode||J2;be.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let i;if(s?i=s(e,r):i=be.isURLSearchParams(e)?e.toString():new ph(e,r).toString(n),i){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class Tf{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){be.forEach(this.handlers,function(n){n!==null&&e(n)})}}const N0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},K2=typeof URLSearchParams<"u"?URLSearchParams:ph,Z2=typeof FormData<"u"?FormData:null,Q2=typeof Blob<"u"?Blob:null,ey={isBrowser:!0,classes:{URLSearchParams:K2,FormData:Z2,Blob:Q2},protocols:["http","https","file","blob","url","data"]},gh=typeof window<"u"&&typeof document<"u",Ru=typeof navigator=="object"&&navigator||void 0,ty=gh&&(!Ru||["ReactNative","NativeScript","NS"].indexOf(Ru.product)<0),ry=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",ny=gh&&window.location.href||"http://localhost",sy=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:gh,hasStandardBrowserEnv:ty,hasStandardBrowserWebWorkerEnv:ry,navigator:Ru,origin:ny},Symbol.toStringTag,{value:"Module"})),Hr={...sy,...ey};function iy(t,e){return Xc(t,new Hr.classes.URLSearchParams,{visitor:function(r,n,s,i){return Hr.isNode&&be.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function ay(t){return be.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function oy(t){const e={},r=Object.keys(t);let n;const s=r.length;let i;for(n=0;n<s;n++)i=r[n],e[i]=t[i];return e}function j0(t){function e(r,n,s,i){let a=r[i++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),c=i>=r.length;return a=!a&&be.isArray(s)?s.length:a,c?(be.hasOwnProp(s,a)?s[a]=[s[a],n]:s[a]=n,!o):((!s[a]||!be.isObject(s[a]))&&(s[a]=[]),e(r,n,s[a],i)&&be.isArray(s[a])&&(s[a]=oy(s[a])),!o)}if(be.isFormData(t)&&be.isFunction(t.entries)){const r={};return be.forEachEntry(t,(n,s)=>{e(ay(n),s,r,0)}),r}return null}function ly(t,e,r){if(be.isString(t))try{return(e||JSON.parse)(t),be.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const Jo={transitional:N0,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,i=be.isObject(e);if(i&&be.isHTMLForm(e)&&(e=new FormData(e)),be.isFormData(e))return s?JSON.stringify(j0(e)):e;if(be.isArrayBuffer(e)||be.isBuffer(e)||be.isStream(e)||be.isFile(e)||be.isBlob(e)||be.isReadableStream(e))return e;if(be.isArrayBufferView(e))return e.buffer;if(be.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return iy(e,this.formSerializer).toString();if((o=be.isFileList(e))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Xc(o?{"files[]":e}:e,c&&new c,this.formSerializer)}}return i||s?(r.setContentType("application/json",!1),ly(e)):e}],transformResponse:[function(e){const r=this.transitional||Jo.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(be.isResponse(e)||be.isReadableStream(e))return e;if(e&&be.isString(e)&&(n&&!this.responseType||s)){const a=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(o){if(a)throw o.name==="SyntaxError"?ft.from(o,ft.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Hr.classes.FormData,Blob:Hr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};be.forEach(["delete","get","head","post","put","patch"],t=>{Jo.headers[t]={}});const cy=be.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),dy=t=>{const e={};let r,n,s;return t&&t.split(`
`).forEach(function(a){s=a.indexOf(":"),r=a.substring(0,s).trim().toLowerCase(),n=a.substring(s+1).trim(),!(!r||e[r]&&cy[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},If=Symbol("internals");function po(t){return t&&String(t).trim().toLowerCase()}function uc(t){return t===!1||t==null?t:be.isArray(t)?t.map(uc):String(t)}function uy(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const hy=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Id(t,e,r,n,s){if(be.isFunction(n))return n.call(this,e,r);if(s&&(e=r),!!be.isString(e)){if(be.isString(n))return e.indexOf(n)!==-1;if(be.isRegExp(n))return n.test(e)}}function fy(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function py(t,e){const r=be.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(s,i,a){return this[n].call(this,e,s,i,a)},configurable:!0})})}let sn=class{constructor(e){e&&this.set(e)}set(e,r,n){const s=this;function i(o,c,d){const u=po(c);if(!u)throw new Error("header name must be a non-empty string");const g=be.findKey(s,u);(!g||s[g]===void 0||d===!0||d===void 0&&s[g]!==!1)&&(s[g||c]=uc(o))}const a=(o,c)=>be.forEach(o,(d,u)=>i(d,u,c));if(be.isPlainObject(e)||e instanceof this.constructor)a(e,r);else if(be.isString(e)&&(e=e.trim())&&!hy(e))a(dy(e),r);else if(be.isObject(e)&&be.isIterable(e)){let o={},c,d;for(const u of e){if(!be.isArray(u))throw TypeError("Object iterator must return a key-value pair");o[d=u[0]]=(c=o[d])?be.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}a(o,r)}else e!=null&&i(r,e,n);return this}get(e,r){if(e=po(e),e){const n=be.findKey(this,e);if(n){const s=this[n];if(!r)return s;if(r===!0)return uy(s);if(be.isFunction(r))return r.call(this,s,n);if(be.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=po(e),e){const n=be.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||Id(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let s=!1;function i(a){if(a=po(a),a){const o=be.findKey(n,a);o&&(!r||Id(n,n[o],o,r))&&(delete n[o],s=!0)}}return be.isArray(e)?e.forEach(i):i(e),s}clear(e){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const i=r[n];(!e||Id(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const r=this,n={};return be.forEach(this,(s,i)=>{const a=be.findKey(n,i);if(a){r[a]=uc(s),delete r[i];return}const o=e?fy(i):String(i).trim();o!==i&&delete r[i],r[o]=uc(s),n[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return be.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=e&&be.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(s=>n.set(s)),n}static accessor(e){const n=(this[If]=this[If]={accessors:{}}).accessors,s=this.prototype;function i(a){const o=po(a);n[o]||(py(s,a),n[o]=!0)}return be.isArray(e)?e.forEach(i):i(e),this}};sn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);be.reduceDescriptors(sn.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});be.freezeMethods(sn);function Bd(t,e){const r=this||Jo,n=e||r,s=sn.from(n.headers);let i=n.data;return be.forEach(t,function(o){i=o.call(r,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function _0(t){return!!(t&&t.__CANCEL__)}function Ma(t,e,r){ft.call(this,t??"canceled",ft.ERR_CANCELED,e,r),this.name="CanceledError"}be.inherits(Ma,ft,{__CANCEL__:!0});function S0(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new ft("Request failed with status code "+r.status,[ft.ERR_BAD_REQUEST,ft.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function gy(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function my(t,e){t=t||10;const r=new Array(t),n=new Array(t);let s=0,i=0,a;return e=e!==void 0?e:1e3,function(c){const d=Date.now(),u=n[i];a||(a=d),r[s]=c,n[s]=d;let g=i,m=0;for(;g!==s;)m+=r[g++],g=g%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),d-a<e)return;const f=u&&d-u;return f?Math.round(m*1e3/f):void 0}}function xy(t,e){let r=0,n=1e3/e,s,i;const a=(d,u=Date.now())=>{r=u,s=null,i&&(clearTimeout(i),i=null),t(...d)};return[(...d)=>{const u=Date.now(),g=u-r;g>=n?a(d,u):(s=d,i||(i=setTimeout(()=>{i=null,a(s)},n-g)))},()=>s&&a(s)]}const jc=(t,e,r=3)=>{let n=0;const s=my(50,250);return xy(i=>{const a=i.loaded,o=i.lengthComputable?i.total:void 0,c=a-n,d=s(c),u=a<=o;n=a;const g={loaded:a,total:o,progress:o?a/o:void 0,bytes:c,rate:d||void 0,estimated:d&&o&&u?(o-a)/d:void 0,event:i,lengthComputable:o!=null,[e?"download":"upload"]:!0};t(g)},r)},Bf=(t,e)=>{const r=t!=null;return[n=>e[0]({lengthComputable:r,total:t,loaded:n}),e[1]]},zf=t=>(...e)=>be.asap(()=>t(...e)),by=Hr.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,Hr.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(Hr.origin),Hr.navigator&&/(msie|trident)/i.test(Hr.navigator.userAgent)):()=>!0,yy=Hr.hasStandardBrowserEnv?{write(t,e,r,n,s,i,a){if(typeof document>"u")return;const o=[`${t}=${encodeURIComponent(e)}`];be.isNumber(r)&&o.push(`expires=${new Date(r).toUTCString()}`),be.isString(n)&&o.push(`path=${n}`),be.isString(s)&&o.push(`domain=${s}`),i===!0&&o.push("secure"),be.isString(a)&&o.push(`SameSite=${a}`),document.cookie=o.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function vy(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function wy(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function A0(t,e,r){let n=!vy(e);return t&&(n||r==!1)?wy(t,e):e}const Uf=t=>t instanceof sn?{...t}:t;function $i(t,e){e=e||{};const r={};function n(d,u,g,m){return be.isPlainObject(d)&&be.isPlainObject(u)?be.merge.call({caseless:m},d,u):be.isPlainObject(u)?be.merge({},u):be.isArray(u)?u.slice():u}function s(d,u,g,m){if(be.isUndefined(u)){if(!be.isUndefined(d))return n(void 0,d,g,m)}else return n(d,u,g,m)}function i(d,u){if(!be.isUndefined(u))return n(void 0,u)}function a(d,u){if(be.isUndefined(u)){if(!be.isUndefined(d))return n(void 0,d)}else return n(void 0,u)}function o(d,u,g){if(g in e)return n(d,u);if(g in t)return n(void 0,d)}const c={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(d,u,g)=>s(Uf(d),Uf(u),g,!0)};return be.forEach(Object.keys({...t,...e}),function(u){const g=c[u]||s,m=g(t[u],e[u],u);be.isUndefined(m)&&g!==o||(r[u]=m)}),r}const C0=t=>{const e=$i({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:i,headers:a,auth:o}=e;if(e.headers=a=sn.from(a),e.url=k0(A0(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),be.isFormData(r)){if(Hr.hasStandardBrowserEnv||Hr.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(be.isFunction(r.getHeaders)){const c=r.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([u,g])=>{d.includes(u.toLowerCase())&&a.set(u,g)})}}if(Hr.hasStandardBrowserEnv&&(n&&be.isFunction(n)&&(n=n(e)),n||n!==!1&&by(e.url))){const c=s&&i&&yy.read(i);c&&a.set(s,c)}return e},ky=typeof XMLHttpRequest<"u",Ny=ky&&function(t){return new Promise(function(r,n){const s=C0(t);let i=s.data;const a=sn.from(s.headers).normalize();let{responseType:o,onUploadProgress:c,onDownloadProgress:d}=s,u,g,m,f,x;function v(){f&&f(),x&&x(),s.cancelToken&&s.cancelToken.unsubscribe(u),s.signal&&s.signal.removeEventListener("abort",u)}let y=new XMLHttpRequest;y.open(s.method.toUpperCase(),s.url,!0),y.timeout=s.timeout;function k(){if(!y)return;const D=sn.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),q={data:!o||o==="text"||o==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:D,config:t,request:y};S0(function($){r($),v()},function($){n($),v()},q),y=null}"onloadend"in y?y.onloadend=k:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(k)},y.onabort=function(){y&&(n(new ft("Request aborted",ft.ECONNABORTED,t,y)),y=null)},y.onerror=function(L){const q=L&&L.message?L.message:"Network Error",z=new ft(q,ft.ERR_NETWORK,t,y);z.event=L||null,n(z),y=null},y.ontimeout=function(){let L=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const q=s.transitional||N0;s.timeoutErrorMessage&&(L=s.timeoutErrorMessage),n(new ft(L,q.clarifyTimeoutError?ft.ETIMEDOUT:ft.ECONNABORTED,t,y)),y=null},i===void 0&&a.setContentType(null),"setRequestHeader"in y&&be.forEach(a.toJSON(),function(L,q){y.setRequestHeader(q,L)}),be.isUndefined(s.withCredentials)||(y.withCredentials=!!s.withCredentials),o&&o!=="json"&&(y.responseType=s.responseType),d&&([m,x]=jc(d,!0),y.addEventListener("progress",m)),c&&y.upload&&([g,f]=jc(c),y.upload.addEventListener("progress",g),y.upload.addEventListener("loadend",f)),(s.cancelToken||s.signal)&&(u=D=>{y&&(n(!D||D.type?new Ma(null,t,y):D),y.abort(),y=null)},s.cancelToken&&s.cancelToken.subscribe(u),s.signal&&(s.signal.aborted?u():s.signal.addEventListener("abort",u)));const A=gy(s.url);if(A&&Hr.protocols.indexOf(A)===-1){n(new ft("Unsupported protocol "+A+":",ft.ERR_BAD_REQUEST,t));return}y.send(i||null)})},jy=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let n=new AbortController,s;const i=function(d){if(!s){s=!0,o();const u=d instanceof Error?d:this.reason;n.abort(u instanceof ft?u:new Ma(u instanceof Error?u.message:u))}};let a=e&&setTimeout(()=>{a=null,i(new ft(`timeout ${e} of ms exceeded`,ft.ETIMEDOUT))},e);const o=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),t=null)};t.forEach(d=>d.addEventListener("abort",i));const{signal:c}=n;return c.unsubscribe=()=>be.asap(o),c}},_y=function*(t,e){let r=t.byteLength;if(r<e){yield t;return}let n=0,s;for(;n<r;)s=n+e,yield t.slice(n,s),n=s},Sy=async function*(t,e){for await(const r of Ay(t))yield*_y(r,e)},Ay=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)break;yield n}}finally{await e.cancel()}},qf=(t,e,r,n)=>{const s=Sy(t,e);let i=0,a,o=c=>{a||(a=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await s.next();if(d){o(),c.close();return}let g=u.byteLength;if(r){let m=i+=g;r(m)}c.enqueue(new Uint8Array(u))}catch(d){throw o(d),d}},cancel(c){return o(c),s.return()}},{highWaterMark:2})},Wf=64*1024,{isFunction:Il}=be,Cy=(({Request:t,Response:e})=>({Request:t,Response:e}))(be.global),{ReadableStream:Hf,TextEncoder:Vf}=be.global,$f=(t,...e)=>{try{return!!t(...e)}catch{return!1}},Py=t=>{t=be.merge.call({skipUndefined:!0},Cy,t);const{fetch:e,Request:r,Response:n}=t,s=e?Il(e):typeof fetch=="function",i=Il(r),a=Il(n);if(!s)return!1;const o=s&&Il(Hf),c=s&&(typeof Vf=="function"?(x=>v=>x.encode(v))(new Vf):async x=>new Uint8Array(await new r(x).arrayBuffer())),d=i&&o&&$f(()=>{let x=!1;const v=new r(Hr.origin,{body:new Hf,method:"POST",get duplex(){return x=!0,"half"}}).headers.has("Content-Type");return x&&!v}),u=a&&o&&$f(()=>be.isReadableStream(new n("").body)),g={stream:u&&(x=>x.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(x=>{!g[x]&&(g[x]=(v,y)=>{let k=v&&v[x];if(k)return k.call(v);throw new ft(`Response type '${x}' is not supported`,ft.ERR_NOT_SUPPORT,y)})});const m=async x=>{if(x==null)return 0;if(be.isBlob(x))return x.size;if(be.isSpecCompliantForm(x))return(await new r(Hr.origin,{method:"POST",body:x}).arrayBuffer()).byteLength;if(be.isArrayBufferView(x)||be.isArrayBuffer(x))return x.byteLength;if(be.isURLSearchParams(x)&&(x=x+""),be.isString(x))return(await c(x)).byteLength},f=async(x,v)=>{const y=be.toFiniteNumber(x.getContentLength());return y??m(v)};return async x=>{let{url:v,method:y,data:k,signal:A,cancelToken:D,timeout:L,onDownloadProgress:q,onUploadProgress:z,responseType:$,headers:j,withCredentials:_="same-origin",fetchOptions:M}=C0(x),S=e||fetch;$=$?($+"").toLowerCase():"text";let C=jy([A,D&&D.toAbortSignal()],L),R=null;const F=C&&C.unsubscribe&&(()=>{C.unsubscribe()});let V;try{if(z&&d&&y!=="get"&&y!=="head"&&(V=await f(j,k))!==0){let re=new r(v,{method:"POST",body:k,duplex:"half"}),P;if(be.isFormData(k)&&(P=re.headers.get("content-type"))&&j.setContentType(P),re.body){const[I,Y]=Bf(V,jc(zf(z)));k=qf(re.body,Wf,I,Y)}}be.isString(_)||(_=_?"include":"omit");const te=i&&"credentials"in r.prototype,ne={...M,signal:C,method:y.toUpperCase(),headers:j.normalize().toJSON(),body:k,duplex:"half",credentials:te?_:void 0};R=i&&new r(v,ne);let se=await(i?S(R,M):S(v,ne));const K=u&&($==="stream"||$==="response");if(u&&(q||K&&F)){const re={};["status","statusText","headers"].forEach(ee=>{re[ee]=se[ee]});const P=be.toFiniteNumber(se.headers.get("content-length")),[I,Y]=q&&Bf(P,jc(zf(q),!0))||[];se=new n(qf(se.body,Wf,I,()=>{Y&&Y(),F&&F()}),re)}$=$||"text";let Q=await g[be.findKey(g,$)||"text"](se,x);return!K&&F&&F(),await new Promise((re,P)=>{S0(re,P,{data:Q,headers:sn.from(se.headers),status:se.status,statusText:se.statusText,config:x,request:R})})}catch(te){throw F&&F(),te&&te.name==="TypeError"&&/Load failed|fetch/i.test(te.message)?Object.assign(new ft("Network Error",ft.ERR_NETWORK,x,R),{cause:te.cause||te}):ft.from(te,te&&te.code,x,R)}}},Ly=new Map,P0=t=>{let e=t&&t.env||{};const{fetch:r,Request:n,Response:s}=e,i=[n,s,r];let a=i.length,o=a,c,d,u=Ly;for(;o--;)c=i[o],d=u.get(c),d===void 0&&u.set(c,d=o?new Map:Py(e)),u=d;return d};P0();const mh={http:Y2,xhr:Ny,fetch:{get:P0}};be.forEach(mh,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Yf=t=>`- ${t}`,Ey=t=>be.isFunction(t)||t===null||t===!1;function Oy(t,e){t=be.isArray(t)?t:[t];const{length:r}=t;let n,s;const i={};for(let a=0;a<r;a++){n=t[a];let o;if(s=n,!Ey(n)&&(s=mh[(o=String(n)).toLowerCase()],s===void 0))throw new ft(`Unknown adapter '${o}'`);if(s&&(be.isFunction(s)||(s=s.get(e))))break;i[o||"#"+a]=s}if(!s){const a=Object.entries(i).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let o=r?a.length>1?`since :
`+a.map(Yf).join(`
`):" "+Yf(a[0]):"as no adapter specified";throw new ft("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return s}const L0={getAdapter:Oy,adapters:mh};function zd(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ma(null,t)}function Gf(t){return zd(t),t.headers=sn.from(t.headers),t.data=Bd.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),L0.getAdapter(t.adapter||Jo.adapter,t)(t).then(function(n){return zd(t),n.data=Bd.call(t,t.transformResponse,n),n.headers=sn.from(n.headers),n},function(n){return _0(n)||(zd(t),n&&n.response&&(n.response.data=Bd.call(t,t.transformResponse,n.response),n.response.headers=sn.from(n.response.headers))),Promise.reject(n)})}const E0="1.13.1",Jc={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Jc[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const Xf={};Jc.transitional=function(e,r,n){function s(i,a){return"[Axios v"+E0+"] Transitional option '"+i+"'"+a+(n?". "+n:"")}return(i,a,o)=>{if(e===!1)throw new ft(s(a," has been removed"+(r?" in "+r:"")),ft.ERR_DEPRECATED);return r&&!Xf[a]&&(Xf[a]=!0,console.warn(s(a," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(i,a,o):!0}};Jc.spelling=function(e){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function Dy(t,e,r){if(typeof t!="object")throw new ft("options must be an object",ft.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let s=n.length;for(;s-- >0;){const i=n[s],a=e[i];if(a){const o=t[i],c=o===void 0||a(o,i,t);if(c!==!0)throw new ft("option "+i+" must be "+c,ft.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new ft("Unknown option "+i,ft.ERR_BAD_OPTION)}}const hc={assertOptions:Dy,validators:Jc},ss=hc.validators;let Wi=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Tf,response:new Tf}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=$i(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:i}=r;n!==void 0&&hc.assertOptions(n,{silentJSONParsing:ss.transitional(ss.boolean),forcedJSONParsing:ss.transitional(ss.boolean),clarifyTimeoutError:ss.transitional(ss.boolean)},!1),s!=null&&(be.isFunction(s)?r.paramsSerializer={serialize:s}:hc.assertOptions(s,{encode:ss.function,serialize:ss.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),hc.assertOptions(r,{baseUrl:ss.spelling("baseURL"),withXsrfToken:ss.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let a=i&&be.merge(i.common,i[r.method]);i&&be.forEach(["delete","get","head","post","put","patch","common"],x=>{delete i[x]}),r.headers=sn.concat(a,i);const o=[];let c=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(r)===!1||(c=c&&v.synchronous,o.unshift(v.fulfilled,v.rejected))});const d=[];this.interceptors.response.forEach(function(v){d.push(v.fulfilled,v.rejected)});let u,g=0,m;if(!c){const x=[Gf.bind(this),void 0];for(x.unshift(...o),x.push(...d),m=x.length,u=Promise.resolve(r);g<m;)u=u.then(x[g++],x[g++]);return u}m=o.length;let f=r;for(;g<m;){const x=o[g++],v=o[g++];try{f=x(f)}catch(y){v.call(this,y);break}}try{u=Gf.call(this,f)}catch(x){return Promise.reject(x)}for(g=0,m=d.length;g<m;)u=u.then(d[g++],d[g++]);return u}getUri(e){e=$i(this.defaults,e);const r=A0(e.baseURL,e.url,e.allowAbsoluteUrls);return k0(r,e.params,e.paramsSerializer)}};be.forEach(["delete","get","head","options"],function(e){Wi.prototype[e]=function(r,n){return this.request($i(n||{},{method:e,url:r,data:(n||{}).data}))}});be.forEach(["post","put","patch"],function(e){function r(n){return function(i,a,o){return this.request($i(o||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}Wi.prototype[e]=r(),Wi.prototype[e+"Form"]=r(!0)});let Fy=class O0{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(s=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](s);n._listeners=null}),this.promise.then=s=>{let i;const a=new Promise(o=>{n.subscribe(o),i=o}).then(s);return a.cancel=function(){n.unsubscribe(i)},a},e(function(i,a,o){n.reason||(n.reason=new Ma(i,a,o),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=n=>{e.abort(n)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new O0(function(s){e=s}),cancel:e}}};function Ry(t){return function(r){return t.apply(null,r)}}function My(t){return be.isObject(t)&&t.isAxiosError===!0}const Mu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Mu).forEach(([t,e])=>{Mu[e]=t});function D0(t){const e=new Wi(t),r=d0(Wi.prototype.request,e);return be.extend(r,Wi.prototype,e,{allOwnKeys:!0}),be.extend(r,e,null,{allOwnKeys:!0}),r.create=function(s){return D0($i(t,s))},r}const fr=D0(Jo);fr.Axios=Wi;fr.CanceledError=Ma;fr.CancelToken=Fy;fr.isCancel=_0;fr.VERSION=E0;fr.toFormData=Xc;fr.AxiosError=ft;fr.Cancel=fr.CanceledError;fr.all=function(e){return Promise.all(e)};fr.spread=Ry;fr.isAxiosError=My;fr.mergeConfig=$i;fr.AxiosHeaders=sn;fr.formToJSON=t=>j0(be.isHTMLForm(t)?new FormData(t):t);fr.getAdapter=L0.getAdapter;fr.HttpStatusCode=Mu;fr.default=fr;const{Axios:IA,AxiosError:BA,CanceledError:zA,isCancel:UA,CancelToken:qA,VERSION:WA,all:HA,Cancel:VA,isAxiosError:$A,spread:YA,toFormData:GA,AxiosHeaders:XA,HttpStatusCode:JA,formToJSON:KA,getAdapter:ZA,mergeConfig:QA}=fr,Ge=fr.create({baseURL:"http://localhost:3001",withCredentials:!0});let Tu;const Ty=t=>{Tu=t};Ge.interceptors.request.use(async t=>{if(Tu)try{const e=await Tu();t.headers.Authorization=`Bearer ${e}`}catch(e){return console.error("Error getting token for API request",e),Promise.reject(e)}return t});const F0=async()=>{try{return(await Ge.get("/api/dashboard/stats")).data}catch(t){throw console.error("Error fetching dashboard stats:",t),t}},Iy=async()=>{try{return(await Ge.get("/api/dashboard/recent-activity")).data}catch(t){throw console.error("Error fetching recent activity:",t),t}},By=async()=>{try{return(await Ge.get("/api/currency/rates")).data}catch(t){return console.error("Error fetching exchange rates:",t),null}},R0=Z.createContext(),xh=()=>Z.useContext(R0),zy=({children:t})=>{const[e,r]=Z.useState("USD"),[n,s]=Z.useState(null),[i,a]=Z.useState(null),[o,c]=Z.useState(!1),[d,u]=Z.useState(!1),g=async()=>{if(o)return;u(!0);const y=await By();y&&y.USD&&(s(y.USD),a(new Date)),u(!1)};Z.useEffect(()=>{g()},[]);const m=()=>{r(y=>y==="USD"?"VES":"USD")},f=y=>{s(parseFloat(y)),c(!0),a(new Date)},x=()=>{c(!1),g()},v=y=>y==null?"-":e==="USD"?y.toLocaleString("en-US",{style:"currency",currency:"USD"}):(y*(n||0)).toLocaleString("es-VE",{style:"currency",currency:"VES"});return l.jsx(R0.Provider,{value:{currency:e,exchangeRate:n,lastUpdated:i,isManual:o,loading:d,toggleCurrency:m,updateRateManual:f,resetToOfficial:x,formatPrice:v,refreshRates:g},children:t})},M0=Z.createContext(),Kc=()=>Z.useContext(M0),Uy=({children:t})=>{const[e,r]=Z.useState({company_name:"PREMEZCLADOS MANZANILLO, C.A.",company_rif:"J-29762187-3",company_phone:"0295-8726210",company_address:"Av. 31 de Julio, Edif Cantera Manzanillo, Sector Guatamare",company_logo:"/assets/LOGO_PREMEZCLADOS.svg",company_iva:"16",company_igtf:"3"}),[n,s]=Z.useState(!0),i=async()=>{try{s(!0);const{data:o}=await Ge.get("/api/settings");r(c=>({...c,...o}))}catch(o){console.error("Error fetching settings context:",o)}finally{s(!1)}};Z.useEffect(()=>{i()},[]);const a=async(o,c)=>{try{return await Ge.post("/api/settings",{key:o,value:c}),r(d=>({...d,[o]:c})),!0}catch(d){return console.error(`Error updating setting ${o}:`,d),!1}};return l.jsx(M0.Provider,{value:{settings:e,loading:n,refreshSettings:i,updateSetting:a},children:t})},yr=()=>{const{isAuthenticated:t,loginWithRedirect:e,logout:r}=Mr(),[n,s]=Z.useState(!1),[i,a]=Z.useState(localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"));Z.useEffect(()=>{const d=window.document.documentElement;d.classList.remove(i==="dark"?"light":"dark"),d.classList.add(i),localStorage.setItem("theme",i)},[i]);const o=()=>{a(i==="light"?"dark":"light")},c=[{label:"Inicio",to:"/",icon:l.jsx(Db,{className:"w-4 h-4 mr-1"})},{label:"Productos",to:{pathname:"/",hash:"#productos"}},{label:"Servicios",to:{pathname:"/",hash:"#servicios"}},{label:"Nosotros",to:"/nosotros"},{label:"Proyectos",to:"/proyectos"},{label:"Contactanos",to:"/contacto"}];return l.jsxs("header",{className:"w-full px-8 py-0 fixed top-0 bg-white dark:bg-dark-primary border-b border-gray-200 dark:border-gray-700 flex items-center justify-between z-50 shadow-md",children:[l.jsxs(Ft,{to:"/",className:"flex items-center flex-shrink-0","aria-label":"Premezclados - Ir al inicio",children:[l.jsxs("div",{className:"w-24 h-24 flex items-center justify-center",children:[" ",l.jsx("img",{className:"w-full h-full object-contain",alt:"Logo Premezclados Manzanillo",src:"/assets/LOGO_PREMEZCLADOS.svg"})]}),l.jsxs("div",{className:"ml-2 hidden md:block",children:[l.jsx("span",{className:"block text-lg font-bold text-gray-900 dark:text-gray-100 leading-none",children:"Premezclado"}),l.jsx("span",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 leading-none",children:"Manzanillo, C.A."})]})," "]}),l.jsx("nav",{className:"hidden lg:flex flex-grow justify-center","aria-label":"Navegación principal",children:l.jsx("div",{className:"flex items-center gap-4",children:c.map(d=>l.jsxs(Ft,{to:d.to||d.href,className:"flex items-center px-3 py-2 rounded-md text-gray-600 dark:text-gray-300 transform transition-all duration-300 ease-in-out hover:bg-brand-primary hover:text-white hover:scale-105 active:bg-brand-primary active:text-white active:scale-100 dark:hover:bg-dark-btn dark:active:bg-dark-btn",children:[d.icon,l.jsx("span",{className:"text-sm font-semibold",children:d.label})]},d.label))})}),l.jsxs("div",{className:"flex items-center gap-4 flex-shrink-0",children:[l.jsxs("div",{className:"hidden lg:flex items-center gap-2",children:[" ",t?l.jsxs(l.Fragment,{children:[l.jsx(Ft,{to:"/dashboard",className:"no-underline",children:l.jsxs("button",{type:"button",className:"flex items-center justify-center w-32 text-center px-4 py-2 text-sm font-semibold text-gray-700 dark:text-gray-300 bg-transparent rounded-md border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-800 transition",children:[l.jsx(Nc,{className:"w-4 h-4 mr-2"}),"Dashboard"]})}),l.jsx("button",{onClick:()=>{console.log("[Auth-Action] Attempting to log out (Desktop)."),r({logoutParams:{returnTo:window.location.origin}})},type:"button","aria-label":"Cerrar sesión",className:"p-2 rounded-full text-red-600 dark:text-red-500 hover:bg-red-100 dark:hover:bg-gray-800 transition",children:l.jsx(Pu,{className:"w-5 h-5"})})]}):l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>{e({appState:{returnTo:"/budgets"}})},type:"button",className:"w-32 text-center px-4 py-2 text-sm font-semibold text-gray-700 dark:text-gray-300 bg-transparent rounded-md border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-800 transition",children:"Iniciar sesión"}),l.jsx("button",{onClick:()=>{e({appState:{returnTo:"/budgets"},authorizationParams:{screen_hint:"signup"}})},type:"button",className:"w-32 text-center px-4 py-2 text-sm font-semibold text-white bg-green-700 rounded-md border border-green-800 hover:bg-green-800 transition shadow-md",children:"Registro"})]})]}),l.jsx("button",{onClick:o,"aria-label":`Cambiar a modo ${i==="light"?"oscuro":"claro"}`,className:"p-2 rounded-full text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition border-none",children:i==="light"?l.jsx(Gm,{className:"w-5 h-5"}):l.jsx(Xm,{className:"w-5 h-5"})}),l.jsx("button",{onClick:()=>s(!n),className:"lg:hidden p-2 rounded-full text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition border-none","aria-label":"Abrir menú",children:n?l.jsx(Ji,{className:"w-6 h-6"}):l.jsx(ah,{className:"w-6 h-6"})})]}),n&&l.jsxs("div",{className:"fixed inset-0 top-[96px] bg-white dark:bg-dark-primary z-40 flex flex-col items-center py-8 lg:hidden animate-fade-in-down",children:[" ",l.jsx("nav",{className:"flex flex-col items-center gap-6","aria-label":"Navegación móvil",children:c.map(d=>l.jsxs(Ft,{to:d.to||d.href,onClick:()=>s(!1),className:"flex items-center px-4 py-2 rounded-md text-gray-700 dark:text-gray-200 text-lg font-semibold hover:bg-brand-primary hover:text-white dark:hover:bg-dark-btn transition w-full justify-center",children:[d.icon,l.jsx("span",{children:d.label})]},d.label))}),l.jsx("div",{className:"flex flex-col items-center gap-4 mt-8 w-full px-4",children:t?l.jsxs(l.Fragment,{children:[l.jsx(Ft,{to:"/dashboard",className:"no-underline w-full",children:l.jsxs("button",{type:"button",onClick:()=>s(!1),className:"flex items-center justify-center w-full text-center px-4 py-3 text-base font-semibold text-gray-700 dark:text-gray-300 bg-transparent rounded-md border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-800 transition",children:[l.jsx(Nc,{className:"w-5 h-5 mr-2"}),"Dashboard"]})}),l.jsxs("button",{onClick:()=>{console.log("[Auth-Action] Attempting to log out (Mobile)."),r({logoutParams:{returnTo:window.location.origin}}),s(!1)},type:"button","aria-label":"Cerrar sesión",className:"flex items-center justify-center w-full px-4 py-3 text-base font-semibold text-red-600 dark:text-red-500 bg-transparent rounded-md border border-red-600 dark:border-red-500 hover:bg-red-100 dark:hover:bg-gray-800 transition",children:[l.jsx(Pu,{className:"w-5 h-5 mr-2"}),"Cerrar sesión"]})]}):l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>{console.log("[Auth-Action] Attempting to log in (Mobile)."),e({appState:{returnTo:"/budgets"}}),s(!1)},type:"button",className:"w-full text-center px-4 py-3 text-base font-semibold text-gray-700 dark:text-gray-300 bg-transparent rounded-md border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-800 transition",children:"Iniciar sesión"}),l.jsx("button",{onClick:()=>{console.log("[Auth-Action] Attempting to sign up (Mobile)."),e({appState:{returnTo:"/budgets"},authorizationParams:{screen_hint:"signup"}}),s(!1)},type:"button",className:"w-full text-center px-4 py-3 text-base font-semibold text-white bg-green-700 rounded-md border border-green-800 hover:bg-green-800 transition shadow-md",children:"Registro"})]})})]})]})};function Ko(t){return t+.5|0}const li=(t,e,r)=>Math.max(Math.min(t,r),e);function No(t){return li(Ko(t*2.55),0,255)}function ui(t){return li(Ko(t*255),0,255)}function Ts(t){return li(Ko(t/2.55)/100,0,1)}function Jf(t){return li(Ko(t*100),0,100)}const Cn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Iu=[..."0123456789ABCDEF"],qy=t=>Iu[t&15],Wy=t=>Iu[(t&240)>>4]+Iu[t&15],Bl=t=>(t&240)>>4===(t&15),Hy=t=>Bl(t.r)&&Bl(t.g)&&Bl(t.b)&&Bl(t.a);function Vy(t){var e=t.length,r;return t[0]==="#"&&(e===4||e===5?r={r:255&Cn[t[1]]*17,g:255&Cn[t[2]]*17,b:255&Cn[t[3]]*17,a:e===5?Cn[t[4]]*17:255}:(e===7||e===9)&&(r={r:Cn[t[1]]<<4|Cn[t[2]],g:Cn[t[3]]<<4|Cn[t[4]],b:Cn[t[5]]<<4|Cn[t[6]],a:e===9?Cn[t[7]]<<4|Cn[t[8]]:255})),r}const $y=(t,e)=>t<255?e(t):"";function Yy(t){var e=Hy(t)?qy:Wy;return t?"#"+e(t.r)+e(t.g)+e(t.b)+$y(t.a,e):void 0}const Gy=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function T0(t,e,r){const n=e*Math.min(r,1-r),s=(i,a=(i+t/30)%12)=>r-n*Math.max(Math.min(a-3,9-a,1),-1);return[s(0),s(8),s(4)]}function Xy(t,e,r){const n=(s,i=(s+t/60)%6)=>r-r*e*Math.max(Math.min(i,4-i,1),0);return[n(5),n(3),n(1)]}function Jy(t,e,r){const n=T0(t,1,.5);let s;for(e+r>1&&(s=1/(e+r),e*=s,r*=s),s=0;s<3;s++)n[s]*=1-e-r,n[s]+=e;return n}function Ky(t,e,r,n,s){return t===s?(e-r)/n+(e<r?6:0):e===s?(r-t)/n+2:(t-e)/n+4}function bh(t){const r=t.r/255,n=t.g/255,s=t.b/255,i=Math.max(r,n,s),a=Math.min(r,n,s),o=(i+a)/2;let c,d,u;return i!==a&&(u=i-a,d=o>.5?u/(2-i-a):u/(i+a),c=Ky(r,n,s,u,i),c=c*60+.5),[c|0,d||0,o]}function yh(t,e,r,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,r,n)).map(ui)}function vh(t,e,r){return yh(T0,t,e,r)}function Zy(t,e,r){return yh(Jy,t,e,r)}function Qy(t,e,r){return yh(Xy,t,e,r)}function I0(t){return(t%360+360)%360}function e5(t){const e=Gy.exec(t);let r=255,n;if(!e)return;e[5]!==n&&(r=e[6]?No(+e[5]):ui(+e[5]));const s=I0(+e[2]),i=+e[3]/100,a=+e[4]/100;return e[1]==="hwb"?n=Zy(s,i,a):e[1]==="hsv"?n=Qy(s,i,a):n=vh(s,i,a),{r:n[0],g:n[1],b:n[2],a:r}}function t5(t,e){var r=bh(t);r[0]=I0(r[0]+e),r=vh(r),t.r=r[0],t.g=r[1],t.b=r[2]}function r5(t){if(!t)return;const e=bh(t),r=e[0],n=Jf(e[1]),s=Jf(e[2]);return t.a<255?`hsla(${r}, ${n}%, ${s}%, ${Ts(t.a)})`:`hsl(${r}, ${n}%, ${s}%)`}const Kf={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Zf={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function n5(){const t={},e=Object.keys(Zf),r=Object.keys(Kf);let n,s,i,a,o;for(n=0;n<e.length;n++){for(a=o=e[n],s=0;s<r.length;s++)i=r[s],o=o.replace(i,Kf[i]);i=parseInt(Zf[a],16),t[o]=[i>>16&255,i>>8&255,i&255]}return t}let zl;function s5(t){zl||(zl=n5(),zl.transparent=[0,0,0,0]);const e=zl[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const i5=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function a5(t){const e=i5.exec(t);let r=255,n,s,i;if(e){if(e[7]!==n){const a=+e[7];r=e[8]?No(a):li(a*255,0,255)}return n=+e[1],s=+e[3],i=+e[5],n=255&(e[2]?No(n):li(n,0,255)),s=255&(e[4]?No(s):li(s,0,255)),i=255&(e[6]?No(i):li(i,0,255)),{r:n,g:s,b:i,a:r}}}function o5(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Ts(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Ud=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,fa=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function l5(t,e,r){const n=fa(Ts(t.r)),s=fa(Ts(t.g)),i=fa(Ts(t.b));return{r:ui(Ud(n+r*(fa(Ts(e.r))-n))),g:ui(Ud(s+r*(fa(Ts(e.g))-s))),b:ui(Ud(i+r*(fa(Ts(e.b))-i))),a:t.a+r*(e.a-t.a)}}function Ul(t,e,r){if(t){let n=bh(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*r,e===0?360:1)),n=vh(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function B0(t,e){return t&&Object.assign(e||{},t)}function Qf(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=ui(t[3]))):(e=B0(t,{r:0,g:0,b:0,a:1}),e.a=ui(e.a)),e}function c5(t){return t.charAt(0)==="r"?a5(t):e5(t)}class Ro{constructor(e){if(e instanceof Ro)return e;const r=typeof e;let n;r==="object"?n=Qf(e):r==="string"&&(n=Vy(e)||s5(e)||c5(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=B0(this._rgb);return e&&(e.a=Ts(e.a)),e}set rgb(e){this._rgb=Qf(e)}rgbString(){return this._valid?o5(this._rgb):void 0}hexString(){return this._valid?Yy(this._rgb):void 0}hslString(){return this._valid?r5(this._rgb):void 0}mix(e,r){if(e){const n=this.rgb,s=e.rgb;let i;const a=r===i?.5:r,o=2*a-1,c=n.a-s.a,d=((o*c===-1?o:(o+c)/(1+o*c))+1)/2;i=1-d,n.r=255&d*n.r+i*s.r+.5,n.g=255&d*n.g+i*s.g+.5,n.b=255&d*n.b+i*s.b+.5,n.a=a*n.a+(1-a)*s.a,this.rgb=n}return this}interpolate(e,r){return e&&(this._rgb=l5(this._rgb,e._rgb,r)),this}clone(){return new Ro(this.rgb)}alpha(e){return this._rgb.a=ui(e),this}clearer(e){const r=this._rgb;return r.a*=1-e,this}greyscale(){const e=this._rgb,r=Ko(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=r,this}opaquer(e){const r=this._rgb;return r.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Ul(this._rgb,2,e),this}darken(e){return Ul(this._rgb,2,-e),this}saturate(e){return Ul(this._rgb,1,e),this}desaturate(e){return Ul(this._rgb,1,-e),this}rotate(e){return t5(this._rgb,e),this}}function Os(){}const d5=(()=>{let t=0;return()=>t++})();function Ut(t){return t==null}function Pr(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function _t(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function En(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function is(t,e){return En(t)?t:e}function yt(t,e){return typeof t>"u"?e:t}const u5=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,z0=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Vt(t,e,r){if(t&&typeof t.call=="function")return t.apply(r,e)}function Et(t,e,r,n){let s,i,a;if(Pr(t))for(i=t.length,s=0;s<i;s++)e.call(r,t[s],s);else if(_t(t))for(a=Object.keys(t),i=a.length,s=0;s<i;s++)e.call(r,t[a[s]],a[s])}function _c(t,e){let r,n,s,i;if(!t||!e||t.length!==e.length)return!1;for(r=0,n=t.length;r<n;++r)if(s=t[r],i=e[r],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function Sc(t){if(Pr(t))return t.map(Sc);if(_t(t)){const e=Object.create(null),r=Object.keys(t),n=r.length;let s=0;for(;s<n;++s)e[r[s]]=Sc(t[r[s]]);return e}return t}function U0(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function h5(t,e,r,n){if(!U0(t))return;const s=e[t],i=r[t];_t(s)&&_t(i)?Mo(s,i,n):e[t]=Sc(i)}function Mo(t,e,r){const n=Pr(e)?e:[e],s=n.length;if(!_t(t))return t;r=r||{};const i=r.merger||h5;let a;for(let o=0;o<s;++o){if(a=n[o],!_t(a))continue;const c=Object.keys(a);for(let d=0,u=c.length;d<u;++d)i(c[d],t,a,r)}return t}function So(t,e){return Mo(t,e,{merger:f5})}function f5(t,e,r){if(!U0(t))return;const n=e[t],s=r[t];_t(n)&&_t(s)?So(n,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Sc(s))}const ep={"":t=>t,x:t=>t.x,y:t=>t.y};function p5(t){const e=t.split("."),r=[];let n="";for(const s of e)n+=s,n.endsWith("\\")?n=n.slice(0,-1)+".":(r.push(n),n="");return r}function g5(t){const e=p5(t);return r=>{for(const n of e){if(n==="")break;r=r&&r[n]}return r}}function To(t,e){return(ep[e]||(ep[e]=g5(e)))(t)}function wh(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Ac=t=>typeof t<"u",hi=t=>typeof t=="function",tp=(t,e)=>{if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0};function m5(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Dt=Math.PI,nr=2*Dt,x5=nr+Dt,Cc=Number.POSITIVE_INFINITY,b5=Dt/180,Sr=Dt/2,Di=Dt/4,rp=Dt*2/3,q0=Math.log10,Ea=Math.sign;function Ao(t,e,r){return Math.abs(t-e)<r}function np(t){const e=Math.round(t);t=Ao(t,e,t/1e3)?e:t;const r=Math.pow(10,Math.floor(q0(t))),n=t/r;return(n<=1?1:n<=2?2:n<=5?5:10)*r}function y5(t){const e=[],r=Math.sqrt(t);let n;for(n=1;n<r;n++)t%n===0&&(e.push(n),e.push(t/n));return r===(r|0)&&e.push(r),e.sort((s,i)=>s-i).pop(),e}function v5(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Io(t){return!v5(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function w5(t,e){const r=Math.round(t);return r-e<=t&&r+e>=t}function k5(t,e,r){let n,s,i;for(n=0,s=t.length;n<s;n++)i=t[n][r],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function Bs(t){return t*(Dt/180)}function N5(t){return t*(180/Dt)}function sp(t){if(!En(t))return;let e=1,r=0;for(;Math.round(t*e)/e!==t;)e*=10,r++;return r}function W0(t,e){const r=e.x-t.x,n=e.y-t.y,s=Math.sqrt(r*r+n*n);let i=Math.atan2(n,r);return i<-.5*Dt&&(i+=nr),{angle:i,distance:s}}function Bu(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function j5(t,e){return(t-e+x5)%nr-Dt}function Wn(t){return(t%nr+nr)%nr}function Bo(t,e,r,n){const s=Wn(t),i=Wn(e),a=Wn(r),o=Wn(i-s),c=Wn(a-s),d=Wn(s-i),u=Wn(s-a);return s===i||s===a||n&&i===a||o>c&&d<u}function Zr(t,e,r){return Math.max(e,Math.min(r,t))}function _5(t){return Zr(t,-32768,32767)}function wa(t,e,r,n=1e-6){return t>=Math.min(e,r)-n&&t<=Math.max(e,r)+n}function kh(t,e,r){r=r||(a=>t[a]<e);let n=t.length-1,s=0,i;for(;n-s>1;)i=s+n>>1,r(i)?s=i:n=i;return{lo:s,hi:n}}const qi=(t,e,r,n)=>kh(t,r,n?s=>{const i=t[s][e];return i<r||i===r&&t[s+1][e]===r}:s=>t[s][e]<r),S5=(t,e,r)=>kh(t,r,n=>t[n][e]>=r);function A5(t,e,r){let n=0,s=t.length;for(;n<s&&t[n]<e;)n++;for(;s>n&&t[s-1]>r;)s--;return n>0||s<t.length?t.slice(n,s):t}const H0=["push","pop","shift","splice","unshift"];function C5(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),H0.forEach(r=>{const n="_onData"+wh(r),s=t[r];Object.defineProperty(t,r,{configurable:!0,enumerable:!1,value(...i){const a=s.apply(this,i);return t._chartjs.listeners.forEach(o=>{typeof o[n]=="function"&&o[n](...i)}),a}})})}function ip(t,e){const r=t._chartjs;if(!r)return;const n=r.listeners,s=n.indexOf(e);s!==-1&&n.splice(s,1),!(n.length>0)&&(H0.forEach(i=>{delete t[i]}),delete t._chartjs)}function P5(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const V0=(function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame})();function $0(t,e){let r=[],n=!1;return function(...s){r=s,n||(n=!0,V0.call(window,()=>{n=!1,t.apply(e,r)}))}}function L5(t,e){let r;return function(...n){return e?(clearTimeout(r),r=setTimeout(t,e,n)):t.apply(this,n),e}}const Nh=t=>t==="start"?"left":t==="end"?"right":"center",Wr=(t,e,r)=>t==="start"?e:t==="end"?r:(e+r)/2,E5=(t,e,r,n)=>t===(n?"left":"right")?r:t==="center"?(e+r)/2:e;function O5(t,e,r){const n=e.length;let s=0,i=n;if(t._sorted){const{iScale:a,vScale:o,_parsed:c}=t,d=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=a.axis,{min:g,max:m,minDefined:f,maxDefined:x}=a.getUserBounds();if(f){if(s=Math.min(qi(c,u,g).lo,r?n:qi(e,u,a.getPixelForValue(g)).lo),d){const v=c.slice(0,s+1).reverse().findIndex(y=>!Ut(y[o.axis]));s-=Math.max(0,v)}s=Zr(s,0,n-1)}if(x){let v=Math.max(qi(c,a.axis,m,!0).hi+1,r?0:qi(e,u,a.getPixelForValue(m),!0).hi+1);if(d){const y=c.slice(v-1).findIndex(k=>!Ut(k[o.axis]));v+=Math.max(0,y)}i=Zr(v,s,n)-s}else i=n-s}return{start:s,count:i}}function D5(t){const{xScale:e,yScale:r,_scaleRanges:n}=t,s={xmin:e.min,xmax:e.max,ymin:r.min,ymax:r.max};if(!n)return t._scaleRanges=s,!0;const i=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==r.min||n.ymax!==r.max;return Object.assign(n,s),i}const ql=t=>t===0||t===1,ap=(t,e,r)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*nr/r)),op=(t,e,r)=>Math.pow(2,-10*t)*Math.sin((t-e)*nr/r)+1,Co={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Sr)+1,easeOutSine:t=>Math.sin(t*Sr),easeInOutSine:t=>-.5*(Math.cos(Dt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>ql(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>ql(t)?t:ap(t,.075,.3),easeOutElastic:t=>ql(t)?t:op(t,.075,.3),easeInOutElastic(t){return ql(t)?t:t<.5?.5*ap(t*2,.1125,.45):.5+.5*op(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Co.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Co.easeInBounce(t*2)*.5:Co.easeOutBounce(t*2-1)*.5+.5};function jh(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function lp(t){return jh(t)?t:new Ro(t)}function qd(t){return jh(t)?t:new Ro(t).saturate(.5).darken(.1).hexString()}const F5=["x","y","borderWidth","radius","tension"],R5=["color","borderColor","backgroundColor"];function M5(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:R5},numbers:{type:"number",properties:F5}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function T5(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const cp=new Map;function I5(t,e){e=e||{};const r=t+JSON.stringify(e);let n=cp.get(r);return n||(n=new Intl.NumberFormat(t,e),cp.set(r,n)),n}function _h(t,e,r){return I5(e,r).format(t)}const B5={values(t){return Pr(t)?t:""+t},numeric(t,e,r){if(t===0)return"0";const n=this.chart.options.locale;let s,i=t;if(r.length>1){const d=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(d<1e-4||d>1e15)&&(s="scientific"),i=z5(t,r)}const a=q0(Math.abs(i)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),c={notation:s,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(c,this.options.ticks.format),_h(t,n,c)}};function z5(t,e){let r=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(r)>=1&&t!==Math.floor(t)&&(r=t-Math.floor(t)),r}var Y0={formatters:B5};function U5(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,r)=>r.lineWidth,tickColor:(e,r)=>r.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Y0.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Yi=Object.create(null),zu=Object.create(null);function Po(t,e){if(!e)return t;const r=e.split(".");for(let n=0,s=r.length;n<s;++n){const i=r[n];t=t[i]||(t[i]=Object.create(null))}return t}function Wd(t,e,r){return typeof e=="string"?Mo(Po(t,e),r):Mo(Po(t,""),e)}class q5{constructor(e,r){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,s)=>qd(s.backgroundColor),this.hoverBorderColor=(n,s)=>qd(s.borderColor),this.hoverColor=(n,s)=>qd(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(r)}set(e,r){return Wd(this,e,r)}get(e){return Po(this,e)}describe(e,r){return Wd(zu,e,r)}override(e,r){return Wd(Yi,e,r)}route(e,r,n,s){const i=Po(this,e),a=Po(this,n),o="_"+r;Object.defineProperties(i,{[o]:{value:i[r],writable:!0},[r]:{enumerable:!0,get(){const c=this[o],d=a[s];return _t(c)?Object.assign({},d,c):yt(c,d)},set(c){this[o]=c}}})}apply(e){e.forEach(r=>r(this))}}var ur=new q5({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[M5,T5,U5]);function W5(t){return!t||Ut(t.size)||Ut(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function dp(t,e,r,n,s){let i=e[s];return i||(i=e[s]=t.measureText(s).width,r.push(s)),i>n&&(n=i),n}function Fi(t,e,r){const n=t.currentDevicePixelRatio,s=r!==0?Math.max(r/2,.5):0;return Math.round((e-s)*n)/n+s}function up(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Uu(t,e,r,n){G0(t,e,r,n,null)}function G0(t,e,r,n,s){let i,a,o,c,d,u,g,m;const f=e.pointStyle,x=e.rotation,v=e.radius;let y=(x||0)*b5;if(f&&typeof f=="object"&&(i=f.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(r,n),t.rotate(y),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),t.restore();return}if(!(isNaN(v)||v<=0)){switch(t.beginPath(),f){default:s?t.ellipse(r,n,s/2,v,0,0,nr):t.arc(r,n,v,0,nr),t.closePath();break;case"triangle":u=s?s/2:v,t.moveTo(r+Math.sin(y)*u,n-Math.cos(y)*v),y+=rp,t.lineTo(r+Math.sin(y)*u,n-Math.cos(y)*v),y+=rp,t.lineTo(r+Math.sin(y)*u,n-Math.cos(y)*v),t.closePath();break;case"rectRounded":d=v*.516,c=v-d,a=Math.cos(y+Di)*c,g=Math.cos(y+Di)*(s?s/2-d:c),o=Math.sin(y+Di)*c,m=Math.sin(y+Di)*(s?s/2-d:c),t.arc(r-g,n-o,d,y-Dt,y-Sr),t.arc(r+m,n-a,d,y-Sr,y),t.arc(r+g,n+o,d,y,y+Sr),t.arc(r-m,n+a,d,y+Sr,y+Dt),t.closePath();break;case"rect":if(!x){c=Math.SQRT1_2*v,u=s?s/2:c,t.rect(r-u,n-c,2*u,2*c);break}y+=Di;case"rectRot":g=Math.cos(y)*(s?s/2:v),a=Math.cos(y)*v,o=Math.sin(y)*v,m=Math.sin(y)*(s?s/2:v),t.moveTo(r-g,n-o),t.lineTo(r+m,n-a),t.lineTo(r+g,n+o),t.lineTo(r-m,n+a),t.closePath();break;case"crossRot":y+=Di;case"cross":g=Math.cos(y)*(s?s/2:v),a=Math.cos(y)*v,o=Math.sin(y)*v,m=Math.sin(y)*(s?s/2:v),t.moveTo(r-g,n-o),t.lineTo(r+g,n+o),t.moveTo(r+m,n-a),t.lineTo(r-m,n+a);break;case"star":g=Math.cos(y)*(s?s/2:v),a=Math.cos(y)*v,o=Math.sin(y)*v,m=Math.sin(y)*(s?s/2:v),t.moveTo(r-g,n-o),t.lineTo(r+g,n+o),t.moveTo(r+m,n-a),t.lineTo(r-m,n+a),y+=Di,g=Math.cos(y)*(s?s/2:v),a=Math.cos(y)*v,o=Math.sin(y)*v,m=Math.sin(y)*(s?s/2:v),t.moveTo(r-g,n-o),t.lineTo(r+g,n+o),t.moveTo(r+m,n-a),t.lineTo(r-m,n+a);break;case"line":a=s?s/2:Math.cos(y)*v,o=Math.sin(y)*v,t.moveTo(r-a,n-o),t.lineTo(r+a,n+o);break;case"dash":t.moveTo(r,n),t.lineTo(r+Math.cos(y)*(s?s/2:v),n+Math.sin(y)*v);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function zo(t,e,r){return r=r||.5,!e||t&&t.x>e.left-r&&t.x<e.right+r&&t.y>e.top-r&&t.y<e.bottom+r}function Sh(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Ah(t){t.restore()}function H5(t,e,r,n,s){if(!e)return t.lineTo(r.x,r.y);if(s==="middle"){const i=(e.x+r.x)/2;t.lineTo(i,e.y),t.lineTo(i,r.y)}else s==="after"!=!!n?t.lineTo(e.x,r.y):t.lineTo(r.x,e.y);t.lineTo(r.x,r.y)}function V5(t,e,r,n){if(!e)return t.lineTo(r.x,r.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?r.cp2x:r.cp1x,n?r.cp2y:r.cp1y,r.x,r.y)}function $5(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Ut(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Y5(t,e,r,n,s){if(s.strikethrough||s.underline){const i=t.measureText(n),a=e-i.actualBoundingBoxLeft,o=e+i.actualBoundingBoxRight,c=r-i.actualBoundingBoxAscent,d=r+i.actualBoundingBoxDescent,u=s.strikethrough?(c+d)/2:d;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(a,u),t.lineTo(o,u),t.stroke()}}function G5(t,e){const r=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=r}function Uo(t,e,r,n,s,i={}){const a=Pr(e)?e:[e],o=i.strokeWidth>0&&i.strokeColor!=="";let c,d;for(t.save(),t.font=s.string,$5(t,i),c=0;c<a.length;++c)d=a[c],i.backdrop&&G5(t,i.backdrop),o&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),Ut(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(d,r,n,i.maxWidth)),t.fillText(d,r,n,i.maxWidth),Y5(t,r,n,d,i),n+=Number(s.lineHeight);t.restore()}function qu(t,e){const{x:r,y:n,w:s,h:i,radius:a}=e;t.arc(r+a.topLeft,n+a.topLeft,a.topLeft,1.5*Dt,Dt,!0),t.lineTo(r,n+i-a.bottomLeft),t.arc(r+a.bottomLeft,n+i-a.bottomLeft,a.bottomLeft,Dt,Sr,!0),t.lineTo(r+s-a.bottomRight,n+i),t.arc(r+s-a.bottomRight,n+i-a.bottomRight,a.bottomRight,Sr,0,!0),t.lineTo(r+s,n+a.topRight),t.arc(r+s-a.topRight,n+a.topRight,a.topRight,0,-Sr,!0),t.lineTo(r+a.topLeft,n)}const X5=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,J5=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function K5(t,e){const r=(""+t).match(X5);if(!r||r[1]==="normal")return e*1.2;switch(t=+r[2],r[3]){case"px":return t;case"%":t/=100;break}return e*t}const Z5=t=>+t||0;function Ch(t,e){const r={},n=_t(e),s=n?Object.keys(e):e,i=_t(t)?n?a=>yt(t[a],t[e[a]]):a=>t[a]:()=>t;for(const a of s)r[a]=Z5(i(a));return r}function Q5(t){return Ch(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Lo(t){return Ch(t,["topLeft","topRight","bottomLeft","bottomRight"])}function On(t){const e=Q5(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Vr(t,e){t=t||{},e=e||ur.font;let r=yt(t.size,e.size);typeof r=="string"&&(r=parseInt(r,10));let n=yt(t.style,e.style);n&&!(""+n).match(J5)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const s={family:yt(t.family,e.family),lineHeight:K5(yt(t.lineHeight,e.lineHeight),r),size:r,style:n,weight:yt(t.weight,e.weight),string:""};return s.string=W5(s),s}function Wl(t,e,r,n){let s,i,a;for(s=0,i=t.length;s<i;++s)if(a=t[s],a!==void 0&&a!==void 0)return a}function ev(t,e,r){const{min:n,max:s}=t,i=z0(e,(s-n)/2),a=(o,c)=>r&&o===0?0:o+c;return{min:a(n,-Math.abs(i)),max:a(s,i)}}function Ki(t,e){return Object.assign(Object.create(t),e)}function Ph(t,e=[""],r,n,s=()=>t[0]){const i=r||t;typeof n>"u"&&(n=Z0("_fallback",t));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:n,_getTarget:s,override:o=>Ph([o,...t],e,i,n)};return new Proxy(a,{deleteProperty(o,c){return delete o[c],delete o._keys,delete t[0][c],!0},get(o,c){return J0(o,c,()=>lv(c,e,t,o))},getOwnPropertyDescriptor(o,c){return Reflect.getOwnPropertyDescriptor(o._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(o,c){return fp(o).includes(c)},ownKeys(o){return fp(o)},set(o,c,d){const u=o._storage||(o._storage=s());return o[c]=u[c]=d,delete o._keys,!0}})}function Oa(t,e,r,n){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:r,_stack:new Set,_descriptors:X0(t,n),setContext:i=>Oa(t,i,r,n),override:i=>Oa(t.override(i),e,r,n)};return new Proxy(s,{deleteProperty(i,a){return delete i[a],delete t[a],!0},get(i,a,o){return J0(i,a,()=>rv(i,a,o))},getOwnPropertyDescriptor(i,a){return i._descriptors.allKeys?Reflect.has(t,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,a)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,a){return Reflect.has(t,a)},ownKeys(){return Reflect.ownKeys(t)},set(i,a,o){return t[a]=o,delete i[a],!0}})}function X0(t,e={scriptable:!0,indexable:!0}){const{_scriptable:r=e.scriptable,_indexable:n=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:r,indexable:n,isScriptable:hi(r)?r:()=>r,isIndexable:hi(n)?n:()=>n}}const tv=(t,e)=>t?t+wh(e):e,Lh=(t,e)=>_t(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function J0(t,e,r){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const n=r();return t[e]=n,n}function rv(t,e,r){const{_proxy:n,_context:s,_subProxy:i,_descriptors:a}=t;let o=n[e];return hi(o)&&a.isScriptable(e)&&(o=nv(e,o,t,r)),Pr(o)&&o.length&&(o=sv(e,o,t,a.isIndexable)),Lh(e,o)&&(o=Oa(o,s,i&&i[e],a)),o}function nv(t,e,r,n){const{_proxy:s,_context:i,_subProxy:a,_stack:o}=r;if(o.has(t))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+t);o.add(t);let c=e(i,a||n);return o.delete(t),Lh(t,c)&&(c=Eh(s._scopes,s,t,c)),c}function sv(t,e,r,n){const{_proxy:s,_context:i,_subProxy:a,_descriptors:o}=r;if(typeof i.index<"u"&&n(t))return e[i.index%e.length];if(_t(e[0])){const c=e,d=s._scopes.filter(u=>u!==c);e=[];for(const u of c){const g=Eh(d,s,t,u);e.push(Oa(g,i,a&&a[t],o))}}return e}function K0(t,e,r){return hi(t)?t(e,r):t}const iv=(t,e)=>t===!0?e:typeof t=="string"?To(e,t):void 0;function av(t,e,r,n,s){for(const i of e){const a=iv(r,i);if(a){t.add(a);const o=K0(a._fallback,r,s);if(typeof o<"u"&&o!==r&&o!==n)return o}else if(a===!1&&typeof n<"u"&&r!==n)return null}return!1}function Eh(t,e,r,n){const s=e._rootScopes,i=K0(e._fallback,r,n),a=[...t,...s],o=new Set;o.add(n);let c=hp(o,a,r,i||r,n);return c===null||typeof i<"u"&&i!==r&&(c=hp(o,a,i,c,n),c===null)?!1:Ph(Array.from(o),[""],s,i,()=>ov(e,r,n))}function hp(t,e,r,n,s){for(;r;)r=av(t,e,r,n,s);return r}function ov(t,e,r){const n=t._getTarget();e in n||(n[e]={});const s=n[e];return Pr(s)&&_t(r)?r:s||{}}function lv(t,e,r,n){let s;for(const i of e)if(s=Z0(tv(i,t),r),typeof s<"u")return Lh(t,s)?Eh(r,n,t,s):s}function Z0(t,e){for(const r of e){if(!r)continue;const n=r[t];if(typeof n<"u")return n}}function fp(t){let e=t._keys;return e||(e=t._keys=cv(t._scopes)),e}function cv(t){const e=new Set;for(const r of t)for(const n of Object.keys(r).filter(s=>!s.startsWith("_")))e.add(n);return Array.from(e)}const dv=Number.EPSILON||1e-14,Da=(t,e)=>e<t.length&&!t[e].skip&&t[e],Q0=t=>t==="x"?"y":"x";function uv(t,e,r,n){const s=t.skip?e:t,i=e,a=r.skip?e:r,o=Bu(i,s),c=Bu(a,i);let d=o/(o+c),u=c/(o+c);d=isNaN(d)?0:d,u=isNaN(u)?0:u;const g=n*d,m=n*u;return{previous:{x:i.x-g*(a.x-s.x),y:i.y-g*(a.y-s.y)},next:{x:i.x+m*(a.x-s.x),y:i.y+m*(a.y-s.y)}}}function hv(t,e,r){const n=t.length;let s,i,a,o,c,d=Da(t,0);for(let u=0;u<n-1;++u)if(c=d,d=Da(t,u+1),!(!c||!d)){if(Ao(e[u],0,dv)){r[u]=r[u+1]=0;continue}s=r[u]/e[u],i=r[u+1]/e[u],o=Math.pow(s,2)+Math.pow(i,2),!(o<=9)&&(a=3/Math.sqrt(o),r[u]=s*a*e[u],r[u+1]=i*a*e[u])}}function fv(t,e,r="x"){const n=Q0(r),s=t.length;let i,a,o,c=Da(t,0);for(let d=0;d<s;++d){if(a=o,o=c,c=Da(t,d+1),!o)continue;const u=o[r],g=o[n];a&&(i=(u-a[r])/3,o[`cp1${r}`]=u-i,o[`cp1${n}`]=g-i*e[d]),c&&(i=(c[r]-u)/3,o[`cp2${r}`]=u+i,o[`cp2${n}`]=g+i*e[d])}}function pv(t,e="x"){const r=Q0(e),n=t.length,s=Array(n).fill(0),i=Array(n);let a,o,c,d=Da(t,0);for(a=0;a<n;++a)if(o=c,c=d,d=Da(t,a+1),!!c){if(d){const u=d[e]-c[e];s[a]=u!==0?(d[r]-c[r])/u:0}i[a]=o?d?Ea(s[a-1])!==Ea(s[a])?0:(s[a-1]+s[a])/2:s[a-1]:s[a]}hv(t,s,i),fv(t,i,e)}function Hl(t,e,r){return Math.max(Math.min(t,r),e)}function gv(t,e){let r,n,s,i,a,o=zo(t[0],e);for(r=0,n=t.length;r<n;++r)a=i,i=o,o=r<n-1&&zo(t[r+1],e),i&&(s=t[r],a&&(s.cp1x=Hl(s.cp1x,e.left,e.right),s.cp1y=Hl(s.cp1y,e.top,e.bottom)),o&&(s.cp2x=Hl(s.cp2x,e.left,e.right),s.cp2y=Hl(s.cp2y,e.top,e.bottom)))}function mv(t,e,r,n,s){let i,a,o,c;if(e.spanGaps&&(t=t.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")pv(t,s);else{let d=n?t[t.length-1]:t[0];for(i=0,a=t.length;i<a;++i)o=t[i],c=uv(d,o,t[Math.min(i+1,a-(n?0:1))%a],e.tension),o.cp1x=c.previous.x,o.cp1y=c.previous.y,o.cp2x=c.next.x,o.cp2y=c.next.y,d=o}e.capBezierPoints&&gv(t,r)}function Oh(){return typeof window<"u"&&typeof document<"u"}function Dh(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Pc(t,e,r){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[r])):n=t,n}const Zc=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function xv(t,e){return Zc(t).getPropertyValue(e)}const bv=["top","right","bottom","left"];function Hi(t,e,r){const n={};r=r?"-"+r:"";for(let s=0;s<4;s++){const i=bv[s];n[i]=parseFloat(t[e+"-"+i+r])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const yv=(t,e,r)=>(t>0||e>0)&&(!r||!r.shadowRoot);function vv(t,e){const r=t.touches,n=r&&r.length?r[0]:t,{offsetX:s,offsetY:i}=n;let a=!1,o,c;if(yv(s,i,t.target))o=s,c=i;else{const d=e.getBoundingClientRect();o=n.clientX-d.left,c=n.clientY-d.top,a=!0}return{x:o,y:c,box:a}}function Mi(t,e){if("native"in t)return t;const{canvas:r,currentDevicePixelRatio:n}=e,s=Zc(r),i=s.boxSizing==="border-box",a=Hi(s,"padding"),o=Hi(s,"border","width"),{x:c,y:d,box:u}=vv(t,r),g=a.left+(u&&o.left),m=a.top+(u&&o.top);let{width:f,height:x}=e;return i&&(f-=a.width+o.width,x-=a.height+o.height),{x:Math.round((c-g)/f*r.width/n),y:Math.round((d-m)/x*r.height/n)}}function wv(t,e,r){let n,s;if(e===void 0||r===void 0){const i=t&&Dh(t);if(!i)e=t.clientWidth,r=t.clientHeight;else{const a=i.getBoundingClientRect(),o=Zc(i),c=Hi(o,"border","width"),d=Hi(o,"padding");e=a.width-d.width-c.width,r=a.height-d.height-c.height,n=Pc(o.maxWidth,i,"clientWidth"),s=Pc(o.maxHeight,i,"clientHeight")}}return{width:e,height:r,maxWidth:n||Cc,maxHeight:s||Cc}}const ci=t=>Math.round(t*10)/10;function kv(t,e,r,n){const s=Zc(t),i=Hi(s,"margin"),a=Pc(s.maxWidth,t,"clientWidth")||Cc,o=Pc(s.maxHeight,t,"clientHeight")||Cc,c=wv(t,e,r);let{width:d,height:u}=c;if(s.boxSizing==="content-box"){const m=Hi(s,"border","width"),f=Hi(s,"padding");d-=f.width+m.width,u-=f.height+m.height}return d=Math.max(0,d-i.width),u=Math.max(0,n?d/n:u-i.height),d=ci(Math.min(d,a,c.maxWidth)),u=ci(Math.min(u,o,c.maxHeight)),d&&!u&&(u=ci(d/2)),(e!==void 0||r!==void 0)&&n&&c.height&&u>c.height&&(u=c.height,d=ci(Math.floor(u*n))),{width:d,height:u}}function pp(t,e,r){const n=e||1,s=ci(t.height*n),i=ci(t.width*n);t.height=ci(t.height),t.width=ci(t.width);const a=t.canvas;return a.style&&(r||!a.style.height&&!a.style.width)&&(a.style.height=`${t.height}px`,a.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||a.height!==s||a.width!==i?(t.currentDevicePixelRatio=n,a.height=s,a.width=i,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}const Nv=(function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Oh()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t})();function gp(t,e){const r=xv(t,e),n=r&&r.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function Ti(t,e,r,n){return{x:t.x+r*(e.x-t.x),y:t.y+r*(e.y-t.y)}}function jv(t,e,r,n){return{x:t.x+r*(e.x-t.x),y:n==="middle"?r<.5?t.y:e.y:n==="after"?r<1?t.y:e.y:r>0?e.y:t.y}}function _v(t,e,r,n){const s={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},a=Ti(t,s,r),o=Ti(s,i,r),c=Ti(i,e,r),d=Ti(a,o,r),u=Ti(o,c,r);return Ti(d,u,r)}const Sv=function(t,e){return{x(r){return t+t+e-r},setWidth(r){e=r},textAlign(r){return r==="center"?r:r==="right"?"left":"right"},xPlus(r,n){return r-n},leftForLtr(r,n){return r-n}}},Av=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Na(t,e,r){return t?Sv(e,r):Av()}function ex(t,e){let r,n;(e==="ltr"||e==="rtl")&&(r=t.canvas.style,n=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",e,"important"),t.prevTextDirection=n)}function tx(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function rx(t){return t==="angle"?{between:Bo,compare:j5,normalize:Wn}:{between:wa,compare:(e,r)=>e-r,normalize:e=>e}}function mp({start:t,end:e,count:r,loop:n,style:s}){return{start:t%r,end:e%r,loop:n&&(e-t+1)%r===0,style:s}}function Cv(t,e,r){const{property:n,start:s,end:i}=r,{between:a,normalize:o}=rx(n),c=e.length;let{start:d,end:u,loop:g}=t,m,f;if(g){for(d+=c,u+=c,m=0,f=c;m<f&&a(o(e[d%c][n]),s,i);++m)d--,u--;d%=c,u%=c}return u<d&&(u+=c),{start:d,end:u,loop:g,style:t.style}}function Pv(t,e,r){if(!r)return[t];const{property:n,start:s,end:i}=r,a=e.length,{compare:o,between:c,normalize:d}=rx(n),{start:u,end:g,loop:m,style:f}=Cv(t,e,r),x=[];let v=!1,y=null,k,A,D;const L=()=>c(s,D,k)&&o(s,D)!==0,q=()=>o(i,k)===0||c(i,D,k),z=()=>v||L(),$=()=>!v||q();for(let j=u,_=u;j<=g;++j)A=e[j%a],!A.skip&&(k=d(A[n]),k!==D&&(v=c(k,s,i),y===null&&z()&&(y=o(k,s)===0?j:_),y!==null&&$()&&(x.push(mp({start:y,end:j,loop:m,count:a,style:f})),y=null),_=j,D=k));return y!==null&&x.push(mp({start:y,end:g,loop:m,count:a,style:f})),x}function Lv(t,e){const r=[],n=t.segments;for(let s=0;s<n.length;s++){const i=Pv(n[s],t.points,e);i.length&&r.push(...i)}return r}function Ev(t,e,r,n){let s=0,i=e-1;if(r&&!n)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,r&&(i+=s);i>s&&t[i%e].skip;)i--;return i%=e,{start:s,end:i}}function Ov(t,e,r,n){const s=t.length,i=[];let a=e,o=t[e],c;for(c=e+1;c<=r;++c){const d=t[c%s];d.skip||d.stop?o.skip||(n=!1,i.push({start:e%s,end:(c-1)%s,loop:n}),e=a=d.stop?c:null):(a=c,o.skip&&(e=c)),o=d}return a!==null&&i.push({start:e%s,end:a%s,loop:n}),i}function Dv(t,e){const r=t.points,n=t.options.spanGaps,s=r.length;if(!s)return[];const i=!!t._loop,{start:a,end:o}=Ev(r,s,i,n);if(n===!0)return xp(t,[{start:a,end:o,loop:i}],r,e);const c=o<a?o+s:o,d=!!t._fullLoop&&a===0&&o===s-1;return xp(t,Ov(r,a,c,d),r,e)}function xp(t,e,r,n){return!n||!n.setContext||!r?e:Fv(t,e,r,n)}function Fv(t,e,r,n){const s=t._chart.getContext(),i=bp(t.options),{_datasetIndex:a,options:{spanGaps:o}}=t,c=r.length,d=[];let u=i,g=e[0].start,m=g;function f(x,v,y,k){const A=o?-1:1;if(x!==v){for(x+=c;r[x%c].skip;)x-=A;for(;r[v%c].skip;)v+=A;x%c!==v%c&&(d.push({start:x%c,end:v%c,loop:y,style:k}),u=k,g=v%c)}}for(const x of e){g=o?g:x.start;let v=r[g%c],y;for(m=g+1;m<=x.end;m++){const k=r[m%c];y=bp(n.setContext(Ki(s,{type:"segment",p0:v,p1:k,p0DataIndex:(m-1)%c,p1DataIndex:m%c,datasetIndex:a}))),Rv(y,u)&&f(g,m-1,x.loop,u),v=k,u=y}g<m-1&&f(g,m-1,x.loop,u)}return d}function bp(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Rv(t,e){if(!e)return!1;const r=[],n=function(s,i){return jh(i)?(r.includes(i)||r.push(i),r.indexOf(i)):i};return JSON.stringify(t,n)!==JSON.stringify(e,n)}function Vl(t,e,r){return t.options.clip?t[r]:e[r]}function Mv(t,e){const{xScale:r,yScale:n}=t;return r&&n?{left:Vl(r,e,"left"),right:Vl(r,e,"right"),top:Vl(n,e,"top"),bottom:Vl(n,e,"bottom")}:e}function Tv(t,e){const r=e._clip;if(r.disabled)return!1;const n=Mv(e,t.chartArea);return{left:r.left===!1?0:n.left-(r.left===!0?0:r.left),right:r.right===!1?t.width:n.right+(r.right===!0?0:r.right),top:r.top===!1?0:n.top-(r.top===!0?0:r.top),bottom:r.bottom===!1?t.height:n.bottom+(r.bottom===!0?0:r.bottom)}}class Iv{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,r,n,s){const i=r.listeners[s],a=r.duration;i.forEach(o=>o({chart:e,initial:r.initial,numSteps:a,currentStep:Math.min(n-r.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=V0.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let r=0;this._charts.forEach((n,s)=>{if(!n.running||!n.items.length)return;const i=n.items;let a=i.length-1,o=!1,c;for(;a>=0;--a)c=i[a],c._active?(c._total>n.duration&&(n.duration=c._total),c.tick(e),o=!0):(i[a]=i[i.length-1],i.pop());o&&(s.draw(),this._notify(s,n,e,"progress")),i.length||(n.running=!1,this._notify(s,n,e,"complete"),n.initial=!1),r+=i.length}),this._lastDate=e,r===0&&(this._running=!1)}_getAnims(e){const r=this._charts;let n=r.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},r.set(e,n)),n}listen(e,r,n){this._getAnims(e).listeners[r].push(n)}add(e,r){!r||!r.length||this._getAnims(e).items.push(...r)}has(e){return this._getAnims(e).items.length>0}start(e){const r=this._charts.get(e);r&&(r.running=!0,r.start=Date.now(),r.duration=r.items.reduce((n,s)=>Math.max(n,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const r=this._charts.get(e);return!(!r||!r.running||!r.items.length)}stop(e){const r=this._charts.get(e);if(!r||!r.items.length)return;const n=r.items;let s=n.length-1;for(;s>=0;--s)n[s].cancel();r.items=[],this._notify(e,r,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Rs=new Iv;const yp="transparent",Bv={boolean(t,e,r){return r>.5?e:t},color(t,e,r){const n=lp(t||yp),s=n.valid&&lp(e||yp);return s&&s.valid?s.mix(n,r).hexString():e},number(t,e,r){return t+(e-t)*r}};class zv{constructor(e,r,n,s){const i=r[n];s=Wl([e.to,s,i,e.from]);const a=Wl([e.from,i,s]);this._active=!0,this._fn=e.fn||Bv[e.type||typeof a],this._easing=Co[e.easing]||Co.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=r,this._prop=n,this._from=a,this._to=s,this._promises=void 0}active(){return this._active}update(e,r,n){if(this._active){this._notify(!1);const s=this._target[this._prop],i=n-this._start,a=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Wl([e.to,r,s,e.from]),this._from=Wl([e.from,s,r])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const r=e-this._start,n=this._duration,s=this._prop,i=this._from,a=this._loop,o=this._to;let c;if(this._active=i!==o&&(a||r<n),!this._active){this._target[s]=o,this._notify(!0);return}if(r<0){this._target[s]=i;return}c=r/n%2,c=a&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[s]=this._fn(i,o,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((r,n)=>{e.push({res:r,rej:n})})}_notify(e){const r=e?"res":"rej",n=this._promises||[];for(let s=0;s<n.length;s++)n[s][r]()}}class nx{constructor(e,r){this._chart=e,this._properties=new Map,this.configure(r)}configure(e){if(!_t(e))return;const r=Object.keys(ur.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const i=e[s];if(!_t(i))return;const a={};for(const o of r)a[o]=i[o];(Pr(i.properties)&&i.properties||[s]).forEach(o=>{(o===s||!n.has(o))&&n.set(o,a)})})}_animateOptions(e,r){const n=r.options,s=qv(e,n);if(!s)return[];const i=this._createAnimations(s,n);return n.$shared&&Uv(e.options.$animations,n).then(()=>{e.options=n},()=>{}),i}_createAnimations(e,r){const n=this._properties,s=[],i=e.$animations||(e.$animations={}),a=Object.keys(r),o=Date.now();let c;for(c=a.length-1;c>=0;--c){const d=a[c];if(d.charAt(0)==="$")continue;if(d==="options"){s.push(...this._animateOptions(e,r));continue}const u=r[d];let g=i[d];const m=n.get(d);if(g)if(m&&g.active()){g.update(m,u,o);continue}else g.cancel();if(!m||!m.duration){e[d]=u;continue}i[d]=g=new zv(m,e,d,u),s.push(g)}return s}update(e,r){if(this._properties.size===0){Object.assign(e,r);return}const n=this._createAnimations(e,r);if(n.length)return Rs.add(this._chart,n),!0}}function Uv(t,e){const r=[],n=Object.keys(e);for(let s=0;s<n.length;s++){const i=t[n[s]];i&&i.active()&&r.push(i.wait())}return Promise.all(r)}function qv(t,e){if(!e)return;let r=t.options;if(!r){t.options=e;return}return r.$shared&&(t.options=r=Object.assign({},r,{$shared:!1,$animations:{}})),r}function vp(t,e){const r=t&&t.options||{},n=r.reverse,s=r.min===void 0?e:0,i=r.max===void 0?e:0;return{start:n?i:s,end:n?s:i}}function Wv(t,e,r){if(r===!1)return!1;const n=vp(t,r),s=vp(e,r);return{top:s.end,right:n.end,bottom:s.start,left:n.start}}function Hv(t){let e,r,n,s;return _t(t)?(e=t.top,r=t.right,n=t.bottom,s=t.left):e=r=n=s=t,{top:e,right:r,bottom:n,left:s,disabled:t===!1}}function sx(t,e){const r=[],n=t._getSortedDatasetMetas(e);let s,i;for(s=0,i=n.length;s<i;++s)r.push(n[s].index);return r}function wp(t,e,r,n={}){const s=t.keys,i=n.mode==="single";let a,o,c,d;if(e===null)return;let u=!1;for(a=0,o=s.length;a<o;++a){if(c=+s[a],c===r){if(u=!0,n.all)continue;break}d=t.values[c],En(d)&&(i||e===0||Ea(e)===Ea(d))&&(e+=d)}return!u&&!n.all?0:e}function Vv(t,e){const{iScale:r,vScale:n}=e,s=r.axis==="x"?"x":"y",i=n.axis==="x"?"x":"y",a=Object.keys(t),o=new Array(a.length);let c,d,u;for(c=0,d=a.length;c<d;++c)u=a[c],o[c]={[s]:u,[i]:t[u]};return o}function Hd(t,e){const r=t&&t.options.stacked;return r||r===void 0&&e.stack!==void 0}function $v(t,e,r){return`${t.id}.${e.id}.${r.stack||r.type}`}function Yv(t){const{min:e,max:r,minDefined:n,maxDefined:s}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:s?r:Number.POSITIVE_INFINITY}}function Gv(t,e,r){const n=t[e]||(t[e]={});return n[r]||(n[r]={})}function kp(t,e,r,n){for(const s of e.getMatchingVisibleMetas(n).reverse()){const i=t[s.index];if(r&&i>0||!r&&i<0)return s.index}return null}function Np(t,e){const{chart:r,_cachedMeta:n}=t,s=r._stacks||(r._stacks={}),{iScale:i,vScale:a,index:o}=n,c=i.axis,d=a.axis,u=$v(i,a,n),g=e.length;let m;for(let f=0;f<g;++f){const x=e[f],{[c]:v,[d]:y}=x,k=x._stacks||(x._stacks={});m=k[d]=Gv(s,u,v),m[o]=y,m._top=kp(m,a,!0,n.type),m._bottom=kp(m,a,!1,n.type);const A=m._visualValues||(m._visualValues={});A[o]=y}}function Vd(t,e){const r=t.scales;return Object.keys(r).filter(n=>r[n].axis===e).shift()}function Xv(t,e){return Ki(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Jv(t,e,r){return Ki(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:r,index:e,mode:"default",type:"data"})}function go(t,e){const r=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const s of e){const i=s._stacks;if(!i||i[n]===void 0||i[n][r]===void 0)return;delete i[n][r],i[n]._visualValues!==void 0&&i[n]._visualValues[r]!==void 0&&delete i[n]._visualValues[r]}}}const $d=t=>t==="reset"||t==="none",jp=(t,e)=>e?t:Object.assign({},t),Kv=(t,e,r)=>t&&!e.hidden&&e._stacked&&{keys:sx(r,!0),values:null};class Fh{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,r){this.chart=e,this._ctx=e.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Hd(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&go(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,r=this._cachedMeta,n=this.getDataset(),s=(g,m,f,x)=>g==="x"?m:g==="r"?x:f,i=r.xAxisID=yt(n.xAxisID,Vd(e,"x")),a=r.yAxisID=yt(n.yAxisID,Vd(e,"y")),o=r.rAxisID=yt(n.rAxisID,Vd(e,"r")),c=r.indexAxis,d=r.iAxisID=s(c,i,a,o),u=r.vAxisID=s(c,a,i,o);r.xScale=this.getScaleForId(i),r.yScale=this.getScaleForId(a),r.rScale=this.getScaleForId(o),r.iScale=this.getScaleForId(d),r.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const r=this._cachedMeta;return e===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&ip(this._data,this),e._stacked&&go(e)}_dataCheck(){const e=this.getDataset(),r=e.data||(e.data=[]),n=this._data;if(_t(r)){const s=this._cachedMeta;this._data=Vv(r,s)}else if(n!==r){if(n){ip(n,this);const s=this._cachedMeta;go(s),s._parsed=[]}r&&Object.isExtensible(r)&&C5(r,this),this._syncList=[],this._data=r}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const r=this._cachedMeta,n=this.getDataset();let s=!1;this._dataCheck();const i=r._stacked;r._stacked=Hd(r.vScale,r),r.stack!==n.stack&&(s=!0,go(r),r.stack=n.stack),this._resyncElements(e),(s||i!==r._stacked)&&(Np(this,r._parsed),r._stacked=Hd(r.vScale,r))}configure(){const e=this.chart.config,r=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),r,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,r){const{_cachedMeta:n,_data:s}=this,{iScale:i,_stacked:a}=n,o=i.axis;let c=e===0&&r===s.length?!0:n._sorted,d=e>0&&n._parsed[e-1],u,g,m;if(this._parsing===!1)n._parsed=s,n._sorted=!0,m=s;else{Pr(s[e])?m=this.parseArrayData(n,s,e,r):_t(s[e])?m=this.parseObjectData(n,s,e,r):m=this.parsePrimitiveData(n,s,e,r);const f=()=>g[o]===null||d&&g[o]<d[o];for(u=0;u<r;++u)n._parsed[u+e]=g=m[u],c&&(f()&&(c=!1),d=g);n._sorted=c}a&&Np(this,m)}parsePrimitiveData(e,r,n,s){const{iScale:i,vScale:a}=e,o=i.axis,c=a.axis,d=i.getLabels(),u=i===a,g=new Array(s);let m,f,x;for(m=0,f=s;m<f;++m)x=m+n,g[m]={[o]:u||i.parse(d[x],x),[c]:a.parse(r[x],x)};return g}parseArrayData(e,r,n,s){const{xScale:i,yScale:a}=e,o=new Array(s);let c,d,u,g;for(c=0,d=s;c<d;++c)u=c+n,g=r[u],o[c]={x:i.parse(g[0],u),y:a.parse(g[1],u)};return o}parseObjectData(e,r,n,s){const{xScale:i,yScale:a}=e,{xAxisKey:o="x",yAxisKey:c="y"}=this._parsing,d=new Array(s);let u,g,m,f;for(u=0,g=s;u<g;++u)m=u+n,f=r[m],d[u]={x:i.parse(To(f,o),m),y:a.parse(To(f,c),m)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,r,n){const s=this.chart,i=this._cachedMeta,a=r[e.axis],o={keys:sx(s,!0),values:r._stacks[e.axis]._visualValues};return wp(o,a,i.index,{mode:n})}updateRangeFromParsed(e,r,n,s){const i=n[r.axis];let a=i===null?NaN:i;const o=s&&n._stacks[r.axis];s&&o&&(s.values=o,a=wp(s,i,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,r){const n=this._cachedMeta,s=n._parsed,i=n._sorted&&e===n.iScale,a=s.length,o=this._getOtherScale(e),c=Kv(r,n,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:g}=Yv(o);let m,f;function x(){f=s[m];const v=f[o.axis];return!En(f[e.axis])||u>v||g<v}for(m=0;m<a&&!(!x()&&(this.updateRangeFromParsed(d,e,f,c),i));++m);if(i){for(m=a-1;m>=0;--m)if(!x()){this.updateRangeFromParsed(d,e,f,c);break}}return d}getAllParsedValues(e){const r=this._cachedMeta._parsed,n=[];let s,i,a;for(s=0,i=r.length;s<i;++s)a=r[s][e.axis],En(a)&&n.push(a);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const r=this._cachedMeta,n=r.iScale,s=r.vScale,i=this.getParsed(e);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(e){const r=this._cachedMeta;this.update(e||"default"),r._clip=Hv(yt(this.options.clip,Wv(r.xScale,r.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,r=this.chart,n=this._cachedMeta,s=n.data||[],i=r.chartArea,a=[],o=this._drawStart||0,c=this._drawCount||s.length-o,d=this.options.drawActiveElementsOnTop;let u;for(n.dataset&&n.dataset.draw(e,i,o,c),u=o;u<o+c;++u){const g=s[u];g.hidden||(g.active&&d?a.push(g):g.draw(e,i))}for(u=0;u<a.length;++u)a[u].draw(e,i)}getStyle(e,r){const n=r?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,r,n){const s=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const a=this._cachedMeta.data[e];i=a.$context||(a.$context=Jv(this.getContext(),e,a)),i.parsed=this.getParsed(e),i.raw=s.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=Xv(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!r,i.mode=n,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,r){return this._resolveElementOptions(this.dataElementType.id,r,e)}_resolveElementOptions(e,r="default",n){const s=r==="active",i=this._cachedDataOpts,a=e+"-"+r,o=i[a],c=this.enableOptionSharing&&Ac(n);if(o)return jp(o,c);const d=this.chart.config,u=d.datasetElementScopeKeys(this._type,e),g=s?[`${e}Hover`,"hover",e,""]:[e,""],m=d.getOptionScopes(this.getDataset(),u),f=Object.keys(ur.elements[e]),x=()=>this.getContext(n,s,r),v=d.resolveNamedOptions(m,f,x,g);return v.$shared&&(v.$shared=c,i[a]=Object.freeze(jp(v,c))),v}_resolveAnimations(e,r,n){const s=this.chart,i=this._cachedDataOpts,a=`animation-${r}`,o=i[a];if(o)return o;let c;if(s.options.animation!==!1){const u=this.chart.config,g=u.datasetAnimationScopeKeys(this._type,r),m=u.getOptionScopes(this.getDataset(),g);c=u.createResolver(m,this.getContext(e,n,r))}const d=new nx(s,c&&c.animations);return c&&c._cacheable&&(i[a]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,r){return!r||$d(e)||this.chart._animationsDisabled}_getSharedOptions(e,r){const n=this.resolveDataElementOptions(e,r),s=this._sharedOptions,i=this.getSharedOptions(n),a=this.includeOptions(r,i)||i!==s;return this.updateSharedOptions(i,r,n),{sharedOptions:i,includeOptions:a}}updateElement(e,r,n,s){$d(s)?Object.assign(e,n):this._resolveAnimations(r,s).update(e,n)}updateSharedOptions(e,r,n){e&&!$d(r)&&this._resolveAnimations(void 0,r).update(e,n)}_setStyle(e,r,n,s){e.active=s;const i=this.getStyle(r,s);this._resolveAnimations(r,n,s).update(e,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(e,r,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,r,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const r=this._data,n=this._cachedMeta.data;for(const[o,c,d]of this._syncList)this[o](c,d);this._syncList=[];const s=n.length,i=r.length,a=Math.min(i,s);a&&this.parse(0,a),i>s?this._insertElements(s,i-s,e):i<s&&this._removeElements(i,s-i)}_insertElements(e,r,n=!0){const s=this._cachedMeta,i=s.data,a=e+r;let o;const c=d=>{for(d.length+=r,o=d.length-1;o>=a;o--)d[o]=d[o-r]};for(c(i),o=e;o<a;++o)i[o]=new this.dataElementType;this._parsing&&c(s._parsed),this.parse(e,r),n&&this.updateElements(i,e,r,"reset")}updateElements(e,r,n,s){}_removeElements(e,r){const n=this._cachedMeta;if(this._parsing){const s=n._parsed.splice(e,r);n._stacked&&go(n,s)}n.data.splice(e,r)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[r,n,s]=e;this[r](n,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,r){r&&this._sync(["_removeElements",e,r]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Zv(t,e,r){let n=1,s=1,i=0,a=0;if(e<nr){const o=t,c=o+e,d=Math.cos(o),u=Math.sin(o),g=Math.cos(c),m=Math.sin(c),f=(D,L,q)=>Bo(D,o,c,!0)?1:Math.max(L,L*r,q,q*r),x=(D,L,q)=>Bo(D,o,c,!0)?-1:Math.min(L,L*r,q,q*r),v=f(0,d,g),y=f(Sr,u,m),k=x(Dt,d,g),A=x(Dt+Sr,u,m);n=(v-k)/2,s=(y-A)/2,i=-(v+k)/2,a=-(y+A)/2}return{ratioX:n,ratioY:s,offsetX:i,offsetY:a}}class Qv extends Fh{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const r=e.data,{labels:{pointStyle:n,textAlign:s,color:i,useBorderRadius:a,borderRadius:o}}=e.legend.options;return r.labels.length&&r.datasets.length?r.labels.map((c,d)=>{const g=e.getDatasetMeta(0).controller.getStyle(d);return{text:c,fillStyle:g.backgroundColor,fontColor:i,hidden:!e.getDataVisibility(d),lineDash:g.borderDash,lineDashOffset:g.borderDashOffset,lineJoin:g.borderJoinStyle,lineWidth:g.borderWidth,strokeStyle:g.borderColor,textAlign:s,pointStyle:n,borderRadius:a&&(o||g.borderRadius),index:d}}):[]}},onClick(e,r,n){n.chart.toggleDataVisibility(r.index),n.chart.update()}}}};constructor(e,r){super(e,r),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,r){const n=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=n;else{let i=c=>+n[c];if(_t(n[e])){const{key:c="value"}=this._parsing;i=d=>+To(n[d],c)}let a,o;for(a=e,o=e+r;a<o;++a)s._parsed[a]=i(a)}}_getRotation(){return Bs(this.options.rotation-90)}_getCircumference(){return Bs(this.options.circumference)}_getRotationExtents(){let e=nr,r=-nr;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const s=this.chart.getDatasetMeta(n).controller,i=s._getRotation(),a=s._getCircumference();e=Math.min(e,i),r=Math.max(r,i+a)}return{rotation:e,circumference:r-e}}update(e){const r=this.chart,{chartArea:n}=r,s=this._cachedMeta,i=s.data,a=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,o=Math.max((Math.min(n.width,n.height)-a)/2,0),c=Math.min(u5(this.options.cutout,o),1),d=this._getRingWeight(this.index),{circumference:u,rotation:g}=this._getRotationExtents(),{ratioX:m,ratioY:f,offsetX:x,offsetY:v}=Zv(g,u,c),y=(n.width-a)/m,k=(n.height-a)/f,A=Math.max(Math.min(y,k)/2,0),D=z0(this.options.radius,A),L=Math.max(D*c,0),q=(D-L)/this._getVisibleDatasetWeightTotal();this.offsetX=x*D,this.offsetY=v*D,s.total=this.calculateTotal(),this.outerRadius=D-q*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-q*d,0),this.updateElements(i,0,i.length,e)}_circumference(e,r){const n=this.options,s=this._cachedMeta,i=this._getCircumference();return r&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*i/nr)}updateElements(e,r,n,s){const i=s==="reset",a=this.chart,o=a.chartArea,d=a.options.animation,u=(o.left+o.right)/2,g=(o.top+o.bottom)/2,m=i&&d.animateScale,f=m?0:this.innerRadius,x=m?0:this.outerRadius,{sharedOptions:v,includeOptions:y}=this._getSharedOptions(r,s);let k=this._getRotation(),A;for(A=0;A<r;++A)k+=this._circumference(A,i);for(A=r;A<r+n;++A){const D=this._circumference(A,i),L=e[A],q={x:u+this.offsetX,y:g+this.offsetY,startAngle:k,endAngle:k+D,circumference:D,outerRadius:x,innerRadius:f};y&&(q.options=v||this.resolveDataElementOptions(A,L.active?"active":s)),k+=D,this.updateElement(L,A,q,s)}}calculateTotal(){const e=this._cachedMeta,r=e.data;let n=0,s;for(s=0;s<r.length;s++){const i=e._parsed[s];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(s)&&!r[s].hidden&&(n+=Math.abs(i))}return n}calculateCircumference(e){const r=this._cachedMeta.total;return r>0&&!isNaN(e)?nr*(Math.abs(e)/r):0}getLabelAndValue(e){const r=this._cachedMeta,n=this.chart,s=n.data.labels||[],i=_h(r._parsed[e],n.options.locale);return{label:s[e]||"",value:i}}getMaxBorderWidth(e){let r=0;const n=this.chart;let s,i,a,o,c;if(!e){for(s=0,i=n.data.datasets.length;s<i;++s)if(n.isDatasetVisible(s)){a=n.getDatasetMeta(s),e=a.data,o=a.controller;break}}if(!e)return 0;for(s=0,i=e.length;s<i;++s)c=o.resolveDataElementOptions(s),c.borderAlign!=="inner"&&(r=Math.max(r,c.borderWidth||0,c.hoverBorderWidth||0));return r}getMaxOffset(e){let r=0;for(let n=0,s=e.length;n<s;++n){const i=this.resolveDataElementOptions(n);r=Math.max(r,i.offset||0,i.hoverOffset||0)}return r}_getRingWeightOffset(e){let r=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(r+=this._getRingWeight(n));return r}_getRingWeight(e){return Math.max(yt(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class ew extends Fh{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const r=this._cachedMeta,{dataset:n,data:s=[],_dataset:i}=r,a=this.chart._animationsDisabled;let{start:o,count:c}=O5(r,s,a);this._drawStart=o,this._drawCount=c,D5(r)&&(o=0,c=s.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=s;const d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(n,void 0,{animated:!a,options:d},e),this.updateElements(s,o,c,e)}updateElements(e,r,n,s){const i=s==="reset",{iScale:a,vScale:o,_stacked:c,_dataset:d}=this._cachedMeta,{sharedOptions:u,includeOptions:g}=this._getSharedOptions(r,s),m=a.axis,f=o.axis,{spanGaps:x,segment:v}=this.options,y=Io(x)?x:Number.POSITIVE_INFINITY,k=this.chart._animationsDisabled||i||s==="none",A=r+n,D=e.length;let L=r>0&&this.getParsed(r-1);for(let q=0;q<D;++q){const z=e[q],$=k?z:{};if(q<r||q>=A){$.skip=!0;continue}const j=this.getParsed(q),_=Ut(j[f]),M=$[m]=a.getPixelForValue(j[m],q),S=$[f]=i||_?o.getBasePixel():o.getPixelForValue(c?this.applyStack(o,j,c):j[f],q);$.skip=isNaN(M)||isNaN(S)||_,$.stop=q>0&&Math.abs(j[m]-L[m])>y,v&&($.parsed=j,$.raw=d.data[q]),g&&($.options=u||this.resolveDataElementOptions(q,z.active?"active":s)),k||this.updateElement(z,q,$,s),L=j}}getMaxOverflow(){const e=this._cachedMeta,r=e.dataset,n=r.options&&r.options.borderWidth||0,s=e.data||[];if(!s.length)return n;const i=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(n,i,a)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}class tw extends Qv{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function Ri(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Rh{static override(e){Object.assign(Rh.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Ri()}parse(){return Ri()}format(){return Ri()}add(){return Ri()}diff(){return Ri()}startOf(){return Ri()}endOf(){return Ri()}}var rw={_date:Rh};function nw(t,e,r,n){const{controller:s,data:i,_sorted:a}=t,o=s._cachedMeta.iScale,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(o&&e===o.axis&&e!=="r"&&a&&i.length){const d=o._reversePixels?S5:qi;if(n){if(s._sharedOptions){const u=i[0],g=typeof u.getRange=="function"&&u.getRange(e);if(g){const m=d(i,e,r-g),f=d(i,e,r+g);return{lo:m.lo,hi:f.hi}}}}else{const u=d(i,e,r);if(c){const{vScale:g}=s._cachedMeta,{_parsed:m}=t,f=m.slice(0,u.lo+1).reverse().findIndex(v=>!Ut(v[g.axis]));u.lo-=Math.max(0,f);const x=m.slice(u.hi).findIndex(v=>!Ut(v[g.axis]));u.hi+=Math.max(0,x)}return u}}return{lo:0,hi:i.length-1}}function Qc(t,e,r,n,s){const i=t.getSortedVisibleDatasetMetas(),a=r[e];for(let o=0,c=i.length;o<c;++o){const{index:d,data:u}=i[o],{lo:g,hi:m}=nw(i[o],e,a,s);for(let f=g;f<=m;++f){const x=u[f];x.skip||n(x,d,f)}}}function sw(t){const e=t.indexOf("x")!==-1,r=t.indexOf("y")!==-1;return function(n,s){const i=e?Math.abs(n.x-s.x):0,a=r?Math.abs(n.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(a,2))}}function Yd(t,e,r,n,s){const i=[];return!s&&!t.isPointInArea(e)||Qc(t,r,e,function(o,c,d){!s&&!zo(o,t.chartArea,0)||o.inRange(e.x,e.y,n)&&i.push({element:o,datasetIndex:c,index:d})},!0),i}function iw(t,e,r,n){let s=[];function i(a,o,c){const{startAngle:d,endAngle:u}=a.getProps(["startAngle","endAngle"],n),{angle:g}=W0(a,{x:e.x,y:e.y});Bo(g,d,u)&&s.push({element:a,datasetIndex:o,index:c})}return Qc(t,r,e,i),s}function aw(t,e,r,n,s,i){let a=[];const o=sw(r);let c=Number.POSITIVE_INFINITY;function d(u,g,m){const f=u.inRange(e.x,e.y,s);if(n&&!f)return;const x=u.getCenterPoint(s);if(!(!!i||t.isPointInArea(x))&&!f)return;const y=o(e,x);y<c?(a=[{element:u,datasetIndex:g,index:m}],c=y):y===c&&a.push({element:u,datasetIndex:g,index:m})}return Qc(t,r,e,d),a}function Gd(t,e,r,n,s,i){return!i&&!t.isPointInArea(e)?[]:r==="r"&&!n?iw(t,e,r,s):aw(t,e,r,n,s,i)}function _p(t,e,r,n,s){const i=[],a=r==="x"?"inXRange":"inYRange";let o=!1;return Qc(t,r,e,(c,d,u)=>{c[a]&&c[a](e[r],s)&&(i.push({element:c,datasetIndex:d,index:u}),o=o||c.inRange(e.x,e.y,s))}),n&&!o?[]:i}var ow={modes:{index(t,e,r,n){const s=Mi(e,t),i=r.axis||"x",a=r.includeInvisible||!1,o=r.intersect?Yd(t,s,i,n,a):Gd(t,s,i,!1,n,a),c=[];return o.length?(t.getSortedVisibleDatasetMetas().forEach(d=>{const u=o[0].index,g=d.data[u];g&&!g.skip&&c.push({element:g,datasetIndex:d.index,index:u})}),c):[]},dataset(t,e,r,n){const s=Mi(e,t),i=r.axis||"xy",a=r.includeInvisible||!1;let o=r.intersect?Yd(t,s,i,n,a):Gd(t,s,i,!1,n,a);if(o.length>0){const c=o[0].datasetIndex,d=t.getDatasetMeta(c).data;o=[];for(let u=0;u<d.length;++u)o.push({element:d[u],datasetIndex:c,index:u})}return o},point(t,e,r,n){const s=Mi(e,t),i=r.axis||"xy",a=r.includeInvisible||!1;return Yd(t,s,i,n,a)},nearest(t,e,r,n){const s=Mi(e,t),i=r.axis||"xy",a=r.includeInvisible||!1;return Gd(t,s,i,r.intersect,n,a)},x(t,e,r,n){const s=Mi(e,t);return _p(t,s,"x",r.intersect,n)},y(t,e,r,n){const s=Mi(e,t);return _p(t,s,"y",r.intersect,n)}}};const ix=["left","top","right","bottom"];function mo(t,e){return t.filter(r=>r.pos===e)}function Sp(t,e){return t.filter(r=>ix.indexOf(r.pos)===-1&&r.box.axis===e)}function xo(t,e){return t.sort((r,n)=>{const s=e?n:r,i=e?r:n;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function lw(t){const e=[];let r,n,s,i,a,o;for(r=0,n=(t||[]).length;r<n;++r)s=t[r],{position:i,options:{stack:a,stackWeight:o=1}}=s,e.push({index:r,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:a&&i+a,stackWeight:o});return e}function cw(t){const e={};for(const r of t){const{stack:n,pos:s,stackWeight:i}=r;if(!n||!ix.includes(s))continue;const a=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=i}return e}function dw(t,e){const r=cw(t),{vBoxMaxWidth:n,hBoxMaxHeight:s}=e;let i,a,o;for(i=0,a=t.length;i<a;++i){o=t[i];const{fullSize:c}=o.box,d=r[o.stack],u=d&&o.stackWeight/d.weight;o.horizontal?(o.width=u?u*n:c&&e.availableWidth,o.height=s):(o.width=n,o.height=u?u*s:c&&e.availableHeight)}return r}function uw(t){const e=lw(t),r=xo(e.filter(d=>d.box.fullSize),!0),n=xo(mo(e,"left"),!0),s=xo(mo(e,"right")),i=xo(mo(e,"top"),!0),a=xo(mo(e,"bottom")),o=Sp(e,"x"),c=Sp(e,"y");return{fullSize:r,leftAndTop:n.concat(i),rightAndBottom:s.concat(c).concat(a).concat(o),chartArea:mo(e,"chartArea"),vertical:n.concat(s).concat(c),horizontal:i.concat(a).concat(o)}}function Ap(t,e,r,n){return Math.max(t[r],e[r])+Math.max(t[n],e[n])}function ax(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function hw(t,e,r,n){const{pos:s,box:i}=r,a=t.maxPadding;if(!_t(s)){r.size&&(t[s]-=r.size);const g=n[r.stack]||{size:0,count:1};g.size=Math.max(g.size,r.horizontal?i.height:i.width),r.size=g.size/g.count,t[s]+=r.size}i.getPadding&&ax(a,i.getPadding());const o=Math.max(0,e.outerWidth-Ap(a,t,"left","right")),c=Math.max(0,e.outerHeight-Ap(a,t,"top","bottom")),d=o!==t.w,u=c!==t.h;return t.w=o,t.h=c,r.horizontal?{same:d,other:u}:{same:u,other:d}}function fw(t){const e=t.maxPadding;function r(n){const s=Math.max(e[n]-t[n],0);return t[n]+=s,s}t.y+=r("top"),t.x+=r("left"),r("right"),r("bottom")}function pw(t,e){const r=e.maxPadding;function n(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(a=>{i[a]=Math.max(e[a],r[a])}),i}return n(t?["left","right"]:["top","bottom"])}function jo(t,e,r,n){const s=[];let i,a,o,c,d,u;for(i=0,a=t.length,d=0;i<a;++i){o=t[i],c=o.box,c.update(o.width||e.w,o.height||e.h,pw(o.horizontal,e));const{same:g,other:m}=hw(e,r,o,n);d|=g&&s.length,u=u||m,c.fullSize||s.push(o)}return d&&jo(s,e,r,n)||u}function $l(t,e,r,n,s){t.top=r,t.left=e,t.right=e+n,t.bottom=r+s,t.width=n,t.height=s}function Cp(t,e,r,n){const s=r.padding;let{x:i,y:a}=e;for(const o of t){const c=o.box,d=n[o.stack]||{placed:0,weight:1},u=o.stackWeight/d.weight||1;if(o.horizontal){const g=e.w*u,m=d.size||c.height;Ac(d.start)&&(a=d.start),c.fullSize?$l(c,s.left,a,r.outerWidth-s.right-s.left,m):$l(c,e.left+d.placed,a,g,m),d.start=a,d.placed+=g,a=c.bottom}else{const g=e.h*u,m=d.size||c.width;Ac(d.start)&&(i=d.start),c.fullSize?$l(c,i,s.top,m,r.outerHeight-s.bottom-s.top):$l(c,i,e.top+d.placed,m,g),d.start=i,d.placed+=g,i=c.right}}e.x=i,e.y=a}var Ln={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(r){e.draw(r)}}]},t.boxes.push(e)},removeBox(t,e){const r=t.boxes?t.boxes.indexOf(e):-1;r!==-1&&t.boxes.splice(r,1)},configure(t,e,r){e.fullSize=r.fullSize,e.position=r.position,e.weight=r.weight},update(t,e,r,n){if(!t)return;const s=On(t.options.layout.padding),i=Math.max(e-s.width,0),a=Math.max(r-s.height,0),o=uw(t.boxes),c=o.vertical,d=o.horizontal;Et(t.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});const u=c.reduce((v,y)=>y.box.options&&y.box.options.display===!1?v:v+1,0)||1,g=Object.freeze({outerWidth:e,outerHeight:r,padding:s,availableWidth:i,availableHeight:a,vBoxMaxWidth:i/2/u,hBoxMaxHeight:a/2}),m=Object.assign({},s);ax(m,On(n));const f=Object.assign({maxPadding:m,w:i,h:a,x:s.left,y:s.top},s),x=dw(c.concat(d),g);jo(o.fullSize,f,g,x),jo(c,f,g,x),jo(d,f,g,x)&&jo(c,f,g,x),fw(f),Cp(o.leftAndTop,f,g,x),f.x+=f.w,f.y+=f.h,Cp(o.rightAndBottom,f,g,x),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Et(o.chartArea,v=>{const y=v.box;Object.assign(y,t.chartArea),y.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class ox{acquireContext(e,r){}releaseContext(e){return!1}addEventListener(e,r,n){}removeEventListener(e,r,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,r,n,s){return r=Math.max(0,r||e.width),n=n||e.height,{width:r,height:Math.max(0,s?Math.floor(r/s):n)}}isAttached(e){return!0}updateConfig(e){}}class gw extends ox{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const fc="$chartjs",mw={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Pp=t=>t===null||t==="";function xw(t,e){const r=t.style,n=t.getAttribute("height"),s=t.getAttribute("width");if(t[fc]={initial:{height:n,width:s,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",Pp(s)){const i=gp(t,"width");i!==void 0&&(t.width=i)}if(Pp(n))if(t.style.height==="")t.height=t.width/(e||2);else{const i=gp(t,"height");i!==void 0&&(t.height=i)}return t}const lx=Nv?{passive:!0}:!1;function bw(t,e,r){t&&t.addEventListener(e,r,lx)}function yw(t,e,r){t&&t.canvas&&t.canvas.removeEventListener(e,r,lx)}function vw(t,e){const r=mw[t.type]||t.type,{x:n,y:s}=Mi(t,e);return{type:r,chart:e,native:t,x:n!==void 0?n:null,y:s!==void 0?s:null}}function Lc(t,e){for(const r of t)if(r===e||r.contains(e))return!0}function ww(t,e,r){const n=t.canvas,s=new MutationObserver(i=>{let a=!1;for(const o of i)a=a||Lc(o.addedNodes,n),a=a&&!Lc(o.removedNodes,n);a&&r()});return s.observe(document,{childList:!0,subtree:!0}),s}function kw(t,e,r){const n=t.canvas,s=new MutationObserver(i=>{let a=!1;for(const o of i)a=a||Lc(o.removedNodes,n),a=a&&!Lc(o.addedNodes,n);a&&r()});return s.observe(document,{childList:!0,subtree:!0}),s}const qo=new Map;let Lp=0;function cx(){const t=window.devicePixelRatio;t!==Lp&&(Lp=t,qo.forEach((e,r)=>{r.currentDevicePixelRatio!==t&&e()}))}function Nw(t,e){qo.size||window.addEventListener("resize",cx),qo.set(t,e)}function jw(t){qo.delete(t),qo.size||window.removeEventListener("resize",cx)}function _w(t,e,r){const n=t.canvas,s=n&&Dh(n);if(!s)return;const i=$0((o,c)=>{const d=s.clientWidth;r(o,c),d<s.clientWidth&&r()},window),a=new ResizeObserver(o=>{const c=o[0],d=c.contentRect.width,u=c.contentRect.height;d===0&&u===0||i(d,u)});return a.observe(s),Nw(t,i),a}function Xd(t,e,r){r&&r.disconnect(),e==="resize"&&jw(t)}function Sw(t,e,r){const n=t.canvas,s=$0(i=>{t.ctx!==null&&r(vw(i,t))},t);return bw(n,e,s),s}class Aw extends ox{acquireContext(e,r){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(xw(e,r),n):null}releaseContext(e){const r=e.canvas;if(!r[fc])return!1;const n=r[fc].initial;["height","width"].forEach(i=>{const a=n[i];Ut(a)?r.removeAttribute(i):r.setAttribute(i,a)});const s=n.style||{};return Object.keys(s).forEach(i=>{r.style[i]=s[i]}),r.width=r.width,delete r[fc],!0}addEventListener(e,r,n){this.removeEventListener(e,r);const s=e.$proxies||(e.$proxies={}),a={attach:ww,detach:kw,resize:_w}[r]||Sw;s[r]=a(e,r,n)}removeEventListener(e,r){const n=e.$proxies||(e.$proxies={}),s=n[r];if(!s)return;({attach:Xd,detach:Xd,resize:Xd}[r]||yw)(e,r,s),n[r]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,r,n,s){return kv(e,r,n,s)}isAttached(e){const r=e&&Dh(e);return!!(r&&r.isConnected)}}function Cw(t){return!Oh()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?gw:Aw}class pi{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:r,y:n}=this.getProps(["x","y"],e);return{x:r,y:n}}hasValue(){return Io(this.x)&&Io(this.y)}getProps(e,r){const n=this.$animations;if(!r||!n)return this;const s={};return e.forEach(i=>{s[i]=n[i]&&n[i].active()?n[i]._to:this[i]}),s}}function Pw(t,e){const r=t.options.ticks,n=Lw(t),s=Math.min(r.maxTicksLimit||n,n),i=r.major.enabled?Ow(e):[],a=i.length,o=i[0],c=i[a-1],d=[];if(a>s)return Dw(e,d,i,a/s),d;const u=Ew(i,e,s);if(a>0){let g,m;const f=a>1?Math.round((c-o)/(a-1)):null;for(Yl(e,d,u,Ut(f)?0:o-f,o),g=0,m=a-1;g<m;g++)Yl(e,d,u,i[g],i[g+1]);return Yl(e,d,u,c,Ut(f)?e.length:c+f),d}return Yl(e,d,u),d}function Lw(t){const e=t.options.offset,r=t._tickSize(),n=t._length/r+(e?0:1),s=t._maxLength/r;return Math.floor(Math.min(n,s))}function Ew(t,e,r){const n=Fw(t),s=e.length/r;if(!n)return Math.max(s,1);const i=y5(n);for(let a=0,o=i.length-1;a<o;a++){const c=i[a];if(c>s)return c}return Math.max(s,1)}function Ow(t){const e=[];let r,n;for(r=0,n=t.length;r<n;r++)t[r].major&&e.push(r);return e}function Dw(t,e,r,n){let s=0,i=r[0],a;for(n=Math.ceil(n),a=0;a<t.length;a++)a===i&&(e.push(t[a]),s++,i=r[s*n])}function Yl(t,e,r,n,s){const i=yt(n,0),a=Math.min(yt(s,t.length),t.length);let o=0,c,d,u;for(r=Math.ceil(r),s&&(c=s-n,r=c/Math.floor(c/r)),u=i;u<0;)o++,u=Math.round(i+o*r);for(d=Math.max(i,0);d<a;d++)d===u&&(e.push(t[d]),o++,u=Math.round(i+o*r))}function Fw(t){const e=t.length;let r,n;if(e<2)return!1;for(n=t[0],r=1;r<e;++r)if(t[r]-t[r-1]!==n)return!1;return n}const Rw=t=>t==="left"?"right":t==="right"?"left":t,Ep=(t,e,r)=>e==="top"||e==="left"?t[e]+r:t[e]-r,Op=(t,e)=>Math.min(e||t,t);function Dp(t,e){const r=[],n=t.length/e,s=t.length;let i=0;for(;i<s;i+=n)r.push(t[Math.floor(i)]);return r}function Mw(t,e,r){const n=t.ticks.length,s=Math.min(e,n-1),i=t._startPixel,a=t._endPixel,o=1e-6;let c=t.getPixelForTick(s),d;if(!(r&&(n===1?d=Math.max(c-i,a-c):e===0?d=(t.getPixelForTick(1)-c)/2:d=(c-t.getPixelForTick(s-1))/2,c+=s<e?d:-d,c<i-o||c>a+o)))return c}function Tw(t,e){Et(t,r=>{const n=r.gc,s=n.length/2;let i;if(s>e){for(i=0;i<s;++i)delete r.data[n[i]];n.splice(0,s)}})}function bo(t){return t.drawTicks?t.tickLength:0}function Fp(t,e){if(!t.display)return 0;const r=Vr(t.font,e),n=On(t.padding);return(Pr(t.text)?t.text.length:1)*r.lineHeight+n.height}function Iw(t,e){return Ki(t,{scale:e,type:"scale"})}function Bw(t,e,r){return Ki(t,{tick:r,index:e,type:"tick"})}function zw(t,e,r){let n=Nh(t);return(r&&e!=="right"||!r&&e==="right")&&(n=Rw(n)),n}function Uw(t,e,r,n){const{top:s,left:i,bottom:a,right:o,chart:c}=t,{chartArea:d,scales:u}=c;let g=0,m,f,x;const v=a-s,y=o-i;if(t.isHorizontal()){if(f=Wr(n,i,o),_t(r)){const k=Object.keys(r)[0],A=r[k];x=u[k].getPixelForValue(A)+v-e}else r==="center"?x=(d.bottom+d.top)/2+v-e:x=Ep(t,r,e);m=o-i}else{if(_t(r)){const k=Object.keys(r)[0],A=r[k];f=u[k].getPixelForValue(A)-y+e}else r==="center"?f=(d.left+d.right)/2-y+e:f=Ep(t,r,e);x=Wr(n,a,s),g=r==="left"?-Sr:Sr}return{titleX:f,titleY:x,maxWidth:m,rotation:g}}class Ta extends pi{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,r){return e}getUserBounds(){let{_userMin:e,_userMax:r,_suggestedMin:n,_suggestedMax:s}=this;return e=is(e,Number.POSITIVE_INFINITY),r=is(r,Number.NEGATIVE_INFINITY),n=is(n,Number.POSITIVE_INFINITY),s=is(s,Number.NEGATIVE_INFINITY),{min:is(e,n),max:is(r,s),minDefined:En(e),maxDefined:En(r)}}getMinMax(e){let{min:r,max:n,minDefined:s,maxDefined:i}=this.getUserBounds(),a;if(s&&i)return{min:r,max:n};const o=this.getMatchingVisibleMetas();for(let c=0,d=o.length;c<d;++c)a=o[c].controller.getMinMax(this,e),s||(r=Math.min(r,a.min)),i||(n=Math.max(n,a.max));return r=i&&r>n?n:r,n=s&&r>n?r:n,{min:is(r,is(n,r)),max:is(n,is(r,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Vt(this.options.beforeUpdate,[this])}update(e,r,n){const{beginAtZero:s,grace:i,ticks:a}=this.options,o=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=r,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=ev(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=o<this.ticks.length;this._convertTicksToLabels(c?Dp(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=Pw(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,r,n;this.isHorizontal()?(r=this.left,n=this.right):(r=this.top,n=this.bottom,e=!e),this._startPixel=r,this._endPixel=n,this._reversePixels=e,this._length=n-r,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Vt(this.options.afterUpdate,[this])}beforeSetDimensions(){Vt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Vt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Vt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Vt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const r=this.options.ticks;let n,s,i;for(n=0,s=e.length;n<s;n++)i=e[n],i.label=Vt(r.callback,[i.value,n,e],this)}afterTickToLabelConversion(){Vt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Vt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,r=e.ticks,n=Op(this.ticks.length,e.ticks.maxTicksLimit),s=r.minRotation||0,i=r.maxRotation;let a=s,o,c,d;if(!this._isVisible()||!r.display||s>=i||n<=1||!this.isHorizontal()){this.labelRotation=s;return}const u=this._getLabelSizes(),g=u.widest.width,m=u.highest.height,f=Zr(this.chart.width-g,0,this.maxWidth);o=e.offset?this.maxWidth/n:f/(n-1),g+6>o&&(o=f/(n-(e.offset?.5:1)),c=this.maxHeight-bo(e.grid)-r.padding-Fp(e.title,this.chart.options.font),d=Math.sqrt(g*g+m*m),a=N5(Math.min(Math.asin(Zr((u.highest.height+6)/o,-1,1)),Math.asin(Zr(c/d,-1,1))-Math.asin(Zr(m/d,-1,1)))),a=Math.max(s,Math.min(i,a))),this.labelRotation=a}afterCalculateLabelRotation(){Vt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Vt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:r,options:{ticks:n,title:s,grid:i}}=this,a=this._isVisible(),o=this.isHorizontal();if(a){const c=Fp(s,r.options.font);if(o?(e.width=this.maxWidth,e.height=bo(i)+c):(e.height=this.maxHeight,e.width=bo(i)+c),n.display&&this.ticks.length){const{first:d,last:u,widest:g,highest:m}=this._getLabelSizes(),f=n.padding*2,x=Bs(this.labelRotation),v=Math.cos(x),y=Math.sin(x);if(o){const k=n.mirror?0:y*g.width+v*m.height;e.height=Math.min(this.maxHeight,e.height+k+f)}else{const k=n.mirror?0:v*g.width+y*m.height;e.width=Math.min(this.maxWidth,e.width+k+f)}this._calculatePadding(d,u,y,v)}}this._handleMargins(),o?(this.width=this._length=r.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=r.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,r,n,s){const{ticks:{align:i,padding:a},position:o}=this.options,c=this.labelRotation!==0,d=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,g=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,f=0;c?d?(m=s*e.width,f=n*r.height):(m=n*e.height,f=s*r.width):i==="start"?f=r.width:i==="end"?m=e.width:i!=="inner"&&(m=e.width/2,f=r.width/2),this.paddingLeft=Math.max((m-u+a)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-g+a)*this.width/(this.width-g),0)}else{let u=r.height/2,g=e.height/2;i==="start"?(u=0,g=e.height):i==="end"&&(u=r.height,g=0),this.paddingTop=u+a,this.paddingBottom=g+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Vt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:r}=this.options;return r==="top"||r==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let r,n;for(r=0,n=e.length;r<n;r++)Ut(e[r].label)&&(e.splice(r,1),n--,r--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const r=this.options.ticks.sampleSize;let n=this.ticks;r<n.length&&(n=Dp(n,r)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,r,n){const{ctx:s,_longestTextCache:i}=this,a=[],o=[],c=Math.floor(r/Op(r,n));let d=0,u=0,g,m,f,x,v,y,k,A,D,L,q;for(g=0;g<r;g+=c){if(x=e[g].label,v=this._resolveTickFontOptions(g),s.font=y=v.string,k=i[y]=i[y]||{data:{},gc:[]},A=v.lineHeight,D=L=0,!Ut(x)&&!Pr(x))D=dp(s,k.data,k.gc,D,x),L=A;else if(Pr(x))for(m=0,f=x.length;m<f;++m)q=x[m],!Ut(q)&&!Pr(q)&&(D=dp(s,k.data,k.gc,D,q),L+=A);a.push(D),o.push(L),d=Math.max(D,d),u=Math.max(L,u)}Tw(i,r);const z=a.indexOf(d),$=o.indexOf(u),j=_=>({width:a[_]||0,height:o[_]||0});return{first:j(0),last:j(r-1),widest:j(z),highest:j($),widths:a,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,r){return NaN}getValueForPixel(e){}getPixelForTick(e){const r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const r=this._startPixel+e*this._length;return _5(this._alignToPixels?Fi(this.chart,r,0):r)}getDecimalForPixel(e){const r=(e-this._startPixel)/this._length;return this._reversePixels?1-r:r}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:r}=this;return e<0&&r<0?r:e>0&&r>0?e:0}getContext(e){const r=this.ticks||[];if(e>=0&&e<r.length){const n=r[e];return n.$context||(n.$context=Bw(this.getContext(),e,n))}return this.$context||(this.$context=Iw(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,r=Bs(this.labelRotation),n=Math.abs(Math.cos(r)),s=Math.abs(Math.sin(r)),i=this._getLabelSizes(),a=e.autoSkipPadding||0,o=i?i.widest.width+a:0,c=i?i.highest.height+a:0;return this.isHorizontal()?c*n>o*s?o/n:c/s:c*s<o*n?c/n:o/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const r=this.axis,n=this.chart,s=this.options,{grid:i,position:a,border:o}=s,c=i.offset,d=this.isHorizontal(),g=this.ticks.length+(c?1:0),m=bo(i),f=[],x=o.setContext(this.getContext()),v=x.display?x.width:0,y=v/2,k=function(te){return Fi(n,te,v)};let A,D,L,q,z,$,j,_,M,S,C,R;if(a==="top")A=k(this.bottom),$=this.bottom-m,_=A-y,S=k(e.top)+y,R=e.bottom;else if(a==="bottom")A=k(this.top),S=e.top,R=k(e.bottom)-y,$=A+y,_=this.top+m;else if(a==="left")A=k(this.right),z=this.right-m,j=A-y,M=k(e.left)+y,C=e.right;else if(a==="right")A=k(this.left),M=e.left,C=k(e.right)-y,z=A+y,j=this.left+m;else if(r==="x"){if(a==="center")A=k((e.top+e.bottom)/2+.5);else if(_t(a)){const te=Object.keys(a)[0],ne=a[te];A=k(this.chart.scales[te].getPixelForValue(ne))}S=e.top,R=e.bottom,$=A+y,_=$+m}else if(r==="y"){if(a==="center")A=k((e.left+e.right)/2);else if(_t(a)){const te=Object.keys(a)[0],ne=a[te];A=k(this.chart.scales[te].getPixelForValue(ne))}z=A-y,j=z-m,M=e.left,C=e.right}const F=yt(s.ticks.maxTicksLimit,g),V=Math.max(1,Math.ceil(g/F));for(D=0;D<g;D+=V){const te=this.getContext(D),ne=i.setContext(te),se=o.setContext(te),K=ne.lineWidth,Q=ne.color,re=se.dash||[],P=se.dashOffset,I=ne.tickWidth,Y=ne.tickColor,ee=ne.tickBorderDash||[],ie=ne.tickBorderDashOffset;L=Mw(this,D,c),L!==void 0&&(q=Fi(n,L,K),d?z=j=M=C=q:$=_=S=R=q,f.push({tx1:z,ty1:$,tx2:j,ty2:_,x1:M,y1:S,x2:C,y2:R,width:K,color:Q,borderDash:re,borderDashOffset:P,tickWidth:I,tickColor:Y,tickBorderDash:ee,tickBorderDashOffset:ie}))}return this._ticksLength=g,this._borderValue=A,f}_computeLabelItems(e){const r=this.axis,n=this.options,{position:s,ticks:i}=n,a=this.isHorizontal(),o=this.ticks,{align:c,crossAlign:d,padding:u,mirror:g}=i,m=bo(n.grid),f=m+u,x=g?-u:f,v=-Bs(this.labelRotation),y=[];let k,A,D,L,q,z,$,j,_,M,S,C,R="middle";if(s==="top")z=this.bottom-x,$=this._getXAxisLabelAlignment();else if(s==="bottom")z=this.top+x,$=this._getXAxisLabelAlignment();else if(s==="left"){const V=this._getYAxisLabelAlignment(m);$=V.textAlign,q=V.x}else if(s==="right"){const V=this._getYAxisLabelAlignment(m);$=V.textAlign,q=V.x}else if(r==="x"){if(s==="center")z=(e.top+e.bottom)/2+f;else if(_t(s)){const V=Object.keys(s)[0],te=s[V];z=this.chart.scales[V].getPixelForValue(te)+f}$=this._getXAxisLabelAlignment()}else if(r==="y"){if(s==="center")q=(e.left+e.right)/2-f;else if(_t(s)){const V=Object.keys(s)[0],te=s[V];q=this.chart.scales[V].getPixelForValue(te)}$=this._getYAxisLabelAlignment(m).textAlign}r==="y"&&(c==="start"?R="top":c==="end"&&(R="bottom"));const F=this._getLabelSizes();for(k=0,A=o.length;k<A;++k){D=o[k],L=D.label;const V=i.setContext(this.getContext(k));j=this.getPixelForTick(k)+i.labelOffset,_=this._resolveTickFontOptions(k),M=_.lineHeight,S=Pr(L)?L.length:1;const te=S/2,ne=V.color,se=V.textStrokeColor,K=V.textStrokeWidth;let Q=$;a?(q=j,$==="inner"&&(k===A-1?Q=this.options.reverse?"left":"right":k===0?Q=this.options.reverse?"right":"left":Q="center"),s==="top"?d==="near"||v!==0?C=-S*M+M/2:d==="center"?C=-F.highest.height/2-te*M+M:C=-F.highest.height+M/2:d==="near"||v!==0?C=M/2:d==="center"?C=F.highest.height/2-te*M:C=F.highest.height-S*M,g&&(C*=-1),v!==0&&!V.showLabelBackdrop&&(q+=M/2*Math.sin(v))):(z=j,C=(1-S)*M/2);let re;if(V.showLabelBackdrop){const P=On(V.backdropPadding),I=F.heights[k],Y=F.widths[k];let ee=C-P.top,ie=0-P.left;switch(R){case"middle":ee-=I/2;break;case"bottom":ee-=I;break}switch($){case"center":ie-=Y/2;break;case"right":ie-=Y;break;case"inner":k===A-1?ie-=Y:k>0&&(ie-=Y/2);break}re={left:ie,top:ee,width:Y+P.width,height:I+P.height,color:V.backdropColor}}y.push({label:L,font:_,textOffset:C,options:{rotation:v,color:ne,strokeColor:se,strokeWidth:K,textAlign:Q,textBaseline:R,translation:[q,z],backdrop:re}})}return y}_getXAxisLabelAlignment(){const{position:e,ticks:r}=this.options;if(-Bs(this.labelRotation))return e==="top"?"left":"right";let s="center";return r.align==="start"?s="left":r.align==="end"?s="right":r.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:r,ticks:{crossAlign:n,mirror:s,padding:i}}=this.options,a=this._getLabelSizes(),o=e+i,c=a.widest.width;let d,u;return r==="left"?s?(u=this.right+i,n==="near"?d="left":n==="center"?(d="center",u+=c/2):(d="right",u+=c)):(u=this.right-o,n==="near"?d="right":n==="center"?(d="center",u-=c/2):(d="left",u=this.left)):r==="right"?s?(u=this.left+i,n==="near"?d="right":n==="center"?(d="center",u-=c/2):(d="left",u-=c)):(u=this.left+o,n==="near"?d="left":n==="center"?(d="center",u+=c/2):(d="right",u=this.right)):d="right",{textAlign:d,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,r=this.options.position;if(r==="left"||r==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(r==="top"||r==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:r},left:n,top:s,width:i,height:a}=this;r&&(e.save(),e.fillStyle=r,e.fillRect(n,s,i,a),e.restore())}getLineWidthForValue(e){const r=this.options.grid;if(!this._isVisible()||!r.display)return 0;const s=this.ticks.findIndex(i=>i.value===e);return s>=0?r.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const r=this.options.grid,n=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,a;const o=(c,d,u)=>{!u.width||!u.color||(n.save(),n.lineWidth=u.width,n.strokeStyle=u.color,n.setLineDash(u.borderDash||[]),n.lineDashOffset=u.borderDashOffset,n.beginPath(),n.moveTo(c.x,c.y),n.lineTo(d.x,d.y),n.stroke(),n.restore())};if(r.display)for(i=0,a=s.length;i<a;++i){const c=s[i];r.drawOnChartArea&&o({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),r.drawTicks&&o({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:r,options:{border:n,grid:s}}=this,i=n.setContext(this.getContext()),a=n.display?i.width:0;if(!a)return;const o=s.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let d,u,g,m;this.isHorizontal()?(d=Fi(e,this.left,a)-a/2,u=Fi(e,this.right,o)+o/2,g=m=c):(g=Fi(e,this.top,a)-a/2,m=Fi(e,this.bottom,o)+o/2,d=u=c),r.save(),r.lineWidth=i.width,r.strokeStyle=i.color,r.beginPath(),r.moveTo(d,g),r.lineTo(u,m),r.stroke(),r.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,s=this._computeLabelArea();s&&Sh(n,s);const i=this.getLabelItems(e);for(const a of i){const o=a.options,c=a.font,d=a.label,u=a.textOffset;Uo(n,d,0,u,c,o)}s&&Ah(n)}drawTitle(){const{ctx:e,options:{position:r,title:n,reverse:s}}=this;if(!n.display)return;const i=Vr(n.font),a=On(n.padding),o=n.align;let c=i.lineHeight/2;r==="bottom"||r==="center"||_t(r)?(c+=a.bottom,Pr(n.text)&&(c+=i.lineHeight*(n.text.length-1))):c+=a.top;const{titleX:d,titleY:u,maxWidth:g,rotation:m}=Uw(this,c,r,o);Uo(e,n.text,0,0,i,{color:n.color,maxWidth:g,rotation:m,textAlign:zw(o,r,s),textBaseline:"middle",translation:[d,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,r=e.ticks&&e.ticks.z||0,n=yt(e.grid&&e.grid.z,-1),s=yt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Ta.prototype.draw?[{z:r,draw:i=>{this.draw(i)}}]:[{z:n,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:r,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const r=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",s=[];let i,a;for(i=0,a=r.length;i<a;++i){const o=r[i];o[n]===this.id&&(!e||o.type===e)&&s.push(o)}return s}_resolveTickFontOptions(e){const r=this.options.ticks.setContext(this.getContext(e));return Vr(r.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Gl{constructor(e,r,n){this.type=e,this.scope=r,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const r=Object.getPrototypeOf(e);let n;Hw(r)&&(n=this.register(r));const s=this.items,i=e.id,a=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in s||(s[i]=e,qw(e,a,n),this.override&&ur.override(e.id,e.overrides)),a}get(e){return this.items[e]}unregister(e){const r=this.items,n=e.id,s=this.scope;n in r&&delete r[n],s&&n in ur[s]&&(delete ur[s][n],this.override&&delete Yi[n])}}function qw(t,e,r){const n=Mo(Object.create(null),[r?ur.get(r):{},ur.get(e),t.defaults]);ur.set(e,n),t.defaultRoutes&&Ww(e,t.defaultRoutes),t.descriptors&&ur.describe(e,t.descriptors)}function Ww(t,e){Object.keys(e).forEach(r=>{const n=r.split("."),s=n.pop(),i=[t].concat(n).join("."),a=e[r].split("."),o=a.pop(),c=a.join(".");ur.route(i,s,c,o)})}function Hw(t){return"id"in t&&"defaults"in t}class Vw{constructor(){this.controllers=new Gl(Fh,"datasets",!0),this.elements=new Gl(pi,"elements"),this.plugins=new Gl(Object,"plugins"),this.scales=new Gl(Ta,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,r,n){[...r].forEach(s=>{const i=n||this._getRegistryForType(s);n||i.isForType(s)||i===this.plugins&&s.id?this._exec(e,i,s):Et(s,a=>{const o=n||this._getRegistryForType(a);this._exec(e,o,a)})})}_exec(e,r,n){const s=wh(e);Vt(n["before"+s],[],n),r[e](n),Vt(n["after"+s],[],n)}_getRegistryForType(e){for(let r=0;r<this._typedRegistries.length;r++){const n=this._typedRegistries[r];if(n.isForType(e))return n}return this.plugins}_get(e,r,n){const s=r.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return s}}var cs=new Vw;class $w{constructor(){this._init=void 0}notify(e,r,n,s){if(r==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const i=s?this._descriptors(e).filter(s):this._descriptors(e),a=this._notify(i,e,r,n);return r==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),a}_notify(e,r,n,s){s=s||{};for(const i of e){const a=i.plugin,o=a[n],c=[r,s,i.options];if(Vt(o,c,a)===!1&&s.cancelable)return!1}return!0}invalidate(){Ut(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const r=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),r}_createDescriptors(e,r){const n=e&&e.config,s=yt(n.options&&n.options.plugins,{}),i=Yw(n);return s===!1&&!r?[]:Xw(e,i,s,r)}_notifyStateChanges(e){const r=this._oldCache||[],n=this._cache,s=(i,a)=>i.filter(o=>!a.some(c=>o.plugin.id===c.plugin.id));this._notify(s(r,n),e,"stop"),this._notify(s(n,r),e,"start")}}function Yw(t){const e={},r=[],n=Object.keys(cs.plugins.items);for(let i=0;i<n.length;i++)r.push(cs.getPlugin(n[i]));const s=t.plugins||[];for(let i=0;i<s.length;i++){const a=s[i];r.indexOf(a)===-1&&(r.push(a),e[a.id]=!0)}return{plugins:r,localIds:e}}function Gw(t,e){return!e&&t===!1?null:t===!0?{}:t}function Xw(t,{plugins:e,localIds:r},n,s){const i=[],a=t.getContext();for(const o of e){const c=o.id,d=Gw(n[c],s);d!==null&&i.push({plugin:o,options:Jw(t.config,{plugin:o,local:r[c]},d,a)})}return i}function Jw(t,{plugin:e,local:r},n,s){const i=t.pluginScopeKeys(e),a=t.getOptionScopes(n,i);return r&&e.defaults&&a.push(e.defaults),t.createResolver(a,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Wu(t,e){const r=ur.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||r.indexAxis||"x"}function Kw(t,e){let r=t;return t==="_index_"?r=e:t==="_value_"&&(r=e==="x"?"y":"x"),r}function Zw(t,e){return t===e?"_index_":"_value_"}function Rp(t){if(t==="x"||t==="y"||t==="r")return t}function Qw(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Hu(t,...e){if(Rp(t))return t;for(const r of e){const n=r.axis||Qw(r.position)||t.length>1&&Rp(t[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Mp(t,e,r){if(r[e+"AxisID"]===t)return{axis:e}}function ek(t,e){if(e.data&&e.data.datasets){const r=e.data.datasets.filter(n=>n.xAxisID===t||n.yAxisID===t);if(r.length)return Mp(t,"x",r[0])||Mp(t,"y",r[0])}return{}}function tk(t,e){const r=Yi[t.type]||{scales:{}},n=e.scales||{},s=Wu(t.type,e),i=Object.create(null);return Object.keys(n).forEach(a=>{const o=n[a];if(!_t(o))return console.error(`Invalid scale configuration for scale: ${a}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const c=Hu(a,o,ek(a,t),ur.scales[o.type]),d=Zw(c,s),u=r.scales||{};i[a]=So(Object.create(null),[{axis:c},o,u[c],u[d]])}),t.data.datasets.forEach(a=>{const o=a.type||t.type,c=a.indexAxis||Wu(o,e),u=(Yi[o]||{}).scales||{};Object.keys(u).forEach(g=>{const m=Kw(g,c),f=a[m+"AxisID"]||m;i[f]=i[f]||Object.create(null),So(i[f],[{axis:m},n[f],u[g]])})}),Object.keys(i).forEach(a=>{const o=i[a];So(o,[ur.scales[o.type],ur.scale])}),i}function dx(t){const e=t.options||(t.options={});e.plugins=yt(e.plugins,{}),e.scales=tk(t,e)}function ux(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function rk(t){return t=t||{},t.data=ux(t.data),dx(t),t}const Tp=new Map,hx=new Set;function Xl(t,e){let r=Tp.get(t);return r||(r=e(),Tp.set(t,r),hx.add(r)),r}const yo=(t,e,r)=>{const n=To(e,r);n!==void 0&&t.add(n)};class nk{constructor(e){this._config=rk(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=ux(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),dx(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Xl(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,r){return Xl(`${e}.transition.${r}`,()=>[[`datasets.${e}.transitions.${r}`,`transitions.${r}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,r){return Xl(`${e}-${r}`,()=>[[`datasets.${e}.elements.${r}`,`datasets.${e}`,`elements.${r}`,""]])}pluginScopeKeys(e){const r=e.id,n=this.type;return Xl(`${n}-plugin-${r}`,()=>[[`plugins.${r}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,r){const n=this._scopeCache;let s=n.get(e);return(!s||r)&&(s=new Map,n.set(e,s)),s}getOptionScopes(e,r,n){const{options:s,type:i}=this,a=this._cachedScopes(e,n),o=a.get(r);if(o)return o;const c=new Set;r.forEach(u=>{e&&(c.add(e),u.forEach(g=>yo(c,e,g))),u.forEach(g=>yo(c,s,g)),u.forEach(g=>yo(c,Yi[i]||{},g)),u.forEach(g=>yo(c,ur,g)),u.forEach(g=>yo(c,zu,g))});const d=Array.from(c);return d.length===0&&d.push(Object.create(null)),hx.has(r)&&a.set(r,d),d}chartOptionScopes(){const{options:e,type:r}=this;return[e,Yi[r]||{},ur.datasets[r]||{},{type:r},ur,zu]}resolveNamedOptions(e,r,n,s=[""]){const i={$shared:!0},{resolver:a,subPrefixes:o}=Ip(this._resolverCache,e,s);let c=a;if(ik(a,r)){i.$shared=!1,n=hi(n)?n():n;const d=this.createResolver(e,n,o);c=Oa(a,n,d)}for(const d of r)i[d]=c[d];return i}createResolver(e,r,n=[""],s){const{resolver:i}=Ip(this._resolverCache,e,n);return _t(r)?Oa(i,r,void 0,s):i}}function Ip(t,e,r){let n=t.get(e);n||(n=new Map,t.set(e,n));const s=r.join();let i=n.get(s);return i||(i={resolver:Ph(e,r),subPrefixes:r.filter(o=>!o.toLowerCase().includes("hover"))},n.set(s,i)),i}const sk=t=>_t(t)&&Object.getOwnPropertyNames(t).some(e=>hi(t[e]));function ik(t,e){const{isScriptable:r,isIndexable:n}=X0(t);for(const s of e){const i=r(s),a=n(s),o=(a||i)&&t[s];if(i&&(hi(o)||sk(o))||a&&Pr(o))return!0}return!1}var ak="4.5.1";const ok=["top","bottom","left","right","chartArea"];function Bp(t,e){return t==="top"||t==="bottom"||ok.indexOf(t)===-1&&e==="x"}function zp(t,e){return function(r,n){return r[t]===n[t]?r[e]-n[e]:r[t]-n[t]}}function Up(t){const e=t.chart,r=e.options.animation;e.notifyPlugins("afterRender"),Vt(r&&r.onComplete,[t],e)}function lk(t){const e=t.chart,r=e.options.animation;Vt(r&&r.onProgress,[t],e)}function fx(t){return Oh()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const pc={},qp=t=>{const e=fx(t);return Object.values(pc).filter(r=>r.canvas===e).pop()};function ck(t,e,r){const n=Object.keys(t);for(const s of n){const i=+s;if(i>=e){const a=t[s];delete t[s],(r>0||i>e)&&(t[i+r]=a)}}}function dk(t,e,r,n){return!r||t.type==="mouseout"?null:n?e:t}let Zo=class{static defaults=ur;static instances=pc;static overrides=Yi;static registry=cs;static version=ak;static getChart=qp;static register(...e){cs.add(...e),Wp()}static unregister(...e){cs.remove(...e),Wp()}constructor(e,r){const n=this.config=new nk(r),s=fx(e),i=qp(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const a=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||Cw(s)),this.platform.updateConfig(n);const o=this.platform.acquireContext(s,a.aspectRatio),c=o&&o.canvas,d=c&&c.height,u=c&&c.width;if(this.id=d5(),this.ctx=o,this.canvas=c,this.width=u,this.height=d,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new $w,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=L5(g=>this.update(g),a.resizeDelay||0),this._dataChanges=[],pc[this.id]=this,!o||!c){console.error("Failed to create chart: can't acquire context from the given item");return}Rs.listen(this,"complete",Up),Rs.listen(this,"progress",lk),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:r},width:n,height:s,_aspectRatio:i}=this;return Ut(e)?r&&i?i:s?n/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return cs}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():pp(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return up(this.canvas,this.ctx),this}stop(){return Rs.stop(this),this}resize(e,r){Rs.running(this)?this._resizeBeforeDraw={width:e,height:r}:this._resize(e,r)}_resize(e,r){const n=this.options,s=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,e,r,i),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,pp(this,o,!0)&&(this.notifyPlugins("resize",{size:a}),Vt(n.onResize,[this,a],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const r=this.options.scales||{};Et(r,(n,s)=>{n.id=s})}buildOrUpdateScales(){const e=this.options,r=e.scales,n=this.scales,s=Object.keys(n).reduce((a,o)=>(a[o]=!1,a),{});let i=[];r&&(i=i.concat(Object.keys(r).map(a=>{const o=r[a],c=Hu(a,o),d=c==="r",u=c==="x";return{options:o,dposition:d?"chartArea":u?"bottom":"left",dtype:d?"radialLinear":u?"category":"linear"}}))),Et(i,a=>{const o=a.options,c=o.id,d=Hu(c,o),u=yt(o.type,a.dtype);(o.position===void 0||Bp(o.position,d)!==Bp(a.dposition))&&(o.position=a.dposition),s[c]=!0;let g=null;if(c in n&&n[c].type===u)g=n[c];else{const m=cs.getScale(u);g=new m({id:c,type:u,ctx:this.ctx,chart:this}),n[g.id]=g}g.init(o,e)}),Et(s,(a,o)=>{a||delete n[o]}),Et(n,a=>{Ln.configure(this,a,a.options),Ln.addBox(this,a)})}_updateMetasets(){const e=this._metasets,r=this.data.datasets.length,n=e.length;if(e.sort((s,i)=>s.index-i.index),n>r){for(let s=r;s<n;++s)this._destroyDatasetMeta(s);e.splice(r,n-r)}this._sortedMetasets=e.slice(0).sort(zp("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:r}}=this;e.length>r.length&&delete this._stacks,e.forEach((n,s)=>{r.filter(i=>i===n._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],r=this.data.datasets;let n,s;for(this._removeUnreferencedMetasets(),n=0,s=r.length;n<s;n++){const i=r[n];let a=this.getDatasetMeta(n);const o=i.type||this.config.type;if(a.type&&a.type!==o&&(this._destroyDatasetMeta(n),a=this.getDatasetMeta(n)),a.type=o,a.indexAxis=i.indexAxis||Wu(o,this.options),a.order=i.order||0,a.index=n,a.label=""+i.label,a.visible=this.isDatasetVisible(n),a.controller)a.controller.updateIndex(n),a.controller.linkScales();else{const c=cs.getController(o),{datasetElementType:d,dataElementType:u}=ur.datasets[o];Object.assign(c,{dataElementType:cs.getElement(u),datasetElementType:d&&cs.getElement(d)}),a.controller=new c(this,n),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){Et(this.data.datasets,(e,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const r=this.config;r.update();const n=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let d=0,u=this.data.datasets.length;d<u;d++){const{controller:g}=this.getDatasetMeta(d),m=!s&&i.indexOf(g)===-1;g.buildOrUpdateElements(m),a=Math.max(+g.getMaxOverflow(),a)}a=this._minPadding=n.layout.autoPadding?a:0,this._updateLayout(a),s||Et(i,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(zp("z","_idx"));const{_active:o,_lastEvent:c}=this;c?this._eventHandler(c,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){Et(this.scales,e=>{Ln.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,r=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!tp(r,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,r=this._getUniformDataChanges()||[];for(const{method:n,start:s,count:i}of r){const a=n==="_removeElements"?-i:i;ck(e,s,a)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const r=this.data.datasets.length,n=i=>new Set(e.filter(a=>a[0]===i).map((a,o)=>o+","+a.splice(1).join(","))),s=n(0);for(let i=1;i<r;i++)if(!tp(s,n(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ln.update(this,this.width,this.height,e);const r=this.chartArea,n=r.width<=0||r.height<=0;this._layers=[],Et(this.boxes,s=>{n&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let r=0,n=this.data.datasets.length;r<n;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,n=this.data.datasets.length;r<n;++r)this._updateDataset(r,hi(e)?e({datasetIndex:r}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,r){const n=this.getDatasetMeta(e),s={meta:n,index:e,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(n.controller._update(r),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Rs.has(this)?this.attached&&!Rs.running(this)&&Rs.start(this):(this.draw(),Up({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const r=this._layers;for(e=0;e<r.length&&r[e].z<=0;++e)r[e].draw(this.chartArea);for(this._drawDatasets();e<r.length;++e)r[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const r=this._sortedMetasets,n=[];let s,i;for(s=0,i=r.length;s<i;++s){const a=r[s];(!e||a.visible)&&n.push(a)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let r=e.length-1;r>=0;--r)this._drawDataset(e[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const r=this.ctx,n={meta:e,index:e.index,cancelable:!0},s=Tv(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(s&&Sh(r,s),e.controller.draw(),s&&Ah(r),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return zo(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,r,n,s){const i=ow.modes[r];return typeof i=="function"?i(this,e,n,s):[]}getDatasetMeta(e){const r=this.data.datasets[e],n=this._metasets;let s=n.filter(i=>i&&i._dataset===r).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:e,_dataset:r,_parsed:[],_sorted:!1},n.push(s)),s}getContext(){return this.$context||(this.$context=Ki(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const r=this.data.datasets[e];if(!r)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!r.hidden}setDatasetVisibility(e,r){const n=this.getDatasetMeta(e);n.hidden=!r}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,r,n){const s=n?"show":"hide",i=this.getDatasetMeta(e),a=i.controller._resolveAnimations(void 0,s);Ac(r)?(i.data[r].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),a.update(i,{visible:n}),this.update(o=>o.datasetIndex===e?s:void 0))}hide(e,r){this._updateVisibility(e,r,!1)}show(e,r){this._updateVisibility(e,r,!0)}_destroyDatasetMeta(e){const r=this._metasets[e];r&&r.controller&&r.controller._destroy(),delete this._metasets[e]}_stop(){let e,r;for(this.stop(),Rs.remove(this),e=0,r=this.data.datasets.length;e<r;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:r}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),up(e,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete pc[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,r=this.platform,n=(i,a)=>{r.addEventListener(this,i,a),e[i]=a},s=(i,a,o)=>{i.offsetX=a,i.offsetY=o,this._eventHandler(i)};Et(this.options.events,i=>n(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,r=this.platform,n=(c,d)=>{r.addEventListener(this,c,d),e[c]=d},s=(c,d)=>{e[c]&&(r.removeEventListener(this,c,d),delete e[c])},i=(c,d)=>{this.canvas&&this.resize(c,d)};let a;const o=()=>{s("attach",o),this.attached=!0,this.resize(),n("resize",i),n("detach",a)};a=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),n("attach",o)},r.isAttached(this.canvas)?o():a()}unbindEvents(){Et(this._listeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._listeners={},Et(this._responsiveListeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,r,n){const s=n?"set":"remove";let i,a,o,c;for(r==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),o=0,c=e.length;o<c;++o){a=e[o];const d=a&&this.getDatasetMeta(a.datasetIndex).controller;d&&d[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const r=this._active||[],n=e.map(({datasetIndex:i,index:a})=>{const o=this.getDatasetMeta(i);if(!o)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:o.data[a],index:a}});!_c(n,r)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,r))}notifyPlugins(e,r,n){return this._plugins.notify(this,e,r,n)}isPluginEnabled(e){return this._plugins._cache.filter(r=>r.plugin.id===e).length===1}_updateHoverStyles(e,r,n){const s=this.options.hover,i=(c,d)=>c.filter(u=>!d.some(g=>u.datasetIndex===g.datasetIndex&&u.index===g.index)),a=i(r,e),o=n?e:i(e,r);a.length&&this.updateHoverStyle(a,s.mode,!1),o.length&&s.mode&&this.updateHoverStyle(o,s.mode,!0)}_eventHandler(e,r){const n={event:e,replay:r,cancelable:!0,inChartArea:this.isPointInArea(e)},s=a=>(a.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,s)===!1)return;const i=this._handleEvent(e,r,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,s),(i||n.changed)&&this.render(),this}_handleEvent(e,r,n){const{_active:s=[],options:i}=this,a=r,o=this._getActiveElements(e,s,n,a),c=m5(e),d=dk(e,this._lastEvent,n,c);n&&(this._lastEvent=null,Vt(i.onHover,[e,o,this],this),c&&Vt(i.onClick,[e,o,this],this));const u=!_c(o,s);return(u||r)&&(this._active=o,this._updateHoverStyles(o,s,r)),this._lastEvent=d,u}_getActiveElements(e,r,n,s){if(e.type==="mouseout")return[];if(!n)return r;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,s)}};function Wp(){return Et(Zo.instances,t=>t._plugins.invalidate())}function uk(t,e,r){const{startAngle:n,x:s,y:i,outerRadius:a,innerRadius:o,options:c}=e,{borderWidth:d,borderJoinStyle:u}=c,g=Math.min(d/a,Wn(n-r));if(t.beginPath(),t.arc(s,i,a-d/2,n+g/2,r-g/2),o>0){const m=Math.min(d/o,Wn(n-r));t.arc(s,i,o+d/2,r-m/2,n+m/2,!0)}else{const m=Math.min(d/2,a*Wn(n-r));if(u==="round")t.arc(s,i,m,r-Dt/2,n+Dt/2,!0);else if(u==="bevel"){const f=2*m*m,x=-f*Math.cos(r+Dt/2)+s,v=-f*Math.sin(r+Dt/2)+i,y=f*Math.cos(n+Dt/2)+s,k=f*Math.sin(n+Dt/2)+i;t.lineTo(x,v),t.lineTo(y,k)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function hk(t,e,r){const{startAngle:n,pixelMargin:s,x:i,y:a,outerRadius:o,innerRadius:c}=e;let d=s/o;t.beginPath(),t.arc(i,a,o,n-d,r+d),c>s?(d=s/c,t.arc(i,a,c,r+d,n-d,!0)):t.arc(i,a,s,r+Sr,n-Sr),t.closePath(),t.clip()}function fk(t){return Ch(t,["outerStart","outerEnd","innerStart","innerEnd"])}function pk(t,e,r,n){const s=fk(t.options.borderRadius),i=(r-e)/2,a=Math.min(i,n*e/2),o=c=>{const d=(r-Math.min(i,c))*n/2;return Zr(c,0,Math.min(i,d))};return{outerStart:o(s.outerStart),outerEnd:o(s.outerEnd),innerStart:Zr(s.innerStart,0,a),innerEnd:Zr(s.innerEnd,0,a)}}function pa(t,e,r,n){return{x:r+t*Math.cos(e),y:n+t*Math.sin(e)}}function Ec(t,e,r,n,s,i){const{x:a,y:o,startAngle:c,pixelMargin:d,innerRadius:u}=e,g=Math.max(e.outerRadius+n+r-d,0),m=u>0?u+n+r+d:0;let f=0;const x=s-c;if(n){const V=u>0?u-n:0,te=g>0?g-n:0,ne=(V+te)/2,se=ne!==0?x*ne/(ne+n):x;f=(x-se)/2}const v=Math.max(.001,x*g-r/Dt)/g,y=(x-v)/2,k=c+y+f,A=s-y-f,{outerStart:D,outerEnd:L,innerStart:q,innerEnd:z}=pk(e,m,g,A-k),$=g-D,j=g-L,_=k+D/$,M=A-L/j,S=m+q,C=m+z,R=k+q/S,F=A-z/C;if(t.beginPath(),i){const V=(_+M)/2;if(t.arc(a,o,g,_,V),t.arc(a,o,g,V,M),L>0){const K=pa(j,M,a,o);t.arc(K.x,K.y,L,M,A+Sr)}const te=pa(C,A,a,o);if(t.lineTo(te.x,te.y),z>0){const K=pa(C,F,a,o);t.arc(K.x,K.y,z,A+Sr,F+Math.PI)}const ne=(A-z/m+(k+q/m))/2;if(t.arc(a,o,m,A-z/m,ne,!0),t.arc(a,o,m,ne,k+q/m,!0),q>0){const K=pa(S,R,a,o);t.arc(K.x,K.y,q,R+Math.PI,k-Sr)}const se=pa($,k,a,o);if(t.lineTo(se.x,se.y),D>0){const K=pa($,_,a,o);t.arc(K.x,K.y,D,k-Sr,_)}}else{t.moveTo(a,o);const V=Math.cos(_)*g+a,te=Math.sin(_)*g+o;t.lineTo(V,te);const ne=Math.cos(M)*g+a,se=Math.sin(M)*g+o;t.lineTo(ne,se)}t.closePath()}function gk(t,e,r,n,s){const{fullCircles:i,startAngle:a,circumference:o}=e;let c=e.endAngle;if(i){Ec(t,e,r,n,c,s);for(let d=0;d<i;++d)t.fill();isNaN(o)||(c=a+(o%nr||nr))}return Ec(t,e,r,n,c,s),t.fill(),c}function mk(t,e,r,n,s){const{fullCircles:i,startAngle:a,circumference:o,options:c}=e,{borderWidth:d,borderJoinStyle:u,borderDash:g,borderDashOffset:m,borderRadius:f}=c,x=c.borderAlign==="inner";if(!d)return;t.setLineDash(g||[]),t.lineDashOffset=m,x?(t.lineWidth=d*2,t.lineJoin=u||"round"):(t.lineWidth=d,t.lineJoin=u||"bevel");let v=e.endAngle;if(i){Ec(t,e,r,n,v,s);for(let y=0;y<i;++y)t.stroke();isNaN(o)||(v=a+(o%nr||nr))}x&&hk(t,e,v),c.selfJoin&&v-a>=Dt&&f===0&&u!=="miter"&&uk(t,e,v),i||(Ec(t,e,r,n,v,s),t.stroke())}class xk extends pi{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,r,n){const s=this.getProps(["x","y"],n),{angle:i,distance:a}=W0(s,{x:e,y:r}),{startAngle:o,endAngle:c,innerRadius:d,outerRadius:u,circumference:g}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),m=(this.options.spacing+this.options.borderWidth)/2,f=yt(g,c-o),x=Bo(i,o,c)&&o!==c,v=f>=nr||x,y=wa(a,d+m,u+m);return v&&y}getCenterPoint(e){const{x:r,y:n,startAngle:s,endAngle:i,innerRadius:a,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:c,spacing:d}=this.options,u=(s+i)/2,g=(a+o+d+c)/2;return{x:r+Math.cos(u)*g,y:n+Math.sin(u)*g}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:r,circumference:n}=this,s=(r.offset||0)/4,i=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=n>nr?Math.floor(n/nr):0,n===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const o=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(o)*s,Math.sin(o)*s);const c=1-Math.sin(Math.min(Dt,n||0)),d=s*c;e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,gk(e,this,d,i,a),mk(e,this,d,i,a),e.restore()}}function px(t,e,r=e){t.lineCap=yt(r.borderCapStyle,e.borderCapStyle),t.setLineDash(yt(r.borderDash,e.borderDash)),t.lineDashOffset=yt(r.borderDashOffset,e.borderDashOffset),t.lineJoin=yt(r.borderJoinStyle,e.borderJoinStyle),t.lineWidth=yt(r.borderWidth,e.borderWidth),t.strokeStyle=yt(r.borderColor,e.borderColor)}function bk(t,e,r){t.lineTo(r.x,r.y)}function yk(t){return t.stepped?H5:t.tension||t.cubicInterpolationMode==="monotone"?V5:bk}function gx(t,e,r={}){const n=t.length,{start:s=0,end:i=n-1}=r,{start:a,end:o}=e,c=Math.max(s,a),d=Math.min(i,o),u=s<a&&i<a||s>o&&i>o;return{count:n,start:c,loop:e.loop,ilen:d<c&&!u?n+d-c:d-c}}function vk(t,e,r,n){const{points:s,options:i}=e,{count:a,start:o,loop:c,ilen:d}=gx(s,r,n),u=yk(i);let{move:g=!0,reverse:m}=n||{},f,x,v;for(f=0;f<=d;++f)x=s[(o+(m?d-f:f))%a],!x.skip&&(g?(t.moveTo(x.x,x.y),g=!1):u(t,v,x,m,i.stepped),v=x);return c&&(x=s[(o+(m?d:0))%a],u(t,v,x,m,i.stepped)),!!c}function wk(t,e,r,n){const s=e.points,{count:i,start:a,ilen:o}=gx(s,r,n),{move:c=!0,reverse:d}=n||{};let u=0,g=0,m,f,x,v,y,k;const A=L=>(a+(d?o-L:L))%i,D=()=>{v!==y&&(t.lineTo(u,y),t.lineTo(u,v),t.lineTo(u,k))};for(c&&(f=s[A(0)],t.moveTo(f.x,f.y)),m=0;m<=o;++m){if(f=s[A(m)],f.skip)continue;const L=f.x,q=f.y,z=L|0;z===x?(q<v?v=q:q>y&&(y=q),u=(g*u+L)/++g):(D(),t.lineTo(L,q),x=z,g=0,v=y=q),k=q}D()}function Vu(t){const e=t.options,r=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!r?wk:vk}function kk(t){return t.stepped?jv:t.tension||t.cubicInterpolationMode==="monotone"?_v:Ti}function Nk(t,e,r,n){let s=e._path;s||(s=e._path=new Path2D,e.path(s,r,n)&&s.closePath()),px(t,e.options),t.stroke(s)}function jk(t,e,r,n){const{segments:s,options:i}=e,a=Vu(e);for(const o of s)px(t,i,o.style),t.beginPath(),a(t,e,o,{start:r,end:r+n-1})&&t.closePath(),t.stroke()}const _k=typeof Path2D=="function";function Sk(t,e,r,n){_k&&!e.options.segment?Nk(t,e,r,n):jk(t,e,r,n)}class Ak extends pi{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,r){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const s=n.spanGaps?this._loop:this._fullLoop;mv(this._points,n,e,s,r),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Dv(this,this.options.segment))}first(){const e=this.segments,r=this.points;return e.length&&r[e[0].start]}last(){const e=this.segments,r=this.points,n=e.length;return n&&r[e[n-1].end]}interpolate(e,r){const n=this.options,s=e[r],i=this.points,a=Lv(this,{property:r,start:s,end:s});if(!a.length)return;const o=[],c=kk(n);let d,u;for(d=0,u=a.length;d<u;++d){const{start:g,end:m}=a[d],f=i[g],x=i[m];if(f===x){o.push(f);continue}const v=Math.abs((s-f[r])/(x[r]-f[r])),y=c(f,x,v,n.stepped);y[r]=e[r],o.push(y)}return o.length===1?o[0]:o}pathSegment(e,r,n){return Vu(this)(e,this,r,n)}path(e,r,n){const s=this.segments,i=Vu(this);let a=this._loop;r=r||0,n=n||this.points.length-r;for(const o of s)a&=i(e,this,o,{start:r,end:r+n-1});return!!a}draw(e,r,n,s){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),Sk(e,this,n,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Hp(t,e,r,n){const s=t.options,{[r]:i}=t.getProps([r],n);return Math.abs(e-i)<s.radius+s.hitRadius}class Ck extends pi{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,r,n){const s=this.options,{x:i,y:a}=this.getProps(["x","y"],n);return Math.pow(e-i,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,r){return Hp(this,e,"x",r)}inYRange(e,r){return Hp(this,e,"y",r)}getCenterPoint(e){const{x:r,y:n}=this.getProps(["x","y"],e);return{x:r,y:n}}size(e){e=e||this.options||{};let r=e.radius||0;r=Math.max(r,r&&e.hoverRadius||0);const n=r&&e.borderWidth||0;return(r+n)*2}draw(e,r){const n=this.options;this.skip||n.radius<.1||!zo(this,r,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,Uu(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}const Vp=(t,e)=>{let{boxHeight:r=e,boxWidth:n=e}=t;return t.usePointStyle&&(r=Math.min(r,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:r,itemHeight:Math.max(e,r)}},Pk=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class $p extends pi{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r,n){this.maxWidth=e,this.maxHeight=r,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let r=Vt(e.generateLabels,[this.chart],this)||[];e.filter&&(r=r.filter(n=>e.filter(n,this.chart.data))),e.sort&&(r=r.sort((n,s)=>e.sort(n,s,this.chart.data))),this.options.reverse&&r.reverse(),this.legendItems=r}fit(){const{options:e,ctx:r}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,s=Vr(n.font),i=s.size,a=this._computeTitleHeight(),{boxWidth:o,itemHeight:c}=Vp(n,i);let d,u;r.font=s.string,this.isHorizontal()?(d=this.maxWidth,u=this._fitRows(a,i,o,c)+10):(u=this.maxHeight,d=this._fitCols(a,s,o,c)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,r,n,s){const{ctx:i,maxWidth:a,options:{labels:{padding:o}}}=this,c=this.legendHitBoxes=[],d=this.lineWidths=[0],u=s+o;let g=e;i.textAlign="left",i.textBaseline="middle";let m=-1,f=-u;return this.legendItems.forEach((x,v)=>{const y=n+r/2+i.measureText(x.text).width;(v===0||d[d.length-1]+y+2*o>a)&&(g+=u,d[d.length-(v>0?0:1)]=0,f+=u,m++),c[v]={left:0,top:f,row:m,width:y,height:s},d[d.length-1]+=y+o}),g}_fitCols(e,r,n,s){const{ctx:i,maxHeight:a,options:{labels:{padding:o}}}=this,c=this.legendHitBoxes=[],d=this.columnSizes=[],u=a-e;let g=o,m=0,f=0,x=0,v=0;return this.legendItems.forEach((y,k)=>{const{itemWidth:A,itemHeight:D}=Lk(n,r,i,y,s);k>0&&f+D+2*o>u&&(g+=m+o,d.push({width:m,height:f}),x+=m+o,v++,m=f=0),c[k]={left:x,top:f,col:v,width:A,height:D},m=Math.max(m,A),f+=D+o}),g+=m,d.push({width:m,height:f}),g}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:r,options:{align:n,labels:{padding:s},rtl:i}}=this,a=Na(i,this.left,this.width);if(this.isHorizontal()){let o=0,c=Wr(n,this.left+s,this.right-this.lineWidths[o]);for(const d of r)o!==d.row&&(o=d.row,c=Wr(n,this.left+s,this.right-this.lineWidths[o])),d.top+=this.top+e+s,d.left=a.leftForLtr(a.x(c),d.width),c+=d.width+s}else{let o=0,c=Wr(n,this.top+e+s,this.bottom-this.columnSizes[o].height);for(const d of r)d.col!==o&&(o=d.col,c=Wr(n,this.top+e+s,this.bottom-this.columnSizes[o].height)),d.top=c,d.left+=this.left+s,d.left=a.leftForLtr(a.x(d.left),d.width),c+=d.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Sh(e,this),this._draw(),Ah(e)}}_draw(){const{options:e,columnSizes:r,lineWidths:n,ctx:s}=this,{align:i,labels:a}=e,o=ur.color,c=Na(e.rtl,this.left,this.width),d=Vr(a.font),{padding:u}=a,g=d.size,m=g/2;let f;this.drawTitle(),s.textAlign=c.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=d.string;const{boxWidth:x,boxHeight:v,itemHeight:y}=Vp(a,g),k=function(z,$,j){if(isNaN(x)||x<=0||isNaN(v)||v<0)return;s.save();const _=yt(j.lineWidth,1);if(s.fillStyle=yt(j.fillStyle,o),s.lineCap=yt(j.lineCap,"butt"),s.lineDashOffset=yt(j.lineDashOffset,0),s.lineJoin=yt(j.lineJoin,"miter"),s.lineWidth=_,s.strokeStyle=yt(j.strokeStyle,o),s.setLineDash(yt(j.lineDash,[])),a.usePointStyle){const M={radius:v*Math.SQRT2/2,pointStyle:j.pointStyle,rotation:j.rotation,borderWidth:_},S=c.xPlus(z,x/2),C=$+m;G0(s,M,S,C,a.pointStyleWidth&&x)}else{const M=$+Math.max((g-v)/2,0),S=c.leftForLtr(z,x),C=Lo(j.borderRadius);s.beginPath(),Object.values(C).some(R=>R!==0)?qu(s,{x:S,y:M,w:x,h:v,radius:C}):s.rect(S,M,x,v),s.fill(),_!==0&&s.stroke()}s.restore()},A=function(z,$,j){Uo(s,j.text,z,$+y/2,d,{strikethrough:j.hidden,textAlign:c.textAlign(j.textAlign)})},D=this.isHorizontal(),L=this._computeTitleHeight();D?f={x:Wr(i,this.left+u,this.right-n[0]),y:this.top+u+L,line:0}:f={x:this.left+u,y:Wr(i,this.top+L+u,this.bottom-r[0].height),line:0},ex(this.ctx,e.textDirection);const q=y+u;this.legendItems.forEach((z,$)=>{s.strokeStyle=z.fontColor,s.fillStyle=z.fontColor;const j=s.measureText(z.text).width,_=c.textAlign(z.textAlign||(z.textAlign=a.textAlign)),M=x+m+j;let S=f.x,C=f.y;c.setWidth(this.width),D?$>0&&S+M+u>this.right&&(C=f.y+=q,f.line++,S=f.x=Wr(i,this.left+u,this.right-n[f.line])):$>0&&C+q>this.bottom&&(S=f.x=S+r[f.line].width+u,f.line++,C=f.y=Wr(i,this.top+L+u,this.bottom-r[f.line].height));const R=c.x(S);if(k(R,C,z),S=E5(_,S+x+m,D?S+M:this.right,e.rtl),A(c.x(S),C,z),D)f.x+=M+u;else if(typeof z.text!="string"){const F=d.lineHeight;f.y+=mx(z,F)+u}else f.y+=q}),tx(this.ctx,e.textDirection)}drawTitle(){const e=this.options,r=e.title,n=Vr(r.font),s=On(r.padding);if(!r.display)return;const i=Na(e.rtl,this.left,this.width),a=this.ctx,o=r.position,c=n.size/2,d=s.top+c;let u,g=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),u=this.top+d,g=Wr(e.align,g,this.right-m);else{const x=this.columnSizes.reduce((v,y)=>Math.max(v,y.height),0);u=d+Wr(e.align,this.top,this.bottom-x-e.labels.padding-this._computeTitleHeight())}const f=Wr(o,g,g+m);a.textAlign=i.textAlign(Nh(o)),a.textBaseline="middle",a.strokeStyle=r.color,a.fillStyle=r.color,a.font=n.string,Uo(a,r.text,f,u,n)}_computeTitleHeight(){const e=this.options.title,r=Vr(e.font),n=On(e.padding);return e.display?r.lineHeight+n.height:0}_getLegendItemAt(e,r){let n,s,i;if(wa(e,this.left,this.right)&&wa(r,this.top,this.bottom)){for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(s=i[n],wa(e,s.left,s.left+s.width)&&wa(r,s.top,s.top+s.height))return this.legendItems[n]}return null}handleEvent(e){const r=this.options;if(!Dk(e.type,r))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,i=Pk(s,n);s&&!i&&Vt(r.onLeave,[e,s,this],this),this._hoveredItem=n,n&&!i&&Vt(r.onHover,[e,n,this],this)}else n&&Vt(r.onClick,[e,n,this],this)}}function Lk(t,e,r,n,s){const i=Ek(n,t,e,r),a=Ok(s,n,e.lineHeight);return{itemWidth:i,itemHeight:a}}function Ek(t,e,r,n){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((i,a)=>i.length>a.length?i:a)),e+r.size/2+n.measureText(s).width}function Ok(t,e,r){let n=t;return typeof e.text!="string"&&(n=mx(e,r)),n}function mx(t,e){const r=t.text?t.text.length:0;return e*r}function Dk(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var xx={id:"legend",_element:$p,start(t,e,r){const n=t.legend=new $p({ctx:t.ctx,options:r,chart:t});Ln.configure(t,n,r),Ln.addBox(t,n)},stop(t){Ln.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,r){const n=t.legend;Ln.configure(t,n,r),n.options=r},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,r){const n=e.datasetIndex,s=r.chart;s.isDatasetVisible(n)?(s.hide(n),e.hidden=!0):(s.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:r,pointStyle:n,textAlign:s,color:i,useBorderRadius:a,borderRadius:o}}=t.legend.options;return t._getSortedDatasetMetas().map(c=>{const d=c.controller.getStyle(r?0:void 0),u=On(d.borderWidth);return{text:e[c.index].label,fillStyle:d.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:d.borderColor,pointStyle:n||d.pointStyle,rotation:d.rotation,textAlign:s||d.textAlign,borderRadius:a&&(o||d.borderRadius),datasetIndex:c.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class bx extends pi{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=r;const s=Pr(n.text)?n.text.length:1;this._padding=On(n.padding);const i=s*Vr(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:r,left:n,bottom:s,right:i,options:a}=this,o=a.align;let c=0,d,u,g;return this.isHorizontal()?(u=Wr(o,n,i),g=r+e,d=i-n):(a.position==="left"?(u=n+e,g=Wr(o,s,r),c=Dt*-.5):(u=i-e,g=Wr(o,r,s),c=Dt*.5),d=s-r),{titleX:u,titleY:g,maxWidth:d,rotation:c}}draw(){const e=this.ctx,r=this.options;if(!r.display)return;const n=Vr(r.font),i=n.lineHeight/2+this._padding.top,{titleX:a,titleY:o,maxWidth:c,rotation:d}=this._drawArgs(i);Uo(e,r.text,0,0,n,{color:r.color,maxWidth:c,rotation:d,textAlign:Nh(r.align),textBaseline:"middle",translation:[a,o]})}}function Fk(t,e){const r=new bx({ctx:t.ctx,options:e,chart:t});Ln.configure(t,r,e),Ln.addBox(t,r),t.titleBlock=r}var Rk={id:"title",_element:bx,start(t,e,r){Fk(t,r)},stop(t){const e=t.titleBlock;Ln.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,r){const n=t.titleBlock;Ln.configure(t,n,r),n.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const _o={average(t){if(!t.length)return!1;let e,r,n=new Set,s=0,i=0;for(e=0,r=t.length;e<r;++e){const o=t[e].element;if(o&&o.hasValue()){const c=o.tooltipPosition();n.add(c.x),s+=c.y,++i}}return i===0||n.size===0?!1:{x:[...n].reduce((o,c)=>o+c)/n.size,y:s/i}},nearest(t,e){if(!t.length)return!1;let r=e.x,n=e.y,s=Number.POSITIVE_INFINITY,i,a,o;for(i=0,a=t.length;i<a;++i){const c=t[i].element;if(c&&c.hasValue()){const d=c.getCenterPoint(),u=Bu(e,d);u<s&&(s=u,o=c)}}if(o){const c=o.tooltipPosition();r=c.x,n=c.y}return{x:r,y:n}}};function os(t,e){return e&&(Pr(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Ms(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function Mk(t,e){const{element:r,datasetIndex:n,index:s}=e,i=t.getDatasetMeta(n).controller,{label:a,value:o}=i.getLabelAndValue(s);return{chart:t,label:a,parsed:i.getParsed(s),raw:t.data.datasets[n].data[s],formattedValue:o,dataset:i.getDataset(),dataIndex:s,datasetIndex:n,element:r}}function Yp(t,e){const r=t.chart.ctx,{body:n,footer:s,title:i}=t,{boxWidth:a,boxHeight:o}=e,c=Vr(e.bodyFont),d=Vr(e.titleFont),u=Vr(e.footerFont),g=i.length,m=s.length,f=n.length,x=On(e.padding);let v=x.height,y=0,k=n.reduce((L,q)=>L+q.before.length+q.lines.length+q.after.length,0);if(k+=t.beforeBody.length+t.afterBody.length,g&&(v+=g*d.lineHeight+(g-1)*e.titleSpacing+e.titleMarginBottom),k){const L=e.displayColors?Math.max(o,c.lineHeight):c.lineHeight;v+=f*L+(k-f)*c.lineHeight+(k-1)*e.bodySpacing}m&&(v+=e.footerMarginTop+m*u.lineHeight+(m-1)*e.footerSpacing);let A=0;const D=function(L){y=Math.max(y,r.measureText(L).width+A)};return r.save(),r.font=d.string,Et(t.title,D),r.font=c.string,Et(t.beforeBody.concat(t.afterBody),D),A=e.displayColors?a+2+e.boxPadding:0,Et(n,L=>{Et(L.before,D),Et(L.lines,D),Et(L.after,D)}),A=0,r.font=u.string,Et(t.footer,D),r.restore(),y+=x.width,{width:y,height:v}}function Tk(t,e){const{y:r,height:n}=e;return r<n/2?"top":r>t.height-n/2?"bottom":"center"}function Ik(t,e,r,n){const{x:s,width:i}=n,a=r.caretSize+r.caretPadding;if(t==="left"&&s+i+a>e.width||t==="right"&&s-i-a<0)return!0}function Bk(t,e,r,n){const{x:s,width:i}=r,{width:a,chartArea:{left:o,right:c}}=t;let d="center";return n==="center"?d=s<=(o+c)/2?"left":"right":s<=i/2?d="left":s>=a-i/2&&(d="right"),Ik(d,t,e,r)&&(d="center"),d}function Gp(t,e,r){const n=r.yAlign||e.yAlign||Tk(t,r);return{xAlign:r.xAlign||e.xAlign||Bk(t,e,r,n),yAlign:n}}function zk(t,e){let{x:r,width:n}=t;return e==="right"?r-=n:e==="center"&&(r-=n/2),r}function Uk(t,e,r){let{y:n,height:s}=t;return e==="top"?n+=r:e==="bottom"?n-=s+r:n-=s/2,n}function Xp(t,e,r,n){const{caretSize:s,caretPadding:i,cornerRadius:a}=t,{xAlign:o,yAlign:c}=r,d=s+i,{topLeft:u,topRight:g,bottomLeft:m,bottomRight:f}=Lo(a);let x=zk(e,o);const v=Uk(e,c,d);return c==="center"?o==="left"?x+=d:o==="right"&&(x-=d):o==="left"?x-=Math.max(u,m)+s:o==="right"&&(x+=Math.max(g,f)+s),{x:Zr(x,0,n.width-e.width),y:Zr(v,0,n.height-e.height)}}function Jl(t,e,r){const n=On(r.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function Jp(t){return os([],Ms(t))}function qk(t,e,r){return Ki(t,{tooltip:e,tooltipItems:r,type:"tooltip"})}function Kp(t,e){const r=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return r?t.override(r):t}const yx={beforeTitle:Os,title(t){if(t.length>0){const e=t[0],r=e.chart.data.labels,n=r?r.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return r[e.dataIndex]}return""},afterTitle:Os,beforeBody:Os,beforeLabel:Os,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const r=t.formattedValue;return Ut(r)||(e+=r),e},labelColor(t){const r=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:r.borderColor,backgroundColor:r.backgroundColor,borderWidth:r.borderWidth,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const r=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:r.pointStyle,rotation:r.rotation}},afterLabel:Os,afterBody:Os,beforeFooter:Os,footer:Os,afterFooter:Os};function tn(t,e,r,n){const s=t[e].call(r,n);return typeof s>"u"?yx[e].call(r,n):s}class Zp extends pi{static positioners=_o;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const r=this.chart,n=this.options.setContext(this.getContext()),s=n.enabled&&r.options.animation&&n.animations,i=new nx(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=qk(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,r){const{callbacks:n}=r,s=tn(n,"beforeTitle",this,e),i=tn(n,"title",this,e),a=tn(n,"afterTitle",this,e);let o=[];return o=os(o,Ms(s)),o=os(o,Ms(i)),o=os(o,Ms(a)),o}getBeforeBody(e,r){return Jp(tn(r.callbacks,"beforeBody",this,e))}getBody(e,r){const{callbacks:n}=r,s=[];return Et(e,i=>{const a={before:[],lines:[],after:[]},o=Kp(n,i);os(a.before,Ms(tn(o,"beforeLabel",this,i))),os(a.lines,tn(o,"label",this,i)),os(a.after,Ms(tn(o,"afterLabel",this,i))),s.push(a)}),s}getAfterBody(e,r){return Jp(tn(r.callbacks,"afterBody",this,e))}getFooter(e,r){const{callbacks:n}=r,s=tn(n,"beforeFooter",this,e),i=tn(n,"footer",this,e),a=tn(n,"afterFooter",this,e);let o=[];return o=os(o,Ms(s)),o=os(o,Ms(i)),o=os(o,Ms(a)),o}_createItems(e){const r=this._active,n=this.chart.data,s=[],i=[],a=[];let o=[],c,d;for(c=0,d=r.length;c<d;++c)o.push(Mk(this.chart,r[c]));return e.filter&&(o=o.filter((u,g,m)=>e.filter(u,g,m,n))),e.itemSort&&(o=o.sort((u,g)=>e.itemSort(u,g,n))),Et(o,u=>{const g=Kp(e.callbacks,u);s.push(tn(g,"labelColor",this,u)),i.push(tn(g,"labelPointStyle",this,u)),a.push(tn(g,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=a,this.dataPoints=o,o}update(e,r){const n=this.options.setContext(this.getContext()),s=this._active;let i,a=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const o=_o[n.position].call(this,s,this._eventPosition);a=this._createItems(n),this.title=this.getTitle(a,n),this.beforeBody=this.getBeforeBody(a,n),this.body=this.getBody(a,n),this.afterBody=this.getAfterBody(a,n),this.footer=this.getFooter(a,n);const c=this._size=Yp(this,n),d=Object.assign({},o,c),u=Gp(this.chart,n,d),g=Xp(n,d,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:g.x,y:g.y,width:c.width,height:c.height,caretX:o.x,caretY:o.y}}this._tooltipItems=a,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(e,r,n,s){const i=this.getCaretPosition(e,n,s);r.lineTo(i.x1,i.y1),r.lineTo(i.x2,i.y2),r.lineTo(i.x3,i.y3)}getCaretPosition(e,r,n){const{xAlign:s,yAlign:i}=this,{caretSize:a,cornerRadius:o}=n,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:g}=Lo(o),{x:m,y:f}=e,{width:x,height:v}=r;let y,k,A,D,L,q;return i==="center"?(L=f+v/2,s==="left"?(y=m,k=y-a,D=L+a,q=L-a):(y=m+x,k=y+a,D=L-a,q=L+a),A=y):(s==="left"?k=m+Math.max(c,u)+a:s==="right"?k=m+x-Math.max(d,g)-a:k=this.caretX,i==="top"?(D=f,L=D-a,y=k-a,A=k+a):(D=f+v,L=D+a,y=k+a,A=k-a),q=D),{x1:y,x2:k,x3:A,y1:D,y2:L,y3:q}}drawTitle(e,r,n){const s=this.title,i=s.length;let a,o,c;if(i){const d=Na(n.rtl,this.x,this.width);for(e.x=Jl(this,n.titleAlign,n),r.textAlign=d.textAlign(n.titleAlign),r.textBaseline="middle",a=Vr(n.titleFont),o=n.titleSpacing,r.fillStyle=n.titleColor,r.font=a.string,c=0;c<i;++c)r.fillText(s[c],d.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+o,c+1===i&&(e.y+=n.titleMarginBottom-o)}}_drawColorBox(e,r,n,s,i){const a=this.labelColors[n],o=this.labelPointStyles[n],{boxHeight:c,boxWidth:d}=i,u=Vr(i.bodyFont),g=Jl(this,"left",i),m=s.x(g),f=c<u.lineHeight?(u.lineHeight-c)/2:0,x=r.y+f;if(i.usePointStyle){const v={radius:Math.min(d,c)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},y=s.leftForLtr(m,d)+d/2,k=x+c/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,Uu(e,v,y,k),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,Uu(e,v,y,k)}else{e.lineWidth=_t(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const v=s.leftForLtr(m,d),y=s.leftForLtr(s.xPlus(m,1),d-2),k=Lo(a.borderRadius);Object.values(k).some(A=>A!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,qu(e,{x:v,y:x,w:d,h:c,radius:k}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),qu(e,{x:y,y:x+1,w:d-2,h:c-2,radius:k}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(v,x,d,c),e.strokeRect(v,x,d,c),e.fillStyle=a.backgroundColor,e.fillRect(y,x+1,d-2,c-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,r,n){const{body:s}=this,{bodySpacing:i,bodyAlign:a,displayColors:o,boxHeight:c,boxWidth:d,boxPadding:u}=n,g=Vr(n.bodyFont);let m=g.lineHeight,f=0;const x=Na(n.rtl,this.x,this.width),v=function(j){r.fillText(j,x.x(e.x+f),e.y+m/2),e.y+=m+i},y=x.textAlign(a);let k,A,D,L,q,z,$;for(r.textAlign=a,r.textBaseline="middle",r.font=g.string,e.x=Jl(this,y,n),r.fillStyle=n.bodyColor,Et(this.beforeBody,v),f=o&&y!=="right"?a==="center"?d/2+u:d+2+u:0,L=0,z=s.length;L<z;++L){for(k=s[L],A=this.labelTextColors[L],r.fillStyle=A,Et(k.before,v),D=k.lines,o&&D.length&&(this._drawColorBox(r,e,L,x,n),m=Math.max(g.lineHeight,c)),q=0,$=D.length;q<$;++q)v(D[q]),m=g.lineHeight;Et(k.after,v)}f=0,m=g.lineHeight,Et(this.afterBody,v),e.y-=i}drawFooter(e,r,n){const s=this.footer,i=s.length;let a,o;if(i){const c=Na(n.rtl,this.x,this.width);for(e.x=Jl(this,n.footerAlign,n),e.y+=n.footerMarginTop,r.textAlign=c.textAlign(n.footerAlign),r.textBaseline="middle",a=Vr(n.footerFont),r.fillStyle=n.footerColor,r.font=a.string,o=0;o<i;++o)r.fillText(s[o],c.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+n.footerSpacing}}drawBackground(e,r,n,s){const{xAlign:i,yAlign:a}=this,{x:o,y:c}=e,{width:d,height:u}=n,{topLeft:g,topRight:m,bottomLeft:f,bottomRight:x}=Lo(s.cornerRadius);r.fillStyle=s.backgroundColor,r.strokeStyle=s.borderColor,r.lineWidth=s.borderWidth,r.beginPath(),r.moveTo(o+g,c),a==="top"&&this.drawCaret(e,r,n,s),r.lineTo(o+d-m,c),r.quadraticCurveTo(o+d,c,o+d,c+m),a==="center"&&i==="right"&&this.drawCaret(e,r,n,s),r.lineTo(o+d,c+u-x),r.quadraticCurveTo(o+d,c+u,o+d-x,c+u),a==="bottom"&&this.drawCaret(e,r,n,s),r.lineTo(o+f,c+u),r.quadraticCurveTo(o,c+u,o,c+u-f),a==="center"&&i==="left"&&this.drawCaret(e,r,n,s),r.lineTo(o,c+g),r.quadraticCurveTo(o,c,o+g,c),r.closePath(),r.fill(),s.borderWidth>0&&r.stroke()}_updateAnimationTarget(e){const r=this.chart,n=this.$animations,s=n&&n.x,i=n&&n.y;if(s||i){const a=_o[e.position].call(this,this._active,this._eventPosition);if(!a)return;const o=this._size=Yp(this,e),c=Object.assign({},a,this._size),d=Gp(r,e,c),u=Xp(e,c,d,r);(s._to!==u.x||i._to!==u.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=o.width,this.height=o.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const r=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(r);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const a=On(r.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&o&&(e.save(),e.globalAlpha=n,this.drawBackground(i,e,s,r),ex(e,r.textDirection),i.y+=a.top,this.drawTitle(i,e,r),this.drawBody(i,e,r),this.drawFooter(i,e,r),tx(e,r.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,r){const n=this._active,s=e.map(({datasetIndex:o,index:c})=>{const d=this.chart.getDatasetMeta(o);if(!d)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:d.data[c],index:c}}),i=!_c(n,s),a=this._positionChanged(s,r);(i||a)&&(this._active=s,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,r,n=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],a=this._getActiveElements(e,i,r,n),o=this._positionChanged(a,e),c=r||!_c(a,i)||o;return c&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,r))),c}_getActiveElements(e,r,n,s){const i=this.options;if(e.type==="mouseout")return[];if(!s)return r.filter(o=>this.chart.data.datasets[o.datasetIndex]&&this.chart.getDatasetMeta(o.datasetIndex).controller.getParsed(o.index)!==void 0);const a=this.chart.getElementsAtEventForMode(e,i.mode,i,n);return i.reverse&&a.reverse(),a}_positionChanged(e,r){const{caretX:n,caretY:s,options:i}=this,a=_o[i.position].call(this,e,r);return a!==!1&&(n!==a.x||s!==a.y)}}var vx={id:"tooltip",_element:Zp,positioners:_o,afterInit(t,e,r){r&&(t.tooltip=new Zp({chart:t,options:r}))},beforeUpdate(t,e,r){t.tooltip&&t.tooltip.initialize(r)},reset(t,e,r){t.tooltip&&t.tooltip.initialize(r)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const r={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...r,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",r)}},afterEvent(t,e){if(t.tooltip){const r=e.replay;t.tooltip.handleEvent(e.event,r,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:yx},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Wk=(t,e,r,n)=>(typeof e=="string"?(r=t.push(e)-1,n.unshift({index:r,label:e})):isNaN(e)&&(r=null),r);function Hk(t,e,r,n){const s=t.indexOf(e);if(s===-1)return Wk(t,e,r,n);const i=t.lastIndexOf(e);return s!==i?r:s}const Vk=(t,e)=>t===null?null:Zr(Math.round(t),0,e);function Qp(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class $k extends Ta{static id="category";static defaults={ticks:{callback:Qp}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const r=this._addedLabels;if(r.length){const n=this.getLabels();for(const{index:s,label:i}of r)n[s]===i&&n.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,r){if(Ut(e))return null;const n=this.getLabels();return r=isFinite(r)&&n[r]===e?r:Hk(n,e,yt(r,e),this._addedLabels),Vk(r,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:r}=this.getUserBounds();let{min:n,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),r||(s=this.getLabels().length-1)),this.min=n,this.max=s}buildTicks(){const e=this.min,r=this.max,n=this.options.offset,s=[];let i=this.getLabels();i=e===0&&r===i.length-1?i:i.slice(e,r+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let a=e;a<=r;a++)s.push({value:a});return s}getLabelForValue(e){return Qp.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function Yk(t,e){const r=[],{bounds:s,step:i,min:a,max:o,precision:c,count:d,maxTicks:u,maxDigits:g,includeBounds:m}=t,f=i||1,x=u-1,{min:v,max:y}=e,k=!Ut(a),A=!Ut(o),D=!Ut(d),L=(y-v)/(g+1);let q=np((y-v)/x/f)*f,z,$,j,_;if(q<1e-14&&!k&&!A)return[{value:v},{value:y}];_=Math.ceil(y/q)-Math.floor(v/q),_>x&&(q=np(_*q/x/f)*f),Ut(c)||(z=Math.pow(10,c),q=Math.ceil(q*z)/z),s==="ticks"?($=Math.floor(v/q)*q,j=Math.ceil(y/q)*q):($=v,j=y),k&&A&&i&&w5((o-a)/i,q/1e3)?(_=Math.round(Math.min((o-a)/q,u)),q=(o-a)/_,$=a,j=o):D?($=k?a:$,j=A?o:j,_=d-1,q=(j-$)/_):(_=(j-$)/q,Ao(_,Math.round(_),q/1e3)?_=Math.round(_):_=Math.ceil(_));const M=Math.max(sp(q),sp($));z=Math.pow(10,Ut(c)?M:c),$=Math.round($*z)/z,j=Math.round(j*z)/z;let S=0;for(k&&(m&&$!==a?(r.push({value:a}),$<a&&S++,Ao(Math.round(($+S*q)*z)/z,a,eg(a,L,t))&&S++):$<a&&S++);S<_;++S){const C=Math.round(($+S*q)*z)/z;if(A&&C>o)break;r.push({value:C})}return A&&m&&j!==o?r.length&&Ao(r[r.length-1].value,o,eg(o,L,t))?r[r.length-1].value=o:r.push({value:o}):(!A||j===o)&&r.push({value:j}),r}function eg(t,e,{horizontal:r,minRotation:n}){const s=Bs(n),i=(r?Math.sin(s):Math.cos(s))||.001,a=.75*e*(""+t).length;return Math.min(e/i,a)}class Gk extends Ta{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,r){return Ut(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:r,maxDefined:n}=this.getUserBounds();let{min:s,max:i}=this;const a=c=>s=r?s:c,o=c=>i=n?i:c;if(e){const c=Ea(s),d=Ea(i);c<0&&d<0?o(0):c>0&&d>0&&a(0)}if(s===i){let c=i===0?1:Math.abs(i*.05);o(i+c),e||a(s-c)}this.min=s,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:r,stepSize:n}=e,s;return n?(s=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),r=r||11),r&&(s=Math.min(r,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,r=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const s={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:r.precision,step:r.stepSize,count:r.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:r.minRotation||0,includeBounds:r.includeBounds!==!1},i=this._range||this,a=Yk(s,i);return e.bounds==="ticks"&&k5(a,this,"value"),e.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const e=this.ticks;let r=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const s=(n-r)/Math.max(e.length-1,1)/2;r-=s,n+=s}this._startValue=r,this._endValue=n,this._valueRange=n-r}getLabelForValue(e){return _h(e,this.chart.options.locale,this.options.ticks.format)}}class Xk extends Gk{static id="linear";static defaults={ticks:{callback:Y0.formatters.numeric}};determineDataLimits(){const{min:e,max:r}=this.getMinMax(!0);this.min=En(e)?e:0,this.max=En(r)?r:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),r=e?this.width:this.height,n=Bs(this.options.ticks.minRotation),s=(e?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(r/Math.min(40,i.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const ed={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},rn=Object.keys(ed);function tg(t,e){return t-e}function rg(t,e){if(Ut(e))return null;const r=t._adapter,{parser:n,round:s,isoWeekday:i}=t._parseOpts;let a=e;return typeof n=="function"&&(a=n(a)),En(a)||(a=typeof n=="string"?r.parse(a,n):r.parse(a)),a===null?null:(s&&(a=s==="week"&&(Io(i)||i===!0)?r.startOf(a,"isoWeek",i):r.startOf(a,s)),+a)}function ng(t,e,r,n){const s=rn.length;for(let i=rn.indexOf(t);i<s-1;++i){const a=ed[rn[i]],o=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((r-e)/(o*a.size))<=n)return rn[i]}return rn[s-1]}function Jk(t,e,r,n,s){for(let i=rn.length-1;i>=rn.indexOf(r);i--){const a=rn[i];if(ed[a].common&&t._adapter.diff(s,n,a)>=e-1)return a}return rn[r?rn.indexOf(r):0]}function Kk(t){for(let e=rn.indexOf(t)+1,r=rn.length;e<r;++e)if(ed[rn[e]].common)return rn[e]}function sg(t,e,r){if(!r)t[e]=!0;else if(r.length){const{lo:n,hi:s}=kh(r,e),i=r[n]>=e?r[n]:r[s];t[i]=!0}}function Zk(t,e,r,n){const s=t._adapter,i=+s.startOf(e[0].value,n),a=e[e.length-1].value;let o,c;for(o=i;o<=a;o=+s.add(o,1,n))c=r[o],c>=0&&(e[c].major=!0);return e}function ig(t,e,r){const n=[],s={},i=e.length;let a,o;for(a=0;a<i;++a)o=e[a],s[o]=a,n.push({value:o,major:!1});return i===0||!r?n:Zk(t,n,s,r)}class ag extends Ta{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,r={}){const n=e.time||(e.time={}),s=this._adapter=new rw._date(e.adapters.date);s.init(r),So(n.displayFormats,s.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=r.normalized}parse(e,r){return e===void 0?null:rg(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,r=this._adapter,n=e.time.unit||"day";let{min:s,max:i,minDefined:a,maxDefined:o}=this.getUserBounds();function c(d){!a&&!isNaN(d.min)&&(s=Math.min(s,d.min)),!o&&!isNaN(d.max)&&(i=Math.max(i,d.max))}(!a||!o)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),s=En(s)&&!isNaN(s)?s:+r.startOf(Date.now(),n),i=En(i)&&!isNaN(i)?i:+r.endOf(Date.now(),n)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let r=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(r=e[0],n=e[e.length-1]),{min:r,max:n}}buildTicks(){const e=this.options,r=e.time,n=e.ticks,s=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,a=this.max,o=A5(s,i,a);return this._unit=r.unit||(n.autoSkip?ng(r.minUnit,this.min,this.max,this._getLabelCapacity(i)):Jk(this,o.length,r.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:Kk(this._unit),this.initOffsets(s),e.reverse&&o.reverse(),ig(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let r=0,n=0,s,i;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?r=1-s:r=(this.getDecimalForValue(e[1])-s)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?n=i:n=(i-this.getDecimalForValue(e[e.length-2]))/2);const a=e.length<3?.5:.25;r=Zr(r,0,a),n=Zr(n,0,a),this._offsets={start:r,end:n,factor:1/(r+1+n)}}_generate(){const e=this._adapter,r=this.min,n=this.max,s=this.options,i=s.time,a=i.unit||ng(i.minUnit,r,n,this._getLabelCapacity(r)),o=yt(s.ticks.stepSize,1),c=a==="week"?i.isoWeekday:!1,d=Io(c)||c===!0,u={};let g=r,m,f;if(d&&(g=+e.startOf(g,"isoWeek",c)),g=+e.startOf(g,d?"day":a),e.diff(n,r,a)>1e5*o)throw new Error(r+" and "+n+" are too far apart with stepSize of "+o+" "+a);const x=s.ticks.source==="data"&&this.getDataTimestamps();for(m=g,f=0;m<n;m=+e.add(m,o,a),f++)sg(u,m,x);return(m===n||s.bounds==="ticks"||f===1)&&sg(u,m,x),Object.keys(u).sort(tg).map(v=>+v)}getLabelForValue(e){const r=this._adapter,n=this.options.time;return n.tooltipFormat?r.format(e,n.tooltipFormat):r.format(e,n.displayFormats.datetime)}format(e,r){const s=this.options.time.displayFormats,i=this._unit,a=r||s[i];return this._adapter.format(e,a)}_tickFormatFunction(e,r,n,s){const i=this.options,a=i.ticks.callback;if(a)return Vt(a,[e,r,n],this);const o=i.time.displayFormats,c=this._unit,d=this._majorUnit,u=c&&o[c],g=d&&o[d],m=n[r],f=d&&g&&m&&m.major;return this._adapter.format(e,s||(f?g:u))}generateTickLabels(e){let r,n,s;for(r=0,n=e.length;r<n;++r)s=e[r],s.label=this._tickFormatFunction(s.value,r,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const r=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((r.start+n)*r.factor)}getValueForPixel(e){const r=this._offsets,n=this.getDecimalForPixel(e)/r.factor-r.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const r=this.options.ticks,n=this.ctx.measureText(e).width,s=Bs(this.isHorizontal()?r.maxRotation:r.minRotation),i=Math.cos(s),a=Math.sin(s),o=this._resolveTickFontOptions(0).size;return{w:n*i+o*a,h:n*a+o*i}}_getLabelCapacity(e){const r=this.options.time,n=r.displayFormats,s=n[r.unit]||n.millisecond,i=this._tickFormatFunction(e,0,ig(this,[e],this._majorUnit),s),a=this._getLabelSize(i),o=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return o>0?o:1}getDataTimestamps(){let e=this._cache.data||[],r,n;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(r=0,n=s.length;r<n;++r)e=e.concat(s[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let r,n;if(e.length)return e;const s=this.getLabels();for(r=0,n=s.length;r<n;++r)e.push(rg(this,s[r]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return P5(e.sort(tg))}}function Kl(t,e,r){let n=0,s=t.length-1,i,a,o,c;r?(e>=t[n].pos&&e<=t[s].pos&&({lo:n,hi:s}=qi(t,"pos",e)),{pos:i,time:o}=t[n],{pos:a,time:c}=t[s]):(e>=t[n].time&&e<=t[s].time&&({lo:n,hi:s}=qi(t,"time",e)),{time:i,pos:o}=t[n],{time:a,pos:c}=t[s]);const d=a-i;return d?o+(c-o)*(e-i)/d:o}class tC extends ag{static id="timeseries";static defaults=ag.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),r=this._table=this.buildLookupTable(e);this._minPos=Kl(r,this.min),this._tableRange=Kl(r,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:r,max:n}=this,s=[],i=[];let a,o,c,d,u;for(a=0,o=e.length;a<o;++a)d=e[a],d>=r&&d<=n&&s.push(d);if(s.length<2)return[{time:r,pos:0},{time:n,pos:1}];for(a=0,o=s.length;a<o;++a)u=s[a+1],c=s[a-1],d=s[a],Math.round((u+c)/2)!==d&&i.push({time:d,pos:a/(o-1)});return i}_generate(){const e=this.min,r=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(r)||n.length===1)&&n.push(r),n.sort((s,i)=>s-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const r=this.getDataTimestamps(),n=this.getLabelTimestamps();return r.length&&n.length?e=this.normalize(r.concat(n)):e=r.length?r:n,e=this._cache.all=e,e}getDecimalForValue(e){return(Kl(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const r=this._offsets,n=this.getDecimalForPixel(e)/r.factor-r.end;return Kl(this._table,n*this._tableRange+this._minPos,!0)}}const wx="label";function og(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function Qk(t,e){const r=t.options;r&&e&&Object.assign(r,e)}function kx(t,e){t.labels=e}function Nx(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:wx;const n=[];t.datasets=e.map(s=>{const i=t.datasets.find(a=>a[r]===s[r]);return!i||!s.data||n.includes(i)?{...s}:(n.push(i),Object.assign(i,s),i)})}function e4(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:wx;const r={labels:[],datasets:[]};return kx(r,t.labels),Nx(r,t.datasets,e),r}function t4(t,e){const{height:r=150,width:n=300,redraw:s=!1,datasetIdKey:i,type:a,data:o,options:c,plugins:d=[],fallbackContent:u,updateMode:g,...m}=t,f=Z.useRef(null),x=Z.useRef(null),v=()=>{f.current&&(x.current=new Zo(f.current,{type:a,data:e4(o,i),options:c&&{...c},plugins:d}),og(e,x.current))},y=()=>{og(e,null),x.current&&(x.current.destroy(),x.current=null)};return Z.useEffect(()=>{!s&&x.current&&c&&Qk(x.current,c)},[s,c]),Z.useEffect(()=>{!s&&x.current&&kx(x.current.config.data,o.labels)},[s,o.labels]),Z.useEffect(()=>{!s&&x.current&&o.datasets&&Nx(x.current.config.data,o.datasets,i)},[s,o.datasets]),Z.useEffect(()=>{x.current&&(s?(y(),setTimeout(v)):x.current.update(g))},[s,c,o.labels,o.datasets,g]),Z.useEffect(()=>{x.current&&(y(),setTimeout(v))},[a]),Z.useEffect(()=>(v(),()=>y()),[]),Jt.createElement("canvas",{ref:f,role:"img",height:r,width:n,...m},u)}const r4=Z.forwardRef(t4);function jx(t,e){return Zo.register(e),Z.forwardRef((r,n)=>Jt.createElement(r4,{...r,ref:n,type:t}))}const n4=jx("line",ew),s4=jx("pie",tw),_x=6048e5,i4=864e5,Sx=6e4,Ax=36e5,lg=Symbol.for("constructDateFrom");function Us(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&lg in t?t[lg](e):t instanceof Date?new t.constructor(e):new Date(e)}function xn(t,e){return Us(e||t,t)}let a4={};function td(){return a4}function Wo(t,e){const r=td(),n=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,s=xn(t,e?.in),i=s.getDay(),a=(i<n?7:0)+i-n;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function Oc(t,e){return Wo(t,{...e,weekStartsOn:1})}function Cx(t,e){const r=xn(t,e?.in),n=r.getFullYear(),s=Us(r,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const i=Oc(s),a=Us(r,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=Oc(a);return r.getTime()>=i.getTime()?n+1:r.getTime()>=o.getTime()?n:n-1}function cg(t){const e=xn(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function o4(t,...e){const r=Us.bind(null,e.find(n=>typeof n=="object"));return e.map(r)}function dg(t,e){const r=xn(t,e?.in);return r.setHours(0,0,0,0),r}function l4(t,e,r){const[n,s]=o4(r?.in,t,e),i=dg(n),a=dg(s),o=+i-cg(i),c=+a-cg(a);return Math.round((o-c)/i4)}function c4(t,e){const r=Cx(t,e),n=Us(t,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),Oc(n)}function d4(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function u4(t){return!(!d4(t)&&typeof t!="number"||isNaN(+xn(t)))}function h4(t,e){const r=xn(t,e?.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}const f4={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},p4=(t,e,r)=>{let n;const s=f4[t];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function ja(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const g4={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},m4={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},x4={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},b4={date:ja({formats:g4,defaultWidth:"full"}),time:ja({formats:m4,defaultWidth:"full"}),dateTime:ja({formats:x4,defaultWidth:"full"})},y4={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},v4=(t,e,r,n)=>y4[t];function ds(t){return(e,r)=>{const n=r?.context?String(r.context):"standalone";let s;if(n==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,o=r?.width?String(r.width):a;s=t.formattingValues[o]||t.formattingValues[a]}else{const a=t.defaultWidth,o=r?.width?String(r.width):t.defaultWidth;s=t.values[o]||t.values[a]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const w4={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},k4={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},N4={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},j4={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},_4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},S4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},A4=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},C4={ordinalNumber:A4,era:ds({values:w4,defaultWidth:"wide"}),quarter:ds({values:k4,defaultWidth:"wide",argumentCallback:t=>t-1}),month:ds({values:N4,defaultWidth:"wide"}),day:ds({values:j4,defaultWidth:"wide"}),dayPeriod:ds({values:_4,defaultWidth:"wide",formattingValues:S4,defaultFormattingWidth:"wide"})};function us(t){return(e,r={})=>{const n=r.width,s=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const a=i[0],o=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(o)?L4(o,g=>g.test(a)):P4(o,g=>g.test(a));let d;d=t.valueCallback?t.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const u=e.slice(a.length);return{value:d,rest:u}}}function P4(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function L4(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function Px(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const s=n[0],i=e.match(t.parsePattern);if(!i)return null;let a=t.valueCallback?t.valueCallback(i[0]):i[0];a=r.valueCallback?r.valueCallback(a):a;const o=e.slice(s.length);return{value:a,rest:o}}}const E4=/^(\d+)(th|st|nd|rd)?/i,O4=/\d+/i,D4={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},F4={any:[/^b/i,/^(a|c)/i]},R4={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},M4={any:[/1/i,/2/i,/3/i,/4/i]},T4={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},I4={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},B4={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},z4={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},U4={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},q4={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},W4={ordinalNumber:Px({matchPattern:E4,parsePattern:O4,valueCallback:t=>parseInt(t,10)}),era:us({matchPatterns:D4,defaultMatchWidth:"wide",parsePatterns:F4,defaultParseWidth:"any"}),quarter:us({matchPatterns:R4,defaultMatchWidth:"wide",parsePatterns:M4,defaultParseWidth:"any",valueCallback:t=>t+1}),month:us({matchPatterns:T4,defaultMatchWidth:"wide",parsePatterns:I4,defaultParseWidth:"any"}),day:us({matchPatterns:B4,defaultMatchWidth:"wide",parsePatterns:z4,defaultParseWidth:"any"}),dayPeriod:us({matchPatterns:U4,defaultMatchWidth:"any",parsePatterns:q4,defaultParseWidth:"any"})},H4={code:"en-US",formatDistance:p4,formatLong:b4,formatRelative:v4,localize:C4,match:W4,options:{weekStartsOn:0,firstWeekContainsDate:1}};function V4(t,e){const r=xn(t,e?.in);return l4(r,h4(r))+1}function $4(t,e){const r=xn(t,e?.in),n=+Oc(r)-+c4(r);return Math.round(n/_x)+1}function Lx(t,e){const r=xn(t,e?.in),n=r.getFullYear(),s=td(),i=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,a=Us(e?.in||t,0);a.setFullYear(n+1,0,i),a.setHours(0,0,0,0);const o=Wo(a,e),c=Us(e?.in||t,0);c.setFullYear(n,0,i),c.setHours(0,0,0,0);const d=Wo(c,e);return+r>=+o?n+1:+r>=+d?n:n-1}function Y4(t,e){const r=td(),n=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,s=Lx(t,e),i=Us(e?.in||t,0);return i.setFullYear(s,0,n),i.setHours(0,0,0,0),Wo(i,e)}function G4(t,e){const r=xn(t,e?.in),n=+Wo(r,e)-+Y4(r,e);return Math.round(n/_x)+1}function Lt(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const ii={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return Lt(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):Lt(r+1,2)},d(t,e){return Lt(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return Lt(t.getHours()%12||12,e.length)},H(t,e){return Lt(t.getHours(),e.length)},m(t,e){return Lt(t.getMinutes(),e.length)},s(t,e){return Lt(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return Lt(s,e.length)}},ga={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ug={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return ii.y(t,e)},Y:function(t,e,r,n){const s=Lx(t,n),i=s>0?s:1-s;if(e==="YY"){const a=i%100;return Lt(a,2)}return e==="Yo"?r.ordinalNumber(i,{unit:"year"}):Lt(i,e.length)},R:function(t,e){const r=Cx(t);return Lt(r,e.length)},u:function(t,e){const r=t.getFullYear();return Lt(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Lt(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Lt(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return ii.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return Lt(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const s=G4(t,n);return e==="wo"?r.ordinalNumber(s,{unit:"week"}):Lt(s,e.length)},I:function(t,e,r){const n=$4(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):Lt(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):ii.d(t,e)},D:function(t,e,r){const n=V4(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Lt(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const s=t.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return Lt(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const s=t.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return Lt(i,e.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),s=n===0?7:n;switch(e){case"i":return String(s);case"ii":return Lt(s,e.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let s;switch(n===12?s=ga.noon:n===0?s=ga.midnight:s=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let s;switch(n>=17?s=ga.evening:n>=12?s=ga.afternoon:n>=4?s=ga.morning:s=ga.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return ii.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):ii.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Lt(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):Lt(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):ii.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):ii.s(t,e)},S:function(t,e){return ii.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return fg(n);case"XXXX":case"XX":return Ii(n);case"XXXXX":case"XXX":default:return Ii(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return fg(n);case"xxxx":case"xx":return Ii(n);case"xxxxx":case"xxx":default:return Ii(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+hg(n,":");case"OOOO":default:return"GMT"+Ii(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+hg(n,":");case"zzzz":default:return"GMT"+Ii(n,":")}},t:function(t,e,r){const n=Math.trunc(+t/1e3);return Lt(n,e.length)},T:function(t,e,r){return Lt(+t,e.length)}};function hg(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=Math.trunc(n/60),i=n%60;return i===0?r+String(s):r+String(s)+e+Lt(i,2)}function fg(t,e){return t%60===0?(t>0?"-":"+")+Lt(Math.abs(t)/60,2):Ii(t,e)}function Ii(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=Lt(Math.trunc(n/60),2),i=Lt(n%60,2);return r+s+e+i}const pg=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Ex=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},X4=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return pg(t,e);let i;switch(n){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",pg(n,e)).replace("{{time}}",Ex(s,e))},J4={p:Ex,P:X4},K4=/^D+$/,Z4=/^Y+$/,Q4=["D","DD","YY","YYYY"];function e3(t){return K4.test(t)}function t3(t){return Z4.test(t)}function r3(t,e,r){const n=n3(t,e,r);if(console.warn(n),Q4.includes(t))throw new RangeError(n)}function n3(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const s3=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,i3=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,a3=/^'([^]*?)'?$/,o3=/''/g,l3=/[a-zA-Z]/;function Hn(t,e,r){const n=td(),s=r?.locale??n.locale??H4,i=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,a=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,o=xn(t,r?.in);if(!u4(o))throw new RangeError("Invalid time value");let c=e.match(i3).map(u=>{const g=u[0];if(g==="p"||g==="P"){const m=J4[g];return m(u,s.formatLong)}return u}).join("").match(s3).map(u=>{if(u==="''")return{isToken:!1,value:"'"};const g=u[0];if(g==="'")return{isToken:!1,value:c3(u)};if(ug[g])return{isToken:!0,value:u};if(g.match(l3))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:u}});s.localize.preprocessor&&(c=s.localize.preprocessor(o,c));const d={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return c.map(u=>{if(!u.isToken)return u.value;const g=u.value;(!r?.useAdditionalWeekYearTokens&&t3(g)||!r?.useAdditionalDayOfYearTokens&&e3(g))&&r3(g,e,String(t));const m=ug[g[0]];return m(o,g,s.localize,d)}).join("")}function c3(t){const e=t.match(a3);return e?e[1].replace(o3,"'"):t}function d3(t,e){const r=()=>Us(e?.in,NaN),s=p3(t);let i;if(s.date){const d=g3(s.date,2);i=m3(d.restDateString,d.year)}if(!i||isNaN(+i))return r();const a=+i;let o=0,c;if(s.time&&(o=x3(s.time),isNaN(o)))return r();if(s.timezone){if(c=b3(s.timezone),isNaN(c))return r()}else{const d=new Date(a+o),u=xn(0,e?.in);return u.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),u.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),u}return xn(a+o+c,e?.in)}const Zl={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},u3=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,h3=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,f3=/^([+-])(\d{2})(?::?(\d{2}))?$/;function p3(t){const e={},r=t.split(Zl.dateTimeDelimiter);let n;if(r.length>2)return e;if(/:/.test(r[0])?n=r[0]:(e.date=r[0],n=r[1],Zl.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Zl.timeZoneDelimiter)[0],n=t.substr(e.date.length,t.length))),n){const s=Zl.timezone.exec(n);s?(e.time=n.replace(s[1],""),e.timezone=s[1]):e.time=n}return e}function g3(t,e){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=t.match(r);if(!n)return{year:NaN,restDateString:""};const s=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:i===null?s:i*100,restDateString:t.slice((n[1]||n[2]).length)}}function m3(t,e){if(e===null)return new Date(NaN);const r=t.match(u3);if(!r)return new Date(NaN);const n=!!r[4],s=vo(r[1]),i=vo(r[2])-1,a=vo(r[3]),o=vo(r[4]),c=vo(r[5])-1;if(n)return N3(e,o,c)?y3(e,o,c):new Date(NaN);{const d=new Date(0);return!w3(e,i,a)||!k3(e,s)?new Date(NaN):(d.setUTCFullYear(e,i,Math.max(s,a)),d)}}function vo(t){return t?parseInt(t):1}function x3(t){const e=t.match(h3);if(!e)return NaN;const r=Jd(e[1]),n=Jd(e[2]),s=Jd(e[3]);return j3(r,n,s)?r*Ax+n*Sx+s*1e3:NaN}function Jd(t){return t&&parseFloat(t.replace(",","."))||0}function b3(t){if(t==="Z")return 0;const e=t.match(f3);if(!e)return 0;const r=e[1]==="+"?-1:1,n=parseInt(e[2]),s=e[3]&&parseInt(e[3])||0;return _3(n,s)?r*(n*Ax+s*Sx):NaN}function y3(t,e,r){const n=new Date(0);n.setUTCFullYear(t,0,4);const s=n.getUTCDay()||7,i=(e-1)*7+r+1-s;return n.setUTCDate(n.getUTCDate()+i),n}const v3=[31,null,31,30,31,30,31,31,30,31,30,31];function Ox(t){return t%400===0||t%4===0&&t%100!==0}function w3(t,e,r){return e>=0&&e<=11&&r>=1&&r<=(v3[e]||(Ox(t)?29:28))}function k3(t,e){return e>=1&&e<=(Ox(t)?366:365)}function N3(t,e,r){return e>=1&&e<=53&&r>=0&&r<=6}function j3(t,e,r){return t===24?e===0&&r===0:r>=0&&r<60&&e>=0&&e<60&&t>=0&&t<25}function _3(t,e){return e>=0&&e<=59}const S3={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},A3=(t,e,r)=>{let n;const s=S3[t];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"en "+n:"hace "+n:n},C3={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},P3={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},L3={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},E3={date:ja({formats:C3,defaultWidth:"full"}),time:ja({formats:P3,defaultWidth:"full"}),dateTime:ja({formats:L3,defaultWidth:"full"})},O3={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},D3={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},F3=(t,e,r,n)=>e.getHours()!==1?D3[t]:O3[t],R3={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},M3={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},T3={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},I3={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},B3={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},z3={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},U3=(t,e)=>Number(t)+"º",q3={ordinalNumber:U3,era:ds({values:R3,defaultWidth:"wide"}),quarter:ds({values:M3,defaultWidth:"wide",argumentCallback:t=>Number(t)-1}),month:ds({values:T3,defaultWidth:"wide"}),day:ds({values:I3,defaultWidth:"wide"}),dayPeriod:ds({values:B3,defaultWidth:"wide",formattingValues:z3,defaultFormattingWidth:"wide"})},W3=/^(\d+)(º)?/i,H3=/\d+/i,V3={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},$3={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},Y3={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},G3={any:[/1/i,/2/i,/3/i,/4/i]},X3={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},J3={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},K3={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},Z3={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},Q3={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},eN={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},tN={ordinalNumber:Px({matchPattern:W3,parsePattern:H3,valueCallback:function(t){return parseInt(t,10)}}),era:us({matchPatterns:V3,defaultMatchWidth:"wide",parsePatterns:$3,defaultParseWidth:"any"}),quarter:us({matchPatterns:Y3,defaultMatchWidth:"wide",parsePatterns:G3,defaultParseWidth:"any",valueCallback:t=>t+1}),month:us({matchPatterns:X3,defaultMatchWidth:"wide",parsePatterns:J3,defaultParseWidth:"any"}),day:us({matchPatterns:K3,defaultMatchWidth:"wide",parsePatterns:Z3,defaultParseWidth:"any"}),dayPeriod:us({matchPatterns:Q3,defaultMatchWidth:"any",parsePatterns:eN,defaultParseWidth:"any"})},rN={code:"es",formatDistance:A3,formatLong:E3,formatRelative:F3,localize:q3,match:tN,options:{weekStartsOn:1,firstWeekContainsDate:1}},$r=t=>typeof t!="number"?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t),nN=t=>{try{const e=typeof t=="string"?d3(t):t;return Hn(e,"dd/MM/yyyy",{locale:rN})}catch{try{return new Date(t).toLocaleDateString("es-ES")}catch{return"Fecha inválida"}}},Qo=({onClose:t,title:e,children:r,zIndex:n="z-50",maxWidth:s="max-w-lg"})=>l.jsx("div",{className:`fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center ${n}`,children:l.jsxs("div",{className:`relative ${s} mx-auto bg-white dark:bg-dark-primary p-6 rounded-2xl shadow-lg border border-brand-light dark:border-dark-surface`,children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h2",{className:"text-xl font-semibold text-brand-primary dark:text-white",children:e}),l.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:l.jsx(Ji,{size:24})})]}),l.jsx("div",{className:"max-h-[80vh] overflow-y-auto pt-4 pb-4",children:r})]})}),sN=()=>{const{currency:t,exchangeRate:e,toggleCurrency:r,updateRateManual:n,isManual:s,loading:i,resetToOfficial:a,refreshRates:o}=xh(),{user:c}=Mr(),d=c?.["https://premezcladomanzanillo.com/roles"]||[],u=d.includes("Administrador")||d.includes("Contable"),[g,m]=Z.useState(!1),[f,x]=Z.useState(""),v=()=>{x(e?.toString()||""),m(!0)},y=()=>{f&&!isNaN(parseFloat(f))&&(n(f),m(!1))},k=()=>{a(),m(!1)};return l.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-gray-800 px-3 py-1 rounded-full border border-gray-300 dark:border-gray-600",children:[l.jsxs("div",{className:"flex items-center gap-1 cursor-pointer",onClick:r,title:"Cambiar moneda global",children:[l.jsx("span",{className:`text-sm font-bold ${t==="USD"?"text-green-600":"text-gray-400"}`,children:"$"}),l.jsx("div",{className:`w-8 h-4 rounded-full p-0.5 transition-colors ${t==="VES"?"bg-blue-600":"bg-gray-400"}`,children:l.jsx("div",{className:`bg-white w-3 h-3 rounded-full shadow-sm transition-transform ${t==="VES"?"translate-x-4":"translate-x-0"}`})}),l.jsx("span",{className:`text-sm font-bold ${t==="VES"?"text-blue-600":"text-gray-400"}`,children:"Bs"})]}),l.jsx("div",{className:"h-4 w-px bg-gray-300 dark:bg-gray-600 mx-1"}),l.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[l.jsx("span",{className:"text-gray-500 dark:text-gray-400 hidden md:inline",children:"Tasa:"}),l.jsx("span",{className:`font-medium ${s?"text-orange-500":"text-gray-700 dark:text-gray-300"}`,children:e?e.toLocaleString("es-VE",{minimumFractionDigits:2,maximumFractionDigits:4}):"---"}),l.jsx("span",{className:"text-xs text-gray-500",children:"Bs/$"})]}),u&&l.jsx("button",{onClick:v,className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full text-gray-500 transition-colors",title:"Editar Tasa Manualmente",children:l.jsx(Jm,{size:12})}),l.jsx("button",{onClick:o,disabled:i,className:`p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full text-gray-500 transition-colors ${i?"animate-spin":""}`,title:"Actualizar Tasa del BCV",children:l.jsx(Fb,{size:12})}),g&&l.jsxs("div",{className:"absolute top-16 right-4 z-50 bg-white dark:bg-dark-surface p-4 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 w-64",children:[l.jsx("h4",{className:"text-sm font-bold mb-2 text-gray-800 dark:text-white",children:"Editar Tasa de Cambio"}),l.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Establece una tasa manual. Esto anulará la actualización automática del BCV."}),l.jsx("input",{type:"number",value:f,onChange:A=>x(A.target.value),className:"w-full p-2 border rounded mb-3 text-sm dark:bg-gray-700 dark:text-white",placeholder:"Ej. 36.50"}),l.jsxs("div",{className:"flex justify-between gap-2",children:[l.jsx("button",{onClick:k,className:"text-xs text-blue-600 hover:underline px-2 py-1",title:"Volver a tasa oficial BCV",children:"Restaurar Oficial"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>m(!1),className:"p-1 bg-gray-200 rounded text-gray-600 hover:bg-gray-300",children:l.jsx(Ji,{size:16})}),l.jsx("button",{onClick:y,className:"p-1 bg-green-600 rounded text-white hover:bg-green-700",children:l.jsx(oh,{size:16})})]})]})]})]})};Zo.register($k,Xk,Ck,Ak,Rk,vx,xx);const iN=()=>{const{user:t}=Mr(),[e,r]=Z.useState(null),[n,s]=Z.useState([]),[i,a]=Z.useState(!0),[o,c]=Z.useState(null),[d,u]=Z.useState("30d");Z.useEffect(()=>{(async()=>{a(!0),c(null);try{const _=await F0();r(_);const M=await Iy();s(M)}catch(_){c("Error al cargar los datos del dashboard."),console.error("Dashboard data fetch error:",_)}finally{a(!1)}})()},[]);const g=e?.totalClients||0,m=e?.totalBudgets||0,f=e?.totalIncome||0,x=e?.pendingAmount||0,v=e?.approvedBudgets||0,y=e?.totalPayments||0,k=e?.pendingPaymentsCount||0,A=Z.useMemo(()=>e?.chartData?.labels||["Ene","Feb","Mar","Abr","May","Jun"],[e]),D=Z.useMemo(()=>e?.chartData?.ingresosSeries||[0,0,0,0,0,0],[e]),L=Z.useMemo(()=>e?.chartData?.pendientesSeries||[0,0,0,0,0,0],[e]),q=Z.useMemo(()=>({labels:A,datasets:[{label:"Ingresos",data:D,borderColor:"#15803D",backgroundColor:"rgba(21,128,61,0.08)",tension:.35,pointRadius:3},{label:"Pagos pendientes",data:L,borderColor:"#064E3B",backgroundColor:"rgba(6,78,59,0.06)",tension:.35,pointRadius:3}]}),[A,D,L]),z=Z.useMemo(()=>({responsive:!0,plugins:{legend:{position:"top",labels:{color:document.body.classList.contains("dark")?"#F9FAFB":"#333"}},title:{display:!0,text:"Ingresos vs Pagos pendientes",color:document.body.classList.contains("dark")?"#F9FAFB":"#333"},tooltip:{mode:"index",intersect:!1}},interaction:{mode:"nearest",intersect:!1},scales:{x:{ticks:{color:document.body.classList.contains("dark")?"#F9FAFB":"#333"}},y:{ticks:{color:document.body.classList.contains("dark")?"#F9FAFB":"#333"}}}}),[]),$=0;return i?l.jsx("div",{className:"text-center py-8 dark:text-gray-200",children:"Cargando datos del dashboard..."}):o?l.jsxs("div",{className:"text-center py-8 text-red-600 dark:text-red-400",children:["Error: ",o]}):l.jsx("div",{className:"min-h-screen",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 relative",children:[l.jsx("div",{className:"bg-white/60 dark:bg-dark-primary/60 backdrop-blur-sm rounded-b-xl p-4 mb-6 border border-brand-light dark:border-dark-surface",children:l.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[l.jsx("div",{children:l.jsxs("p",{className:"text-sm text-brand-text dark:text-gray-300",children:[nN(new Date)," • Bienvenido,"," ",l.jsx("span",{className:"font-medium",children:t?.name||"Usuario"})]})}),l.jsx("div",{className:"text-left sm:text-right flex flex-col items-end gap-2",children:l.jsx(sN,{})})]})}),l.jsxs("div",{className:"flex gap-4 overflow-x-auto mb-6 sm:grid sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-4",children:[l.jsx(Kt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white dark:bg-dark-primary rounded-2xl p-4 shadow-soft border border-brand-light dark:border-dark-surface",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-3 rounded-lg bg-green-100 dark:bg-green-900/50",children:l.jsx(zc,{className:"w-6 h-6 text-brand-dark dark:text-green-300"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-brand-text dark:text-gray-300",children:"Clientes"}),l.jsx("p",{className:"text-2xl font-bold text-brand-dark dark:text-gray-100",children:g})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"inline-flex items-center gap-1 text-sm text-gray-500",children:l.jsxs("span",{children:[$,"%"]})}),l.jsx("p",{className:"text-xs text-brand-text dark:text-gray-400",children:"vs mes anterior"})]})]})}),l.jsx(Kt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05},className:"bg-white dark:bg-dark-primary rounded-2xl p-4 shadow-soft border border-brand-light dark:border-dark-surface",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-3 rounded-lg bg-yellow-100 dark:bg-yellow-900/50",children:l.jsx(Uc,{className:"w-6 h-6 text-yellow-700 dark:text-yellow-300"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-brand-text dark:text-gray-300",children:"Presupuestos"}),l.jsx("p",{className:"text-2xl font-bold text-brand-dark dark:text-gray-100",children:m})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"inline-flex items-center gap-1 text-sm text-gray-500",children:l.jsx("span",{children:"+0%"})}),l.jsx("p",{className:"text-xs text-brand-text dark:text-gray-400",children:"vs mes anterior"})]})]})}),l.jsx(Kt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white dark:bg-dark-primary rounded-2xl p-4 shadow-soft border border-brand-light dark:border-dark-surface",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-3 rounded-lg bg-green-100 dark:bg-green-900/50",children:l.jsx(Km,{className:"w-6 h-6 text-brand-dark dark:text-green-300"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-brand-text dark:text-gray-300",children:"Ingresos"}),l.jsx("p",{className:"text-2xl font-bold text-brand-dark dark:text-gray-100",children:$r(f)})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"inline-flex items-center gap-1 text-sm text-gray-500",children:l.jsx("span",{children:"+0%"})}),l.jsx("p",{className:"text-xs text-brand-text dark:text-gray-400",children:"crecimiento mensual"})]})]})}),l.jsx(Kt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15},className:"bg-white dark:bg-dark-primary rounded-2xl p-4 shadow-soft border border-brand-light dark:border-dark-surface",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-3 rounded-lg bg-red-100 dark:bg-red-900/50",children:l.jsx(Cf,{className:"w-6 h-6 text-red-600 dark:text-red-300"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-brand-text dark:text-gray-300",children:"Pendientes"}),l.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:$r(x)})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"inline-flex items-center gap-1 text-sm text-gray-500",children:l.jsx("span",{children:"-0%"})}),l.jsx("p",{className:"text-xs text-brand-text dark:text-gray-400",children:"vs mes anterior"})]})]})})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-dark-primary rounded-2xl p-4 sm:p-6 shadow-lg border border-brand-light dark:border-dark-surface order-1",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-brand-dark dark:text-gray-100",children:"Ingresos vs Pagos pendientes"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("select",{value:d,onChange:j=>u(j.target.value),className:"px-3 py-2 border border-brand-light dark:border-dark-surface rounded-lg bg-white dark:bg-dark-surface dark:text-gray-200 text-sm",children:[l.jsx("option",{value:"30d",children:"Últimos 30 días"}),l.jsx("option",{value:"6m",children:"Últimos 6 meses"}),l.jsx("option",{value:"ytd",children:"Año actual"})]}),l.jsxs("div",{className:"text-sm text-brand-text dark:text-gray-300",children:["↑ ",$,"% respecto a mes anterior"]})]})]}),l.jsx("div",{className:"min-h-[220px]",children:l.jsx(n4,{data:q,options:z})}),l.jsxs("div",{className:"mt-6 bg-brand-light dark:bg-dark-surface/50 p-4 rounded-lg",children:[l.jsx("h4",{className:"text-sm font-medium text-brand-dark dark:text-gray-200 mb-3",children:"Resumen"}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"p-3 bg-white dark:bg-dark-primary rounded-lg shadow-sm",children:[l.jsx("p",{className:"text-xs text-brand-text dark:text-gray-400",children:"Presupuestos aprobados"}),l.jsx("p",{className:"font-bold text-brand-dark dark:text-gray-100",children:v})]}),l.jsxs("div",{className:"p-3 bg-white dark:bg-dark-primary rounded-lg shadow-sm",children:[l.jsx("p",{className:"text-xs text-brand-text dark:text-gray-400",children:"Pagos recibidos"}),l.jsx("p",{className:"font-bold text-brand-dark dark:text-gray-100",children:y})]}),l.jsxs("div",{className:"p-3 bg-white dark:bg-dark-primary rounded-lg shadow-sm",children:[l.jsx("p",{className:"text-xs text-brand-text dark:text-gray-400",children:"Pendientes"}),l.jsx("p",{className:"font-bold text-brand-dark dark:text-gray-100",children:k})]})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-primary rounded-2xl p-4 sm:p-6 shadow-lg border border-brand-light dark:border-dark-surface order-2",children:[l.jsx("h3",{className:"text-lg font-semibold text-brand-dark dark:text-gray-100 mb-3",children:"Alertas rápidas"}),l.jsxs("ul",{className:"space-y-3 mb-4",children:[l.jsxs("li",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"p-2 rounded-full bg-green-50 dark:bg-green-900/50 text-green-600 dark:text-green-400",children:l.jsx(oh,{className:"w-4 h-4"})}),l.jsxs("div",{children:[l.jsxs("p",{className:"text-sm font-medium dark:text-gray-200",children:[v," presupuestos aprobados"]}),l.jsx("button",{className:"text-xs text-brand-mid dark:text-green-400 mt-1",children:"Ver detalle"})]})]}),l.jsxs("li",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"p-2 rounded-full bg-yellow-50 dark:bg-yellow-900/50 text-yellow-600 dark:text-yellow-400",children:l.jsx(Zm,{className:"w-4 h-4"})}),l.jsxs("div",{children:[l.jsxs("p",{className:"text-sm font-medium dark:text-gray-200",children:[k," pago(s) próximo(s) a vencer"]}),l.jsx("button",{className:"text-xs text-brand-mid dark:text-green-400 mt-1",children:"Ver detalle"})]})]}),l.jsxs("li",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"p-2 rounded-full bg-red-50 dark:bg-red-900/50 text-red-600 dark:text-red-400",children:l.jsx(Cf,{className:"w-4 h-4"})}),l.jsxs("div",{children:[l.jsxs("p",{className:"text-sm font-medium dark:text-gray-200",children:[k," Pago(s) vencido(s)"]}),l.jsx("button",{className:"text-xs text-brand-mid dark:text-green-400 mt-1",children:"Ver detalle"})]})]})]}),l.jsx("h4",{className:"text-md font-semibold text-brand-dark dark:text-gray-100 mb-3",children:"Actividad reciente"}),l.jsx("ul",{className:"space-y-2 text-sm text-brand-text dark:text-gray-400",children:n.length>0?n.map((j,_)=>l.jsx("li",{className:"py-2 border-b border-brand-light/50 dark:border-dark-surface/50",children:j.text},_)):l.jsx("li",{className:"py-2",children:"No hay actividad reciente."})})]})]})]})})},Dx=({initialValues:t={},onSave:e,onCancel:r,isEditing:n,serverError:s})=>{const[i,a]=Z.useState(()=>({name:t&&t.name||"",email:t&&t.email||"",address:t&&t.address||""})),[o,c]=Z.useState(()=>{if(t&&t.rif){const M=String(t.rif).split("-");return M.length===2?M[0]:"V"}return"V"}),[d,u]=Z.useState(()=>{if(t&&t.rif){const M=String(t.rif).split("-");return M.length===2?M[1]:t.rif||""}return""}),[g,m]=Z.useState(()=>{if(t&&t.phone){const M=String(t.phone).trim(),S=M.match(/^(\+\d+)[\s-]?(\d+)$/);if(S)return S[1];if(M.startsWith("+"))return M.split(/\s|-/)[0]}return"+58"}),[f,x]=Z.useState(()=>{if(t&&t.phone){const M=String(t.phone).trim(),S=M.match(/^(\+\d+)[\s-]?(\d+)$/);return S?S[2]:M.startsWith("+")?M.split(/\s|-/).slice(1).join("")||"":M.replace(/[^0-9]/g,"")}return""}),[v,y]=Z.useState({}),[k,A]=Z.useState("");Z.useEffect(()=>{s?(A(s),s.toLowerCase().includes("email")&&y(M=>({...M,email:s}))):A("")},[s]);const D=M=>{const{name:S,value:C}=M.target;a(R=>({...R,[S]:C})),k&&A(""),v[S]&&y(R=>({...R,[S]:void 0}))},L=M=>{c(M.target.value),v.rif&&y(S=>({...S,rif:void 0}))},q=M=>{const S=M.target.value.replace(/[^0-9]/g,"");u(S),v.rif&&y(C=>({...C,rif:void 0}))},z=M=>{const S=M.target.value.replace(/[^0-9]/g,"");x(S),v.phone&&y(C=>({...C,phone:void 0}))},$=()=>{const M={};if((!i.name||i.name.trim().length<3)&&(M.name="El nombre del cliente es requerido (mínimo 3 caracteres)."),(!i.email||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email))&&(M.email="El correo electrónico es requerido y debe ser válido."),!d.trim())M.rif="El número de RIF/Cédula es requerido.";else{const S=d.trim().length;(o==="J"||o==="G")&&S!==9?M.rif=`El RIF para ${o==="J"?"persona jurídica":"ente gubernamental"} debe tener exactamente 9 dígitos.`:(o==="V"||o==="E")&&S!==8&&(M.rif=`La cédula de ${o==="V"?"venezolano":"extranjero"} debe tener exactamente 8 dígitos.`)}return f&&f.length<7&&(M.phone="Número de teléfono demasiado corto (mínimo 7 dígitos)."),M},j=M=>{M.preventDefault();const S=$();if(y(S),Object.keys(S).length>0)return;const C=d.trim()?`${o}-${d}`:"",R=f?`${g} ${f}`:"";e({...i,rif:C,phone:R})},_=n?"Editar Cliente":"Crear Nuevo Cliente";return l.jsx(Qo,{title:_,onClose:r,zIndex:"z-60",children:l.jsxs("form",{onSubmit:j,className:"space-y-4",children:[k&&l.jsx("div",{className:"bg-red-500 text-white px-4 py-3 rounded relative font-semibold text-lg mb-4",role:"alert",children:l.jsxs("span",{className:"block sm:inline",children:[k," Por favor, corrige los errores para continuar."]})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"RIF / Cédula"}),l.jsxs("div",{className:"mt-1 flex rounded-lg shadow-sm",children:[l.jsxs("select",{value:o,onChange:L,className:"block rounded-l-lg border border-r-0 border-gray-200 dark:border-gray-600 bg-white dark:bg-dark-surface px-3 py-2 text-gray-900 dark:text-gray-200 focus:ring-2 focus:ring-green-200",children:[l.jsx("option",{value:"V",children:"V"}),l.jsx("option",{value:"E",children:"E"}),l.jsx("option",{value:"J",children:"J"}),l.jsx("option",{value:"G",children:"G"})]}),l.jsx("input",{type:"text",name:"rif",value:d,onChange:q,className:"block w-full rounded-r-lg border border-gray-200 dark:border-gray-600 bg-white dark:bg-dark-surface px-3 py-2 text-gray-900 dark:text-gray-200 focus:ring-2 focus:ring-green-200",placeholder:"Ej. 12345678"})]}),v.rif&&l.jsx("p",{className:"text-sm text-red-500 mt-1",children:v.rif})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nombre del Cliente"}),l.jsx("input",{name:"name",value:i.name,onChange:D,className:`mt-1 block w-full rounded-lg border ${v.name?"border-red-500":"border-gray-200 dark:border-gray-600"} bg-white dark:bg-dark-surface px-3 py-2 focus:ring-2 focus:ring-green-200 dark:text-gray-200`,placeholder:"Ej. Constructora ABC"}),v.name&&l.jsx("p",{className:"text-sm text-red-600 mt-1",children:v.name})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Correo Electrónico"}),l.jsx("input",{name:"email",type:"email",value:i.email,onChange:D,className:`mt-1 block w-full rounded-lg border ${v.email?"border-red-500":"border-gray-200 dark:border-gray-600"} bg-white dark:bg-dark-surface px-3 py-2 focus:ring-2 focus:ring-green-200 dark:text-gray-200`,placeholder:"ejemplo@constructora.com"}),v.email&&l.jsx("p",{className:"text-sm text-red-600 mt-1",children:v.email})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Teléfono (Opcional)"}),l.jsxs("div",{className:"mt-1 flex rounded-lg shadow-sm",children:[l.jsxs("select",{value:g,onChange:M=>m(M.target.value),className:"block rounded-l-lg border border-r-0 border-gray-200 dark:border-gray-600 bg-white dark:bg-dark-surface px-3 py-2 text-gray-900 dark:text-gray-200 focus:ring-2 focus:ring-green-200",children:[l.jsx("option",{value:"+58",children:"+58 (VE)"}),l.jsx("option",{value:"+1",children:"+1 (US/CAN)"}),l.jsx("option",{value:"+52",children:"+52 (MX)"}),l.jsx("option",{value:"+34",children:"+34 (ES)"}),l.jsx("option",{value:"+55",children:"+55 (BR)"})]}),l.jsx("input",{name:"phone",value:f,onChange:z,className:"block w-full rounded-r-lg border border-gray-200 dark:border-gray-600 bg-white dark:bg-dark-surface px-3 py-2 text-gray-900 dark:text-gray-200 focus:ring-2 focus:ring-green-200",placeholder:"Ej. 4121234567"})]}),v.phone&&l.jsx("p",{className:"text-sm text-red-500 mt-1",children:v.phone})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Dirección (Opcional)"}),l.jsx("input",{name:"address",value:i.address,onChange:D,className:"mt-1 block w-full rounded-lg border border-gray-200 dark:border-gray-600 bg-white dark:bg-dark-surface px-3 py-2 focus:ring-2 focus:ring-green-200 dark:text-gray-200"})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[l.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 rounded-lg bg-gray-100 dark:bg-dark-surface text-gray-700 dark:text-gray-200 border border-gray-200 dark:border-gray-600",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"px-5 py-2 rounded-lg bg-green-700 text-white hover:bg-green-600",children:n?"Guardar Cambios":"Crear Cliente"})]})]})})},aN=({clients:t,onEdit:e,onDelete:r,canEditOrDeleteClient:n})=>l.jsx("div",{className:"overflow-x-auto bg-white dark:bg-dark-primary rounded-2xl shadow-lg border border-brand-light dark:border-dark-surface",children:l.jsxs("table",{className:"min-w-full divide-y divide-brand-light dark:divide-dark-surface",children:[l.jsx("thead",{className:"dark:bg-dark-surface",children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Nombre"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Email"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"RIF / Cédula"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Teléfono"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Dirección"}),l.jsx("th",{scope:"col",className:"relative px-6 py-3",children:l.jsx("span",{className:"sr-only",children:"Acciones"})})]})}),l.jsx("tbody",{className:"bg-white dark:bg-dark-primary divide-y divide-brand-light dark:divide-dark-surface",children:t.map(s=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-brand-primary dark:text-gray-100",children:s.name}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text dark:text-gray-300",children:s.email}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text dark:text-gray-300",children:s.rif||"N/A"}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text dark:text-gray-300",children:s.phone||"N/A"}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text dark:text-gray-300",children:s.address||"N/A"}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:l.jsx("div",{className:"flex items-center justify-end gap-2",children:n(s)&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>e(s),className:"text-brand-mid hover:text-brand-primary dark:text-green-400 dark:hover:text-green-300",title:"Editar",children:l.jsx(Fa,{className:"w-5 h-5"})}),l.jsx("button",{onClick:()=>r(s.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Eliminar",children:l.jsx(bn,{className:"w-5 h-5"})})]})})})]},s.id))})]})}),oN=({clients:t=[],viewMode:e,onEdit:r,onDelete:n,userRoles:s,currentUserId:i})=>{const a=o=>{const c=o._count.budgets>0,d=o.ownerId===i;return!!(s.includes("Administrador")||s.includes("Contable")||(s.includes("Usuario")||s.includes("Comercial"))&&d&&!c)};return l.jsx("div",{children:t.length===0?l.jsxs(Kt.div,{initial:{opacity:0},animate:{opacity:1},className:"md:col-span-3 text-center py-12",children:[l.jsx(zc,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No hay clientes que coincidan con la búsqueda."})]}):e==="canvas"?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(o=>l.jsxs(Kt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white dark:bg-dark-surface rounded-2xl p-6 shadow-md border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow",children:[l.jsx("h3",{className:"text-lg font-bold text-brand-primary dark:text-gray-100 mb-2",children:o.name}),l.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-1",children:["RIF: ",l.jsx("span",{className:"font-medium",children:o.rif||"N/A"})]}),l.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:["Email: ",o.email]}),o.phone&&l.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:["Teléfono: ",o.phone]}),a(o)&&l.jsxs("div",{className:"flex gap-2 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[l.jsxs("button",{onClick:()=>r(o),className:"flex-1 bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 py-2 px-4 rounded-lg text-center hover:bg-gray-200 dark:hover:bg-gray-600 flex items-center justify-center gap-2",children:[l.jsx(Fa,{className:"w-4 h-4"})," Editar"]}),l.jsx("button",{onClick:()=>n(o.id),className:"bg-red-50 dark:bg-red-900/50 text-red-600 dark:text-red-400 py-2 px-4 rounded-lg hover:bg-red-100 dark:hover:bg-red-900 flex items-center justify-center gap-2",children:l.jsx(bn,{className:"w-4 h-4"})})]})]},o.id))}):l.jsx(aN,{clients:t,onEdit:r,onDelete:n,userRoles:s,currentUserId:i,canEditOrDeleteClient:a})})},lN=()=>{const{user:t}=Mr(),e=t?.["https://premezcladomanzanillo.com/roles"]||[],[r,n]=Z.useState([]),[s,i]=Z.useState(!0),[a,o]=Z.useState(null),[c,d]=Z.useState(!1),[u,g]=Z.useState(null),[m,f]=Z.useState(null),[x,v]=Z.useState(null),[y,k]=Z.useState("list"),[A,D]=Z.useState(""),[L,q]=Z.useState("all");Z.useEffect(()=>{z()},[e]);const z=async()=>{try{i(!0),o(null);const F=await Ge.get("/api/clients");n(F.data)}catch(F){console.error("Error fetching clients:",F),o("Error al cargar clientes. Por favor, inténtalo de nuevo.")}finally{i(!1)}},$=Z.useMemo(()=>{const F=new Map;r.forEach(te=>{te.owner&&F.set(te.owner.id,te.owner.name)});const V=Array.from(F,([te,ne])=>({value:te,label:ne}));return[{value:"all",label:"Todos los Responsables"},...V]},[r]),j=Z.useMemo(()=>r.filter(F=>{const V=F.name.toLowerCase().includes(A.toLowerCase())||F.rif&&F.rif.toLowerCase().includes(A.toLowerCase())||F.email&&F.email.toLowerCase().includes(A.toLowerCase()),te=L==="all"||F.ownerId===L;return V&&te}),[r,A,L]),_=(F=null)=>{g(F),d(!0),v(null)},M=()=>{g(null),d(!1),v(null)},S=async F=>{f(null),v(null);try{u?(await Ge.put(`/api/clients/${u.id}`,F),f(`Cliente "${F.name}" actualizado con éxito.`)):(await Ge.post("/api/clients",F),f(`Cliente "${F.name}" creado con éxito.`)),M(),z()}catch(V){console.error("Error saving client:",V),V.response&&V.response.status===409?(v(V.response.data.error),console.log("Server error set:",V.response.data.error)):o("Error al guardar el cliente. Por favor, inténtalo de nuevo.")}},C=async F=>{if(window.confirm("¿Estás seguro de que quieres eliminar este cliente? Esta acción no se puede deshacer.")){f(null),o(null);try{await Ge.delete(`/api/clients/${F}`),f("Cliente eliminado con éxito."),z()}catch(V){console.error("Error deleting client:",V),V.response&&V.response.data&&V.response.data.error?o(V.response.data.error):V.response&&V.response.status===403?o("No tienes permiso para eliminar este cliente."):V.response&&V.response.status===404?o("El cliente no fue encontrado."):o("Error al eliminar el cliente. Por favor, inténtalo de nuevo.")}}},R=e.includes("Administrador")||e.includes("Comercial")||e.includes("Usuario")||e.includes("Contable");return s?l.jsx("div",{className:"w-full p-6 dark:bg-dark-primary text-center text-xl dark:text-white",children:"Cargando clientes..."}):a?l.jsx("div",{className:"w-full p-6 dark:bg-dark-primary text-center text-xl text-red-500",children:a}):l.jsxs("div",{className:"w-full p-6 dark:bg-dark-primary",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(zc,{className:"w-8 h-8 text-black dark:text-green-400"}),l.jsx("h1",{className:"text-3xl font-bold text-brand-primary dark:text-white",children:"Clientes"})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>k("canvas"),className:`p-2 rounded-lg ${y==="canvas"?"bg-brand-primary text-white":"bg-gray-200 dark:bg-dark-surface text-gray-600 dark:text-gray-300"}`,children:l.jsx(qc,{className:"w-5 h-5"})}),l.jsx("button",{onClick:()=>k("list"),className:`p-2 rounded-lg ${y==="list"?"bg-brand-primary text-white":"bg-gray-200 dark:bg-dark-surface text-gray-600 dark:text-gray-300"}`,children:l.jsx(Wc,{className:"w-5 h-5"})})]}),R&&l.jsxs("button",{onClick:()=>_(),className:"bg-brand-primary text-white px-4 py-2 rounded-xl hover:bg-brand-mid transition duration-150 flex items-center gap-2",children:[l.jsx(Hc,{className:"w-5 h-5"}),"Nuevo Cliente"]})]})]}),l.jsx("div",{className:"bg-white dark:bg-dark-primary rounded-2xl p-6 shadow-lg border border-brand-light dark:border-dark-surface mb-6",children:l.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-3",children:[l.jsxs("div",{className:"flex-1 flex items-center gap-3 w-full md:w-auto",children:[l.jsx($o,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"}),l.jsx("input",{type:"text",placeholder:"Buscar por nombre, RIF o correo...",value:A,onChange:F=>D(F.target.value),className:"flex-1 p-3 border border-brand-light dark:border-dark-surface rounded-xl dark:bg-dark-surface focus:outline-none focus:ring-2 focus:ring-brand-mid dark:text-gray-200"})]}),l.jsx("div",{className:"flex gap-2 w-full md:w-auto justify-end",children:l.jsx("select",{value:L,onChange:F=>q(F.target.value),className:"p-3 border border-brand-light dark:border-dark-surface rounded-xl dark:bg-dark-surface text-sm dark:text-gray-200",children:$.map(F=>l.jsx("option",{value:F.value,children:F.label},F.value))})})]})}),m&&l.jsxs("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4",role:"alert",children:[l.jsx("span",{className:"block sm:inline",children:m}),l.jsx("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3",onClick:()=>f(null),children:l.jsxs("svg",{className:"fill-current h-6 w-6 text-green-500",role:"button",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:[l.jsx("title",{children:"Close"}),l.jsx("path",{d:"M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.15a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.15 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"})]})})]}),c&&l.jsx(Dx,{initialValues:u||{},onSave:S,onCancel:M,isEditing:!!u,serverError:x}),!c&&l.jsx(oN,{clients:j,viewMode:y,onEdit:_,onDelete:C,userRoles:e,currentUserId:t?.sub})]})},cN=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t||0),dN=({budgets:t,onEdit:e,onDelete:r,onApprove:n,onReject:s,onViewDetail:i,canEditOrDeleteBudget:a,canApproveOrRejectBudget:o,userRoles:c=[]})=>l.jsx("div",{className:"overflow-x-auto bg-white dark:bg-dark-primary rounded-2xl shadow-lg border border-brand-light dark:border-dark-surface",children:l.jsxs("table",{className:"min-w-full divide-y divide-brand-light dark:divide-dark-surface",children:[l.jsx("thead",{className:"dark:bg-dark-surface",children:l.jsxs("tr",{className:"text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:[l.jsx("th",{scope:"col",className:"px-6 py-3",children:"Título"}),l.jsx("th",{scope:"col",className:"px-6 py-3",children:"Observaciones"}),l.jsx("th",{scope:"col",className:"px-6 py-3",children:"Cliente"}),l.jsx("th",{scope:"col",className:"px-6 py-3",children:"Fecha"}),l.jsx("th",{scope:"col",className:"px-6 py-3",children:"Fecha Entrega"}),l.jsx("th",{scope:"col",className:"px-6 py-3",children:"Volumen"}),l.jsx("th",{scope:"col",className:"px-6 py-3",children:"Total"}),l.jsx("th",{scope:"col",className:"px-6 py-3",children:"Estado"}),l.jsx("th",{scope:"col",className:"px-6 py-3",children:"Procesado Por"}),l.jsx("th",{scope:"col",className:"px-6 py-3",children:"Procesado El"}),l.jsx("th",{scope:"col",className:"px-6 py-3",children:"Razón Rechazo"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-dark-primary divide-y divide-brand-light dark:divide-dark-surface",children:t.map(d=>l.jsxs("tr",{className:"hover:bg-brand-light/20 dark:hover:bg-dark-surface cursor-pointer transition-colors duration-150",onClick:()=>i(d),children:[l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[l.jsx("div",{className:"text-sm font-medium text-brand-primary dark:text-gray-100",children:d.title}),l.jsxs("div",{className:"text-xs text-brand-text dark:text-gray-400",children:[d.products.length," items"]})]}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 max-w-xs truncate",title:d.observations,children:d.observations||"N/A"}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text dark:text-gray-300",children:d.client?.name||"N/A"}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text dark:text-gray-300",children:Hn(new Date(d.createdAt),"dd/MM/yyyy")}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text dark:text-gray-300",children:d.deliveryDate?Hn(new Date(d.deliveryDate),"dd/MM/yyyy"):"N/A"}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text dark:text-gray-300",children:d.volume?`${d.volume} m³`:"N/A"}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-brand-primary dark:text-gray-100",children:d.status==="APPROVED"||c.includes("Contable")||c.includes("Comercial")||c.includes("Administrador")?cN(d.total):"—"}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${d.status==="APPROVED"?"bg-green-100 text-green-800 dark:bg-green-900":d.status==="REJECTED"?"bg-red-100 text-red-800 dark:bg-red-900":d.status==="EXPIRED"?"bg-gray-100 text-gray-800 dark:bg-gray-900":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900"}`,children:d.status==="EXPIRED"?"VENCIDO":d.status})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text dark:text-gray-300",children:(()=>{const u=d.processedBy?.name?.trim(),g=d.processedBy?.email;return!u||u.toLowerCase()==="unnamed user"||u.toLowerCase()==="usuario"?g||(d.status!=="PENDING"?"Sistema":"N/A"):u})()}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text dark:text-gray-300",children:d.processedAt?Hn(new Date(d.processedAt),"dd/MM/yyyy"):"N/A"}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-600 dark:text-red-400",children:d.rejectionReason||"N/A"}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:l.jsxs("div",{className:"flex items-center justify-end gap-2",children:[o(d)&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:u=>{u.stopPropagation(),n(d.id)},title:"Aprobar",className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",children:l.jsx(lh,{className:"w-5 h-5"})}),l.jsx("button",{onClick:u=>{u.stopPropagation(),s(d)},title:"Rechazar",className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:l.jsx(Qm,{className:"w-5 h-5"})})]}),a(d)&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:u=>{u.stopPropagation(),e(d)},className:"text-brand-mid hover:text-brand-primary dark:text-green-400 dark:hover:text-green-300",title:"Editar",children:l.jsx(Fa,{className:"w-5 h-5"})}),l.jsx("button",{onClick:u=>{u.stopPropagation(),r(d.id)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Eliminar",children:l.jsx(bn,{className:"w-5 h-5"})})]})]})})]},d.id))})]})}),uN=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t||0),hN=({budgets:t=[],viewMode:e,onEdit:r,onDelete:n,onApprove:s,onReject:i,onViewDetail:a,userRoles:o,currentUserId:c})=>{const[d,u]=Z.useState(!1),[g,m]=Z.useState(null),[f,x]=Z.useState(""),v=L=>{if(o.includes("Administrador")||o.includes("Contable")&&(L.status==="APPROVED"||L.status==="PENDING"))return!0;const q=L.creatorId===c;if((o.includes("Comercial")||o.includes("Usuario"))&&L.status==="PENDING"&&q){const z=new Date().setHours(0,0,0,0);return new Date(L.createdAt).setHours(0,0,0,0)===z}return!1},y=L=>(o.includes("Administrador")||o.includes("Contable"))&&L.status==="PENDING",k=L=>{m(L),u(!0)},A=()=>{g&&f.trim()?(i(g.id,f.trim()),u(!1),m(null),x("")):alert("La razón de rechazo no puede estar vacía.")},D=Z.useMemo(()=>{if(e!=="canvas")return[];const L=new Map;return t.forEach(q=>{const z=q.client?.name||"Cliente no asignado";L.has(z)||L.set(z,[]),L.get(z).push(q)}),Array.from(L.entries())},[t,e]);return t.length===0?l.jsx("div",{className:"text-center py-10",children:l.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No hay presupuestos que coincidan con la búsqueda."})}):l.jsxs("div",{className:"space-y-6",children:[e==="canvas"?l.jsx("div",{className:"space-y-6",children:D.map(([L,q])=>l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-semibold text-brand-primary dark:text-white mb-3",children:L}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:q.map((z,$)=>l.jsxs(Kt.div,{onClick:()=>a(z),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:$*.05},className:"bg-white dark:bg-dark-primary rounded-2xl shadow-lg border border-brand-light dark:border-dark-surface flex flex-col justify-between p-5 cursor-pointer",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsx("h4",{className:"text-lg font-semibold text-brand-primary dark:text-gray-100 mb-1 pr-2",children:z.title}),l.jsx("span",{className:`text-xs font-medium px-2.5 py-0.5 rounded-full ${z.status==="APPROVED"?"bg-green-100 text-green-800 dark:bg-green-900":z.status==="REJECTED"?"bg-red-100 text-red-800 dark:bg-red-900":z.status==="EXPIRED"?"bg-gray-100 text-gray-800 dark:bg-gray-900":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900"}`,children:z.status==="EXPIRED"?"VENCIDO":z.status})]}),l.jsx("p",{className:"text-sm text-brand-text dark:text-gray-400",children:Hn(new Date(z.createdAt),"dd/MM/yyyy")}),z.processedBy&&l.jsxs("p",{className:"text-xs text-brand-text dark:text-gray-500 mt-1",children:["Procesado por: ",z.processedBy.name," el ",Hn(new Date(z.processedAt),"dd/MM/yyyy")]}),z.rejectionReason&&l.jsxs("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:["Motivo de rechazo: ",z.rejectionReason]}),z.observations&&l.jsxs("p",{className:"text-xs text-gray-500 mt-2 italic truncate",title:z.observations,children:['"',z.observations,'"']})]}),l.jsxs("div",{className:"mt-4 pt-4 border-t border-brand-light dark:border-dark-surface",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsxs("span",{className:"text-sm text-brand-text dark:text-gray-300",children:[z.products.length," items"]}),l.jsx("span",{className:"text-xl font-bold text-brand-primary dark:text-gray-100",children:z.status==="APPROVED"||o.includes("Contable")||o.includes("Comercial")||o.includes("Administrador")?uN(z.total):"—"})]}),l.jsxs("div",{className:"flex justify-end gap-2",children:[y(z)&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:j=>{j.stopPropagation(),s(z.id)},title:"Aprobar",className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",children:l.jsx(lh,{className:"w-5 h-5"})}),l.jsx("button",{onClick:j=>{j.stopPropagation(),k(z)},title:"Rechazar",className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:l.jsx(Qm,{className:"w-5 h-5"})})]}),v(z)&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:j=>{j.stopPropagation(),r(z)},title:"Editar",className:"text-brand-mid hover:text-brand-primary dark:text-green-400 dark:hover:text-green-300",children:l.jsx(Fa,{className:"w-5 h-5"})}),l.jsx("button",{onClick:j=>{j.stopPropagation(),n(z.id)},title:"Eliminar",className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:l.jsx(bn,{className:"w-5 h-5"})})]})]})]})]},z.id))})]},L))}):l.jsx(dN,{budgets:t,onEdit:r,onDelete:n,onApprove:s,onReject:k,onViewDetail:a,userRoles:o,currentUserId:c,canEditOrDeleteBudget:v,canApproveOrRejectBudget:y}),d&&l.jsxs(Qo,{onClose:()=>u(!1),title:"Rechazar Presupuesto",children:[l.jsxs("p",{className:"mb-4 text-brand-text dark:text-gray-300",children:["Estás a punto de rechazar el presupuesto: ",l.jsx("span",{className:"font-bold",children:g?.title}),". Por favor, introduce una razón para el rechazo."]}),l.jsx("textarea",{value:f,onChange:L=>x(L.target.value),className:"w-full p-2 border rounded-lg dark:bg-dark-surface dark:text-gray-200",rows:"4",placeholder:"Razón de rechazo..."}),l.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[l.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 rounded-lg bg-gray-100 dark:bg-dark-surface text-gray-700 dark:text-gray-200 border border-gray-200 dark:border-gray-600",children:"Cancelar"}),l.jsx("button",{onClick:A,className:"px-5 py-2 rounded-lg bg-red-700 text-white hover:bg-red-600",children:"Confirmar Rechazo"})]})]})]})},fN="modulepreload",pN=function(t){return"/"+t},gg={},Kd=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){let c=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=a?.nonce||a?.getAttribute("nonce");s=c(r.map(d=>{if(d=pN(d),d in gg)return;gg[d]=!0;const u=d.endsWith(".css"),g=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":fN,u||(m.as="script"),m.crossOrigin="",m.href=d,o&&m.setAttribute("nonce",o),document.head.appendChild(m),u)return new Promise((f,x)=>{m.addEventListener("load",f),m.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})};function Ot(t){"@babel/helpers - typeof";return Ot=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ot(t)}var Vn=Uint8Array,mn=Uint16Array,Mh=Int32Array,Th=new Vn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ih=new Vn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),mg=new Vn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Fx=function(t,e){for(var r=new mn(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var s=new Mh(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)s[i]=i-r[n]<<5|n;return{b:r,r:s}},Rx=Fx(Th,2),gN=Rx.b,$u=Rx.r;gN[28]=258,$u[258]=28;var mN=Fx(Ih,0),xg=mN.r,Yu=new mn(32768);for(var $t=0;$t<32768;++$t){var ai=($t&43690)>>1|($t&21845)<<1;ai=(ai&52428)>>2|(ai&13107)<<2,ai=(ai&61680)>>4|(ai&3855)<<4,Yu[$t]=((ai&65280)>>8|(ai&255)<<8)>>1}var Eo=(function(t,e,r){for(var n=t.length,s=0,i=new mn(e);s<n;++s)t[s]&&++i[t[s]-1];var a=new mn(e);for(s=1;s<e;++s)a[s]=a[s-1]+i[s-1]<<1;var o;if(r){o=new mn(1<<e);var c=15-e;for(s=0;s<n;++s)if(t[s])for(var d=s<<4|t[s],u=e-t[s],g=a[t[s]-1]++<<u,m=g|(1<<u)-1;g<=m;++g)o[Yu[g]>>c]=d}else for(o=new mn(n),s=0;s<n;++s)t[s]&&(o[s]=Yu[a[t[s]-1]++]>>15-t[s]);return o}),Gi=new Vn(288);for(var $t=0;$t<144;++$t)Gi[$t]=8;for(var $t=144;$t<256;++$t)Gi[$t]=9;for(var $t=256;$t<280;++$t)Gi[$t]=7;for(var $t=280;$t<288;++$t)Gi[$t]=8;var Dc=new Vn(32);for(var $t=0;$t<32;++$t)Dc[$t]=5;var xN=Eo(Gi,9,0),bN=Eo(Dc,5,0),Mx=function(t){return(t+7)/8|0},yN=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new Vn(t.subarray(e,r))},Ds=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},wo=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},Zd=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var s=r.length,i=r.slice();if(!s)return{t:Ix,l:0};if(s==1){var a=new Vn(r[0].s+1);return a[r[0].s]=1,{t:a,l:1}}r.sort(function(q,z){return q.f-z.f}),r.push({s:-1,f:25001});var o=r[0],c=r[1],d=0,u=1,g=2;for(r[0]={s:-1,f:o.f+c.f,l:o,r:c};u!=s-1;)o=r[r[d].f<r[g].f?d++:g++],c=r[d!=u&&r[d].f<r[g].f?d++:g++],r[u++]={s:-1,f:o.f+c.f,l:o,r:c};for(var m=i[0].s,n=1;n<s;++n)i[n].s>m&&(m=i[n].s);var f=new mn(m+1),x=Gu(r[u-1],f,0);if(x>e){var n=0,v=0,y=x-e,k=1<<y;for(i.sort(function(z,$){return f[$.s]-f[z.s]||z.f-$.f});n<s;++n){var A=i[n].s;if(f[A]>e)v+=k-(1<<x-f[A]),f[A]=e;else break}for(v>>=y;v>0;){var D=i[n].s;f[D]<e?v-=1<<e-f[D]++-1:++n}for(;n>=0&&v;--n){var L=i[n].s;f[L]==e&&(--f[L],++v)}x=e}return{t:new Vn(f),l:x}},Gu=function(t,e,r){return t.s==-1?Math.max(Gu(t.l,e,r+1),Gu(t.r,e,r+1)):e[t.s]=r},bg=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new mn(++e),n=0,s=t[0],i=1,a=function(c){r[n++]=c},o=1;o<=e;++o)if(t[o]==s&&o!=e)++i;else{if(!s&&i>2){for(;i>138;i-=138)a(32754);i>2&&(a(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(a(s),--i;i>6;i-=6)a(8304);i>2&&(a(i-3<<5|8208),i=0)}for(;i--;)a(s);i=1,s=t[o]}return{c:r.subarray(0,n),n:e}},ko=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},Tx=function(t,e,r){var n=r.length,s=Mx(e+2);t[s]=n&255,t[s+1]=n>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var i=0;i<n;++i)t[s+i+4]=r[i];return(s+4+n)*8},yg=function(t,e,r,n,s,i,a,o,c,d,u){Ds(e,u++,r),++s[256];for(var g=Zd(s,15),m=g.t,f=g.l,x=Zd(i,15),v=x.t,y=x.l,k=bg(m),A=k.c,D=k.n,L=bg(v),q=L.c,z=L.n,$=new mn(19),j=0;j<A.length;++j)++$[A[j]&31];for(var j=0;j<q.length;++j)++$[q[j]&31];for(var _=Zd($,7),M=_.t,S=_.l,C=19;C>4&&!M[mg[C-1]];--C);var R=d+5<<3,F=ko(s,Gi)+ko(i,Dc)+a,V=ko(s,m)+ko(i,v)+a+14+3*C+ko($,M)+2*$[16]+3*$[17]+7*$[18];if(c>=0&&R<=F&&R<=V)return Tx(e,u,t.subarray(c,c+d));var te,ne,se,K;if(Ds(e,u,1+(V<F)),u+=2,V<F){te=Eo(m,f,0),ne=m,se=Eo(v,y,0),K=v;var Q=Eo(M,S,0);Ds(e,u,D-257),Ds(e,u+5,z-1),Ds(e,u+10,C-4),u+=14;for(var j=0;j<C;++j)Ds(e,u+3*j,M[mg[j]]);u+=3*C;for(var re=[A,q],P=0;P<2;++P)for(var I=re[P],j=0;j<I.length;++j){var Y=I[j]&31;Ds(e,u,Q[Y]),u+=M[Y],Y>15&&(Ds(e,u,I[j]>>5&127),u+=I[j]>>12)}}else te=xN,ne=Gi,se=bN,K=Dc;for(var j=0;j<o;++j){var ee=n[j];if(ee>255){var Y=ee>>18&31;wo(e,u,te[Y+257]),u+=ne[Y+257],Y>7&&(Ds(e,u,ee>>23&31),u+=Th[Y]);var ie=ee&31;wo(e,u,se[ie]),u+=K[ie],ie>3&&(wo(e,u,ee>>5&8191),u+=Ih[ie])}else wo(e,u,te[ee]),u+=ne[ee]}return wo(e,u,te[256]),u+ne[256]},vN=new Mh([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Ix=new Vn(0),wN=function(t,e,r,n,s,i){var a=i.z||t.length,o=new Vn(n+a+5*(1+Math.ceil(a/7e3))+s),c=o.subarray(n,o.length-s),d=i.l,u=(i.r||0)&7;if(e){u&&(c[0]=i.r>>3);for(var g=vN[e-1],m=g>>13,f=g&8191,x=(1<<r)-1,v=i.p||new mn(32768),y=i.h||new mn(x+1),k=Math.ceil(r/3),A=2*k,D=function(Ee){return(t[Ee]^t[Ee+1]<<k^t[Ee+2]<<A)&x},L=new Mh(25e3),q=new mn(288),z=new mn(32),$=0,j=0,_=i.i||0,M=0,S=i.w||0,C=0;_+2<a;++_){var R=D(_),F=_&32767,V=y[R];if(v[F]=V,y[R]=F,S<=_){var te=a-_;if(($>7e3||M>24576)&&(te>423||!d)){u=yg(t,c,0,L,q,z,j,M,C,_-C,u),M=$=j=0,C=_;for(var ne=0;ne<286;++ne)q[ne]=0;for(var ne=0;ne<30;++ne)z[ne]=0}var se=2,K=0,Q=f,re=F-V&32767;if(te>2&&R==D(_-re))for(var P=Math.min(m,te)-1,I=Math.min(32767,_),Y=Math.min(258,te);re<=I&&--Q&&F!=V;){if(t[_+se]==t[_+se-re]){for(var ee=0;ee<Y&&t[_+ee]==t[_+ee-re];++ee);if(ee>se){if(se=ee,K=re,ee>P)break;for(var ie=Math.min(re,ee-2),ce=0,ne=0;ne<ie;++ne){var de=_-re+ne&32767,he=v[de],xe=de-he&32767;xe>ce&&(ce=xe,V=de)}}}F=V,V=v[F],re+=F-V&32767}if(K){L[M++]=268435456|$u[se]<<18|xg[K];var pe=$u[se]&31,Ae=xg[K]&31;j+=Th[pe]+Ih[Ae],++q[257+pe],++z[Ae],S=_+se,++$}else L[M++]=t[_],++q[t[_]]}}for(_=Math.max(_,S);_<a;++_)L[M++]=t[_],++q[t[_]];u=yg(t,c,d,L,q,z,j,M,C,_-C,u),d||(i.r=u&7|c[u/8|0]<<3,u-=7,i.h=y,i.p=v,i.i=_,i.w=S)}else{for(var _=i.w||0;_<a+d;_+=65535){var Pe=_+65535;Pe>=a&&(c[u/8|0]=d,Pe=a),u=Tx(c,u+1,t.subarray(_,Pe))}i.i=a}return yN(o,0,n+Mx(u)+s)},Bx=function(){var t=1,e=0;return{p:function(r){for(var n=t,s=e,i=r.length|0,a=0;a!=i;){for(var o=Math.min(a+2655,i);a<o;++a)s+=n+=r[a];n=(n&65535)+15*(n>>16),s=(s&65535)+15*(s>>16)}t=n,e=s},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},kN=function(t,e,r,n,s){if(!s&&(s={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),a=new Vn(i.length+t.length);a.set(i),a.set(t,i.length),t=a,s.w=i.length}return wN(t,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,s)},zx=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},NN=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var s=Bx();s.p(e.dictionary),zx(t,2,s.d())}};function Xu(t,e){e||(e={});var r=Bx();r.p(t);var n=kN(t,e,e.dictionary?6:2,4);return NN(n,e),zx(n,n.length-4,r.d()),n}var jN=typeof TextDecoder<"u"&&new TextDecoder,_N=0;try{jN.decode(Ix,{stream:!0}),_N=1}catch{}function SN(t){if(Array.isArray(t))return t}function AN(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,i,a,o=[],c=!0,d=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==e);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(d)throw s}}return o}}function vg(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function CN(t,e){if(t){if(typeof t=="string")return vg(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vg(t,e):void 0}}function PN(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wg(t,e){return SN(t)||AN(t,e)||CN(t,e)||PN()}function kg(t,e="utf8"){return new TextDecoder(e).decode(t)}const LN=new TextEncoder;function EN(t){return LN.encode(t)}const ON=1024*8,DN=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),Qd={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Bh{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=ON,r={}){let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const s=r.offset?r.offset>>>0:0,i=e.byteLength-s;let a=s;(ArrayBuffer.isView(e)||e instanceof Bh)&&(e.byteLength!==e.buffer.byteLength&&(a=e.byteOffset+s),e=e.buffer),n?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=e,this.length=i,this.byteLength=i,this.byteOffset=a,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,a,i),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,s=new Uint8Array(n);s.set(new Uint8Array(this.buffer)),this.buffer=s.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,r){const n=Qd[r].BYTES_PER_ELEMENT*e,s=this.byteOffset+this.offset,i=this.buffer.slice(s,s+n);if(this.littleEndian===DN&&r!=="uint8"&&r!=="int8"){const o=new Uint8Array(this.buffer.slice(s,s+n));o.reverse();const c=new Qd[r](o.buffer);return this.offset+=n,c.reverse(),c}const a=new Qd[r](i);return this.offset+=n,a}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let r="";for(let n=0;n<e;n++)r+=this.readChar();return r}readUtf8(e=1){return kg(this.readBytes(e))}decodeText(e=1,r="utf8"){return kg(this.readBytes(e),r)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let r=0;r<e.length;r++)this._data.setUint8(this.offset++,e[r]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let r=0;r<e.length;r++)this.writeUint8(e.charCodeAt(r));return this}writeUtf8(e){return this.writeBytes(EN(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Ia(t){let e=t.length;for(;--e>=0;)t[e]=0}const FN=3,RN=258,Ux=29,MN=256,TN=MN+1+Ux,qx=30,IN=512,BN=new Array((TN+2)*2);Ia(BN);const zN=new Array(qx*2);Ia(zN);const UN=new Array(IN);Ia(UN);const qN=new Array(RN-FN+1);Ia(qN);const WN=new Array(Ux);Ia(WN);const HN=new Array(qx);Ia(HN);const VN=(t,e,r,n)=>{let s=t&65535|0,i=t>>>16&65535|0,a=0;for(;r!==0;){a=r>2e3?2e3:r,r-=a;do s=s+e[n++]|0,i=i+s|0;while(--a);s%=65521,i%=65521}return s|i<<16|0};var Ju=VN;const $N=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},YN=new Uint32Array($N()),GN=(t,e,r,n)=>{const s=YN,i=n+r;t^=-1;for(let a=n;a<i;a++)t=t>>>8^s[(t^e[a])&255];return t^-1};var as=GN,Ku={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Wx={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const XN=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var JN=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)XN(r,n)&&(t[n]=r[n])}}return t},KN=t=>{let e=0;for(let n=0,s=t.length;n<s;n++)e+=t[n].length;const r=new Uint8Array(e);for(let n=0,s=0,i=t.length;n<i;n++){let a=t[n];r.set(a,s),s+=a.length}return r},Hx={assign:JN,flattenChunks:KN};let Vx=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Vx=!1}const Ho=new Uint8Array(256);for(let t=0;t<256;t++)Ho[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Ho[254]=Ho[254]=1;var ZN=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,s,i,a=t.length,o=0;for(s=0;s<a;s++)r=t.charCodeAt(s),(r&64512)===55296&&s+1<a&&(n=t.charCodeAt(s+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),s++)),o+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(o),i=0,s=0;i<o;s++)r=t.charCodeAt(s),(r&64512)===55296&&s+1<a&&(n=t.charCodeAt(s+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),s++)),r<128?e[i++]=r:r<2048?(e[i++]=192|r>>>6,e[i++]=128|r&63):r<65536?(e[i++]=224|r>>>12,e[i++]=128|r>>>6&63,e[i++]=128|r&63):(e[i++]=240|r>>>18,e[i++]=128|r>>>12&63,e[i++]=128|r>>>6&63,e[i++]=128|r&63);return e};const QN=(t,e)=>{if(e<65534&&t.subarray&&Vx)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r};var ej=(t,e)=>{const r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,s;const i=new Array(r*2);for(s=0,n=0;n<r;){let a=t[n++];if(a<128){i[s++]=a;continue}let o=Ho[a];if(o>4){i[s++]=65533,n+=o-1;continue}for(a&=o===2?31:o===3?15:7;o>1&&n<r;)a=a<<6|t[n++]&63,o--;if(o>1){i[s++]=65533;continue}a<65536?i[s++]=a:(a-=65536,i[s++]=55296|a>>10&1023,i[s++]=56320|a&1023)}return QN(i,s)},tj=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+Ho[t[r]]>e?r:e},Zu={string2buf:ZN,buf2string:ej,utf8border:tj};function rj(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var nj=rj;const Ql=16209,sj=16191;var ij=function(e,r){let n,s,i,a,o,c,d,u,g,m,f,x,v,y,k,A,D,L,q,z,$,j,_,M;const S=e.state;n=e.next_in,_=e.input,s=n+(e.avail_in-5),i=e.next_out,M=e.output,a=i-(r-e.avail_out),o=i+(e.avail_out-257),c=S.dmax,d=S.wsize,u=S.whave,g=S.wnext,m=S.window,f=S.hold,x=S.bits,v=S.lencode,y=S.distcode,k=(1<<S.lenbits)-1,A=(1<<S.distbits)-1;e:do{x<15&&(f+=_[n++]<<x,x+=8,f+=_[n++]<<x,x+=8),D=v[f&k];t:for(;;){if(L=D>>>24,f>>>=L,x-=L,L=D>>>16&255,L===0)M[i++]=D&65535;else if(L&16){q=D&65535,L&=15,L&&(x<L&&(f+=_[n++]<<x,x+=8),q+=f&(1<<L)-1,f>>>=L,x-=L),x<15&&(f+=_[n++]<<x,x+=8,f+=_[n++]<<x,x+=8),D=y[f&A];r:for(;;){if(L=D>>>24,f>>>=L,x-=L,L=D>>>16&255,L&16){if(z=D&65535,L&=15,x<L&&(f+=_[n++]<<x,x+=8,x<L&&(f+=_[n++]<<x,x+=8)),z+=f&(1<<L)-1,z>c){e.msg="invalid distance too far back",S.mode=Ql;break e}if(f>>>=L,x-=L,L=i-a,z>L){if(L=z-L,L>u&&S.sane){e.msg="invalid distance too far back",S.mode=Ql;break e}if($=0,j=m,g===0){if($+=d-L,L<q){q-=L;do M[i++]=m[$++];while(--L);$=i-z,j=M}}else if(g<L){if($+=d+g-L,L-=g,L<q){q-=L;do M[i++]=m[$++];while(--L);if($=0,g<q){L=g,q-=L;do M[i++]=m[$++];while(--L);$=i-z,j=M}}}else if($+=g-L,L<q){q-=L;do M[i++]=m[$++];while(--L);$=i-z,j=M}for(;q>2;)M[i++]=j[$++],M[i++]=j[$++],M[i++]=j[$++],q-=3;q&&(M[i++]=j[$++],q>1&&(M[i++]=j[$++]))}else{$=i-z;do M[i++]=M[$++],M[i++]=M[$++],M[i++]=M[$++],q-=3;while(q>2);q&&(M[i++]=M[$++],q>1&&(M[i++]=M[$++]))}}else if((L&64)===0){D=y[(D&65535)+(f&(1<<L)-1)];continue r}else{e.msg="invalid distance code",S.mode=Ql;break e}break}}else if((L&64)===0){D=v[(D&65535)+(f&(1<<L)-1)];continue t}else if(L&32){S.mode=sj;break e}else{e.msg="invalid literal/length code",S.mode=Ql;break e}break}}while(n<s&&i<o);q=x>>3,n-=q,x-=q<<3,f&=(1<<x)-1,e.next_in=n,e.next_out=i,e.avail_in=n<s?5+(s-n):5-(n-s),e.avail_out=i<o?257+(o-i):257-(i-o),S.hold=f,S.bits=x};const ma=15,Ng=852,jg=592,_g=0,eu=1,Sg=2,aj=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),oj=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),lj=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),cj=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),dj=(t,e,r,n,s,i,a,o)=>{const c=o.bits;let d=0,u=0,g=0,m=0,f=0,x=0,v=0,y=0,k=0,A=0,D,L,q,z,$,j=null,_;const M=new Uint16Array(ma+1),S=new Uint16Array(ma+1);let C=null,R,F,V;for(d=0;d<=ma;d++)M[d]=0;for(u=0;u<n;u++)M[e[r+u]]++;for(f=c,m=ma;m>=1&&M[m]===0;m--);if(f>m&&(f=m),m===0)return s[i++]=1<<24|64<<16|0,s[i++]=1<<24|64<<16|0,o.bits=1,0;for(g=1;g<m&&M[g]===0;g++);for(f<g&&(f=g),y=1,d=1;d<=ma;d++)if(y<<=1,y-=M[d],y<0)return-1;if(y>0&&(t===_g||m!==1))return-1;for(S[1]=0,d=1;d<ma;d++)S[d+1]=S[d]+M[d];for(u=0;u<n;u++)e[r+u]!==0&&(a[S[e[r+u]]++]=u);if(t===_g?(j=C=a,_=20):t===eu?(j=aj,C=oj,_=257):(j=lj,C=cj,_=0),A=0,u=0,d=g,$=i,x=f,v=0,q=-1,k=1<<f,z=k-1,t===eu&&k>Ng||t===Sg&&k>jg)return 1;for(;;){R=d-v,a[u]+1<_?(F=0,V=a[u]):a[u]>=_?(F=C[a[u]-_],V=j[a[u]-_]):(F=96,V=0),D=1<<d-v,L=1<<x,g=L;do L-=D,s[$+(A>>v)+L]=R<<24|F<<16|V|0;while(L!==0);for(D=1<<d-1;A&D;)D>>=1;if(D!==0?(A&=D-1,A+=D):A=0,u++,--M[d]===0){if(d===m)break;d=e[r+a[u]]}if(d>f&&(A&z)!==q){for(v===0&&(v=f),$+=g,x=d-v,y=1<<x;x+v<m&&(y-=M[x+v],!(y<=0));)x++,y<<=1;if(k+=1<<x,t===eu&&k>Ng||t===Sg&&k>jg)return 1;q=A&z,s[q]=f<<24|x<<16|$-i|0}}return A!==0&&(s[$+A]=d-v<<24|64<<16|0),o.bits=f,0};var Oo=dj;const uj=0,$x=1,Yx=2,{Z_FINISH:Ag,Z_BLOCK:hj,Z_TREES:ec,Z_OK:Xi,Z_STREAM_END:fj,Z_NEED_DICT:pj,Z_STREAM_ERROR:Dn,Z_DATA_ERROR:Gx,Z_MEM_ERROR:Xx,Z_BUF_ERROR:gj,Z_DEFLATED:Cg}=Wx,rd=16180,Pg=16181,Lg=16182,Eg=16183,Og=16184,Dg=16185,Fg=16186,Rg=16187,Mg=16188,Tg=16189,Fc=16190,Fs=16191,tu=16192,Ig=16193,ru=16194,Bg=16195,zg=16196,Ug=16197,qg=16198,tc=16199,rc=16200,Wg=16201,Hg=16202,Vg=16203,$g=16204,Yg=16205,nu=16206,Gg=16207,Xg=16208,Xt=16209,Jx=16210,Kx=16211,mj=852,xj=592,bj=15,yj=bj,Jg=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function vj(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Zi=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<rd||e.mode>Kx?1:0},Zx=t=>{if(Zi(t))return Dn;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=rd,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(mj),e.distcode=e.distdyn=new Int32Array(xj),e.sane=1,e.back=-1,Xi},Qx=t=>{if(Zi(t))return Dn;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,Zx(t)},e1=(t,e)=>{let r;if(Zi(t))return Dn;const n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Dn:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,Qx(t))},t1=(t,e)=>{if(!t)return Dn;const r=new vj;t.state=r,r.strm=t,r.window=null,r.mode=rd;const n=e1(t,e);return n!==Xi&&(t.state=null),n},wj=t=>t1(t,yj);let Kg=!0,su,iu;const kj=t=>{if(Kg){su=new Int32Array(512),iu=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Oo($x,t.lens,0,288,su,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Oo(Yx,t.lens,0,32,iu,0,t.work,{bits:5}),Kg=!1}t.lencode=su,t.lenbits=9,t.distcode=iu,t.distbits=5},r1=(t,e,r,n)=>{let s;const i=t.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(e.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):(s=i.wsize-i.wnext,s>n&&(s=n),i.window.set(e.subarray(r-n,r-n+s),i.wnext),n-=s,n?(i.window.set(e.subarray(r-n,r),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=s,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=s))),0},Nj=(t,e)=>{let r,n,s,i,a,o,c,d,u,g,m,f,x,v,y=0,k,A,D,L,q,z,$,j;const _=new Uint8Array(4);let M,S;const C=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Zi(t)||!t.output||!t.input&&t.avail_in!==0)return Dn;r=t.state,r.mode===Fs&&(r.mode=tu),a=t.next_out,s=t.output,c=t.avail_out,i=t.next_in,n=t.input,o=t.avail_in,d=r.hold,u=r.bits,g=o,m=c,j=Xi;e:for(;;)switch(r.mode){case rd:if(r.wrap===0){r.mode=tu;break}for(;u<16;){if(o===0)break e;o--,d+=n[i++]<<u,u+=8}if(r.wrap&2&&d===35615){r.wbits===0&&(r.wbits=15),r.check=0,_[0]=d&255,_[1]=d>>>8&255,r.check=as(r.check,_,2,0),d=0,u=0,r.mode=Pg;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((d&255)<<8)+(d>>8))%31){t.msg="incorrect header check",r.mode=Xt;break}if((d&15)!==Cg){t.msg="unknown compression method",r.mode=Xt;break}if(d>>>=4,u-=4,$=(d&15)+8,r.wbits===0&&(r.wbits=$),$>15||$>r.wbits){t.msg="invalid window size",r.mode=Xt;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=d&512?Tg:Fs,d=0,u=0;break;case Pg:for(;u<16;){if(o===0)break e;o--,d+=n[i++]<<u,u+=8}if(r.flags=d,(r.flags&255)!==Cg){t.msg="unknown compression method",r.mode=Xt;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=Xt;break}r.head&&(r.head.text=d>>8&1),r.flags&512&&r.wrap&4&&(_[0]=d&255,_[1]=d>>>8&255,r.check=as(r.check,_,2,0)),d=0,u=0,r.mode=Lg;case Lg:for(;u<32;){if(o===0)break e;o--,d+=n[i++]<<u,u+=8}r.head&&(r.head.time=d),r.flags&512&&r.wrap&4&&(_[0]=d&255,_[1]=d>>>8&255,_[2]=d>>>16&255,_[3]=d>>>24&255,r.check=as(r.check,_,4,0)),d=0,u=0,r.mode=Eg;case Eg:for(;u<16;){if(o===0)break e;o--,d+=n[i++]<<u,u+=8}r.head&&(r.head.xflags=d&255,r.head.os=d>>8),r.flags&512&&r.wrap&4&&(_[0]=d&255,_[1]=d>>>8&255,r.check=as(r.check,_,2,0)),d=0,u=0,r.mode=Og;case Og:if(r.flags&1024){for(;u<16;){if(o===0)break e;o--,d+=n[i++]<<u,u+=8}r.length=d,r.head&&(r.head.extra_len=d),r.flags&512&&r.wrap&4&&(_[0]=d&255,_[1]=d>>>8&255,r.check=as(r.check,_,2,0)),d=0,u=0}else r.head&&(r.head.extra=null);r.mode=Dg;case Dg:if(r.flags&1024&&(f=r.length,f>o&&(f=o),f&&(r.head&&($=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(i,i+f),$)),r.flags&512&&r.wrap&4&&(r.check=as(r.check,n,f,i)),o-=f,i+=f,r.length-=f),r.length))break e;r.length=0,r.mode=Fg;case Fg:if(r.flags&2048){if(o===0)break e;f=0;do $=n[i+f++],r.head&&$&&r.length<65536&&(r.head.name+=String.fromCharCode($));while($&&f<o);if(r.flags&512&&r.wrap&4&&(r.check=as(r.check,n,f,i)),o-=f,i+=f,$)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=Rg;case Rg:if(r.flags&4096){if(o===0)break e;f=0;do $=n[i+f++],r.head&&$&&r.length<65536&&(r.head.comment+=String.fromCharCode($));while($&&f<o);if(r.flags&512&&r.wrap&4&&(r.check=as(r.check,n,f,i)),o-=f,i+=f,$)break e}else r.head&&(r.head.comment=null);r.mode=Mg;case Mg:if(r.flags&512){for(;u<16;){if(o===0)break e;o--,d+=n[i++]<<u,u+=8}if(r.wrap&4&&d!==(r.check&65535)){t.msg="header crc mismatch",r.mode=Xt;break}d=0,u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=Fs;break;case Tg:for(;u<32;){if(o===0)break e;o--,d+=n[i++]<<u,u+=8}t.adler=r.check=Jg(d),d=0,u=0,r.mode=Fc;case Fc:if(r.havedict===0)return t.next_out=a,t.avail_out=c,t.next_in=i,t.avail_in=o,r.hold=d,r.bits=u,pj;t.adler=r.check=1,r.mode=Fs;case Fs:if(e===hj||e===ec)break e;case tu:if(r.last){d>>>=u&7,u-=u&7,r.mode=nu;break}for(;u<3;){if(o===0)break e;o--,d+=n[i++]<<u,u+=8}switch(r.last=d&1,d>>>=1,u-=1,d&3){case 0:r.mode=Ig;break;case 1:if(kj(r),r.mode=tc,e===ec){d>>>=2,u-=2;break e}break;case 2:r.mode=zg;break;case 3:t.msg="invalid block type",r.mode=Xt}d>>>=2,u-=2;break;case Ig:for(d>>>=u&7,u-=u&7;u<32;){if(o===0)break e;o--,d+=n[i++]<<u,u+=8}if((d&65535)!==(d>>>16^65535)){t.msg="invalid stored block lengths",r.mode=Xt;break}if(r.length=d&65535,d=0,u=0,r.mode=ru,e===ec)break e;case ru:r.mode=Bg;case Bg:if(f=r.length,f){if(f>o&&(f=o),f>c&&(f=c),f===0)break e;s.set(n.subarray(i,i+f),a),o-=f,i+=f,c-=f,a+=f,r.length-=f;break}r.mode=Fs;break;case zg:for(;u<14;){if(o===0)break e;o--,d+=n[i++]<<u,u+=8}if(r.nlen=(d&31)+257,d>>>=5,u-=5,r.ndist=(d&31)+1,d>>>=5,u-=5,r.ncode=(d&15)+4,d>>>=4,u-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=Xt;break}r.have=0,r.mode=Ug;case Ug:for(;r.have<r.ncode;){for(;u<3;){if(o===0)break e;o--,d+=n[i++]<<u,u+=8}r.lens[C[r.have++]]=d&7,d>>>=3,u-=3}for(;r.have<19;)r.lens[C[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,M={bits:r.lenbits},j=Oo(uj,r.lens,0,19,r.lencode,0,r.work,M),r.lenbits=M.bits,j){t.msg="invalid code lengths set",r.mode=Xt;break}r.have=0,r.mode=qg;case qg:for(;r.have<r.nlen+r.ndist;){for(;y=r.lencode[d&(1<<r.lenbits)-1],k=y>>>24,A=y>>>16&255,D=y&65535,!(k<=u);){if(o===0)break e;o--,d+=n[i++]<<u,u+=8}if(D<16)d>>>=k,u-=k,r.lens[r.have++]=D;else{if(D===16){for(S=k+2;u<S;){if(o===0)break e;o--,d+=n[i++]<<u,u+=8}if(d>>>=k,u-=k,r.have===0){t.msg="invalid bit length repeat",r.mode=Xt;break}$=r.lens[r.have-1],f=3+(d&3),d>>>=2,u-=2}else if(D===17){for(S=k+3;u<S;){if(o===0)break e;o--,d+=n[i++]<<u,u+=8}d>>>=k,u-=k,$=0,f=3+(d&7),d>>>=3,u-=3}else{for(S=k+7;u<S;){if(o===0)break e;o--,d+=n[i++]<<u,u+=8}d>>>=k,u-=k,$=0,f=11+(d&127),d>>>=7,u-=7}if(r.have+f>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=Xt;break}for(;f--;)r.lens[r.have++]=$}}if(r.mode===Xt)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=Xt;break}if(r.lenbits=9,M={bits:r.lenbits},j=Oo($x,r.lens,0,r.nlen,r.lencode,0,r.work,M),r.lenbits=M.bits,j){t.msg="invalid literal/lengths set",r.mode=Xt;break}if(r.distbits=6,r.distcode=r.distdyn,M={bits:r.distbits},j=Oo(Yx,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,M),r.distbits=M.bits,j){t.msg="invalid distances set",r.mode=Xt;break}if(r.mode=tc,e===ec)break e;case tc:r.mode=rc;case rc:if(o>=6&&c>=258){t.next_out=a,t.avail_out=c,t.next_in=i,t.avail_in=o,r.hold=d,r.bits=u,ij(t,m),a=t.next_out,s=t.output,c=t.avail_out,i=t.next_in,n=t.input,o=t.avail_in,d=r.hold,u=r.bits,r.mode===Fs&&(r.back=-1);break}for(r.back=0;y=r.lencode[d&(1<<r.lenbits)-1],k=y>>>24,A=y>>>16&255,D=y&65535,!(k<=u);){if(o===0)break e;o--,d+=n[i++]<<u,u+=8}if(A&&(A&240)===0){for(L=k,q=A,z=D;y=r.lencode[z+((d&(1<<L+q)-1)>>L)],k=y>>>24,A=y>>>16&255,D=y&65535,!(L+k<=u);){if(o===0)break e;o--,d+=n[i++]<<u,u+=8}d>>>=L,u-=L,r.back+=L}if(d>>>=k,u-=k,r.back+=k,r.length=D,A===0){r.mode=Yg;break}if(A&32){r.back=-1,r.mode=Fs;break}if(A&64){t.msg="invalid literal/length code",r.mode=Xt;break}r.extra=A&15,r.mode=Wg;case Wg:if(r.extra){for(S=r.extra;u<S;){if(o===0)break e;o--,d+=n[i++]<<u,u+=8}r.length+=d&(1<<r.extra)-1,d>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=Hg;case Hg:for(;y=r.distcode[d&(1<<r.distbits)-1],k=y>>>24,A=y>>>16&255,D=y&65535,!(k<=u);){if(o===0)break e;o--,d+=n[i++]<<u,u+=8}if((A&240)===0){for(L=k,q=A,z=D;y=r.distcode[z+((d&(1<<L+q)-1)>>L)],k=y>>>24,A=y>>>16&255,D=y&65535,!(L+k<=u);){if(o===0)break e;o--,d+=n[i++]<<u,u+=8}d>>>=L,u-=L,r.back+=L}if(d>>>=k,u-=k,r.back+=k,A&64){t.msg="invalid distance code",r.mode=Xt;break}r.offset=D,r.extra=A&15,r.mode=Vg;case Vg:if(r.extra){for(S=r.extra;u<S;){if(o===0)break e;o--,d+=n[i++]<<u,u+=8}r.offset+=d&(1<<r.extra)-1,d>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=Xt;break}r.mode=$g;case $g:if(c===0)break e;if(f=m-c,r.offset>f){if(f=r.offset-f,f>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=Xt;break}f>r.wnext?(f-=r.wnext,x=r.wsize-f):x=r.wnext-f,f>r.length&&(f=r.length),v=r.window}else v=s,x=a-r.offset,f=r.length;f>c&&(f=c),c-=f,r.length-=f;do s[a++]=v[x++];while(--f);r.length===0&&(r.mode=rc);break;case Yg:if(c===0)break e;s[a++]=r.length,c--,r.mode=rc;break;case nu:if(r.wrap){for(;u<32;){if(o===0)break e;o--,d|=n[i++]<<u,u+=8}if(m-=c,t.total_out+=m,r.total+=m,r.wrap&4&&m&&(t.adler=r.check=r.flags?as(r.check,s,m,a-m):Ju(r.check,s,m,a-m)),m=c,r.wrap&4&&(r.flags?d:Jg(d))!==r.check){t.msg="incorrect data check",r.mode=Xt;break}d=0,u=0}r.mode=Gg;case Gg:if(r.wrap&&r.flags){for(;u<32;){if(o===0)break e;o--,d+=n[i++]<<u,u+=8}if(r.wrap&4&&d!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=Xt;break}d=0,u=0}r.mode=Xg;case Xg:j=fj;break e;case Xt:j=Gx;break e;case Jx:return Xx;case Kx:default:return Dn}return t.next_out=a,t.avail_out=c,t.next_in=i,t.avail_in=o,r.hold=d,r.bits=u,(r.wsize||m!==t.avail_out&&r.mode<Xt&&(r.mode<nu||e!==Ag))&&r1(t,t.output,t.next_out,m-t.avail_out),g-=t.avail_in,m-=t.avail_out,t.total_in+=g,t.total_out+=m,r.total+=m,r.wrap&4&&m&&(t.adler=r.check=r.flags?as(r.check,s,m,t.next_out-m):Ju(r.check,s,m,t.next_out-m)),t.data_type=r.bits+(r.last?64:0)+(r.mode===Fs?128:0)+(r.mode===tc||r.mode===ru?256:0),(g===0&&m===0||e===Ag)&&j===Xi&&(j=gj),j},jj=t=>{if(Zi(t))return Dn;let e=t.state;return e.window&&(e.window=null),t.state=null,Xi},_j=(t,e)=>{if(Zi(t))return Dn;const r=t.state;return(r.wrap&2)===0?Dn:(r.head=e,e.done=!1,Xi)},Sj=(t,e)=>{const r=e.length;let n,s,i;return Zi(t)||(n=t.state,n.wrap!==0&&n.mode!==Fc)?Dn:n.mode===Fc&&(s=1,s=Ju(s,e,r,0),s!==n.check)?Gx:(i=r1(t,e,r,r),i?(n.mode=Jx,Xx):(n.havedict=1,Xi))};var Aj=Qx,Cj=e1,Pj=Zx,Lj=wj,Ej=t1,Oj=Nj,Dj=jj,Fj=_j,Rj=Sj,Mj="pako inflate (from Nodeca project)",Is={inflateReset:Aj,inflateReset2:Cj,inflateResetKeep:Pj,inflateInit:Lj,inflateInit2:Ej,inflate:Oj,inflateEnd:Dj,inflateGetHeader:Fj,inflateSetDictionary:Rj,inflateInfo:Mj};function Tj(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Ij=Tj;const n1=Object.prototype.toString,{Z_NO_FLUSH:Bj,Z_FINISH:zj,Z_OK:Vo,Z_STREAM_END:au,Z_NEED_DICT:ou,Z_STREAM_ERROR:Uj,Z_DATA_ERROR:Zg,Z_MEM_ERROR:qj}=Wx;function el(t){this.options=Hx.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new nj,this.strm.avail_out=0;let r=Is.inflateInit2(this.strm,e.windowBits);if(r!==Vo)throw new Error(Ku[r]);if(this.header=new Ij,Is.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Zu.string2buf(e.dictionary):n1.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=Is.inflateSetDictionary(this.strm,e.dictionary),r!==Vo)))throw new Error(Ku[r])}el.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,s=this.options.dictionary;let i,a,o;if(this.ended)return!1;for(e===~~e?a=e:a=e===!0?zj:Bj,n1.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),i=Is.inflate(r,a),i===ou&&s&&(i=Is.inflateSetDictionary(r,s),i===Vo?i=Is.inflate(r,a):i===Zg&&(i=ou));r.avail_in>0&&i===au&&r.state.wrap>0&&t[r.next_in]!==0;)Is.inflateReset(r),i=Is.inflate(r,a);switch(i){case Uj:case Zg:case ou:case qj:return this.onEnd(i),this.ended=!0,!1}if(o=r.avail_out,r.next_out&&(r.avail_out===0||i===au))if(this.options.to==="string"){let c=Zu.utf8border(r.output,r.next_out),d=r.next_out-c,u=Zu.buf2string(r.output,c);r.next_out=d,r.avail_out=n-d,d&&r.output.set(r.output.subarray(c,c+d),0),this.onData(u)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(i===Vo&&o===0)){if(i===au)return i=Is.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};el.prototype.onData=function(t){this.chunks.push(t)};el.prototype.onEnd=function(t){t===Vo&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Hx.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function Wj(t,e){const r=new el(e);if(r.push(t),r.err)throw r.msg||Ku[r.err];return r.result}var Hj=el,Vj=Wj,$j={Inflate:Hj,inflate:Vj};const{Inflate:Yj,inflate:Gj}=$j;var Qg=Yj,Xj=Gj;const s1=[];for(let t=0;t<256;t++){let e=t;for(let r=0;r<8;r++)e&1?e=3988292384^e>>>1:e=e>>>1;s1[t]=e}const em=4294967295;function Jj(t,e,r){let n=t;for(let s=0;s<r;s++)n=s1[(n^e[s])&255]^n>>>8;return n}function Kj(t,e){return(Jj(em,t,e)^em)>>>0}function tm(t,e,r){const n=t.readUint32(),s=Kj(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(s!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${s}`)}function i1(t,e,r){for(let n=0;n<r;n++)e[n]=t[n]}function a1(t,e,r,n){let s=0;for(;s<n;s++)e[s]=t[s];for(;s<r;s++)e[s]=t[s]+e[s-n]&255}function o1(t,e,r,n){let s=0;if(r.length===0)for(;s<n;s++)e[s]=t[s];else for(;s<n;s++)e[s]=t[s]+r[s]&255}function l1(t,e,r,n,s){let i=0;if(r.length===0){for(;i<s;i++)e[i]=t[i];for(;i<n;i++)e[i]=t[i]+(e[i-s]>>1)&255}else{for(;i<s;i++)e[i]=t[i]+(r[i]>>1)&255;for(;i<n;i++)e[i]=t[i]+(e[i-s]+r[i]>>1)&255}}function c1(t,e,r,n,s){let i=0;if(r.length===0){for(;i<s;i++)e[i]=t[i];for(;i<n;i++)e[i]=t[i]+e[i-s]&255}else{for(;i<s;i++)e[i]=t[i]+r[i]&255;for(;i<n;i++)e[i]=t[i]+Zj(e[i-s],r[i],r[i-s])&255}}function Zj(t,e,r){const n=t+e-r,s=Math.abs(n-t),i=Math.abs(n-e),a=Math.abs(n-r);return s<=i&&s<=a?t:i<=a?e:r}function Qj(t,e,r,n,s,i){switch(t){case 0:i1(e,r,s);break;case 1:a1(e,r,s,i);break;case 2:o1(e,r,n,s);break;case 3:l1(e,r,n,s,i);break;case 4:c1(e,r,n,s,i);break;default:throw new Error(`Unsupported filter: ${t}`)}}const e_=new Uint16Array([255]),t_=new Uint8Array(e_.buffer),r_=t_[0]===255;function n_(t){const{data:e,width:r,height:n,channels:s,depth:i}=t,a=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(i/8)*s,c=new Uint8Array(n*r*o);let d=0;for(let u=0;u<7;u++){const g=a[u],m=Math.ceil((r-g.x)/g.xStep),f=Math.ceil((n-g.y)/g.yStep);if(m<=0||f<=0)continue;const x=m*o,v=new Uint8Array(x);for(let y=0;y<f;y++){const k=e[d++],A=e.subarray(d,d+x);d+=x;const D=new Uint8Array(x);Qj(k,A,D,v,x,o),v.set(D);for(let L=0;L<m;L++){const q=g.x+L*g.xStep,z=g.y+y*g.yStep;if(!(q>=r||z>=n))for(let $=0;$<o;$++)c[(z*r+q)*o+$]=D[L*o+$]}}}if(i===16){const u=new Uint16Array(c.buffer);if(r_)for(let g=0;g<u.length;g++)u[g]=s_(u[g]);return u}else return c}function s_(t){return(t&255)<<8|t>>8&255}const i_=new Uint16Array([255]),a_=new Uint8Array(i_.buffer),o_=a_[0]===255,l_=new Uint8Array(0);function rm(t){const{data:e,width:r,height:n,channels:s,depth:i}=t,a=Math.ceil(i/8)*s,o=Math.ceil(i/8*s*r),c=new Uint8Array(n*o);let d=l_,u=0,g,m;for(let f=0;f<n;f++){switch(g=e.subarray(u+1,u+1+o),m=c.subarray(f*o,(f+1)*o),e[u]){case 0:i1(g,m,o);break;case 1:a1(g,m,o,a);break;case 2:o1(g,m,d,o);break;case 3:l1(g,m,d,o,a);break;case 4:c1(g,m,d,o,a);break;default:throw new Error(`Unsupported filter: ${e[u]}`)}d=m,u+=o+1}if(i===16){const f=new Uint16Array(c.buffer);if(o_)for(let x=0;x<f.length;x++)f[x]=c_(f[x]);return f}else return c}function c_(t){return(t&255)<<8|t>>8&255}const gc=Uint8Array.of(137,80,78,71,13,10,26,10);function nm(t){if(!d_(t.readBytes(gc.length)))throw new Error("wrong PNG signature")}function d_(t){if(t.length<gc.length)return!1;for(let e=0;e<gc.length;e++)if(t[e]!==gc[e])return!1;return!0}const u_="tEXt",h_=0,d1=new TextDecoder("latin1");function f_(t){if(g_(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const p_=/^[\u0000-\u00FF]*$/;function g_(t){if(!p_.test(t))throw new Error("invalid latin1 text")}function m_(t,e,r){const n=u1(e);t[n]=x_(e,r-n.length-1)}function u1(t){for(t.mark();t.readByte()!==h_;);const e=t.offset;t.reset();const r=d1.decode(t.readBytes(e-t.offset-1));return t.skip(1),f_(r),r}function x_(t,e){return d1.decode(t.readBytes(e))}const gn={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},lu={UNKNOWN:-1,DEFLATE:0},sm={UNKNOWN:-1,ADAPTIVE:0},cu={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},nc={NONE:0,BACKGROUND:1,PREVIOUS:2},du={SOURCE:0,OVER:1};class b_ extends Bh{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,r={}){super(e);const{checkCrc:n=!1}=r;this._checkCrc=n,this._inflator=new Qg,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=lu.UNKNOWN,this._filterMethod=sm.UNKNOWN,this._interlaceMethod=cu.UNKNOWN,this._colorType=gn.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(nm(this);!this._end;){const e=this.readUint32(),r=this.readChars(4);this.decodeChunk(e,r)}return this.decodeImage(),this._png}decodeApng(){for(nm(this);!this._end;){const e=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(e,r)}return this.decodeApngImage(),this._apng}decodeChunk(e,r){const n=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case u_:m_(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-n!==e)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?tm(this,e+4,r):this.skip(4)}decodeApngChunk(e,r){const n=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,r),this.offset=n+e;break}if(this.offset-n!==e)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?tm(this,e+4,r):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=y_(this.readUint8());const r=this.readUint8();this._colorType=r;let n;switch(r){case gn.GREYSCALE:n=1;break;case gn.TRUECOLOUR:n=3;break;case gn.INDEXED_COLOUR:n=1;break;case gn.GREYSCALE_ALPHA:n=2;break;case gn.TRUECOLOUR_ALPHA:n=4;break;case gn.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=n,this._compressionMethod=this.readUint8(),this._compressionMethod!==lu.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const r=e/3;this._hasPalette=!0;const n=[];this._palette=n;for(let s=0;s<r;s++)n.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const r=e,n=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,n,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let r=e,n=this.offset+this.byteOffset;if(n+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,n,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case gn.GREYSCALE:case gn.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let r=0;r<e/2;r++)this._transparency[r]=this.readUint16();break}case gn.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let r=0;for(;r<e;r++){const n=this.readByte();this._palette[r].push(n)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case gn.UNKNOWN:case gn.GREYSCALE_ALPHA:case gn.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const r=u1(this),n=this.readUint8();if(n!==lu.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${n}`);const s=this.readBytes(e-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:Xj(s)}}decodepHYs(){const e=this.readUint32(),r=this.readUint32(),n=this.readByte();this._png.resolution={x:e,y:r,unit:n}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const r={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},n=this._frames.at(e);if(n){if(n.data=rm({data:n.data,width:n.width,height:n.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||n.xOffset===0&&n.yOffset===0&&n.width===this._png.width&&n.height===this._png.height)r.data=n.data;else{const s=this._apng.frames.at(e-1);this.disposeFrame(n,s,r),this.addFrameDataToCanvas(r,n)}this._apng.frames.push(r)}}return this._apng}disposeFrame(e,r,n){switch(e.disposeOp){case nc.NONE:break;case nc.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let i=0;i<this._png.width;i++){const a=(s*e.width+i)*this._png.channels;for(let o=0;o<this._png.channels;o++)n.data[a+o]=0}break;case nc.PREVIOUS:n.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,r){const n=1<<this._png.depth,s=(i,a)=>{const o=((i+r.yOffset)*this._png.width+r.xOffset+a)*this._png.channels,c=(i*r.width+a)*this._png.channels;return{index:o,frameIndex:c}};switch(r.blendOp){case du.SOURCE:for(let i=0;i<r.height;i++)for(let a=0;a<r.width;a++){const{index:o,frameIndex:c}=s(i,a);for(let d=0;d<this._png.channels;d++)e.data[o+d]=r.data[c+d]}break;case du.OVER:for(let i=0;i<r.height;i++)for(let a=0;a<r.width;a++){const{index:o,frameIndex:c}=s(i,a);for(let d=0;d<this._png.channels;d++){const u=r.data[c+this._png.channels-1]/n,g=d%(this._png.channels-1)===0?1:r.data[c+d],m=Math.floor(u*g+(1-u)*e.data[o+d]);e.data[o+d]+=m}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==sm.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===cu.NO_INTERLACE)this._png.data=rm({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===cu.ADAM7)this._png.data=n_({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,r=this._frames.at(-1);r?r.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:nc.NONE,blendOp:du.SOURCE,data:e}),this._inflator=new Qg,this._writingDataChunks=!1}}function y_(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var im;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(im||(im={}));function v_(t,e){return new b_(t,e).decode()}var nt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function uu(){nt.console&&typeof nt.console.log=="function"&&nt.console.log.apply(nt.console,arguments)}var Tt={log:uu,warn:function(t){nt.console&&(typeof nt.console.warn=="function"?nt.console.warn.apply(nt.console,arguments):uu.call(null,arguments))},error:function(t){nt.console&&(typeof nt.console.error=="function"?nt.console.error.apply(nt.console,arguments):uu(t))}};function hu(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){Bi(n.response,e,r)},n.onerror=function(){Tt.error("could not download file")},n.send()}function am(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function sc(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Bi=nt.saveAs||((typeof window>"u"?"undefined":Ot(window))!=="object"||window!==nt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=nt.URL||nt.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?am(s.href)?hu(t,e,r):sc(s,s.target="_blank"):sc(s)):(s.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(s.href)},4e4),setTimeout(function(){sc(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(am(t))hu(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){sc(n)})}else navigator.msSaveOrOpenBlob((function(s,i){return i===void 0?i={autoBom:!1}:Ot(i)!=="object"&&(Tt.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s})(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return hu(t,e,r);var s=t.type==="application/octet-stream",i=/constructor/i.test(nt.HTMLElement)||nt.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||s&&i)&&(typeof FileReader>"u"?"undefined":Ot(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var u=o.result;u=a?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=u:location=u,n=null},o.readAsDataURL(t)}else{var c=nt.URL||nt.webkitURL,d=c.createObjectURL(t);n?n.location=d:location.href=d,n=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});function h1(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var s=r[n].re,i=r[n].process,a=s.exec(t);a&&(e=i(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return o.length==1&&(o="0"+o),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+o+c+d}}var mc=nt.atob.bind(nt),om=nt.btoa.bind(nt);function fu(t,e){var r=t[0],n=t[1],s=t[2],i=t[3];r=Br(r,n,s,i,e[0],7,-680876936),i=Br(i,r,n,s,e[1],12,-389564586),s=Br(s,i,r,n,e[2],17,606105819),n=Br(n,s,i,r,e[3],22,-1044525330),r=Br(r,n,s,i,e[4],7,-176418897),i=Br(i,r,n,s,e[5],12,1200080426),s=Br(s,i,r,n,e[6],17,-1473231341),n=Br(n,s,i,r,e[7],22,-45705983),r=Br(r,n,s,i,e[8],7,1770035416),i=Br(i,r,n,s,e[9],12,-1958414417),s=Br(s,i,r,n,e[10],17,-42063),n=Br(n,s,i,r,e[11],22,-1990404162),r=Br(r,n,s,i,e[12],7,1804603682),i=Br(i,r,n,s,e[13],12,-40341101),s=Br(s,i,r,n,e[14],17,-1502002290),r=zr(r,n=Br(n,s,i,r,e[15],22,1236535329),s,i,e[1],5,-165796510),i=zr(i,r,n,s,e[6],9,-1069501632),s=zr(s,i,r,n,e[11],14,643717713),n=zr(n,s,i,r,e[0],20,-373897302),r=zr(r,n,s,i,e[5],5,-701558691),i=zr(i,r,n,s,e[10],9,38016083),s=zr(s,i,r,n,e[15],14,-660478335),n=zr(n,s,i,r,e[4],20,-405537848),r=zr(r,n,s,i,e[9],5,568446438),i=zr(i,r,n,s,e[14],9,-1019803690),s=zr(s,i,r,n,e[3],14,-187363961),n=zr(n,s,i,r,e[8],20,1163531501),r=zr(r,n,s,i,e[13],5,-1444681467),i=zr(i,r,n,s,e[2],9,-51403784),s=zr(s,i,r,n,e[7],14,1735328473),r=Ur(r,n=zr(n,s,i,r,e[12],20,-1926607734),s,i,e[5],4,-378558),i=Ur(i,r,n,s,e[8],11,-2022574463),s=Ur(s,i,r,n,e[11],16,1839030562),n=Ur(n,s,i,r,e[14],23,-35309556),r=Ur(r,n,s,i,e[1],4,-1530992060),i=Ur(i,r,n,s,e[4],11,1272893353),s=Ur(s,i,r,n,e[7],16,-155497632),n=Ur(n,s,i,r,e[10],23,-1094730640),r=Ur(r,n,s,i,e[13],4,681279174),i=Ur(i,r,n,s,e[0],11,-358537222),s=Ur(s,i,r,n,e[3],16,-722521979),n=Ur(n,s,i,r,e[6],23,76029189),r=Ur(r,n,s,i,e[9],4,-640364487),i=Ur(i,r,n,s,e[12],11,-421815835),s=Ur(s,i,r,n,e[15],16,530742520),r=qr(r,n=Ur(n,s,i,r,e[2],23,-995338651),s,i,e[0],6,-198630844),i=qr(i,r,n,s,e[7],10,1126891415),s=qr(s,i,r,n,e[14],15,-1416354905),n=qr(n,s,i,r,e[5],21,-57434055),r=qr(r,n,s,i,e[12],6,1700485571),i=qr(i,r,n,s,e[3],10,-1894986606),s=qr(s,i,r,n,e[10],15,-1051523),n=qr(n,s,i,r,e[1],21,-2054922799),r=qr(r,n,s,i,e[8],6,1873313359),i=qr(i,r,n,s,e[15],10,-30611744),s=qr(s,i,r,n,e[6],15,-1560198380),n=qr(n,s,i,r,e[13],21,1309151649),r=qr(r,n,s,i,e[4],6,-145523070),i=qr(i,r,n,s,e[11],10,-1120210379),s=qr(s,i,r,n,e[2],15,718787259),n=qr(n,s,i,r,e[9],21,-343485551),t[0]=di(r,t[0]),t[1]=di(n,t[1]),t[2]=di(s,t[2]),t[3]=di(i,t[3])}function nd(t,e,r,n,s,i){return e=di(di(e,t),di(n,i)),di(e<<s|e>>>32-s,r)}function Br(t,e,r,n,s,i,a){return nd(e&r|~e&n,t,e,s,i,a)}function zr(t,e,r,n,s,i,a){return nd(e&n|r&~n,t,e,s,i,a)}function Ur(t,e,r,n,s,i,a){return nd(e^r^n,t,e,s,i,a)}function qr(t,e,r,n,s,i,a){return nd(r^(e|~n),t,e,s,i,a)}function f1(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)fu(n,w_(t.substring(e-64,e)));t=t.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(fu(n,s),e=0;e<16;e++)s[e]=0;return s[14]=8*r,fu(n,s),n}function w_(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}var lm="0123456789abcdef".split("");function k_(t){for(var e="",r=0;r<4;r++)e+=lm[t>>8*r+4&15]+lm[t>>8*r&15];return e}function N_(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Qu(t){return f1(t).map(N_).join("")}var j_=(function(t){for(var e=0;e<t.length;e++)t[e]=k_(t[e]);return t.join("")})(f1("hello"))!="5d41402abc4b2a76b9719d911017c592";function di(t,e){if(j_){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}function eh(t,e){var r,n,s,i;if(t!==r){for(var a=(s=t,i=1+(256/t.length|0),new Array(i+1).join(s)),o=[],c=0;c<256;c++)o[c]=c;var d=0;for(c=0;c<256;c++){var u=o[c];d=(d+u+a.charCodeAt(c))%256,o[c]=o[d],o[d]=u}r=t,n=o}else o=n;var g=e.length,m=0,f=0,x="";for(c=0;c<g;c++)f=(f+(u=o[m=(m+1)%256]))%256,o[m]=o[f],o[f]=u,a=o[(o[m]+o[f])%256],x+=String.fromCharCode(e.charCodeAt(c)^a);return x}var cm={print:4,modify:8,copy:16,"annot-forms":32};function ya(t,e,r,n){this.v=1,this.r=2;var s=192;t.forEach(function(o){if(cm.perm!==void 0)throw new Error("Invalid permission: "+o);s+=cm[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var i=(e+this.padding).substr(0,32),a=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,a),this.P=-(1+(255^s)),this.encryptionKey=Qu(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=eh(this.encryptionKey,this.padding)}function va(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var s=t.charCodeAt(n);e+=s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?"#"+("0"+s.toString(16)).slice(-2):t[n]}return e}function dm(t){if(Ot(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,s){if(s=s||!1,typeof r!="string"||typeof n!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var i=Math.random().toString(35);return e[r][i]=[n,!!s],i},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),s=[];for(var i in e[r]){var a=e[r][i];try{a[0].apply(t,n)}catch(o){nt.console&&Tt.error("jsPDF PubSub Error",o.message,o)}a[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Rc(t){if(!(this instanceof Rc))return new Rc(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function p1(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function zi(t,e,r,n,s){if(!(this instanceof zi))return new zi(t,e,r,n,s);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,p1.call(this,n,s)}function ka(t,e,r,n,s){if(!(this instanceof ka))return new ka(t,e,r,n,s);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,p1.call(this,n,s)}function $e(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],s=arguments[2],i=arguments[3],a=[],o=1,c=16,d="S",u=null;Ot(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,s=t.format||s,i=t.compress||t.compressPdf||i,(u=t.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(c=t.floatPrecision),d=t.defaultPathOperation||"S"),a=t.filters||(i===!0?["FlateEncode"]:a),n=n||"mm",r=(""+(r||"P")).toLowerCase();var g=t.putOnlyUsedFonts||!1,m={},f={internal:{},__private__:{}};f.__private__.PubSub=dm;var x="1.3",v=f.__private__.getPdfVersion=function(){return x};f.__private__.setPdfVersion=function(b){x=b};var y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return y};var k=f.__private__.getPageFormat=function(b){return y[b]};s=s||"a4";var A="compat",D="advanced",L=A;function q(){this.saveGraphicsState(),W(new Qe(at,0,0,-at,0,Ni()*at).toString()+" cm"),this.setFontSize(this.getFontSize()/at),d="n",L=D}function z(){this.restoreGraphicsState(),d="S",L=A}var $=f.__private__.combineFontStyleAndFontWeight=function(b,E){if(b=="bold"&&E=="normal"||b=="bold"&&E==400||b=="normal"&&E=="italic"||b=="bold"&&E=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return E&&(b=E==400||E==="normal"?b==="italic"?"italic":"normal":E!=700&&E!=="bold"||b!=="normal"?(E==700?"bold":E)+""+b:"bold"),b};f.advancedAPI=function(b){var E=L===A;return E&&q.call(this),typeof b!="function"||(b(this),E&&z.call(this)),this},f.compatAPI=function(b){var E=L===D;return E&&z.call(this),typeof b!="function"||(b(this),E&&q.call(this)),this},f.isAdvancedAPI=function(){return L===D};var j,_=function(b){if(L!==D)throw new Error(b+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},M=f.roundToPrecision=f.__private__.roundToPrecision=function(b,E){var J=e||E;if(isNaN(b)||isNaN(J))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return b.toFixed(J).replace(/0+$/,"")};j=f.hpf=f.__private__.hpf=typeof c=="number"?function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.hpf");return M(b,c)}:c==="smart"?function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.hpf");return M(b,b>-1&&b<1?16:5)}:function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.hpf");return M(b,16)};var S=f.f2=f.__private__.f2=function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.f2");return M(b,2)},C=f.__private__.f3=function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.f3");return M(b,3)},R=f.scale=f.__private__.scale=function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.scale");return L===A?b*at:L===D?b:void 0},F=function(b){return R((function(E){return L===A?Ni()-E:L===D?E:void 0})(b))};f.__private__.setPrecision=f.setPrecision=function(b){typeof parseInt(b,10)=="number"&&(e=parseInt(b,10))};var V,te="00000000000000000000000000000000",ne=f.__private__.getFileId=function(){return te},se=f.__private__.setFileId=function(b){return te=b!==void 0&&/^[a-fA-F0-9]{32}$/.test(b)?b.toUpperCase():te.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(vr=new ya(u.userPermissions,u.userPassword,u.ownerPassword,te)),te};f.setFileId=function(b){return se(b),this},f.getFileId=function(){return ne()};var K=f.__private__.convertDateToPDFDate=function(b){var E=b.getTimezoneOffset(),J=E<0?"+":"-",ae=Math.floor(Math.abs(E/60)),ue=Math.abs(E%60),ke=[J,Y(ae),"'",Y(ue),"'"].join("");return["D:",b.getFullYear(),Y(b.getMonth()+1),Y(b.getDate()),Y(b.getHours()),Y(b.getMinutes()),Y(b.getSeconds()),ke].join("")},Q=f.__private__.convertPDFDateToDate=function(b){var E=parseInt(b.substr(2,4),10),J=parseInt(b.substr(6,2),10)-1,ae=parseInt(b.substr(8,2),10),ue=parseInt(b.substr(10,2),10),ke=parseInt(b.substr(12,2),10),_e=parseInt(b.substr(14,2),10);return new Date(E,J,ae,ue,ke,_e,0)},re=f.__private__.setCreationDate=function(b){var E;if(b===void 0&&(b=new Date),b instanceof Date)E=K(b);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(b))throw new Error("Invalid argument passed to jsPDF.setCreationDate");E=b}return V=E},P=f.__private__.getCreationDate=function(b){var E=V;return b==="jsDate"&&(E=Q(V)),E};f.setCreationDate=function(b){return re(b),this},f.getCreationDate=function(b){return P(b)};var I,Y=f.__private__.padd2=function(b){return("0"+parseInt(b)).slice(-2)},ee=f.__private__.padd2Hex=function(b){return("00"+(b=b.toString())).substr(b.length)},ie=0,ce=[],de=[],he=0,xe=[],pe=[],Ae=!1,Pe=de;f.__private__.setCustomOutputDestination=function(b){Ae=!0,Pe=b};var Ee=function(b){Ae||(Pe=b)};f.__private__.resetCustomOutputDestination=function(){Ae=!1,Pe=de};var W=f.__private__.out=function(b){return b=b.toString(),he+=b.length+1,Pe.push(b),Pe},je=f.__private__.write=function(b){return W(arguments.length===1?b.toString():Array.prototype.join.call(arguments," "))},Je=f.__private__.getArrayBuffer=function(b){for(var E=b.length,J=new ArrayBuffer(E),ae=new Uint8Array(J);E--;)ae[E]=b.charCodeAt(E);return J},Le=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return Le};var ve=t.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(b){return ve=L===D?b/at:b,this};var We,De=f.__private__.getFontSize=f.getFontSize=function(){return L===A?ve:ve*at},Te=t.R2L||!1;f.__private__.setR2L=f.setR2L=function(b){return Te=b,this},f.__private__.getR2L=f.getR2L=function(){return Te};var He,tt=f.__private__.setZoomMode=function(b){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(b))We=b;else if(isNaN(b)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(b)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+b+'" is not recognized.');We=b}else We=parseInt(b,10)};f.__private__.getZoomMode=function(){return We};var rt,ze=f.__private__.setPageMode=function(b){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(b)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+b+'" is not recognized.');He=b};f.__private__.getPageMode=function(){return He};var Ke=f.__private__.setLayoutMode=function(b){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(b)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+b+'" is not recognized.');rt=b};f.__private__.getLayoutMode=function(){return rt},f.__private__.setDisplayMode=f.setDisplayMode=function(b,E,J){return tt(b),Ke(E),ze(J),this};var st={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(b){if(Object.keys(st).indexOf(b)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return st[b]},f.__private__.getDocumentProperties=function(){return st},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(b){for(var E in st)st.hasOwnProperty(E)&&b[E]&&(st[E]=b[E]);return this},f.__private__.setDocumentProperty=function(b,E){if(Object.keys(st).indexOf(b)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return st[b]=E};var Ie,at,Re,jt,mt,ut={},xt={},Yt=[],Xe={},It={},et={},ct={},Gt=null,bt=0,Ze=[],St=new dm(f),gi=t.hotfixes||[],Tr={},ps={},Xn=[],Qe=function b(E,J,ae,ue,ke,_e){if(!(this instanceof b))return new b(E,J,ae,ue,ke,_e);isNaN(E)&&(E=1),isNaN(J)&&(J=0),isNaN(ae)&&(ae=0),isNaN(ue)&&(ue=1),isNaN(ke)&&(ke=0),isNaN(_e)&&(_e=0),this._matrix=[E,J,ae,ue,ke,_e]};Object.defineProperty(Qe.prototype,"sx",{get:function(){return this._matrix[0]},set:function(b){this._matrix[0]=b}}),Object.defineProperty(Qe.prototype,"shy",{get:function(){return this._matrix[1]},set:function(b){this._matrix[1]=b}}),Object.defineProperty(Qe.prototype,"shx",{get:function(){return this._matrix[2]},set:function(b){this._matrix[2]=b}}),Object.defineProperty(Qe.prototype,"sy",{get:function(){return this._matrix[3]},set:function(b){this._matrix[3]=b}}),Object.defineProperty(Qe.prototype,"tx",{get:function(){return this._matrix[4]},set:function(b){this._matrix[4]=b}}),Object.defineProperty(Qe.prototype,"ty",{get:function(){return this._matrix[5]},set:function(b){this._matrix[5]=b}}),Object.defineProperty(Qe.prototype,"a",{get:function(){return this._matrix[0]},set:function(b){this._matrix[0]=b}}),Object.defineProperty(Qe.prototype,"b",{get:function(){return this._matrix[1]},set:function(b){this._matrix[1]=b}}),Object.defineProperty(Qe.prototype,"c",{get:function(){return this._matrix[2]},set:function(b){this._matrix[2]=b}}),Object.defineProperty(Qe.prototype,"d",{get:function(){return this._matrix[3]},set:function(b){this._matrix[3]=b}}),Object.defineProperty(Qe.prototype,"e",{get:function(){return this._matrix[4]},set:function(b){this._matrix[4]=b}}),Object.defineProperty(Qe.prototype,"f",{get:function(){return this._matrix[5]},set:function(b){this._matrix[5]=b}}),Object.defineProperty(Qe.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Qe.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Qe.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Qe.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Qe.prototype.join=function(b){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(j).join(b)},Qe.prototype.multiply=function(b){var E=b.sx*this.sx+b.shy*this.shx,J=b.sx*this.shy+b.shy*this.sy,ae=b.shx*this.sx+b.sy*this.shx,ue=b.shx*this.shy+b.sy*this.sy,ke=b.tx*this.sx+b.ty*this.shx+this.tx,_e=b.tx*this.shy+b.ty*this.sy+this.ty;return new Qe(E,J,ae,ue,ke,_e)},Qe.prototype.decompose=function(){var b=this.sx,E=this.shy,J=this.shx,ae=this.sy,ue=this.tx,ke=this.ty,_e=Math.sqrt(b*b+E*E),Be=(b/=_e)*J+(E/=_e)*ae;J-=b*Be,ae-=E*Be;var Ve=Math.sqrt(J*J+ae*ae);return Be/=Ve,b*(ae/=Ve)<E*(J/=Ve)&&(b=-b,E=-E,Be=-Be,_e=-_e),{scale:new Qe(_e,0,0,Ve,0,0),translate:new Qe(1,0,0,1,ue,ke),rotate:new Qe(b,E,-E,b,0,0),skew:new Qe(1,0,Be,1,0,0)}},Qe.prototype.toString=function(b){return this.join(" ")},Qe.prototype.inversed=function(){var b=this.sx,E=this.shy,J=this.shx,ae=this.sy,ue=this.tx,ke=this.ty,_e=1/(b*ae-E*J),Be=ae*_e,Ve=-E*_e,it=-J*_e,ht=b*_e;return new Qe(Be,Ve,it,ht,-Be*ue-it*ke,-Ve*ue-ht*ke)},Qe.prototype.applyToPoint=function(b){var E=b.x*this.sx+b.y*this.shx+this.tx,J=b.x*this.shy+b.y*this.sy+this.ty;return new ws(E,J)},Qe.prototype.applyToRectangle=function(b){var E=this.applyToPoint(b),J=this.applyToPoint(new ws(b.x+b.w,b.y+b.h));return new Ya(E.x,E.y,J.x-E.x,J.y-E.y)},Qe.prototype.clone=function(){var b=this.sx,E=this.shy,J=this.shx,ae=this.sy,ue=this.tx,ke=this.ty;return new Qe(b,E,J,ae,ue,ke)},f.Matrix=Qe;var gs=f.matrixMult=function(b,E){return E.multiply(b)},ms=new Qe(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=ms;var yn=function(b,E){if(!It[b]){var J=(E instanceof zi?"Sh":"P")+(Object.keys(Xe).length+1).toString(10);E.id=J,It[b]=J,Xe[J]=E,St.publish("addPattern",E)}};f.ShadingPattern=zi,f.TilingPattern=ka,f.addShadingPattern=function(b,E){return _("addShadingPattern()"),yn(b,E),this},f.beginTilingPattern=function(b){_("beginTilingPattern()"),Ga(b.boundingBox[0],b.boundingBox[1],b.boundingBox[2]-b.boundingBox[0],b.boundingBox[3]-b.boundingBox[1],b.matrix)},f.endTilingPattern=function(b,E){_("endTilingPattern()"),E.stream=pe[I].join(`
`),yn(b,E),St.publish("endTilingPattern",E),Xn.pop().restore()};var vn,Qt=f.__private__.newObject=function(){var b=Ar();return Lr(b,!0),b},Ar=f.__private__.newObjectDeferred=function(){return ie++,ce[ie]=function(){return he},ie},Lr=function(b,E){return E=typeof E=="boolean"&&E,ce[b]=he,E&&W(b+" 0 obj"),b},mi=f.__private__.newAdditionalObject=function(){var b={objId:Ar(),content:""};return xe.push(b),b},Ws=Ar(),Fn=Ar(),Jn=f.__private__.decodeColorString=function(b){var E=b.split(" ");if(E.length!==2||E[1]!=="g"&&E[1]!=="G")E.length!==5||E[4]!=="k"&&E[4]!=="K"||(E=[(1-E[0])*(1-E[3]),(1-E[1])*(1-E[3]),(1-E[2])*(1-E[3]),"r"]);else{var J=parseFloat(E[0]);E=[J,J,J,"r"]}for(var ae="#",ue=0;ue<3;ue++)ae+=("0"+Math.floor(255*parseFloat(E[ue])).toString(16)).slice(-2);return ae},Rn=f.__private__.encodeColorString=function(b){var E;typeof b=="string"&&(b={ch1:b});var J=b.ch1,ae=b.ch2,ue=b.ch3,ke=b.ch4,_e=b.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof J=="string"&&J.charAt(0)!=="#"){var Be=new h1(J);if(Be.ok)J=Be.toHex();else if(!/^\d*\.?\d*$/.test(J))throw new Error('Invalid color "'+J+'" passed to jsPDF.encodeColorString.')}if(typeof J=="string"&&/^#[0-9A-Fa-f]{3}$/.test(J)&&(J="#"+J[1]+J[1]+J[2]+J[2]+J[3]+J[3]),typeof J=="string"&&/^#[0-9A-Fa-f]{6}$/.test(J)){var Ve=parseInt(J.substr(1),16);J=Ve>>16&255,ae=Ve>>8&255,ue=255&Ve}if(ae===void 0||ke===void 0&&J===ae&&ae===ue)E=typeof J=="string"?J+" "+_e[0]:b.precision===2?S(J/255)+" "+_e[0]:C(J/255)+" "+_e[0];else if(ke===void 0||Ot(ke)==="object"){if(ke&&!isNaN(ke.a)&&ke.a===0)return["1.","1.","1.",_e[1]].join(" ");E=typeof J=="string"?[J,ae,ue,_e[1]].join(" "):b.precision===2?[S(J/255),S(ae/255),S(ue/255),_e[1]].join(" "):[C(J/255),C(ae/255),C(ue/255),_e[1]].join(" ")}else E=typeof J=="string"?[J,ae,ue,ke,_e[2]].join(" "):b.precision===2?[S(J),S(ae),S(ue),S(ke),_e[2]].join(" "):[C(J),C(ae),C(ue),C(ke),_e[2]].join(" ");return E},Mn=f.__private__.getFilters=function(){return a},wn=f.__private__.putStream=function(b){var E=(b=b||{}).data||"",J=b.filters||Mn(),ae=b.alreadyAppliedFilters||[],ue=b.addLength1||!1,ke=E.length,_e=b.objectId,Be=function(wr){return wr};if(u!==null&&_e===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(Be=vr.encryptor(_e,0));var Ve={};J===!0&&(J=["FlateEncode"]);var it=b.additionalKeyValues||[],ht=(Ve=$e.API.processDataByFilters!==void 0?$e.API.processDataByFilters(E,J):{data:E,reverseChain:[]}).reverseChain+(Array.isArray(ae)?ae.join(" "):ae.toString());if(Ve.data.length!==0&&(it.push({key:"Length",value:Ve.data.length}),ue===!0&&it.push({key:"Length1",value:ke})),ht.length!=0)if(ht.split("/").length-1==1)it.push({key:"Filter",value:ht});else{it.push({key:"Filter",value:"["+ht+"]"});for(var kt=0;kt<it.length;kt+=1)if(it[kt].key==="DecodeParms"){for(var Zt=[],xr=0;xr<Ve.reverseChain.split("/").length-1;xr+=1)Zt.push("null");Zt.push(it[kt].value),it[kt].value="["+Zt.join(" ")+"]"}}W("<<");for(var Bt=0;Bt<it.length;Bt++)W("/"+it[Bt].key+" "+it[Bt].value);W(">>"),Ve.data.length!==0&&(W("stream"),W(Be(Ve.data)),W("endstream"))},xi=f.__private__.putPage=function(b){var E=b.number,J=b.data,ae=b.objId,ue=b.contentsObjId;Lr(ae,!0),W("<</Type /Page"),W("/Parent "+b.rootDictionaryObjId+" 0 R"),W("/Resources "+b.resourceDictionaryObjId+" 0 R"),W("/MediaBox ["+parseFloat(j(b.mediaBox.bottomLeftX))+" "+parseFloat(j(b.mediaBox.bottomLeftY))+" "+j(b.mediaBox.topRightX)+" "+j(b.mediaBox.topRightY)+"]"),b.cropBox!==null&&W("/CropBox ["+j(b.cropBox.bottomLeftX)+" "+j(b.cropBox.bottomLeftY)+" "+j(b.cropBox.topRightX)+" "+j(b.cropBox.topRightY)+"]"),b.bleedBox!==null&&W("/BleedBox ["+j(b.bleedBox.bottomLeftX)+" "+j(b.bleedBox.bottomLeftY)+" "+j(b.bleedBox.topRightX)+" "+j(b.bleedBox.topRightY)+"]"),b.trimBox!==null&&W("/TrimBox ["+j(b.trimBox.bottomLeftX)+" "+j(b.trimBox.bottomLeftY)+" "+j(b.trimBox.topRightX)+" "+j(b.trimBox.topRightY)+"]"),b.artBox!==null&&W("/ArtBox ["+j(b.artBox.bottomLeftX)+" "+j(b.artBox.bottomLeftY)+" "+j(b.artBox.topRightX)+" "+j(b.artBox.topRightY)+"]"),typeof b.userUnit=="number"&&b.userUnit!==1&&W("/UserUnit "+b.userUnit),St.publish("putPage",{objId:ae,pageContext:Ze[E],pageNumber:E,page:J}),W("/Contents "+ue+" 0 R"),W(">>"),W("endobj");var ke=J.join(`
`);return L===D&&(ke+=`
Q`),Lr(ue,!0),wn({data:ke,filters:Mn(),objectId:ue}),W("endobj"),ae},Kn=f.__private__.putPages=function(){var b,E,J=[];for(b=1;b<=bt;b++)Ze[b].objId=Ar(),Ze[b].contentsObjId=Ar();for(b=1;b<=bt;b++)J.push(xi({number:b,data:pe[b],objId:Ze[b].objId,contentsObjId:Ze[b].contentsObjId,mediaBox:Ze[b].mediaBox,cropBox:Ze[b].cropBox,bleedBox:Ze[b].bleedBox,trimBox:Ze[b].trimBox,artBox:Ze[b].artBox,userUnit:Ze[b].userUnit,rootDictionaryObjId:Ws,resourceDictionaryObjId:Fn}));Lr(Ws,!0),W("<</Type /Pages");var ae="/Kids [";for(E=0;E<bt;E++)ae+=J[E]+" 0 R ";W(ae+"]"),W("/Count "+bt),W(">>"),W("endobj"),St.publish("postPutPages")},bi=function(b){St.publish("putFont",{font:b,out:W,newObject:Qt,putStream:wn}),b.isAlreadyPutted!==!0&&(b.objectNumber=Qt(),W("<<"),W("/Type /Font"),W("/BaseFont /"+va(b.postScriptName)),W("/Subtype /Type1"),typeof b.encoding=="string"&&W("/Encoding /"+b.encoding),W("/FirstChar 32"),W("/LastChar 255"),W(">>"),W("endobj"))},ea=function(b){b.objectNumber=Qt();var E=[];E.push({key:"Type",value:"/XObject"}),E.push({key:"Subtype",value:"/Form"}),E.push({key:"BBox",value:"["+[j(b.x),j(b.y),j(b.x+b.width),j(b.y+b.height)].join(" ")+"]"}),E.push({key:"Matrix",value:"["+b.matrix.toString()+"]"});var J=b.pages[1].join(`
`);wn({data:J,additionalKeyValues:E,objectId:b.objectNumber}),W("endobj")},ta=function(b,E){E||(E=21);var J=Qt(),ae=(function(_e,Be){var Ve,it=[],ht=1/(Be-1);for(Ve=0;Ve<1;Ve+=ht)it.push(Ve);if(it.push(1),_e[0].offset!=0){var kt={offset:0,color:_e[0].color};_e.unshift(kt)}if(_e[_e.length-1].offset!=1){var Zt={offset:1,color:_e[_e.length-1].color};_e.push(Zt)}for(var xr="",Bt=0,wr=0;wr<it.length;wr++){for(Ve=it[wr];Ve>_e[Bt+1].offset;)Bt++;var br=_e[Bt].offset,Er=(Ve-br)/(_e[Bt+1].offset-br),js=_e[Bt].color,In=_e[Bt+1].color;xr+=ee(Math.round((1-Er)*js[0]+Er*In[0]).toString(16))+ee(Math.round((1-Er)*js[1]+Er*In[1]).toString(16))+ee(Math.round((1-Er)*js[2]+Er*In[2]).toString(16))}return xr.trim()})(b.colors,E),ue=[];ue.push({key:"FunctionType",value:"0"}),ue.push({key:"Domain",value:"[0.0 1.0]"}),ue.push({key:"Size",value:"["+E+"]"}),ue.push({key:"BitsPerSample",value:"8"}),ue.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ue.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),wn({data:ae,additionalKeyValues:ue,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:J}),W("endobj"),b.objectNumber=Qt(),W("<< /ShadingType "+b.type),W("/ColorSpace /DeviceRGB");var ke="/Coords ["+j(parseFloat(b.coords[0]))+" "+j(parseFloat(b.coords[1]))+" ";b.type===2?ke+=j(parseFloat(b.coords[2]))+" "+j(parseFloat(b.coords[3])):ke+=j(parseFloat(b.coords[2]))+" "+j(parseFloat(b.coords[3]))+" "+j(parseFloat(b.coords[4]))+" "+j(parseFloat(b.coords[5])),W(ke+="]"),b.matrix&&W("/Matrix ["+b.matrix.toString()+"]"),W("/Function "+J+" 0 R"),W("/Extend [true true]"),W(">>"),W("endobj")},ra=function(b,E){var J=Ar(),ae=Qt();E.push({resourcesOid:J,objectOid:ae}),b.objectNumber=ae;var ue=[];ue.push({key:"Type",value:"/Pattern"}),ue.push({key:"PatternType",value:"1"}),ue.push({key:"PaintType",value:"1"}),ue.push({key:"TilingType",value:"1"}),ue.push({key:"BBox",value:"["+b.boundingBox.map(j).join(" ")+"]"}),ue.push({key:"XStep",value:j(b.xStep)}),ue.push({key:"YStep",value:j(b.yStep)}),ue.push({key:"Resources",value:J+" 0 R"}),b.matrix&&ue.push({key:"Matrix",value:"["+b.matrix.toString()+"]"}),wn({data:b.stream,additionalKeyValues:ue,objectId:b.objectNumber}),W("endobj")},ad=function(b){for(var E in b.objectNumber=Qt(),W("<<"),b)switch(E){case"opacity":W("/ca "+S(b[E]));break;case"stroke-opacity":W("/CA "+S(b[E]))}W(">>"),W("endobj")},Ba=function(b){Lr(b.resourcesOid,!0),W("<<"),W("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var E in W("/Font <<"),ut)ut.hasOwnProperty(E)&&(g===!1||g===!0&&m.hasOwnProperty(E))&&W("/"+E+" "+ut[E].objectNumber+" 0 R");W(">>")})(),(function(){if(Object.keys(Xe).length>0){for(var E in W("/Shading <<"),Xe)Xe.hasOwnProperty(E)&&Xe[E]instanceof zi&&Xe[E].objectNumber>=0&&W("/"+E+" "+Xe[E].objectNumber+" 0 R");St.publish("putShadingPatternDict"),W(">>")}})(),(function(E){if(Object.keys(Xe).length>0){for(var J in W("/Pattern <<"),Xe)Xe.hasOwnProperty(J)&&Xe[J]instanceof f.TilingPattern&&Xe[J].objectNumber>=0&&Xe[J].objectNumber<E&&W("/"+J+" "+Xe[J].objectNumber+" 0 R");St.publish("putTilingPatternDict"),W(">>")}})(b.objectOid),(function(){if(Object.keys(et).length>0){var E;for(E in W("/ExtGState <<"),et)et.hasOwnProperty(E)&&et[E].objectNumber>=0&&W("/"+E+" "+et[E].objectNumber+" 0 R");St.publish("putGStateDict"),W(">>")}})(),(function(){for(var E in W("/XObject <<"),Tr)Tr.hasOwnProperty(E)&&Tr[E].objectNumber>=0&&W("/"+E+" "+Tr[E].objectNumber+" 0 R");St.publish("putXobjectDict"),W(">>")})(),W(">>"),W("endobj")},tl=function(b){xt[b.fontName]=xt[b.fontName]||{},xt[b.fontName][b.fontStyle]=b.id},rl=function(b,E,J,ae,ue){var ke={id:"F"+(Object.keys(ut).length+1).toString(10),postScriptName:b,fontName:E,fontStyle:J,encoding:ae,isStandardFont:ue||!1,metadata:{}};return St.publish("addFont",{font:ke,instance:this}),ut[ke.id]=ke,tl(ke),ke.id},kn=f.__private__.pdfEscape=f.pdfEscape=function(b,E){return(function(J,ae){var ue,ke,_e,Be,Ve,it,ht,kt,Zt;if(_e=(ae=ae||{}).sourceEncoding||"Unicode",Ve=ae.outputEncoding,(ae.autoencode||Ve)&&ut[Ie].metadata&&ut[Ie].metadata[_e]&&ut[Ie].metadata[_e].encoding&&(Be=ut[Ie].metadata[_e].encoding,!Ve&&ut[Ie].encoding&&(Ve=ut[Ie].encoding),!Ve&&Be.codePages&&(Ve=Be.codePages[0]),typeof Ve=="string"&&(Ve=Be[Ve]),Ve)){for(ht=!1,it=[],ue=0,ke=J.length;ue<ke;ue++)(kt=Ve[J.charCodeAt(ue)])?it.push(String.fromCharCode(kt)):it.push(J[ue]),it[ue].charCodeAt(0)>>8&&(ht=!0);J=it.join("")}for(ue=J.length;ht===void 0&&ue!==0;)J.charCodeAt(ue-1)>>8&&(ht=!0),ue--;if(!ht)return J;for(it=ae.noBOM?[]:[254,255],ue=0,ke=J.length;ue<ke;ue++){if((Zt=(kt=J.charCodeAt(ue))>>8)>>8)throw new Error("Character at position "+ue+" of string '"+J+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");it.push(Zt),it.push(kt-(Zt<<8))}return String.fromCharCode.apply(void 0,it)})(b,E).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},za=f.__private__.beginPage=function(b){pe[++bt]=[],Ze[bt]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(b[0]),topRightY:Number(b[1])}},sl(bt),Ee(pe[I])},nl=function(b,E){var J,ae,ue;switch(r=E||r,typeof b=="string"&&(J=k(b.toLowerCase()),Array.isArray(J)&&(ae=J[0],ue=J[1])),Array.isArray(b)&&(ae=b[0]*at,ue=b[1]*at),isNaN(ae)&&(ae=s[0],ue=s[1]),(ae>14400||ue>14400)&&(Tt.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ae=Math.min(14400,ae),ue=Math.min(14400,ue)),s=[ae,ue],r.substr(0,1)){case"l":ue>ae&&(s=[ue,ae]);break;case"p":ae>ue&&(s=[ue,ae])}za(s),ot(Wa),W(aa),Va!==0&&W(Va+" J"),$a!==0&&W($a+" j"),St.publish("addPage",{pageNumber:bt})},Ua=function(b){b>0&&b<=bt&&(pe.splice(b,1),Ze.splice(b,1),bt--,I>bt&&(I=bt),this.setPage(I))},sl=function(b){b>0&&b<=bt&&(I=b)},il=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return pe.length-1},al=function(b,E,J){var ae,ue=void 0;return J=J||{},b=b!==void 0?b:ut[Ie].fontName,E=E!==void 0?E:ut[Ie].fontStyle,ae=b.toLowerCase(),xt[ae]!==void 0&&xt[ae][E]!==void 0?ue=xt[ae][E]:xt[b]!==void 0&&xt[b][E]!==void 0?ue=xt[b][E]:J.disableWarning===!1&&Tt.warn("Unable to look up font label for font '"+b+"', '"+E+"'. Refer to getFontList() for available fonts."),ue||J.noFallback||(ue=xt.times[E])==null&&(ue=xt.times.normal),ue},Zn=f.__private__.putInfo=function(){var b=Qt(),E=function(ae){return ae};for(var J in u!==null&&(E=vr.encryptor(b,0)),W("<<"),W("/Producer ("+kn(E("jsPDF "+$e.version))+")"),st)st.hasOwnProperty(J)&&st[J]&&W("/"+J.substr(0,1).toUpperCase()+J.substr(1)+" ("+kn(E(st[J]))+")");W("/CreationDate ("+kn(E(V))+")"),W(">>"),W("endobj")},na=f.__private__.putCatalog=function(b){var E=(b=b||{}).rootDictionaryObjId||Ws;switch(Qt(),W("<<"),W("/Type /Catalog"),W("/Pages "+E+" 0 R"),We||(We="fullwidth"),We){case"fullwidth":W("/OpenAction [3 0 R /FitH null]");break;case"fullheight":W("/OpenAction [3 0 R /FitV null]");break;case"fullpage":W("/OpenAction [3 0 R /Fit]");break;case"original":W("/OpenAction [3 0 R /XYZ null null 1]");break;default:var J=""+We;J.substr(J.length-1)==="%"&&(We=parseInt(We)/100),typeof We=="number"&&W("/OpenAction [3 0 R /XYZ null null "+S(We)+"]")}switch(rt||(rt="continuous"),rt){case"continuous":W("/PageLayout /OneColumn");break;case"single":W("/PageLayout /SinglePage");break;case"two":case"twoleft":W("/PageLayout /TwoColumnLeft");break;case"tworight":W("/PageLayout /TwoColumnRight")}He&&W("/PageMode /"+He),St.publish("putCatalog"),W(">>"),W("endobj")},od=f.__private__.putTrailer=function(){W("trailer"),W("<<"),W("/Size "+(ie+1)),W("/Root "+ie+" 0 R"),W("/Info "+(ie-1)+" 0 R"),u!==null&&W("/Encrypt "+vr.oid+" 0 R"),W("/ID [ <"+te+"> <"+te+"> ]"),W(">>")},mr=f.__private__.putHeader=function(){W("%PDF-"+x),W("%ºß¬à")},ol=f.__private__.putXRef=function(){var b="0000000000";W("xref"),W("0 "+(ie+1)),W("0000000000 65535 f ");for(var E=1;E<=ie;E++)typeof ce[E]=="function"?W((b+ce[E]()).slice(-10)+" 00000 n "):ce[E]!==void 0?W((b+ce[E]).slice(-10)+" 00000 n "):W("0000000000 00000 n ")},Qn=f.__private__.buildDocument=function(){var b;ie=0,he=0,de=[],ce=[],xe=[],Ws=Ar(),Fn=Ar(),Ee(de),St.publish("buildDocument"),mr(),Kn(),(function(){St.publish("putAdditionalObjects");for(var J=0;J<xe.length;J++){var ae=xe[J];Lr(ae.objId,!0),W(ae.content),W("endobj")}St.publish("postPutAdditionalObjects")})(),b=[],(function(){for(var J in ut)ut.hasOwnProperty(J)&&(g===!1||g===!0&&m.hasOwnProperty(J))&&bi(ut[J])})(),(function(){var J;for(J in et)et.hasOwnProperty(J)&&ad(et[J])})(),(function(){for(var J in Tr)Tr.hasOwnProperty(J)&&ea(Tr[J])})(),(function(J){var ae;for(ae in Xe)Xe.hasOwnProperty(ae)&&(Xe[ae]instanceof zi?ta(Xe[ae]):Xe[ae]instanceof ka&&ra(Xe[ae],J))})(b),St.publish("putResources"),b.forEach(Ba),Ba({resourcesOid:Fn,objectOid:Number.MAX_SAFE_INTEGER}),St.publish("postPutResources"),u!==null&&(vr.oid=Qt(),W("<<"),W("/Filter /Standard"),W("/V "+vr.v),W("/R "+vr.r),W("/U <"+vr.toHexString(vr.U)+">"),W("/O <"+vr.toHexString(vr.O)+">"),W("/P "+vr.P),W(">>"),W("endobj")),Zn(),na();var E=he;return ol(),od(),W("startxref"),W(""+E),W("%%EOF"),Ee(pe[I]),de.join(`
`)},sa=f.__private__.getBlob=function(b){return new Blob([Je(b)],{type:"application/pdf"})},ll=f.output=f.__private__.output=(vn=function(b,E){switch(typeof(E=E||{})=="string"?E={filename:E}:E.filename=E.filename||"generated.pdf",b){case void 0:return Qn();case"save":f.save(E.filename);break;case"arraybuffer":return Je(Qn());case"blob":return sa(Qn());case"bloburi":case"bloburl":if(nt.URL!==void 0&&typeof nt.URL.createObjectURL=="function")return nt.URL&&nt.URL.createObjectURL(sa(Qn()))||void 0;Tt.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var J="",ae=Qn();try{J=om(ae)}catch{J=om(unescape(encodeURIComponent(ae)))}return"data:application/pdf;filename="+E.filename+";base64,"+J;case"pdfobjectnewwindow":if(Object.prototype.toString.call(nt)==="[object Window]"){var ue="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ke=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';E.pdfObjectUrl&&(ue=E.pdfObjectUrl,ke="");var _e='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ue+'"'+ke+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(E)+");<\/script></body></html>",Be=nt.open();return Be!==null&&Be.document.write(_e),Be}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(nt)==="[object Window]"){var Ve='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(E.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+E.filename+'" width="500px" height="400px" /></body></html>',it=nt.open();if(it!==null){it.document.write(Ve);var ht=this;it.document.documentElement.querySelector("#pdfViewer").onload=function(){it.document.title=E.filename,it.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ht.output("bloburl"))}}return it}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(nt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var kt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",E)+'"></iframe></body></html>',Zt=nt.open();if(Zt!==null&&(Zt.document.write(kt),Zt.document.title=E.filename),Zt||typeof safari>"u")return Zt;break;case"datauri":case"dataurl":return nt.document.location.href=this.output("datauristring",E);default:return null}},vn.foo=function(){try{return vn.apply(this,arguments)}catch(J){var b=J.stack||"";~b.indexOf(" at ")&&(b=b.split(" at ")[1]);var E="Error in function "+b.split(`
`)[0].split("<")[0]+": "+J.message;if(!nt.console)throw new Error(E);nt.console.error(E,J),nt.alert&&alert(E)}},vn.foo.bar=vn,vn.foo),Nn=function(b){return Array.isArray(gi)===!0&&gi.indexOf(b)>-1};switch(n){case"pt":at=1;break;case"mm":at=72/25.4;break;case"cm":at=72/2.54;break;case"in":at=72;break;case"px":at=Nn("px_scaling")==1?.75:96/72;break;case"pc":case"em":at=12;break;case"ex":at=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);at=n}var vr=null;re(),se();var xs=f.__private__.getPageInfo=f.getPageInfo=function(b){if(isNaN(b)||b%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ze[b].objId,pageNumber:b,pageContext:Ze[b]}},cl=f.__private__.getPageInfoByObjId=function(b){if(isNaN(b)||b%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var E in Ze)if(Ze[E].objId===b)break;return xs(E)},ld=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:Ze[I].objId,pageNumber:I,pageContext:Ze[I]}};f.addPage=function(){return nl.apply(this,arguments),this},f.setPage=function(){return sl.apply(this,arguments),Ee.call(this,pe[I]),this},f.insertPage=function(b){return this.addPage(),this.movePage(I,b),this},f.movePage=function(b,E){var J,ae;if(b>E){J=pe[b],ae=Ze[b];for(var ue=b;ue>E;ue--)pe[ue]=pe[ue-1],Ze[ue]=Ze[ue-1];pe[E]=J,Ze[E]=ae,this.setPage(E)}else if(b<E){J=pe[b],ae=Ze[b];for(var ke=b;ke<E;ke++)pe[ke]=pe[ke+1],Ze[ke]=Ze[ke+1];pe[E]=J,Ze[E]=ae,this.setPage(E)}return this},f.deletePage=function(){return Ua.apply(this,arguments),this},f.__private__.text=f.text=function(b,E,J,ae,ue){var ke,_e,Be,Ve,it,ht,kt,Zt,xr,Bt=(ae=ae||{}).scope||this;if(typeof b=="number"&&typeof E=="number"&&(typeof J=="string"||Array.isArray(J))){var wr=J;J=E,E=b,b=wr}if(arguments[3]instanceof Qe==0?(Be=arguments[4],Ve=arguments[5],Ot(kt=arguments[3])==="object"&&kt!==null||(typeof Be=="string"&&(Ve=Be,Be=null),typeof kt=="string"&&(Ve=kt,kt=null),typeof kt=="number"&&(Be=kt,kt=null),ae={flags:kt,angle:Be,align:Ve})):(_("The transform parameter of text() with a Matrix value"),xr=ue),isNaN(E)||isNaN(J)||b==null)throw new Error("Invalid arguments passed to jsPDF.text");if(b.length===0)return Bt;var br,Er="",js=typeof ae.lineHeightFactor=="number"?ae.lineHeightFactor:vi,In=Bt.internal.scaleFactor;function _s(At){return At=At.split("	").join(Array(ae.TabLen||9).join(" ")),kn(At,kt)}function Ja(At){for(var Rt,ir=At.concat(),kr=[],Cs=ir.length;Cs--;)typeof(Rt=ir.shift())=="string"?kr.push(Rt):Array.isArray(At)&&(Rt.length===1||Rt[1]===void 0&&Rt[2]===void 0)?kr.push(Rt[0]):kr.push([Rt[0],Rt[1],Rt[2]]);return kr}function la(At,Rt){var ir;if(typeof At=="string")ir=Rt(At)[0];else if(Array.isArray(At)){for(var kr,Cs,ao=At.concat(),ua=[],vl=ao.length;vl--;)typeof(kr=ao.shift())=="string"?ua.push(Rt(kr)[0]):Array.isArray(kr)&&typeof kr[0]=="string"&&(Cs=Rt(kr[0],kr[1],kr[2]),ua.push([Cs[0],Cs[1],Cs[2]]));ir=ua}return ir}var Hs=!1,ji=!0;if(typeof b=="string")Hs=!0;else if(Array.isArray(b)){var _i=b.concat();_e=[];for(var Vs,Or=_i.length;Or--;)(typeof(Vs=_i.shift())!="string"||Array.isArray(Vs)&&typeof Vs[0]!="string")&&(ji=!1);Hs=ji}if(Hs===!1)throw new Error('Type of text must be string or Array. "'+b+'" is not recognized.');typeof b=="string"&&(b=b.match(/[\r?\n]/)?b.split(/\r\n|\r|\n/g):[b]);var Si=ve/Bt.internal.scaleFactor,Ai=Si*(js-1);switch(ae.baseline){case"bottom":J-=Ai;break;case"top":J+=Si-Ai;break;case"hanging":J+=Si-2*Ai;break;case"middle":J+=Si/2-Ai}if((ht=ae.maxWidth||0)>0&&(typeof b=="string"?b=Bt.splitTextToSize(b,ht):Object.prototype.toString.call(b)==="[object Array]"&&(b=b.reduce(function(At,Rt){return At.concat(Bt.splitTextToSize(Rt,ht))},[]))),ke={text:b,x:E,y:J,options:ae,mutex:{pdfEscape:kn,activeFontKey:Ie,fonts:ut,activeFontSize:ve}},St.publish("preProcessText",ke),b=ke.text,Be=(ae=ke.options).angle,xr instanceof Qe==0&&Be&&typeof Be=="number"){Be*=Math.PI/180,ae.rotationDirection===0&&(Be=-Be),L===D&&(Be=-Be);var Ka=Math.cos(Be),Za=Math.sin(Be);xr=new Qe(Ka,Za,-Za,Ka,0,0)}else Be&&Be instanceof Qe&&(xr=Be);L!==D||xr||(xr=ms),(it=ae.charSpace||vs)!==void 0&&(Er+=j(R(it))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Zt=ae.horizontalScale)!==void 0&&(Er+=j(100*Zt)+` Tz
`),ae.lang;var Yr=-1,Ss=ae.renderingMode!==void 0?ae.renderingMode:ae.stroke,ca=Bt.internal.getCurrentPageInfo().pageContext;switch(Ss){case 0:case!1:case"fill":Yr=0;break;case 1:case!0:case"stroke":Yr=1;break;case 2:case"fillThenStroke":Yr=2;break;case 3:case"invisible":Yr=3;break;case 4:case"fillAndAddForClipping":Yr=4;break;case 5:case"strokeAndAddPathForClipping":Yr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Yr=6;break;case 7:case"addToPathForClipping":Yr=7}var bl=ca.usedRenderingMode!==void 0?ca.usedRenderingMode:-1;Yr!==-1?Er+=Yr+` Tr
`:bl!==-1&&(Er+=`0 Tr
`),Yr!==-1&&(ca.usedRenderingMode=Yr),Ve=ae.align||"left";var jn,Ci=ve*js,Qa=Bt.internal.pageSize.getWidth(),eo=ut[Ie];it=ae.charSpace||vs,ht=ae.maxWidth||0,kt=Object.assign({autoencode:!0,noBOM:!0},ae.flags);var $s=[],Pi=function(At){return Bt.getStringUnitWidth(At,{font:eo,charSpace:it,fontSize:ve,doKerning:!1})*ve/In};if(Object.prototype.toString.call(b)==="[object Array]"){var on;_e=Ja(b),Ve!=="left"&&(jn=_e.map(Pi));var ln,Ys=0;if(Ve==="right"){E-=jn[0],b=[],Or=_e.length;for(var As=0;As<Or;As++)As===0?(ln=bs(E),on=ys(J)):(ln=R(Ys-jn[As]),on=-Ci),b.push([_e[As],ln,on]),Ys=jn[As]}else if(Ve==="center"){E-=jn[0]/2,b=[],Or=_e.length;for(var Gs=0;Gs<Or;Gs++)Gs===0?(ln=bs(E),on=ys(J)):(ln=R((Ys-jn[Gs])/2),on=-Ci),b.push([_e[Gs],ln,on]),Ys=jn[Gs]}else if(Ve==="left"){b=[],Or=_e.length;for(var to=0;to<Or;to++)b.push(_e[to])}else if(Ve==="justify"&&eo.encoding==="Identity-H"){b=[],Or=_e.length,ht=ht!==0?ht:Qa;for(var da=0,sr=0;sr<Or;sr++)if(on=sr===0?ys(J):-Ci,ln=sr===0?bs(E):da,sr<Or-1){var yl=R((ht-jn[sr])/(_e[sr].split(" ").length-1)),ts=_e[sr].split(" ");b.push([ts[0]+" ",ln,on]),da=0;for(var rs=1;rs<ts.length;rs++){var ro=(Pi(ts[rs-1]+" "+ts[rs])-Pi(ts[rs]))*In+yl;rs==ts.length-1?b.push([ts[rs],ro,0]):b.push([ts[rs]+" ",ro,0]),da-=ro}}else b.push([_e[sr],ln,on]);b.push(["",da,0])}else{if(Ve!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(b=[],Or=_e.length,ht=ht!==0?ht:Qa,sr=0;sr<Or;sr++){on=sr===0?ys(J):-Ci,ln=sr===0?bs(E):0;var no=_e[sr].split(" ").length-1,so=no>0?(ht-jn[sr])/no:0;sr<Or-1?$s.push(j(R(so))):$s.push(0),b.push([_e[sr],ln,on])}}}(typeof ae.R2L=="boolean"?ae.R2L:Te)===!0&&(b=la(b,function(At,Rt,ir){return[At.split("").reverse().join(""),Rt,ir]})),ke={text:b,x:E,y:J,options:ae,mutex:{pdfEscape:kn,activeFontKey:Ie,fonts:ut,activeFontSize:ve}},St.publish("postProcessText",ke),b=ke.text,br=ke.mutex.isHex||!1;var io=ut[Ie].encoding;io!=="WinAnsiEncoding"&&io!=="StandardEncoding"||(b=la(b,function(At,Rt,ir){return[_s(At),Rt,ir]})),_e=Ja(b),b=[];for(var Xs,Js,Ks,Li=Array.isArray(_e[0])?1:0,Zs="",Ei=function(At,Rt,ir){var kr="";return ir instanceof Qe?(ir=typeof ae.angle=="number"?gs(ir,new Qe(1,0,0,1,At,Rt)):gs(new Qe(1,0,0,1,At,Rt),ir),L===D&&(ir=gs(new Qe(1,0,0,-1,0,0),ir)),kr=ir.join(" ")+` Tm
`):kr=j(At)+" "+j(Rt)+` Td
`,kr},_n=0;_n<_e.length;_n++){switch(Zs="",Li){case 1:Ks=(br?"<":"(")+_e[_n][0]+(br?">":")"),Xs=parseFloat(_e[_n][1]),Js=parseFloat(_e[_n][2]);break;case 0:Ks=(br?"<":"(")+_e[_n]+(br?">":")"),Xs=bs(E),Js=ys(J)}$s!==void 0&&$s[_n]!==void 0&&(Zs=$s[_n]+` Tw
`),_n===0?b.push(Zs+Ei(Xs,Js,xr)+Ks):Li===0?b.push(Zs+Ks):Li===1&&b.push(Zs+Ei(Xs,Js,xr)+Ks)}b=Li===0?b.join(` Tj
T* `):b.join(` Tj
`),b+=` Tj
`;var ns=`BT
/`;return ns+=Ie+" "+ve+` Tf
`,ns+=j(ve*js)+` TL
`,ns+=wi+`
`,ns+=Er,ns+=b,W(ns+="ET"),m[Ie]=!0,Bt};var cd=f.__private__.clip=f.clip=function(b){return W(b==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return cd("evenodd")},f.__private__.discardPath=f.discardPath=function(){return W("n"),this};var es=f.__private__.isValidStyle=function(b){var E=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(b)!==-1&&(E=!0),E};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(b){return es(b)&&(d=b),this};var dl=f.__private__.getStyle=f.getStyle=function(b){var E=d;switch(b){case"D":case"S":E="S";break;case"F":E="f";break;case"FD":case"DF":E="B";break;case"f":case"f*":case"B":case"B*":E=b}return E},ul=f.close=function(){return W("h"),this};f.stroke=function(){return W("S"),this},f.fill=function(b){return ia("f",b),this},f.fillEvenOdd=function(b){return ia("f*",b),this},f.fillStroke=function(b){return ia("B",b),this},f.fillStrokeEvenOdd=function(b){return ia("B*",b),this};var ia=function(b,E){Ot(E)==="object"?ud(E,b):W(b)},yi=function(b){b===null||L===D&&b===void 0||(b=dl(b),W(b))};function dd(b,E,J,ae,ue){var ke=new ka(E||this.boundingBox,J||this.xStep,ae||this.yStep,this.gState,ue||this.matrix);ke.stream=this.stream;var _e=b+"$$"+this.cloneIndex+++"$$";return yn(_e,ke),ke}var ud=function(b,E){var J=It[b.key],ae=Xe[J];if(ae instanceof zi)W("q"),W(hd(E)),ae.gState&&f.setGState(ae.gState),W(b.matrix.toString()+" cm"),W("/"+J+" sh"),W("Q");else if(ae instanceof ka){var ue=new Qe(1,0,0,-1,0,Ni());b.matrix&&(ue=ue.multiply(b.matrix||ms),J=dd.call(ae,b.key,b.boundingBox,b.xStep,b.yStep,ue).id),W("q"),W("/Pattern cs"),W("/"+J+" scn"),ae.gState&&f.setGState(ae.gState),W(E),W("Q")}},hd=function(b){switch(b){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},qa=f.moveTo=function(b,E){return W(j(R(b))+" "+j(F(E))+" m"),this},hl=f.lineTo=function(b,E){return W(j(R(b))+" "+j(F(E))+" l"),this},Tn=f.curveTo=function(b,E,J,ae,ue,ke){return W([j(R(b)),j(F(E)),j(R(J)),j(F(ae)),j(R(ue)),j(F(ke)),"c"].join(" ")),this};f.__private__.line=f.line=function(b,E,J,ae,ue){if(isNaN(b)||isNaN(E)||isNaN(J)||isNaN(ae)||!es(ue))throw new Error("Invalid arguments passed to jsPDF.line");return L===A?this.lines([[J-b,ae-E]],b,E,[1,1],ue||"S"):this.lines([[J-b,ae-E]],b,E,[1,1]).stroke()},f.__private__.lines=f.lines=function(b,E,J,ae,ue,ke){var _e,Be,Ve,it,ht,kt,Zt,xr,Bt,wr,br,Er;if(typeof b=="number"&&(Er=J,J=E,E=b,b=Er),ae=ae||[1,1],ke=ke||!1,isNaN(E)||isNaN(J)||!Array.isArray(b)||!Array.isArray(ae)||!es(ue)||typeof ke!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(qa(E,J),_e=ae[0],Be=ae[1],it=b.length,wr=E,br=J,Ve=0;Ve<it;Ve++)(ht=b[Ve]).length===2?(wr=ht[0]*_e+wr,br=ht[1]*Be+br,hl(wr,br)):(kt=ht[0]*_e+wr,Zt=ht[1]*Be+br,xr=ht[2]*_e+wr,Bt=ht[3]*Be+br,wr=ht[4]*_e+wr,br=ht[5]*Be+br,Tn(kt,Zt,xr,Bt,wr,br));return ke&&ul(),yi(ue),this},f.path=function(b){for(var E=0;E<b.length;E++){var J=b[E],ae=J.c;switch(J.op){case"m":qa(ae[0],ae[1]);break;case"l":hl(ae[0],ae[1]);break;case"c":Tn.apply(this,ae);break;case"h":ul()}}return this},f.__private__.rect=f.rect=function(b,E,J,ae,ue){if(isNaN(b)||isNaN(E)||isNaN(J)||isNaN(ae)||!es(ue))throw new Error("Invalid arguments passed to jsPDF.rect");return L===A&&(ae=-ae),W([j(R(b)),j(F(E)),j(R(J)),j(R(ae)),"re"].join(" ")),yi(ue),this},f.__private__.triangle=f.triangle=function(b,E,J,ae,ue,ke,_e){if(isNaN(b)||isNaN(E)||isNaN(J)||isNaN(ae)||isNaN(ue)||isNaN(ke)||!es(_e))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[J-b,ae-E],[ue-J,ke-ae],[b-ue,E-ke]],b,E,[1,1],_e,!0),this},f.__private__.roundedRect=f.roundedRect=function(b,E,J,ae,ue,ke,_e){if(isNaN(b)||isNaN(E)||isNaN(J)||isNaN(ae)||isNaN(ue)||isNaN(ke)||!es(_e))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Be=4/3*(Math.SQRT2-1);return ue=Math.min(ue,.5*J),ke=Math.min(ke,.5*ae),this.lines([[J-2*ue,0],[ue*Be,0,ue,ke-ke*Be,ue,ke],[0,ae-2*ke],[0,ke*Be,-ue*Be,ke,-ue,ke],[2*ue-J,0],[-ue*Be,0,-ue,-ke*Be,-ue,-ke],[0,2*ke-ae],[0,-ke*Be,ue*Be,-ke,ue,-ke]],b+ue,E,[1,1],_e,!0),this},f.__private__.ellipse=f.ellipse=function(b,E,J,ae,ue){if(isNaN(b)||isNaN(E)||isNaN(J)||isNaN(ae)||!es(ue))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ke=4/3*(Math.SQRT2-1)*J,_e=4/3*(Math.SQRT2-1)*ae;return qa(b+J,E),Tn(b+J,E-_e,b+ke,E-ae,b,E-ae),Tn(b-ke,E-ae,b-J,E-_e,b-J,E),Tn(b-J,E+_e,b-ke,E+ae,b,E+ae),Tn(b+ke,E+ae,b+J,E+_e,b+J,E),yi(ue),this},f.__private__.circle=f.circle=function(b,E,J,ae){if(isNaN(b)||isNaN(E)||isNaN(J)||!es(ae))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(b,E,J,J,ae)},f.setFont=function(b,E,J){return J&&(E=$(E,J)),Ie=al(b,E,{disableWarning:!1}),this};var fd=f.__private__.getFont=f.getFont=function(){return ut[al.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var b,E,J={};for(b in xt)if(xt.hasOwnProperty(b))for(E in J[b]=[],xt[b])xt[b].hasOwnProperty(E)&&J[b].push(E);return J},f.addFont=function(b,E,J,ae,ue){var ke=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ke.indexOf(arguments[3])!==-1?ue=arguments[3]:arguments[3]&&ke.indexOf(arguments[3])==-1&&(J=$(J,ae)),rl.call(this,b,E,J,ue=ue||"Identity-H")};var vi,Wa=t.lineWidth||.200025,pd=f.__private__.getLineWidth=f.getLineWidth=function(){return Wa},ot=f.__private__.setLineWidth=f.setLineWidth=function(b){return Wa=b,W(j(R(b))+" w"),this};f.__private__.setLineDash=$e.API.setLineDash=$e.API.setLineDashPattern=function(b,E){if(b=b||[],E=E||0,isNaN(E)||!Array.isArray(b))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return b=b.map(function(J){return j(R(J))}).join(" "),E=j(R(E)),W("["+b+"] "+E+" d"),this};var gd=f.__private__.getLineHeight=f.getLineHeight=function(){return ve*vi};f.__private__.getLineHeight=f.getLineHeight=function(){return ve*vi};var md=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(b){return typeof(b=b||1.15)=="number"&&(vi=b),this},xd=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return vi};md(t.lineHeight);var bs=f.__private__.getHorizontalCoordinate=function(b){return R(b)},ys=f.__private__.getVerticalCoordinate=function(b){return L===D?b:Ze[I].mediaBox.topRightY-Ze[I].mediaBox.bottomLeftY-R(b)},bd=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(b){return j(bs(b))},yd=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(b){return j(ys(b))},aa=t.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return Jn(aa)},f.__private__.setStrokeColor=f.setDrawColor=function(b,E,J,ae){return aa=Rn({ch1:b,ch2:E,ch3:J,ch4:ae,pdfColorType:"draw",precision:2}),W(aa),this};var Ha=t.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return Jn(Ha)},f.__private__.setFillColor=f.setFillColor=function(b,E,J,ae){return Ha=Rn({ch1:b,ch2:E,ch3:J,ch4:ae,pdfColorType:"fill",precision:2}),W(Ha),this};var wi=t.textColor||"0 g",vd=f.__private__.getTextColor=f.getTextColor=function(){return Jn(wi)};f.__private__.setTextColor=f.setTextColor=function(b,E,J,ae){return wi=Rn({ch1:b,ch2:E,ch3:J,ch4:ae,pdfColorType:"text",precision:3}),this};var vs=t.charSpace,wd=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(vs||0)};f.__private__.setCharSpace=f.setCharSpace=function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return vs=b,this};var Va=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(b){var E=f.CapJoinStyles[b];if(E===void 0)throw new Error("Line cap style of '"+b+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Va=E,W(E+" J"),this};var $a=0;f.__private__.setLineJoin=f.setLineJoin=function(b){var E=f.CapJoinStyles[b];if(E===void 0)throw new Error("Line join style of '"+b+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return $a=E,W(E+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(b){if(b=b||0,isNaN(b))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return W(j(R(b))+" M"),this},f.GState=Rc,f.setGState=function(b){(b=typeof b=="string"?et[ct[b]]:fl(null,b)).equals(Gt)||(W("/"+b.id+" gs"),Gt=b)};var fl=function(b,E){if(!b||!ct[b]){var J=!1;for(var ae in et)if(et.hasOwnProperty(ae)&&et[ae].equals(E)){J=!0;break}if(J)E=et[ae];else{var ue="GS"+(Object.keys(et).length+1).toString(10);et[ue]=E,E.id=ue}return b&&(ct[b]=E.id),St.publish("addGState",E),E}};f.addGState=function(b,E){return fl(b,E),this},f.saveGraphicsState=function(){return W("q"),Yt.push({key:Ie,size:ve,color:wi}),this},f.restoreGraphicsState=function(){W("Q");var b=Yt.pop();return Ie=b.key,ve=b.size,wi=b.color,Gt=null,this},f.setCurrentTransformationMatrix=function(b){return W(b.toString()+" cm"),this},f.comment=function(b){return W("#"+b),this};var ws=function(b,E){var J=b||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return J},set:function(ke){isNaN(ke)||(J=parseFloat(ke))}});var ae=E||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ae},set:function(ke){isNaN(ke)||(ae=parseFloat(ke))}});var ue="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ue},set:function(ke){ue=ke.toString()}}),this},Ya=function(b,E,J,ae){ws.call(this,b,E),this.type="rect";var ue=J||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ue},set:function(_e){isNaN(_e)||(ue=parseFloat(_e))}});var ke=ae||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ke},set:function(_e){isNaN(_e)||(ke=parseFloat(_e))}}),this},oa=function(){this.page=bt,this.currentPage=I,this.pages=pe.slice(0),this.pagesContext=Ze.slice(0),this.x=Re,this.y=jt,this.matrix=mt,this.width=Xa(I),this.height=gl(I),this.outputDestination=Pe,this.id="",this.objectNumber=-1};oa.prototype.restore=function(){bt=this.page,I=this.currentPage,Ze=this.pagesContext,pe=this.pages,Re=this.x,jt=this.y,mt=this.matrix,pl(I,this.width),ks(I,this.height),Pe=this.outputDestination};var Ga=function(b,E,J,ae,ue){Xn.push(new oa),bt=I=0,pe=[],Re=b,jt=E,mt=ue,za([J,ae])};for(var ki in f.beginFormObject=function(b,E,J,ae,ue){return Ga(b,E,J,ae,ue),this},f.endFormObject=function(b){return(function(E){if(ps[E])Xn.pop().restore();else{var J=new oa,ae="Xo"+(Object.keys(Tr).length+1).toString(10);J.id=ae,ps[E]=ae,Tr[ae]=J,St.publish("addFormObject",J),Xn.pop().restore()}})(b),this},f.doFormObject=function(b,E){var J=Tr[ps[b]];return W("q"),W(E.toString()+" cm"),W("/"+J.id+" Do"),W("Q"),this},f.getFormObject=function(b){var E=Tr[ps[b]];return{x:E.x,y:E.y,width:E.width,height:E.height,matrix:E.matrix}},f.save=function(b,E){return b=b||"generated.pdf",(E=E||{}).returnPromise=E.returnPromise||!1,E.returnPromise===!1?(Bi(sa(Qn()),b),typeof Bi.unload=="function"&&nt.setTimeout&&setTimeout(Bi.unload,911),this):new Promise(function(J,ae){try{var ue=Bi(sa(Qn()),b);typeof Bi.unload=="function"&&nt.setTimeout&&setTimeout(Bi.unload,911),J(ue)}catch(ke){ae(ke.message)}})},$e.API)$e.API.hasOwnProperty(ki)&&(ki==="events"&&$e.API.events.length?(function(b,E){var J,ae,ue;for(ue=E.length-1;ue!==-1;ue--)J=E[ue][0],ae=E[ue][1],b.subscribe.apply(b,[J].concat(typeof ae=="function"?[ae]:ae))})(St,$e.API.events):f[ki]=$e.API[ki]);function Xa(b){return Ze[b].mediaBox.topRightX-Ze[b].mediaBox.bottomLeftX}function pl(b,E){Ze[b].mediaBox.topRightX=E+Ze[b].mediaBox.bottomLeftX}function gl(b){return Ze[b].mediaBox.topRightY-Ze[b].mediaBox.bottomLeftY}function ks(b,E){Ze[b].mediaBox.topRightY=E+Ze[b].mediaBox.bottomLeftY}var Ns=f.getPageWidth=function(b){return Xa(b=b||I)/at},ml=f.setPageWidth=function(b,E){pl(b,E*at)},Ni=f.getPageHeight=function(b){return gl(b=b||I)/at},xl=f.setPageHeight=function(b,E){ks(b,E*at)};return f.internal={pdfEscape:kn,getStyle:dl,getFont:fd,getFontSize:De,getCharSpace:wd,getTextColor:vd,getLineHeight:gd,getLineHeightFactor:xd,getLineWidth:pd,write:je,getHorizontalCoordinate:bs,getVerticalCoordinate:ys,getCoordinateString:bd,getVerticalCoordinateString:yd,collections:{},newObject:Qt,newAdditionalObject:mi,newObjectDeferred:Ar,newObjectDeferredBegin:Lr,getFilters:Mn,putStream:wn,events:St,scaleFactor:at,pageSize:{getWidth:function(){return Ns(I)},setWidth:function(b){ml(I,b)},getHeight:function(){return Ni(I)},setHeight:function(b){xl(I,b)}},encryptionOptions:u,encryption:vr,getEncryptor:function(b){return u!==null?vr.encryptor(b,0):function(E){return E}},output:ll,getNumberOfPages:il,get pages(){return pe},out:W,f2:S,f3:C,getPageInfo:xs,getPageInfoByObjId:cl,getCurrentPageInfo:ld,getPDFVersion:v,Point:ws,Rectangle:Ya,Matrix:Qe,hasHotfix:Nn},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return Ns(I)},set:function(b){ml(I,b)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return Ni(I)},set:function(b){xl(I,b)},enumerable:!0,configurable:!0}),(function(b){for(var E=0,J=Le.length;E<J;E++){var ae=rl.call(this,b[E][0],b[E][1],b[E][2],Le[E][3],!0);g===!1&&(m[ae]=!0);var ue=b[E][0].split("-");tl({id:ae,fontName:ue[0],fontStyle:ue[1]||""})}St.publish("addFonts",{fonts:ut,dictionary:xt})}).call(f,Le),Ie="F1",nl(s,r),St.publish("initialized"),f}ya.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},ya.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},ya.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},ya.prototype.processOwnerPassword=function(t,e){return eh(Qu(e).substr(0,5),t)},ya.prototype.encryptor=function(t,e){var r=Qu(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return eh(r,n)}},Rc.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||Ot(t)!==Ot(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},$e.API={events:[]},$e.version="3.0.4";var rr=$e.API,zh=1,Qi=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},xa=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},lt=function(t){return t.toFixed(2)},oi=function(t){return t.toFixed(5)};rr.__acroform__={};var an=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},um=function(t){return t*zh},ls=function(t){var e=new m1,r=Me.internal.getHeight(t)||0,n=Me.internal.getWidth(t)||0;return e.BBox=[0,0,Number(lt(n)),Number(lt(r))],e},__=rr.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},S_=rr.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},A_=rr.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},lr=rr.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return A_(t,e-1)},cr=rr.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return __(t,e-1)},dr=rr.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return S_(t,e-1)},C_=rr.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,s=t[0],i=t[1],a=t[2],o=t[3],c={};return c.lowerLeft_X=r(s)||0,c.lowerLeft_Y=n(i+o)||0,c.upperRight_X=r(s+a)||0,c.upperRight_Y=n(i)||0,[Number(lt(c.lowerLeft_X)),Number(lt(c.lowerLeft_Y)),Number(lt(c.upperRight_X)),Number(lt(c.upperRight_Y))]},P_=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=th(t,r),s=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+s+" "+lt(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var i=ls(t);return i.scope=t.scope,i.stream=e.join(`
`),i}},th=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=t.multiline?s.map(function(S){return S.split(`
`)}):s.map(function(S){return[S]});var i=r,a=Me.internal.getHeight(t)||0;a=a<0?-a:a;var o=Me.internal.getWidth(t)||0;o=o<0?-o:o;var c=function(S,C,R){if(S+1<s.length){var F=C+" "+s[S+1][0];return ic(F,t,R).width<=o-4}return!1};i++;e:for(;i>0;){e="",i--;var d,u,g=ic("3",t,i).height,m=t.multiline?a-i:(a-g)/2,f=m+=2,x=0,v=0,y=0;if(i<=0){e=`(...) Tj
`,e+="% Width of Text: "+ic(e,t,i=12).width+", FieldWidth:"+o+`
`;break}for(var k="",A=0,D=0;D<s.length;D++)if(s.hasOwnProperty(D)){var L=!1;if(s[D].length!==1&&y!==s[D].length-1){if((g+2)*(A+2)+2>a)continue e;k+=s[D][y],L=!0,v=D,D--}else{k=(k+=s[D][y]+" ").substr(k.length-1)==" "?k.substr(0,k.length-1):k;var q=parseInt(D),z=c(q,k,i),$=D>=s.length-1;if(z&&!$){k+=" ",y=0;continue}if(z||$){if($)v=q;else if(t.multiline&&(g+2)*(A+2)+2>a)continue e}else{if(!t.multiline||(g+2)*(A+2)+2>a)continue e;v=q}}for(var j="",_=x;_<=v;_++){var M=s[_];if(t.multiline){if(_===v){j+=M[y]+" ",y=(y+1)%M.length;continue}if(_===x){j+=M[M.length-1]+" ";continue}}j+=M[0]+" "}switch(j=j.substr(j.length-1)==" "?j.substr(0,j.length-1):j,u=ic(j,t,i).width,t.textAlign){case"right":d=o-u-2;break;case"center":d=(o-u)/2;break;default:d=2}e+=lt(d)+" "+lt(f)+` Td
`,e+="("+Qi(j)+`) Tj
`,e+=-lt(d)+` 0 Td
`,f=-(i+2),u=0,x=L?v:v+1,A++,k=""}break}return n.text=e,n.fontSize=i,n},ic=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},L_={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},E_=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},O_=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Yn.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(L_)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");zh=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new x1,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in n)if(n.hasOwnProperty(s)){var i=n[s];i.objId=void 0,i.hasAnnotation&&E_(i,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,s){var i=!n;for(var a in n||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(a)){var o=n[a],c=[],d=o.Rect;if(o.Rect&&(o.Rect=C_(o.Rect,s)),s.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Me.createDefaultAppearanceStream(o),Ot(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(c=o.getKeyValueListForStream()),o.Rect=d,o.hasAppearanceStream&&!o.appearanceStreamContent){var u=P_(o);c.push({key:"AP",value:"<</N "+u+">>"}),s.internal.acroformPlugin.xForms.push(u)}if(o.appearanceStreamContent){var g="";for(var m in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(m)){var f=o.appearanceStreamContent[m];if(g+="/"+m+" ",g+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var a in f)if(f.hasOwnProperty(a)){var x=f[a];typeof x=="function"&&(x=x.call(s,o)),g+="/"+a+" "+x+" ",s.internal.acroformPlugin.xForms.indexOf(x)>=0||s.internal.acroformPlugin.xForms.push(x)}}else typeof(x=f)=="function"&&(x=x.call(s,o)),g+="/"+a+" "+x,s.internal.acroformPlugin.xForms.indexOf(x)>=0||s.internal.acroformPlugin.xForms.push(x);g+=">>"}c.push({key:"AP",value:`<<
`+g+">>"})}s.internal.putStream({additionalKeyValues:c,objectId:o.objId}),s.internal.out("endobj")}i&&(function(v,y){for(var k in v)if(v.hasOwnProperty(k)){var A=k,D=v[k];y.internal.newObjectDeferredBegin(D.objId,!0),Ot(D)==="object"&&typeof D.putStream=="function"&&D.putStream(),delete v[A]}})(s.internal.acroformPlugin.xForms,s)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},g1=rr.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(a){return a};if(Array.isArray(t)){for(var s="[",i=0;i<t.length;i++)switch(i!==0&&(s+=" "),Ot(t[i])){case"boolean":case"number":case"object":s+=t[i].toString();break;case"string":t[i].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),s+="("+Qi(n(t[i].toString()))+")"):s+=t[i].toString()}return s+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},pu=function(t,e,r){var n=function(s){return s};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),"("+Qi(n(t))+")"},hs=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};hs.prototype.toString=function(){return this.objId+" 0 R"},hs.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},hs.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],s=this[n];s&&(Array.isArray(s)?t.push({key:n,value:g1(s,this.objId,this.scope)}):s instanceof hs?(s.scope=this.scope,t.push({key:n,value:s.objId+" 0 R"})):typeof s!="function"&&t.push({key:n,value:s}))}return t};var m1=function(){hs.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};an(m1,hs);var x1=function(){hs.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Qi(r(t))+")"}},set:function(r){t=r}})};an(x1,hs);var Yn=function t(){hs.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(k){if(isNaN(k))throw new Error('Invalid value "'+k+'" for attribute F supplied.');e=k}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!lr(e,3)},set:function(k){k?this.F=cr(e,3):this.F=dr(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(k){if(isNaN(k))throw new Error('Invalid value "'+k+'" for attribute Ff supplied.');r=k}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(k){n=k!==void 0?k:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(k){n[0]=k}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(k){n[1]=k}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(k){n[2]=k}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(k){n[3]=k}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(k){switch(k){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=k;break;default:throw new Error('Invalid value "'+k+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof Mc)return;i="FieldObject"+t.FieldNum++}var k=function(A){return A};return this.scope&&(k=this.scope.internal.getEncryptor(this.objId)),"("+Qi(k(i))+")"},set:function(k){i=k.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(k){i=k}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(k){a=k}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(k){o=k}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(k){c=k}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/zh:d},set:function(k){d=k}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(k){u=k}});var g="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!g||this instanceof Mc||this instanceof Vi))return pu(g,this.objId,this.scope)},set:function(k){k=k.toString(),g=k}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Cr==0?pu(m,this.objId,this.scope):m},set:function(k){k=k.toString(),m=this instanceof Cr==0?k.substr(0,1)==="("?xa(k.substr(1,k.length-2)):xa(k):k}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Cr==1?xa(m.substr(1,m.length-1)):m},set:function(k){k=k.toString(),m=this instanceof Cr==1?"/"+k:k}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(k){this.V=k}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof Cr==0?pu(f,this.objId,this.scope):f},set:function(k){k=k.toString(),f=this instanceof Cr==0?k.substr(0,1)==="("?xa(k.substr(1,k.length-2)):xa(k):k}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Cr==1?xa(f.substr(1,f.length-1)):f},set:function(k){k=k.toString(),f=this instanceof Cr==1?"/"+k:k}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var x,v=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return v},set:function(k){k=!!k,v=k}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(x)return x},set:function(k){x=k}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!lr(this.Ff,1)},set:function(k){k?this.Ff=cr(this.Ff,1):this.Ff=dr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!lr(this.Ff,2)},set:function(k){k?this.Ff=cr(this.Ff,2):this.Ff=dr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!lr(this.Ff,3)},set:function(k){k?this.Ff=cr(this.Ff,3):this.Ff=dr(this.Ff,3)}});var y=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(y!==null)return y},set:function(k){if([0,1,2].indexOf(k)===-1)throw new Error('Invalid value "'+k+'" for attribute Q supplied.');y=k}}),Object.defineProperty(this,"textAlign",{get:function(){var k;switch(y){case 0:default:k="left";break;case 1:k="center";break;case 2:k="right"}return k},configurable:!0,enumerable:!0,set:function(k){switch(k){case"right":case 2:y=2;break;case"center":case 1:y=1;break;default:y=0}}})};an(Yn,hs);var _a=function(){Yn.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return g1(e,this.objId,this.scope)},set:function(r){var n,s;s=[],typeof(n=r)=="string"&&(s=(function(i,a,o){o||(o=1);for(var c,d=[];c=a.exec(i);)d.push(c[o]);return d})(n,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!lr(this.Ff,18)},set:function(r){r?this.Ff=cr(this.Ff,18):this.Ff=dr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!lr(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=cr(this.Ff,19):this.Ff=dr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!lr(this.Ff,20)},set:function(r){r?(this.Ff=cr(this.Ff,20),e.sort()):this.Ff=dr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!lr(this.Ff,22)},set:function(r){r?this.Ff=cr(this.Ff,22):this.Ff=dr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!lr(this.Ff,23)},set:function(r){r?this.Ff=cr(this.Ff,23):this.Ff=dr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!lr(this.Ff,27)},set:function(r){r?this.Ff=cr(this.Ff,27):this.Ff=dr(this.Ff,27)}}),this.hasAppearanceStream=!1};an(_a,Yn);var Sa=function(){_a.call(this),this.fontName="helvetica",this.combo=!1};an(Sa,_a);var Aa=function(){Sa.call(this),this.combo=!0};an(Aa,Sa);var xc=function(){Aa.call(this),this.edit=!0};an(xc,Aa);var Cr=function(){Yn.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!lr(this.Ff,15)},set:function(r){r?this.Ff=cr(this.Ff,15):this.Ff=dr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!lr(this.Ff,16)},set:function(r){r?this.Ff=cr(this.Ff,16):this.Ff=dr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!lr(this.Ff,17)},set:function(r){r?this.Ff=cr(this.Ff,17):this.Ff=dr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!lr(this.Ff,26)},set:function(r){r?this.Ff=cr(this.Ff,26):this.Ff=dr(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,s=[];for(n in s.push("<<"),e)s.push("/"+n+" ("+Qi(r(e[n]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){Ot(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};an(Cr,Yn);var bc=function(){Cr.call(this),this.pushButton=!0};an(bc,Cr);var Ca=function(){Cr.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};an(Ca,Cr);var Mc=function(){var t,e;Yn.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(o){return o};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,a=[];for(i in a.push("<<"),n)a.push("/"+i+" ("+Qi(s(n[i]))+")");return a.push(">>"),a.join(`
`)},set:function(s){Ot(s)==="object"&&(n=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(s){typeof s=="string"&&(n.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Me.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};an(Mc,Yn),Ca.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},Ca.prototype.createOption=function(t){var e=new Mc;return e.Parent=this,e.optionName=t,this.Kids.push(e),D_.call(this.scope,e),e};var yc=function(){Cr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Me.CheckBox.createAppearanceStream()};an(yc,Cr);var Vi=function(){Yn.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!lr(this.Ff,13)},set:function(e){e?this.Ff=cr(this.Ff,13):this.Ff=dr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!lr(this.Ff,21)},set:function(e){e?this.Ff=cr(this.Ff,21):this.Ff=dr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!lr(this.Ff,23)},set:function(e){e?this.Ff=cr(this.Ff,23):this.Ff=dr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!lr(this.Ff,24)},set:function(e){e?this.Ff=cr(this.Ff,24):this.Ff=dr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!lr(this.Ff,25)},set:function(e){e?this.Ff=cr(this.Ff,25):this.Ff=dr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!lr(this.Ff,26)},set:function(e){e?this.Ff=cr(this.Ff,26):this.Ff=dr(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};an(Vi,Yn);var vc=function(){Vi.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!lr(this.Ff,14)},set:function(t){t?this.Ff=cr(this.Ff,14):this.Ff=dr(this.Ff,14)}}),this.password=!0};an(vc,Vi);var Me={CheckBox:{createAppearanceStream:function(){return{N:{On:Me.CheckBox.YesNormal},D:{On:Me.CheckBox.YesPushDown,Off:Me.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=ls(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),i=th(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+lt(Me.internal.getWidth(t))+" "+lt(Me.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+lt(i.fontSize)+" Tf "+s),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=ls(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),s=[],i=Me.internal.getHeight(t),a=Me.internal.getWidth(t),o=th(t,t.caption);return s.push("1 g"),s.push("0 0 "+lt(a)+" "+lt(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+lt(a-1)+" "+lt(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+lt(o.fontSize)+" Tf "+n),s.push(o.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=ls(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+lt(Me.internal.getWidth(t))+" "+lt(Me.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Me.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Me.RadioButton.Circle.YesNormal,e.D[t]=Me.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=ls(t);e.scope=t.scope;var r=[],n=Me.internal.getWidth(t)<=Me.internal.getHeight(t)?Me.internal.getWidth(t)/4:Me.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Me.internal.Bezier_C,i=Number((n*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+oi(Me.internal.getWidth(t)/2)+" "+oi(Me.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=ls(t);e.scope=t.scope;var r=[],n=Me.internal.getWidth(t)<=Me.internal.getHeight(t)?Me.internal.getWidth(t)/4:Me.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*Me.internal.Bezier_C).toFixed(5)),a=Number((n*Me.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+oi(Me.internal.getWidth(t)/2)+" "+oi(Me.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+oi(Me.internal.getWidth(t)/2)+" "+oi(Me.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),r.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),r.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),r.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=ls(t);e.scope=t.scope;var r=[],n=Me.internal.getWidth(t)<=Me.internal.getHeight(t)?Me.internal.getWidth(t)/4:Me.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*Me.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+oi(Me.internal.getWidth(t)/2)+" "+oi(Me.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Me.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Me.RadioButton.Cross.YesNormal,e.D[t]=Me.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=ls(t);e.scope=t.scope;var r=[],n=Me.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+lt(Me.internal.getWidth(t)-2)+" "+lt(Me.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(lt(n.x1.x)+" "+lt(n.x1.y)+" m"),r.push(lt(n.x2.x)+" "+lt(n.x2.y)+" l"),r.push(lt(n.x4.x)+" "+lt(n.x4.y)+" m"),r.push(lt(n.x3.x)+" "+lt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=ls(t);e.scope=t.scope;var r=Me.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+lt(Me.internal.getWidth(t))+" "+lt(Me.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+lt(Me.internal.getWidth(t)-2)+" "+lt(Me.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(lt(r.x1.x)+" "+lt(r.x1.y)+" m"),n.push(lt(r.x2.x)+" "+lt(r.x2.y)+" l"),n.push(lt(r.x4.x)+" "+lt(r.x4.y)+" m"),n.push(lt(r.x3.x)+" "+lt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=ls(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+lt(Me.internal.getWidth(t))+" "+lt(Me.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};Me.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Me.internal.getWidth(t),r=Me.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},Me.internal.getWidth=function(t){var e=0;return Ot(t)==="object"&&(e=um(t.Rect[2])),e},Me.internal.getHeight=function(t){var e=0;return Ot(t)==="object"&&(e=um(t.Rect[3])),e};var D_=rr.addField=function(t){if(O_(this,t),!(t instanceof Yn))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};rr.AcroFormChoiceField=_a,rr.AcroFormListBox=Sa,rr.AcroFormComboBox=Aa,rr.AcroFormEditBox=xc,rr.AcroFormButton=Cr,rr.AcroFormPushButton=bc,rr.AcroFormRadioButton=Ca,rr.AcroFormCheckBox=yc,rr.AcroFormTextField=Vi,rr.AcroFormPasswordField=vc,rr.AcroFormAppearance=Me,rr.AcroForm={ChoiceField:_a,ListBox:Sa,ComboBox:Aa,EditBox:xc,Button:Cr,PushButton:bc,RadioButton:Ca,CheckBox:yc,TextField:Vi,PasswordField:vc,Appearance:Me},$e.AcroForm={ChoiceField:_a,ListBox:Sa,ComboBox:Aa,EditBox:xc,Button:Cr,PushButton:bc,RadioButton:Ca,CheckBox:yc,TextField:Vi,PasswordField:vc,Appearance:Me};$e.AcroForm;function b1(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){var e="addImage_";t.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=t.__addimage__.getImageFileTypeByImageData=function(S,C){var R,F,V,te,ne,se=r;if((C=C||r)==="RGBA"||S.data!==void 0&&S.data instanceof Uint8ClampedArray&&"height"in S&&"width"in S)return"RGBA";if(z(S))for(ne in n)for(V=n[ne],R=0;R<V.length;R+=1){for(te=!0,F=0;F<V[R].length;F+=1)if(V[R][F]!==void 0&&V[R][F]!==S[F]){te=!1;break}if(te===!0){se=ne;break}}else for(ne in n)for(V=n[ne],R=0;R<V.length;R+=1){for(te=!0,F=0;F<V[R].length;F+=1)if(V[R][F]!==void 0&&V[R][F]!==S.charCodeAt(F)){te=!1;break}if(te===!0){se=ne;break}}return se===r&&C!==r&&(se=C),se},i=function S(C){for(var R=this.internal.write,F=this.internal.putStream,V=(0,this.internal.getFilters)();V.indexOf("FlateEncode")!==-1;)V.splice(V.indexOf("FlateEncode"),1);C.objectId=this.internal.newObject();var te=[];if(te.push({key:"Type",value:"/XObject"}),te.push({key:"Subtype",value:"/Image"}),te.push({key:"Width",value:C.width}),te.push({key:"Height",value:C.height}),C.colorSpace===k.INDEXED?te.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(C.palette.length/3-1)+" "+("sMask"in C&&C.sMask!==void 0?C.objectId+2:C.objectId+1)+" 0 R]"}):(te.push({key:"ColorSpace",value:"/"+C.colorSpace}),C.colorSpace===k.DEVICE_CMYK&&te.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),te.push({key:"BitsPerComponent",value:C.bitsPerComponent}),"decodeParameters"in C&&C.decodeParameters!==void 0&&te.push({key:"DecodeParms",value:"<<"+C.decodeParameters+">>"}),"transparency"in C&&Array.isArray(C.transparency)&&C.transparency.length>0){for(var ne="",se=0,K=C.transparency.length;se<K;se++)ne+=C.transparency[se]+" "+C.transparency[se]+" ";te.push({key:"Mask",value:"["+ne+"]"})}C.sMask!==void 0&&te.push({key:"SMask",value:C.objectId+1+" 0 R"});var Q=C.filter!==void 0?["/"+C.filter]:void 0;if(F({data:C.data,additionalKeyValues:te,alreadyAppliedFilters:Q,objectId:C.objectId}),R("endobj"),"sMask"in C&&C.sMask!==void 0){var re,P=(re=C.sMaskBitsPerComponent)!==null&&re!==void 0?re:C.bitsPerComponent,I={width:C.width,height:C.height,colorSpace:"DeviceGray",bitsPerComponent:P,data:C.sMask};"filter"in C&&(I.decodeParameters="/Predictor ".concat(C.predictor," /Colors 1 /BitsPerComponent ").concat(P," /Columns ").concat(C.width),I.filter=C.filter),S.call(this,I)}if(C.colorSpace===k.INDEXED){var Y=this.internal.newObject();F({data:j(new Uint8Array(C.palette)),objectId:Y}),R("endobj")}},a=function(){var S=this.internal.collections[e+"images"];for(var C in S)i.call(this,S[C])},o=function(){var S,C=this.internal.collections[e+"images"],R=this.internal.write;for(var F in C)R("/I"+(S=C[F]).index,S.objectId,"0","R")},c=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",o))},d=function(){var S=this.internal.collections[e+"images"];return c.call(this),S},u=function(){return Object.keys(this.internal.collections[e+"images"]).length},g=function(S){return typeof t["process"+S.toUpperCase()]=="function"},m=function(S){return Ot(S)==="object"&&S.nodeType===1},f=function(S,C){if(S.nodeName==="IMG"&&S.hasAttribute("src")){var R=""+S.getAttribute("src");if(R.indexOf("data:image/")===0)return mc(unescape(R).split("base64,").pop());var F=t.loadFile(R,!0);if(F!==void 0)return F}if(S.nodeName==="CANVAS"){if(S.width===0||S.height===0)throw new Error("Given canvas must have data. Canvas width: "+S.width+", height: "+S.height);var V;switch(C){case"PNG":V="image/png";break;case"WEBP":V="image/webp";break;default:V="image/jpeg"}return mc(S.toDataURL(V,1).split("base64,").pop())}},x=function(S){var C=this.internal.collections[e+"images"];if(C){for(var R in C)if(S===C[R].alias)return C[R]}},v=function(S,C,R){return S||C||(S=-96,C=-96),S<0&&(S=-1*R.width*72/S/this.internal.scaleFactor),C<0&&(C=-1*R.height*72/C/this.internal.scaleFactor),S===0&&(S=C*R.width/R.height),C===0&&(C=S*R.height/R.width),[S,C]},y=function(S,C,R,F,V,te){var ne=v.call(this,R,F,V),se=this.internal.getCoordinateString,K=this.internal.getVerticalCoordinateString,Q=d.call(this);if(R=ne[0],F=ne[1],Q[V.index]=V,te){te*=Math.PI/180;var re=Math.cos(te),P=Math.sin(te),I=function(ee){return ee.toFixed(4)},Y=[I(re),I(P),I(-1*P),I(re),0,0,"cm"]}this.internal.write("q"),te?(this.internal.write([1,"0","0",1,se(S),K(C+F),"cm"].join(" ")),this.internal.write(Y.join(" ")),this.internal.write([se(R),"0","0",se(F),"0","0","cm"].join(" "))):this.internal.write([se(R),"0","0",se(F),se(S),K(C+F),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+V.index+" Do"),this.internal.write("Q")},k=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var A=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},D=t.__addimage__.sHashCode=function(S){var C,R,F=0;if(typeof S=="string")for(R=S.length,C=0;C<R;C++)F=(F<<5)-F+S.charCodeAt(C),F|=0;else if(z(S))for(R=S.byteLength/2,C=0;C<R;C++)F=(F<<5)-F+S[C],F|=0;return F},L=t.__addimage__.validateStringAsBase64=function(S){(S=S||"").toString().trim();var C=!0;return S.length===0&&(C=!1),S.length%4!=0&&(C=!1),/^[A-Za-z0-9+/]+$/.test(S.substr(0,S.length-2))===!1&&(C=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(S.substr(-2))===!1&&(C=!1),C},q=t.__addimage__.extractImageFromDataUrl=function(S){if(S==null||!(S=S.trim()).startsWith("data:"))return null;var C=S.indexOf(",");return C<0?null:S.substring(0,C).trim().endsWith("base64")?S.substring(C+1):null};t.__addimage__.isArrayBuffer=function(S){return S instanceof ArrayBuffer};var z=t.__addimage__.isArrayBufferView=function(S){return S instanceof Int8Array||S instanceof Uint8Array||S instanceof Uint8ClampedArray||S instanceof Int16Array||S instanceof Uint16Array||S instanceof Int32Array||S instanceof Uint32Array||S instanceof Float32Array||S instanceof Float64Array},$=t.__addimage__.binaryStringToUint8Array=function(S){for(var C=S.length,R=new Uint8Array(C),F=0;F<C;F++)R[F]=S.charCodeAt(F);return R},j=t.__addimage__.arrayBufferToBinaryString=function(S){for(var C="",R=z(S)?S:new Uint8Array(S),F=0;F<R.length;F+=8192)C+=String.fromCharCode.apply(null,R.subarray(F,F+8192));return C};t.addImage=function(){var S,C,R,F,V,te,ne,se,K;if(typeof arguments[1]=="number"?(C=r,R=arguments[1],F=arguments[2],V=arguments[3],te=arguments[4],ne=arguments[5],se=arguments[6],K=arguments[7]):(C=arguments[1],R=arguments[2],F=arguments[3],V=arguments[4],te=arguments[5],ne=arguments[6],se=arguments[7],K=arguments[8]),Ot(S=arguments[0])==="object"&&!m(S)&&"imageData"in S){var Q=S;S=Q.imageData,C=Q.format||C||r,R=Q.x||R||0,F=Q.y||F||0,V=Q.w||Q.width||V,te=Q.h||Q.height||te,ne=Q.alias||ne,se=Q.compression||se,K=Q.rotation||Q.angle||K}var re=this.internal.getFilters();if(se===void 0&&re.indexOf("FlateEncode")!==-1&&(se="SLOW"),isNaN(R)||isNaN(F))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var P=_.call(this,S,C,ne,se);return y.call(this,R,F,V,te,P,K),this};var _=function(S,C,R,F){var V,te,ne;if(typeof S=="string"&&s(S)===r){S=unescape(S);var se=M(S,!1);(se!==""||(se=t.loadFile(S,!0))!==void 0)&&(S=se)}if(m(S)&&(S=f(S,C)),C=s(S,C),!g(C))throw new Error("addImage does not support files of type '"+C+"', please ensure that a plugin for '"+C+"' support is added.");if(((ne=R)==null||ne.length===0)&&(R=(function(K){return typeof K=="string"||z(K)?D(K):z(K.data)?D(K.data):null})(S)),(V=x.call(this,R))||(S instanceof Uint8Array||C==="RGBA"||(te=S,S=$(S)),V=this["process"+C.toUpperCase()](S,u.call(this),R,(function(K){return K&&typeof K=="string"&&(K=K.toUpperCase()),K in t.image_compression?K:A.NONE})(F),te)),!V)throw new Error("An unknown error occurred whilst processing the image.");return V},M=t.__addimage__.convertBase64ToBinaryString=function(S,C){C=typeof C!="boolean"||C;var R,F="";if(typeof S=="string"){var V;R=(V=q(S))!==null&&V!==void 0?V:S;try{F=mc(R)}catch(te){if(C)throw L(R)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+te.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return F};t.getImageProperties=function(S){var C,R,F="";if(m(S)&&(S=f(S)),typeof S=="string"&&s(S)===r&&((F=M(S,!1))===""&&(F=t.loadFile(S)||""),S=F),R=s(S),!g(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(S instanceof Uint8Array||(S=$(S)),!(C=this["process"+R.toUpperCase()](S)))throw new Error("An unknown error occurred whilst processing the image");return C.fileType=R,C}})($e.API),(function(t){var e=function(r){if(r!==void 0&&r!="")return!0};$e.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,s,i,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),d=r.pageContext.annotations,u=!1,g=0;g<d.length&&!u;g++)switch((n=d[g]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var m=0;m<d.length;m++){n=d[m];var f=this.internal.pdfEscape,x=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var v=this.internal.newAdditionalObject(),y=this.internal.newAdditionalObject(),k=this.internal.getEncryptor(v.objId),A=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+f(k(n.contents))+")",i+=" /Popup "+y.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+f(k(A))+") >>",v.content=i;var D=v.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+a(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+D,n.open&&(i+=" /Open true"),i+=" >>",y.content=i,this.internal.write(v.objId,"0 R",y.objId,"0 R");break;case"freetext":s="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var L=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+f(x(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+L+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var q=this.annotations._nameMap[n.options.name];n.options.pageNumber=q.page,n.options.top=q.y}else n.options.top||(n.options.top=0);if(s="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+f(x(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;default:var z=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+z+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,s,i,a){var o=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:c(r),y:d(n),w:c(r+s),h:d(n+i)},options:a,type:"link"})},t.textWithLink=function(r,n,s,i){var a,o,c=this.getTextWidth(r),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){o=i.maxWidth;var u=this.splitTextToSize(r,o).length;a=Math.ceil(d*u)}else o=c,a=d;return this.text(r,n,s,i),s+=.2*d,i.align==="center"&&(n-=c/2),i.align==="right"&&(n-=c),this.link(n,s-d,o,a,i),c},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}})($e.API),(function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];t.__arabicParser__={};var i=t.__arabicParser__.isInArabicSubstitutionA=function(v){return e[v.charCodeAt(0)]!==void 0},a=t.__arabicParser__.isArabicLetter=function(v){return typeof v=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(v)},o=t.__arabicParser__.isArabicEndLetter=function(v){return a(v)&&i(v)&&e[v.charCodeAt(0)].length<=2},c=t.__arabicParser__.isArabicAlfLetter=function(v){return a(v)&&s.indexOf(v.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(v){return a(v)&&i(v)&&e[v.charCodeAt(0)].length>=1};var d=t.__arabicParser__.arabicLetterHasFinalForm=function(v){return a(v)&&i(v)&&e[v.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(v){return a(v)&&i(v)&&e[v.charCodeAt(0)].length>=3};var u=t.__arabicParser__.arabicLetterHasMedialForm=function(v){return a(v)&&i(v)&&e[v.charCodeAt(0)].length==4},g=t.__arabicParser__.resolveLigatures=function(v){var y=0,k=r,A="",D=0;for(y=0;y<v.length;y+=1)k[v.charCodeAt(y)]!==void 0?(D++,typeof(k=k[v.charCodeAt(y)])=="number"&&(A+=String.fromCharCode(k),k=r,D=0),y===v.length-1&&(k=r,A+=v.charAt(y-(D-1)),y-=D-1,D=0)):(k=r,A+=v.charAt(y-D),y-=D,D=0);return A};t.__arabicParser__.isArabicDiacritic=function(v){return v!==void 0&&n[v.charCodeAt(0)]!==void 0};var m=t.__arabicParser__.getCorrectForm=function(v,y,k){return a(v)?i(v)===!1?-1:!d(v)||!a(y)&&!a(k)||!a(k)&&o(y)||o(v)&&!a(y)||o(v)&&c(y)||o(v)&&o(y)?0:u(v)&&a(y)&&!o(y)&&a(k)&&d(k)?3:o(v)||!a(k)?1:2:-1},f=function(v){var y=0,k=0,A=0,D="",L="",q="",z=(v=v||"").split("\\s+"),$=[];for(y=0;y<z.length;y+=1){for($.push(""),k=0;k<z[y].length;k+=1)D=z[y][k],L=z[y][k-1],q=z[y][k+1],a(D)?(A=m(D,L,q),$[y]+=A!==-1?String.fromCharCode(e[D.charCodeAt(0)][A]):D):$[y]+=D;$[y]=g($[y])}return $.join(" ")},x=t.__arabicParser__.processArabic=t.processArabic=function(){var v,y=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,k=[];if(Array.isArray(y)){var A=0;for(k=[],A=0;A<y.length;A+=1)Array.isArray(y[A])?k.push([f(y[A][0]),y[A][1],y[A][2]]):k.push([f(y[A])]);v=k}else v=f(y);return typeof arguments[0]=="string"?v:(arguments[0].text=v,arguments[0])};t.events.push(["preProcessText",x])})($e.API),$e.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(o){s=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(o){i=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var s;if((r=r||"2d")!=="2d")return null;for(s in n)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=n[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})($e.API),(function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(v){c=v}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(v){d=v}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(v){u=v}});var g=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return g},set:function(v){g=v}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(v){m=v}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(v){f=v}});var x=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return x},set:function(v){x=v}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},t.getTextDimensions=function(c,d){n.call(this);var u=(d=d||{}).fontSize||this.getFontSize(),g=d.font||this.getFont(),m=d.scaleFactor||this.internal.scaleFactor,f=0,x=0,v=0,y=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var k=d.maxWidth;k>0?typeof c=="string"?c=this.splitTextToSize(c,k):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(D,L){return D.concat(y.splitTextToSize(L,k))},[])):c=Array.isArray(c)?c:[c];for(var A=0;A<c.length;A++)f<(v=this.getStringUnitWidth(c[A],{font:g})*u)&&(f=v);return f!==0&&(x=c.length),{w:f/=m,h:Math.max((x*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/m,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=t.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var d=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,g=this.internal.__cell__.margins||e,m=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+g.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=g.top,f&&m&&(this.printHeaderRow(c.lineNumber,!0),c.y+=m[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-u,c.y+u,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+u,{align:"center",baseline:"top",maxWidth:c.width-u-u}):this.text(c.text,c.x+u,c.y+u,{align:"left",baseline:"top",maxWidth:c.width-u-u})),this.internal.__cell__.lastCell=c,this};t.table=function(c,d,u,g,m){if(n.call(this),!u)throw new Error("No data for PDF table.");var f,x,v,y,k=[],A=[],D=[],L={},q={},z=[],$=[],j=(m=m||{}).autoSize||!1,_=m.printHeaders!==!1,M=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,S=m.margins||Object.assign({width:this.getPageWidth()},e),C=typeof m.padding=="number"?m.padding:3,R=m.headerBackgroundColor||"#c8c8c8",F=m.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=_,this.internal.__cell__.margins=S,this.internal.__cell__.table_font_size=M,this.internal.__cell__.padding=C,this.internal.__cell__.headerBackgroundColor=R,this.internal.__cell__.headerTextColor=F,this.setFontSize(M),g==null)A=k=Object.keys(u[0]),D=k.map(function(){return"left"});else if(Array.isArray(g)&&Ot(g[0])==="object")for(k=g.map(function(Q){return Q.name}),A=g.map(function(Q){return Q.prompt||Q.name||""}),D=g.map(function(Q){return Q.align||"left"}),f=0;f<g.length;f+=1)q[g[f].name]=.7499990551181103*g[f].width;else Array.isArray(g)&&typeof g[0]=="string"&&(A=k=g,D=k.map(function(){return"left"}));if(j||Array.isArray(g)&&typeof g[0]=="string")for(f=0;f<k.length;f+=1){for(L[y=k[f]]=u.map(function(Q){return Q[y]}),this.setFont(void 0,"bold"),z.push(this.getTextDimensions(A[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),x=L[y],this.setFont(void 0,"normal"),v=0;v<x.length;v+=1)z.push(this.getTextDimensions(x[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);q[y]=Math.max.apply(null,z)+C+C,z=[]}if(_){var V={};for(f=0;f<k.length;f+=1)V[k[f]]={},V[k[f]].text=A[f],V[k[f]].align=D[f];var te=o.call(this,V,q);$=k.map(function(Q){return new i(c,d,q[Q],te,V[Q].text,void 0,V[Q].align)}),this.setTableHeaderRow($),this.printHeaderRow(1,!1)}var ne=g.reduce(function(Q,re){return Q[re.name]=re.align,Q},{});for(f=0;f<u.length;f+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:f,data:u[f]},this);var se=o.call(this,u[f],q);for(v=0;v<k.length;v+=1){var K=u[f][k[v]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:f,col:v,data:K},this),a.call(this,new i(c,d,q[k[v]],se,K,f+2,ne[k[v]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var o=function(c,d){var u=this.internal.__cell__.padding,g=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(c).map(function(f){var x=c[f];return this.splitTextToSize(x.hasOwnProperty("text")?x.text:x,d[f]-u-u)},this).map(function(f){return this.getLineHeightFactor()*f.length*g/m+u+u},this).reduce(function(f,x){return Math.max(f,x)},0)};t.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},t.printHeaderRow=function(c,d){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var g=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(g[0],g[1],g[2],g[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){u=this.internal.__cell__.tableHeaderRow[f].clone(),d&&(u.y=this.internal.__cell__.margins.top||0,m.push(u)),u.lineNumber=c;var x=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,u),this.setTextColor(x)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),r=!1}})($e.API);var y1={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},v1=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],rh=b1(v1),w1=[100,200,300,400,500,600,700,800,900],F_=b1(w1);function gu(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=(function(i){return y1[i=i||"normal"]?i:"normal"})(t.style),n=(function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400})(t.weight),s=(function(i){return typeof rh[i=i||"normal"]=="number"?i:"normal"})(t.stretch);return{family:e,style:r,weight:n,stretch:s,src:t.src||[],ref:t.ref||{name:e,style:[s,r,n].join(" ")}}}function hm(t,e,r,n){var s;for(s=r;s>=0&&s<e.length;s+=n)if(t[e[s]])return t[e[s]];for(s=r;s>=0&&s<e.length;s-=n)if(t[e[s]])return t[e[s]]}var R_={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},fm={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function pm(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function gm(t){return t.trimLeft()}function M_(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function T_(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var ac,mm,xm,ba,oc,bm,ym,vm,mu=["times"];function wm(t,e,r,n,s){var i=4,a=Nm;switch(s){case $e.API.image_compression.FAST:i=1,a=km;break;case $e.API.image_compression.MEDIUM:i=6,a=jm;break;case $e.API.image_compression.SLOW:i=9,a=_m}t=(function(c,d,u,g){for(var m,f=c.length/d,x=new Uint8Array(c.length+f),v=[I_,km,Nm,jm,_m],y=0;y<f;y+=1){var k=y*d,A=c.subarray(k,k+d);if(g)x.set(g(A,u,m),k+y);else{for(var D=v.length,L=[],q=0;q<D;q+=1)L[q]=v[q](A,u,m);var z=z_(L.concat());x.set(L[z],k+y)}m=A}return x})(t,e,Math.ceil(r*n/8),a);var o=Xu(t,{level:i});return $e.API.__addimage__.arrayBufferToBinaryString(o)}function I_(t){var e=Array.apply([],t);return e.unshift(0),e}function km(t,e){var r=t.length,n=[];n[0]=1;for(var s=0;s<r;s+=1){var i=t[s-e]||0;n[s+1]=t[s]-i+256&255}return n}function Nm(t,e,r){var n=t.length,s=[];s[0]=2;for(var i=0;i<n;i+=1){var a=r&&r[i]||0;s[i+1]=t[i]-a+256&255}return s}function jm(t,e,r){var n=t.length,s=[];s[0]=3;for(var i=0;i<n;i+=1){var a=t[i-e]||0,o=r&&r[i]||0;s[i+1]=t[i]+256-(a+o>>>1)&255}return s}function _m(t,e,r){var n=t.length,s=[];s[0]=4;for(var i=0;i<n;i+=1){var a=B_(t[i-e]||0,r&&r[i]||0,r&&r[i-e]||0);s[i+1]=t[i]-a+256&255}return s}function B_(t,e,r){if(t===e&&e===r)return t;var n=Math.abs(e-r),s=Math.abs(t-r),i=Math.abs(t+e-r-r);return n<=s&&n<=i?t:s<=i?e:r}function z_(t){var e=t.map(function(r){return r.reduce(function(n,s){return n+Math.abs(s)},0)});return e.indexOf(Math.min.apply(null,e))}function xu(t,e,r){var n=e*r,s=Math.floor(n/8),i=16-(n-8*s+r),a=(1<<r)-1;return k1(t,s)>>i&a}function Sm(t,e,r,n){var s=r*n,i=Math.floor(s/8),a=16-(s-8*i+n),o=(1<<n)-1,c=(e&o)<<a;(function(d,u,g){if(u+1<d.byteLength)d.setUint16(u,g,!1);else{var m=g>>8&255;d.setUint8(u,m)}})(t,i,k1(t,i)&~(o<<a)&65535|c)}function k1(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function U_(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,s=t[e++],i=s>>7,a=1<<1+(7&s);t[e++],t[e++];var o=null,c=null;i&&(o=e,c=a,e+=3*a);var d=!0,u=[],g=0,m=null,f=0,x=null;for(this.width=r,this.height=n;d&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,x=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((S=t[e++])>=0))throw Error("Invalid block size");if(S===0)break;e+=S}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var v=t[e++];g=t[e++]|t[e++]<<8,m=t[e++],1&v||(m=null),f=v>>2&7,e++;break;case 254:for(;;){if(!((S=t[e++])>=0))throw Error("Invalid block size");if(S===0)break;e+=S}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var y=t[e++]|t[e++]<<8,k=t[e++]|t[e++]<<8,A=t[e++]|t[e++]<<8,D=t[e++]|t[e++]<<8,L=t[e++],q=L>>6&1,z=1<<1+(7&L),$=o,j=c,_=!1;L>>7&&(_=!0,$=e,j=z,e+=3*z);var M=e;for(e++;;){var S;if(!((S=t[e++])>=0))throw Error("Invalid block size");if(S===0)break;e+=S}u.push({x:y,y:k,width:A,height:D,has_local_palette:_,palette_offset:$,palette_size:j,data_offset:M,data_length:e-M,transparent_index:m,interlaced:!!q,delay:g,disposal:f});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return x},this.frameInfo=function(C){if(C<0||C>=u.length)throw new Error("Frame index out of range.");return u[C]},this.decodeAndBlitFrameBGRA=function(C,R){var F=this.frameInfo(C),V=F.width*F.height,te=new Uint8Array(V);Am(t,F.data_offset,te,V);var ne=F.palette_offset,se=F.transparent_index;se===null&&(se=256);var K=F.width,Q=r-K,re=K,P=4*(F.y*r+F.x),I=4*((F.y+F.height)*r+F.x),Y=P,ee=4*Q;F.interlaced===!0&&(ee+=4*r*7);for(var ie=8,ce=0,de=te.length;ce<de;++ce){var he=te[ce];if(re===0&&(re=K,(Y+=ee)>=I&&(ee=4*Q+4*r*(ie-1),Y=P+(K+Q)*(ie<<1),ie>>=1)),he===se)Y+=4;else{var xe=t[ne+3*he],pe=t[ne+3*he+1],Ae=t[ne+3*he+2];R[Y++]=Ae,R[Y++]=pe,R[Y++]=xe,R[Y++]=255}--re}},this.decodeAndBlitFrameRGBA=function(C,R){var F=this.frameInfo(C),V=F.width*F.height,te=new Uint8Array(V);Am(t,F.data_offset,te,V);var ne=F.palette_offset,se=F.transparent_index;se===null&&(se=256);var K=F.width,Q=r-K,re=K,P=4*(F.y*r+F.x),I=4*((F.y+F.height)*r+F.x),Y=P,ee=4*Q;F.interlaced===!0&&(ee+=4*r*7);for(var ie=8,ce=0,de=te.length;ce<de;++ce){var he=te[ce];if(re===0&&(re=K,(Y+=ee)>=I&&(ee=4*Q+4*r*(ie-1),Y=P+(K+Q)*(ie<<1),ie>>=1)),he===se)Y+=4;else{var xe=t[ne+3*he],pe=t[ne+3*he+1],Ae=t[ne+3*he+2];R[Y++]=xe,R[Y++]=pe,R[Y++]=Ae,R[Y++]=255}--re}}}function Am(t,e,r,n){for(var s=t[e++],i=1<<s,a=i+1,o=a+1,c=s+1,d=(1<<c)-1,u=0,g=0,m=0,f=t[e++],x=new Int32Array(4096),v=null;;){for(;u<16&&f!==0;)g|=t[e++]<<u,u+=8,f===1?f=t[e++]:--f;if(u<c)break;var y=g&d;if(g>>=c,u-=c,y!==i){if(y===a)break;for(var k=y<o?y:v,A=0,D=k;D>i;)D=x[D]>>8,++A;var L=D;if(m+A+(k!==y?1:0)>n)return void Tt.log("Warning, gif stream longer than expected.");r[m++]=L;var q=m+=A;for(k!==y&&(r[m++]=L),D=k;A--;)D=x[D],r[--q]=255&D,D>>=8;v!==null&&o<4096&&(x[o++]=v<<8|L,o>=d+1&&c<12&&(++c,d=d<<1|1)),v=y}else o=a+1,d=(1<<(c=s+1))-1,v=null}return m!==n&&Tt.log("Warning, gif stream shorter than expected."),r}function bu(t){var e,r,n,s,i,a=Math.floor,o=new Array(64),c=new Array(64),d=new Array(64),u=new Array(64),g=new Array(65535),m=new Array(65535),f=new Array(64),x=new Array(64),v=[],y=0,k=7,A=new Array(64),D=new Array(64),L=new Array(64),q=new Array(256),z=new Array(2048),$=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],j=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],_=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],S=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],C=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],F=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],V=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function te(P,I){for(var Y=0,ee=0,ie=new Array,ce=1;ce<=16;ce++){for(var de=1;de<=P[ce];de++)ie[I[ee]]=[],ie[I[ee]][0]=Y,ie[I[ee]][1]=ce,ee++,Y++;Y*=2}return ie}function ne(P){for(var I=P[0],Y=P[1]-1;Y>=0;)I&1<<Y&&(y|=1<<k),Y--,--k<0&&(y==255?(se(255),se(0)):se(y),k=7,y=0)}function se(P){v.push(P)}function K(P){se(P>>8&255),se(255&P)}function Q(P,I,Y,ee,ie){for(var ce,de=ie[0],he=ie[240],xe=(function(ve,We){var De,Te,He,tt,rt,ze,Ke,st,Ie,at,Re=0;for(Ie=0;Ie<8;++Ie){De=ve[Re],Te=ve[Re+1],He=ve[Re+2],tt=ve[Re+3],rt=ve[Re+4],ze=ve[Re+5],Ke=ve[Re+6];var jt=De+(st=ve[Re+7]),mt=De-st,ut=Te+Ke,xt=Te-Ke,Yt=He+ze,Xe=He-ze,It=tt+rt,et=tt-rt,ct=jt+It,Gt=jt-It,bt=ut+Yt,Ze=ut-Yt;ve[Re]=ct+bt,ve[Re+4]=ct-bt;var St=.707106781*(Ze+Gt);ve[Re+2]=Gt+St,ve[Re+6]=Gt-St;var gi=.382683433*((ct=et+Xe)-(Ze=xt+mt)),Tr=.5411961*ct+gi,ps=1.306562965*Ze+gi,Xn=.707106781*(bt=Xe+xt),Qe=mt+Xn,gs=mt-Xn;ve[Re+5]=gs+Tr,ve[Re+3]=gs-Tr,ve[Re+1]=Qe+ps,ve[Re+7]=Qe-ps,Re+=8}for(Re=0,Ie=0;Ie<8;++Ie){De=ve[Re],Te=ve[Re+8],He=ve[Re+16],tt=ve[Re+24],rt=ve[Re+32],ze=ve[Re+40],Ke=ve[Re+48];var ms=De+(st=ve[Re+56]),yn=De-st,vn=Te+Ke,Qt=Te-Ke,Ar=He+ze,Lr=He-ze,mi=tt+rt,Ws=tt-rt,Fn=ms+mi,Jn=ms-mi,Rn=vn+Ar,Mn=vn-Ar;ve[Re]=Fn+Rn,ve[Re+32]=Fn-Rn;var wn=.707106781*(Mn+Jn);ve[Re+16]=Jn+wn,ve[Re+48]=Jn-wn;var xi=.382683433*((Fn=Ws+Lr)-(Mn=Qt+yn)),Kn=.5411961*Fn+xi,bi=1.306562965*Mn+xi,ea=.707106781*(Rn=Lr+Qt),ta=yn+ea,ra=yn-ea;ve[Re+40]=ra+Kn,ve[Re+24]=ra-Kn,ve[Re+8]=ta+bi,ve[Re+56]=ta-bi,Re++}for(Ie=0;Ie<64;++Ie)at=ve[Ie]*We[Ie],f[Ie]=at>0?at+.5|0:at-.5|0;return f})(P,I),pe=0;pe<64;++pe)x[$[pe]]=xe[pe];var Ae=x[0]-Y;Y=x[0],Ae==0?ne(ee[0]):(ne(ee[m[ce=32767+Ae]]),ne(g[ce]));for(var Pe=63;Pe>0&&x[Pe]==0;)Pe--;if(Pe==0)return ne(de),Y;for(var Ee,W=1;W<=Pe;){for(var je=W;x[W]==0&&W<=Pe;)++W;var Je=W-je;if(Je>=16){Ee=Je>>4;for(var Le=1;Le<=Ee;++Le)ne(he);Je&=15}ce=32767+x[W],ne(ie[(Je<<4)+m[ce]]),ne(g[ce]),W++}return Pe!=63&&ne(de),Y}function re(P){P=Math.min(Math.max(P,1),100),i!=P&&((function(I){for(var Y=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ee=0;ee<64;ee++){var ie=a((Y[ee]*I+50)/100);ie=Math.min(Math.max(ie,1),255),o[$[ee]]=ie}for(var ce=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],de=0;de<64;de++){var he=a((ce[de]*I+50)/100);he=Math.min(Math.max(he,1),255),c[$[de]]=he}for(var xe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],pe=0,Ae=0;Ae<8;Ae++)for(var Pe=0;Pe<8;Pe++)d[pe]=1/(o[$[pe]]*xe[Ae]*xe[Pe]*8),u[pe]=1/(c[$[pe]]*xe[Ae]*xe[Pe]*8),pe++})(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),i=P)}this.encode=function(P,I){I&&re(I),v=new Array,y=0,k=7,K(65496),K(65504),K(16),se(74),se(70),se(73),se(70),se(0),se(1),se(1),se(0),K(1),K(1),se(0),se(0),(function(){K(65499),K(132),se(0);for(var Te=0;Te<64;Te++)se(o[Te]);se(1);for(var He=0;He<64;He++)se(c[He])})(),(function(Te,He){K(65472),K(17),se(8),K(He),K(Te),se(3),se(1),se(17),se(0),se(2),se(17),se(1),se(3),se(17),se(1)})(P.width,P.height),(function(){K(65476),K(418),se(0);for(var Te=0;Te<16;Te++)se(j[Te+1]);for(var He=0;He<=11;He++)se(_[He]);se(16);for(var tt=0;tt<16;tt++)se(M[tt+1]);for(var rt=0;rt<=161;rt++)se(S[rt]);se(1);for(var ze=0;ze<16;ze++)se(C[ze+1]);for(var Ke=0;Ke<=11;Ke++)se(R[Ke]);se(17);for(var st=0;st<16;st++)se(F[st+1]);for(var Ie=0;Ie<=161;Ie++)se(V[Ie])})(),K(65498),K(12),se(3),se(1),se(0),se(2),se(17),se(3),se(17),se(0),se(63),se(0);var Y=0,ee=0,ie=0;y=0,k=7,this.encode.displayName="_encode_";for(var ce,de,he,xe,pe,Ae,Pe,Ee,W,je=P.data,Je=P.width,Le=P.height,ve=4*Je,We=0;We<Le;){for(ce=0;ce<ve;){for(pe=ve*We+ce,Pe=-1,Ee=0,W=0;W<64;W++)Ae=pe+(Ee=W>>3)*ve+(Pe=4*(7&W)),We+Ee>=Le&&(Ae-=ve*(We+1+Ee-Le)),ce+Pe>=ve&&(Ae-=ce+Pe-ve+4),de=je[Ae++],he=je[Ae++],xe=je[Ae++],A[W]=(z[de]+z[he+256|0]+z[xe+512|0]>>16)-128,D[W]=(z[de+768|0]+z[he+1024|0]+z[xe+1280|0]>>16)-128,L[W]=(z[de+1280|0]+z[he+1536|0]+z[xe+1792|0]>>16)-128;Y=Q(A,d,Y,e,n),ee=Q(D,u,ee,r,s),ie=Q(L,u,ie,r,s),ce+=32}We+=8}if(k>=0){var De=[];De[1]=k+1,De[0]=(1<<k+1)-1,ne(De)}return K(65497),new Uint8Array(v)},t=t||50,(function(){for(var P=String.fromCharCode,I=0;I<256;I++)q[I]=P(I)})(),e=te(j,_),r=te(C,R),n=te(M,S),s=te(F,V),(function(){for(var P=1,I=2,Y=1;Y<=15;Y++){for(var ee=P;ee<I;ee++)m[32767+ee]=Y,g[32767+ee]=[],g[32767+ee][1]=Y,g[32767+ee][0]=ee;for(var ie=-(I-1);ie<=-P;ie++)m[32767+ie]=Y,g[32767+ie]=[],g[32767+ie][1]=Y,g[32767+ie][0]=I-1+ie;P<<=1,I<<=1}})(),(function(){for(var P=0;P<256;P++)z[P]=19595*P,z[P+256|0]=38470*P,z[P+512|0]=7471*P+32768,z[P+768|0]=-11059*P,z[P+1024|0]=-21709*P,z[P+1280|0]=32768*P+8421375,z[P+1536|0]=-27439*P,z[P+1792|0]=-5329*P})(),re(t)}function qn(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Cm(t){function e(_){if(!_)throw Error("assert :P")}function r(_,M,S){for(var C=0;4>C;C++)if(_[M+C]!=S.charCodeAt(C))return!0;return!1}function n(_,M,S,C,R){for(var F=0;F<R;F++)_[M+F]=S[C+F]}function s(_,M,S,C){for(var R=0;R<C;R++)_[M+R]=S}function i(_){return new Int32Array(_)}function a(_,M){for(var S=[],C=0;C<_;C++)S.push(new M);return S}function o(_,M){var S=[];return(function C(R,F,V){for(var te=V[F],ne=0;ne<te&&(R.push(V.length>F+1?[]:new M),!(V.length<F+1));ne++)C(R[ne],F+1,V)})(S,0,_),S}var c=function(){var _=this;function M(h,p){for(var w=1<<p-1>>>0;h&w;)w>>>=1;return w?(h&w-1)+w:h}function S(h,p,w,N,O){e(!(N%w));do h[p+(N-=w)]=O;while(0<N)}function C(h,p,w,N,O){if(e(2328>=O),512>=O)var T=i(512);else if((T=i(O))==null)return 0;return(function(B,U,H,G,oe,me){var X,le,fe=U,ye=1<<H,ge=i(16),we=i(16);for(e(oe!=0),e(G!=null),e(B!=null),e(0<H),le=0;le<oe;++le){if(15<G[le])return 0;++ge[G[le]]}if(ge[0]==oe)return 0;for(we[1]=0,X=1;15>X;++X){if(ge[X]>1<<X)return 0;we[X+1]=we[X]+ge[X]}for(le=0;le<oe;++le)X=G[le],0<G[le]&&(me[we[X]++]=le);if(we[15]==1)return(G=new R).g=0,G.value=me[0],S(B,fe,1,ye,G),ye;var Ne,Ce=-1,Se=ye-1,Ye=0,Fe=1,pt=1,Ue=1<<H;for(le=0,X=1,oe=2;X<=H;++X,oe<<=1){if(Fe+=pt<<=1,0>(pt-=ge[X]))return 0;for(;0<ge[X];--ge[X])(G=new R).g=X,G.value=me[le++],S(B,fe+Ye,oe,Ue,G),Ye=M(Ye,X)}for(X=H+1,oe=2;15>=X;++X,oe<<=1){if(Fe+=pt<<=1,0>(pt-=ge[X]))return 0;for(;0<ge[X];--ge[X]){if(G=new R,(Ye&Se)!=Ce){for(fe+=Ue,Ne=1<<(Ce=X)-H;15>Ce&&!(0>=(Ne-=ge[Ce]));)++Ce,Ne<<=1;ye+=Ue=1<<(Ne=Ce-H),B[U+(Ce=Ye&Se)].g=Ne+H,B[U+Ce].value=fe-U-Ce}G.g=X-H,G.value=me[le++],S(B,fe+(Ye>>H),oe,Ue,G),Ye=M(Ye,X)}}return Fe!=2*we[15]-1?0:ye})(h,p,w,N,O,T)}function R(){this.value=this.g=0}function F(){this.value=this.g=0}function V(){this.G=a(5,R),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Pi,F)}function te(h,p,w,N){e(h!=null),e(p!=null),e(2147483648>N),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=p,h.pa=w,h.Jd=p,h.Yc=w+N,h.Zc=4<=N?w+N-4+1:w,de(h)}function ne(h,p){for(var w=0;0<p--;)w|=xe(h,128)<<p;return w}function se(h,p){var w=ne(h,p);return he(h)?-w:w}function K(h,p,w,N){var O,T=0;for(e(h!=null),e(p!=null),e(4294967288>N),h.Sb=N,h.Ra=0,h.u=0,h.h=0,4<N&&(N=4),O=0;O<N;++O)T+=p[w+O]<<8*O;h.Ra=T,h.bb=N,h.oa=p,h.pa=w}function Q(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<Ys-8>>>0,++h.bb,h.u-=8;ee(h)&&(h.h=1,h.u=0)}function re(h,p){if(e(0<=p),!h.h&&p<=ln){var w=Y(h)&on[p];return h.u+=p,Q(h),w}return h.h=1,h.u=0}function P(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function I(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Y(h){return h.Ra>>>(h.u&Ys-1)>>>0}function ee(h){return e(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>Ys}function ie(h,p){h.u=p,h.h=ee(h)}function ce(h){h.u>=As&&(e(h.u>=As),Q(h))}function de(h){e(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(e(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function he(h){return ne(h,1)}function xe(h,p){var w=h.Ca;0>h.b&&de(h);var N=h.b,O=w*p>>>8,T=(h.I>>>N>O)+0;for(T?(w-=O,h.I-=O+1<<N>>>0):w=O+1,N=w,O=0;256<=N;)O+=8,N>>=8;return N=7^O+Gs[N],h.b-=N,h.Ca=(w<<N)-1,T}function pe(h,p,w){h[p+0]=w>>24&255,h[p+1]=w>>16&255,h[p+2]=w>>8&255,h[p+3]=255&w}function Ae(h,p){return h[p+0]|h[p+1]<<8}function Pe(h,p){return Ae(h,p)|h[p+2]<<16}function Ee(h,p){return Ae(h,p)|Ae(h,p+2)<<16}function W(h,p){var w=1<<p;return e(h!=null),e(0<p),h.X=i(w),h.X==null?0:(h.Mb=32-p,h.Xa=p,1)}function je(h,p){e(h!=null),e(p!=null),e(h.Xa==p.Xa),n(p.X,0,h.X,0,1<<p.Xa)}function Je(){this.X=[],this.Xa=this.Mb=0}function Le(h,p,w,N){e(w!=null),e(N!=null);var O=w[0],T=N[0];return O==0&&(O=(h*T+p/2)/p),T==0&&(T=(p*O+h/2)/h),0>=O||0>=T?0:(w[0]=O,N[0]=T,1)}function ve(h,p){return h+(1<<p)-1>>>p}function We(h,p){return((4278255360&h)+(4278255360&p)>>>0&4278255360)+((16711935&h)+(16711935&p)>>>0&16711935)>>>0}function De(h,p){_[p]=function(w,N,O,T,B,U,H){var G;for(G=0;G<B;++G){var oe=_[h](U[H+G-1],O,T+G);U[H+G]=We(w[N+G],oe)}}}function Te(){this.ud=this.hd=this.jd=0}function He(h,p){return((4278124286&(h^p))>>>1)+(h&p)>>>0}function tt(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function rt(h,p){return tt(h+(h-p+.5>>1))}function ze(h,p,w){return Math.abs(p-w)-Math.abs(h-w)}function Ke(h,p,w,N,O,T,B){for(N=T[B-1],w=0;w<O;++w)T[B+w]=N=We(h[p+w],N)}function st(h,p,w,N,O){var T;for(T=0;T<w;++T){var B=h[p+T],U=B>>8&255,H=16711935&(H=(H=16711935&B)+((U<<16)+U));N[O+T]=(4278255360&B)+H>>>0}}function Ie(h,p){p.jd=255&h,p.hd=h>>8&255,p.ud=h>>16&255}function at(h,p,w,N,O,T){var B;for(B=0;B<N;++B){var U=p[w+B],H=U>>>8,G=U,oe=255&(oe=(oe=U>>>16)+((h.jd<<24>>24)*(H<<24>>24)>>>5));G=255&(G=(G+=(h.hd<<24>>24)*(H<<24>>24)>>>5)+((h.ud<<24>>24)*(oe<<24>>24)>>>5)),O[T+B]=(4278255360&U)+(oe<<16)+G}}function Re(h,p,w,N,O){_[p]=function(T,B,U,H,G,oe,me,X,le){for(H=me;H<X;++H)for(me=0;me<le;++me)G[oe++]=O(U[N(T[B++])])},_[h]=function(T,B,U,H,G,oe,me){var X=8>>T.b,le=T.Ea,fe=T.K[0],ye=T.w;if(8>X)for(T=(1<<T.b)-1,ye=(1<<X)-1;B<U;++B){var ge,we=0;for(ge=0;ge<le;++ge)ge&T||(we=N(H[G++])),oe[me++]=O(fe[we&ye]),we>>=X}else _["VP8LMapColor"+w](H,G,fe,ye,oe,me,B,U,le)}}function jt(h,p,w,N,O){for(w=p+w;p<w;){var T=h[p++];N[O++]=T>>16&255,N[O++]=T>>8&255,N[O++]=255&T}}function mt(h,p,w,N,O){for(w=p+w;p<w;){var T=h[p++];N[O++]=T>>16&255,N[O++]=T>>8&255,N[O++]=255&T,N[O++]=T>>24&255}}function ut(h,p,w,N,O){for(w=p+w;p<w;){var T=(B=h[p++])>>16&240|B>>12&15,B=240&B|B>>28&15;N[O++]=T,N[O++]=B}}function xt(h,p,w,N,O){for(w=p+w;p<w;){var T=(B=h[p++])>>16&248|B>>13&7,B=B>>5&224|B>>3&31;N[O++]=T,N[O++]=B}}function Yt(h,p,w,N,O){for(w=p+w;p<w;){var T=h[p++];N[O++]=255&T,N[O++]=T>>8&255,N[O++]=T>>16&255}}function Xe(h,p,w,N,O,T){if(T==0)for(w=p+w;p<w;)pe(N,((T=h[p++])[0]>>24|T[1]>>8&65280|T[2]<<8&16711680|T[3]<<24)>>>0),O+=32;else n(N,O,h,p,w)}function It(h,p){_[p][0]=_[h+"0"],_[p][1]=_[h+"1"],_[p][2]=_[h+"2"],_[p][3]=_[h+"3"],_[p][4]=_[h+"4"],_[p][5]=_[h+"5"],_[p][6]=_[h+"6"],_[p][7]=_[h+"7"],_[p][8]=_[h+"8"],_[p][9]=_[h+"9"],_[p][10]=_[h+"10"],_[p][11]=_[h+"11"],_[p][12]=_[h+"12"],_[p][13]=_[h+"13"],_[p][14]=_[h+"0"],_[p][15]=_[h+"0"]}function et(h){return h==jd||h==_d||h==Sl||h==Sd}function ct(){this.eb=[],this.size=this.A=this.fb=0}function Gt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function bt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ct,this.f.kb=new Gt,this.sd=null}function Ze(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function St(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function gi(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function Tr(h,p){var w=h.T,N=p.ba.f.RGBA,O=N.eb,T=N.fb+h.ka*N.A,B=An[p.ba.S],U=h.y,H=h.O,G=h.f,oe=h.N,me=h.ea,X=h.W,le=p.cc,fe=p.dc,ye=p.Mc,ge=p.Nc,we=h.ka,Ne=h.ka+h.T,Ce=h.U,Se=Ce+1>>1;for(we==0?B(U,H,null,null,G,oe,me,X,G,oe,me,X,O,T,null,null,Ce):(B(p.ec,p.fc,U,H,le,fe,ye,ge,G,oe,me,X,O,T-N.A,O,T,Ce),++w);we+2<Ne;we+=2)le=G,fe=oe,ye=me,ge=X,oe+=h.Rc,X+=h.Rc,T+=2*N.A,B(U,(H+=2*h.fa)-h.fa,U,H,le,fe,ye,ge,G,oe,me,X,O,T-N.A,O,T,Ce);return H+=h.fa,h.j+Ne<h.o?(n(p.ec,p.fc,U,H,Ce),n(p.cc,p.dc,G,oe,Se),n(p.Mc,p.Nc,me,X,Se),w--):1&Ne||B(U,H,null,null,G,oe,me,X,G,oe,me,X,O,T+N.A,null,null,Ce),w}function ps(h,p,w){var N=h.F,O=[h.J];if(N!=null){var T=h.U,B=p.ba.S,U=B==_l||B==Sl;p=p.ba.f.RGBA;var H=[0],G=h.ka;H[0]=h.T,h.Kb&&(G==0?--H[0]:(--G,O[0]-=h.width),h.j+h.ka+h.T==h.o&&(H[0]=h.o-h.j-G));var oe=p.eb;G=p.fb+G*p.A,h=Kh(N,O[0],h.width,T,H,oe,G+(U?0:3),p.A),e(w==H),h&&et(B)&&oo(oe,G,U,T,H,p.A)}return 0}function Xn(h){var p=h.ma,w=p.ba.S,N=11>w,O=w==Nl||w==jl||w==_l||w==Nd||w==12||et(w);if(p.memory=null,p.Ib=null,p.Jb=null,p.Nd=null,!Qa(p.Oa,h,O?11:12))return 0;if(O&&et(w)&&Ja(),h.da)alert("todo:use_scaling");else{if(N){if(p.Ib=gi,h.Kb){if(w=h.U+1>>1,p.memory=i(h.U+2*w),p.memory==null)return 0;p.ec=p.memory,p.fc=0,p.cc=p.ec,p.dc=p.fc+h.U,p.Mc=p.cc,p.Nc=p.dc+w,p.Ib=Tr,Ja()}}else alert("todo:EmitYUV");O&&(p.Jb=ps,N&&In())}if(N&&!pf){for(h=0;256>h;++h)pb[h]=89858*(h-128)+Cl>>Al,xb[h]=-22014*(h-128)+Cl,mb[h]=-45773*(h-128),gb[h]=113618*(h-128)+Cl>>Al;for(h=co;h<Pd;++h)p=76283*(h-16)+Cl>>Al,bb[h-co]=Zn(p,255),yb[h-co]=Zn(p+8>>4,15);pf=1}return 1}function Qe(h){var p=h.ma,w=h.U,N=h.T;return e(!(1&h.ka)),0>=w||0>=N?0:(w=p.Ib(h,p),p.Jb!=null&&p.Jb(h,p,w),p.Dc+=w,1)}function gs(h){h.ma.memory=null}function ms(h,p,w,N){return re(h,8)!=47?0:(p[0]=re(h,14)+1,w[0]=re(h,14)+1,N[0]=re(h,1),re(h,3)!=0?0:!h.h)}function yn(h,p){if(4>h)return h+1;var w=h-2>>1;return(2+(1&h)<<w)+re(p,w)+1}function vn(h,p){return 120<p?p-120:1<=(w=((w=eb[p-1])>>4)*h+(8-(15&w)))?w:1;var w}function Qt(h,p,w){var N=Y(w),O=h[p+=255&N].g-8;return 0<O&&(ie(w,w.u+8),N=Y(w),p+=h[p].value,p+=N&(1<<O)-1),ie(w,w.u+h[p].g),h[p].value}function Ar(h,p,w){return w.g+=h.g,w.value+=h.value<<p>>>0,e(8>=w.g),h.g}function Lr(h,p,w){var N=h.xc;return e((p=N==0?0:h.vc[h.md*(w>>N)+(p>>N)])<h.Wb),h.Ya[p]}function mi(h,p,w,N){var O=h.ab,T=h.c*p,B=h.C;p=B+p;var U=w,H=N;for(N=h.Ta,w=h.Ua;0<O--;){var G=h.gc[O],oe=B,me=p,X=U,le=H,fe=(H=N,U=w,G.Ea);switch(e(oe<me),e(me<=G.nc),G.hc){case 2:sr(X,le,(me-oe)*fe,H,U);break;case 0:var ye=oe,ge=me,we=H,Ne=U,Ce=(Ue=G).Ea;ye==0&&(to(X,le,null,null,1,we,Ne),Ke(X,le+1,0,0,Ce-1,we,Ne+1),le+=Ce,Ne+=Ce,++ye);for(var Se=1<<Ue.b,Ye=Se-1,Fe=ve(Ce,Ue.b),pt=Ue.K,Ue=Ue.w+(ye>>Ue.b)*Fe;ye<ge;){var vt=pt,Nr=Ue,gt=1;for(da(X,le,we,Ne-Ce,1,we,Ne);gt<Ce;){var qe=(gt&~Ye)+Se;qe>Ce&&(qe=Ce),(0,no[vt[Nr++]>>8&15])(X,le+ +gt,we,Ne+gt-Ce,qe-gt,we,Ne+gt),gt=qe}le+=Ce,Ne+=Ce,++ye&Ye||(Ue+=Fe)}me!=G.nc&&n(H,U-fe,H,U+(me-oe-1)*fe,fe);break;case 1:for(fe=X,ge=le,Ce=(X=G.Ea)-(Ne=X&~(we=(le=1<<G.b)-1)),ye=ve(X,G.b),Se=G.K,G=G.w+(oe>>G.b)*ye;oe<me;){for(Ye=Se,Fe=G,pt=new Te,Ue=ge+Ne,vt=ge+X;ge<Ue;)Ie(Ye[Fe++],pt),so(pt,fe,ge,le,H,U),ge+=le,U+=le;ge<vt&&(Ie(Ye[Fe++],pt),so(pt,fe,ge,Ce,H,U),ge+=Ce,U+=Ce),++oe&we||(G+=ye)}break;case 3:if(X==H&&le==U&&0<G.b){for(ge=H,X=fe=U+(me-oe)*fe-(Ne=(me-oe)*ve(G.Ea,G.b)),le=H,we=U,ye=[],Ne=(Ce=Ne)-1;0<=Ne;--Ne)ye[Ne]=le[we+Ne];for(Ne=Ce-1;0<=Ne;--Ne)ge[X+Ne]=ye[Ne];yl(G,oe,me,H,fe,H,U)}else yl(G,oe,me,X,le,H,U)}U=N,H=w}H!=w&&n(N,w,U,H,T)}function Ws(h,p){var w=h.V,N=h.Ba+h.c*h.C,O=p-h.C;if(e(p<=h.l.o),e(16>=O),0<O){var T=h.l,B=h.Ta,U=h.Ua,H=T.width;if(mi(h,O,w,N),O=U=[U],e((w=h.C)<(N=p)),e(T.v<T.va),N>T.o&&(N=T.o),w<T.j){var G=T.j-w;w=T.j,O[0]+=G*H}if(w>=N?w=0:(O[0]+=4*T.v,T.ka=w-T.j,T.U=T.va-T.v,T.T=N-w,w=1),w){if(U=U[0],11>(w=h.ca).S){var oe=w.f.RGBA,me=(N=w.S,O=T.U,T=T.T,G=oe.eb,oe.A),X=T;for(oe=oe.fb+h.Ma*oe.A;0<X--;){var le=B,fe=U,ye=O,ge=G,we=oe;switch(N){case kl:io(le,fe,ye,ge,we);break;case Nl:Xs(le,fe,ye,ge,we);break;case jd:Xs(le,fe,ye,ge,we),oo(ge,we,0,ye,1,0);break;case sf:Li(le,fe,ye,ge,we);break;case jl:Xe(le,fe,ye,ge,we,1);break;case _d:Xe(le,fe,ye,ge,we,1),oo(ge,we,0,ye,1,0);break;case _l:Xe(le,fe,ye,ge,we,0);break;case Sl:Xe(le,fe,ye,ge,we,0),oo(ge,we,1,ye,1,0);break;case Nd:Js(le,fe,ye,ge,we);break;case Sd:Js(le,fe,ye,ge,we),Jh(ge,we,ye,1,0);break;case af:Ks(le,fe,ye,ge,we);break;default:e(0)}U+=H,oe+=me}h.Ma+=T}else alert("todo:EmitRescaledRowsYUVA");e(h.Ma<=w.height)}}h.C=p,e(h.C<=h.i)}function Fn(h){var p;if(0<h.ua)return 0;for(p=0;p<h.Wb;++p){var w=h.Ya[p].G,N=h.Ya[p].H;if(0<w[1][N[1]+0].g||0<w[2][N[2]+0].g||0<w[3][N[3]+0].g)return 0}return 1}function Jn(h,p,w,N,O,T){if(h.Z!=0){var B=h.qd,U=h.rd;for(e(ei[h.Z]!=null);p<w;++p)ei[h.Z](B,U,N,O,N,O,T),B=N,U=O,O+=T;h.qd=B,h.rd=U}}function Rn(h,p){var w=h.l.ma,N=w.Z==0||w.Z==1?h.l.j:h.C;if(N=h.C<N?N:h.C,e(p<=h.l.o),p>N){var O=h.l.width,T=w.ca,B=w.tb+O*N,U=h.V,H=h.Ba+h.c*N,G=h.gc;e(h.ab==1),e(G[0].hc==3),rs(G[0],N,p,U,H,T,B),Jn(w,N,p,T,B,O)}h.C=h.Ma=p}function Mn(h,p,w,N,O,T,B){var U=h.$/N,H=h.$%N,G=h.m,oe=h.s,me=w+h.$,X=me;O=w+N*O;var le=w+N*T,fe=280+oe.ua,ye=h.Pb?U:16777216,ge=0<oe.ua?oe.Wa:null,we=oe.wc,Ne=me<le?Lr(oe,H,U):null;e(h.C<T),e(le<=O);var Ce=!1;e:for(;;){for(;Ce||me<le;){var Se=0;if(U>=ye){var Ye=me-w;e((ye=h).Pb),ye.wd=ye.m,ye.xd=Ye,0<ye.s.ua&&je(ye.s.Wa,ye.s.vb),ye=U+rb}if(H&we||(Ne=Lr(oe,H,U)),e(Ne!=null),Ne.Qb&&(p[me]=Ne.qb,Ce=!0),!Ce)if(ce(G),Ne.jc){Se=G,Ye=p;var Fe=me,pt=Ne.pd[Y(Se)&Pi-1];e(Ne.jc),256>pt.g?(ie(Se,Se.u+pt.g),Ye[Fe]=pt.value,Se=0):(ie(Se,Se.u+pt.g-256),e(256<=pt.value),Se=pt.value),Se==0&&(Ce=!0)}else Se=Qt(Ne.G[0],Ne.H[0],G);if(G.h)break;if(Ce||256>Se){if(!Ce)if(Ne.nd)p[me]=(Ne.qb|Se<<8)>>>0;else{if(ce(G),Ce=Qt(Ne.G[1],Ne.H[1],G),ce(G),Ye=Qt(Ne.G[2],Ne.H[2],G),Fe=Qt(Ne.G[3],Ne.H[3],G),G.h)break;p[me]=(Fe<<24|Ce<<16|Se<<8|Ye)>>>0}if(Ce=!1,++me,++H>=N&&(H=0,++U,B!=null&&U<=T&&!(U%16)&&B(h,U),ge!=null))for(;X<me;)Se=p[X++],ge.X[(506832829*Se&4294967295)>>>ge.Mb]=Se}else if(280>Se){if(Se=yn(Se-256,G),Ye=Qt(Ne.G[4],Ne.H[4],G),ce(G),Ye=vn(N,Ye=yn(Ye,G)),G.h)break;if(me-w<Ye||O-me<Se)break e;for(Fe=0;Fe<Se;++Fe)p[me+Fe]=p[me+Fe-Ye];for(me+=Se,H+=Se;H>=N;)H-=N,++U,B!=null&&U<=T&&!(U%16)&&B(h,U);if(e(me<=O),H&we&&(Ne=Lr(oe,H,U)),ge!=null)for(;X<me;)Se=p[X++],ge.X[(506832829*Se&4294967295)>>>ge.Mb]=Se}else{if(!(Se<fe))break e;for(Ce=Se-280,e(ge!=null);X<me;)Se=p[X++],ge.X[(506832829*Se&4294967295)>>>ge.Mb]=Se;Se=me,e(!(Ce>>>(Ye=ge).Xa)),p[Se]=Ye.X[Ce],Ce=!0}Ce||e(G.h==ee(G))}if(h.Pb&&G.h&&me<O)e(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&je(h.s.vb,h.s.Wa);else{if(G.h)break e;B?.(h,U>T?T:U),h.a=0,h.$=me-w}return 1}return h.a=3,0}function wn(h){e(h!=null),h.vc=null,h.yc=null,h.Ya=null;var p=h.Wa;p!=null&&(p.X=null),h.vb=null,e(h!=null)}function xi(){var h=new it;return h==null?null:(h.a=0,h.xb=cf,It("Predictor","VP8LPredictors"),It("Predictor","VP8LPredictors_C"),It("PredictorAdd","VP8LPredictorsAdd"),It("PredictorAdd","VP8LPredictorsAdd_C"),sr=st,so=at,io=jt,Xs=mt,Js=ut,Ks=xt,Li=Yt,_.VP8LMapColor32b=ts,_.VP8LMapColor8b=ro,h)}function Kn(h,p,w,N,O){var T=1,B=[h],U=[p],H=N.m,G=N.s,oe=null,me=0;e:for(;;){if(w)for(;T&&re(H,1);){var X=B,le=U,fe=N,ye=1,ge=fe.m,we=fe.gc[fe.ab],Ne=re(ge,2);if(fe.Oc&1<<Ne)T=0;else{switch(fe.Oc|=1<<Ne,we.hc=Ne,we.Ea=X[0],we.nc=le[0],we.K=[null],++fe.ab,e(4>=fe.ab),Ne){case 0:case 1:we.b=re(ge,3)+2,ye=Kn(ve(we.Ea,we.b),ve(we.nc,we.b),0,fe,we.K),we.K=we.K[0];break;case 3:var Ce,Se=re(ge,8)+1,Ye=16<Se?0:4<Se?1:2<Se?2:3;if(X[0]=ve(we.Ea,Ye),we.b=Ye,Ce=ye=Kn(Se,1,0,fe,we.K)){var Fe,pt=Se,Ue=we,vt=1<<(8>>Ue.b),Nr=i(vt);if(Nr==null)Ce=0;else{var gt=Ue.K[0],qe=Ue.w;for(Nr[0]=Ue.K[0][0],Fe=1;Fe<1*pt;++Fe)Nr[Fe]=We(gt[qe+Fe],Nr[Fe-1]);for(;Fe<4*vt;++Fe)Nr[Fe]=0;Ue.K[0]=null,Ue.K[0]=Nr,Ce=1}}ye=Ce;break;case 2:break;default:e(0)}T=ye}}if(B=B[0],U=U[0],T&&re(H,1)&&!(T=1<=(me=re(H,4))&&11>=me)){N.a=3;break e}var Oe;if(Oe=T)t:{var ar,dt,wt,qt=N,Dr=B,Gr=U,er=me,Ir=w,Xr=qt.m,jr=qt.s,Nt=[null],Ct=1,tr=0,Pt=tb[er];r:for(;;){if(Ir&&re(Xr,1)){var Fr=re(Xr,3)+2,zn=ve(Dr,Fr),or=ve(Gr,Fr),Qr=zn*or;if(!Kn(zn,or,0,qt,Nt))break r;for(Nt=Nt[0],jr.xc=Fr,ar=0;ar<Qr;++ar){var Mt=Nt[ar]>>8&65535;Nt[ar]=Mt,Mt>=Ct&&(Ct=Mt+1)}}if(Xr.h)break r;for(dt=0;5>dt;++dt){var _r=of[dt];!dt&&0<er&&(_r+=1<<er),tr<_r&&(tr=_r)}var dn=a(Ct*Pt,R),Jr=Ct,un=a(Jr,V);if(un==null)var hn=null;else e(65536>=Jr),hn=un;var en=i(tr);if(hn==null||en==null||dn==null){qt.a=1;break r}var fn=dn;for(ar=wt=0;ar<Ct;++ar){var zt=hn[ar],pn=zt.G,Un=zt.H,Oi=0,Ls=1,Rr=0;for(dt=0;5>dt;++dt){_r=of[dt],pn[dt]=fn,Un[dt]=wt,!dt&&0<er&&(_r+=1<<er);s:{var Ll,Ld=_r,El=qt,uo=en,kb=fn,Nb=wt,Ed=0,ti=El.m,jb=re(ti,1);if(s(uo,0,0,Ld),jb){var _b=re(ti,1)+1,Sb=re(ti,1),xf=re(ti,Sb==0?1:8);uo[xf]=1,_b==2&&(uo[xf=re(ti,8)]=1);var Ol=1}else{var bf=i(19),yf=re(ti,4)+4;if(19<yf){El.a=3;var Dl=0;break s}for(Ll=0;Ll<yf;++Ll)bf[Q1[Ll]]=re(ti,3);var Od=void 0,ho=void 0,vf=El,Ab=bf,Fl=Ld,wf=uo,Dd=0,ri=vf.m,kf=8,Nf=a(128,R);n:for(;C(Nf,0,7,Ab,19);){if(re(ri,1)){var Cb=2+2*re(ri,3);if((Od=2+re(ri,Cb))>Fl)break n}else Od=Fl;for(ho=0;ho<Fl&&Od--;){ce(ri);var jf=Nf[0+(127&Y(ri))];ie(ri,ri.u+jf.g);var ha=jf.value;if(16>ha)wf[ho++]=ha,ha!=0&&(kf=ha);else{var Pb=ha==16,_f=ha-16,Lb=K1[_f],Sf=re(ri,J1[_f])+Lb;if(ho+Sf>Fl)break n;for(var Eb=Pb?kf:0;0<Sf--;)wf[ho++]=Eb}}Dd=1;break n}Dd||(vf.a=3),Ol=Dd}(Ol=Ol&&!ti.h)&&(Ed=C(kb,Nb,8,uo,Ld)),Ol&&Ed!=0?Dl=Ed:(El.a=3,Dl=0)}if(Dl==0)break r;if(Ls&&Z1[dt]==1&&(Ls=fn[wt].g==0),Oi+=fn[wt].g,wt+=Dl,3>=dt){var fo,Fd=en[0];for(fo=1;fo<_r;++fo)en[fo]>Fd&&(Fd=en[fo]);Rr+=Fd}}if(zt.nd=Ls,zt.Qb=0,Ls&&(zt.qb=(pn[3][Un[3]+0].value<<24|pn[1][Un[1]+0].value<<16|pn[2][Un[2]+0].value)>>>0,Oi==0&&256>pn[0][Un[0]+0].value&&(zt.Qb=1,zt.qb+=pn[0][Un[0]+0].value<<8)),zt.jc=!zt.Qb&&6>Rr,zt.jc){var Rl,Es=zt;for(Rl=0;Rl<Pi;++Rl){var ni=Rl,si=Es.pd[ni],Ml=Es.G[0][Es.H[0]+ni];256<=Ml.value?(si.g=Ml.g+256,si.value=Ml.value):(si.g=0,si.value=0,ni>>=Ar(Ml,8,si),ni>>=Ar(Es.G[1][Es.H[1]+ni],16,si),ni>>=Ar(Es.G[2][Es.H[2]+ni],0,si),Ar(Es.G[3][Es.H[3]+ni],24,si))}}}jr.vc=Nt,jr.Wb=Ct,jr.Ya=hn,jr.yc=dn,Oe=1;break t}Oe=0}if(!(T=Oe)){N.a=3;break e}if(0<me){if(G.ua=1<<me,!W(G.Wa,me)){N.a=1,T=0;break e}}else G.ua=0;var Rd=N,Af=B,Ob=U,Md=Rd.s,Td=Md.xc;if(Rd.c=Af,Rd.i=Ob,Md.md=ve(Af,Td),Md.wc=Td==0?-1:(1<<Td)-1,w){N.xb=cb;break e}if((oe=i(B*U))==null){N.a=1,T=0;break e}T=(T=Mn(N,oe,0,B,U,U,null))&&!H.h;break e}return T?(O!=null?O[0]=oe:(e(oe==null),e(w)),N.$=0,w||wn(G)):wn(G),T}function bi(h,p){var w=h.c*h.i,N=w+p+16*p;return e(h.c<=p),h.V=i(N),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+w+p,1)}function ea(h,p){var w=h.C,N=p-w,O=h.V,T=h.Ba+h.c*w;for(e(p<=h.l.o);0<N;){var B=16<N?16:N,U=h.l.ma,H=h.l.width,G=H*B,oe=U.ca,me=U.tb+H*w,X=h.Ta,le=h.Ua;mi(h,B,O,T),Zh(X,le,oe,me,G),Jn(U,w,w+B,oe,me,H),N-=B,O+=B*h.c,w+=B}e(w==p),h.C=h.Ma=p}function ta(){this.ub=this.yd=this.td=this.Rb=0}function ra(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ad(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Ba(){this.Yb=(function(){var h=[];return(function p(w,N,O){for(var T=O[N],B=0;B<T&&(w.push(O.length>N+1?[]:0),!(O.length<N+1));B++)p(w[B],N+1,O)})(h,0,[3,11]),h})()}function tl(){this.jb=i(3),this.Wc=o([4,8],Ba),this.Xc=o([4,17],Ba)}function rl(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function kn(){this.ld=this.La=this.dd=this.tc=0}function za(){this.Na=this.la=0}function nl(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ua(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function sl(){this.uc=this.M=this.Nb=0,this.wa=Array(new kn),this.Y=0,this.ya=Array(new Ua),this.aa=0,this.l=new na}function il(){this.y=i(16),this.f=i(8),this.ea=i(8)}function al(){this.cb=this.a=0,this.sc="",this.m=new P,this.Od=new ta,this.Kc=new ra,this.ed=new rl,this.Qa=new ad,this.Ic=this.$c=this.Aa=0,this.D=new sl,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,P),this.ia=0,this.pb=a(4,nl),this.Pa=new tl,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new il),this.Hd=0,this.rb=Array(new za),this.sb=0,this.wa=Array(new kn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ua),this.L=this.aa=0,this.gd=o([4,2],kn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Zn(h,p){return 0>h?0:h>p?p:h}function na(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function od(){var h=new al;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,lo||(lo=sa)),h}function mr(h,p,w){return h.a==0&&(h.a=p,h.sc=w,h.cb=0),0}function ol(h,p,w){return 3<=w&&h[p+0]==157&&h[p+1]==1&&h[p+2]==42}function Qn(h,p){if(h==null)return 0;if(h.a=0,h.sc="OK",p==null)return mr(h,2,"null VP8Io passed to VP8GetHeaders()");var w=p.data,N=p.w,O=p.ha;if(4>O)return mr(h,7,"Truncated header.");var T=w[N+0]|w[N+1]<<8|w[N+2]<<16,B=h.Od;if(B.Rb=!(1&T),B.td=T>>1&7,B.yd=T>>4&1,B.ub=T>>5,3<B.td)return mr(h,3,"Incorrect keyframe parameters.");if(!B.yd)return mr(h,4,"Frame not displayable.");N+=3,O-=3;var U=h.Kc;if(B.Rb){if(7>O)return mr(h,7,"cannot parse picture header");if(!ol(w,N,O))return mr(h,3,"Bad code word");U.c=16383&(w[N+4]<<8|w[N+3]),U.Td=w[N+4]>>6,U.i=16383&(w[N+6]<<8|w[N+5]),U.Ud=w[N+6]>>6,N+=7,O-=7,h.za=U.c+15>>4,h.Ub=U.i+15>>4,p.width=U.c,p.height=U.i,p.Da=0,p.j=0,p.v=0,p.va=p.width,p.o=p.height,p.da=0,p.ib=p.width,p.hb=p.height,p.U=p.width,p.T=p.height,s((T=h.Pa).jb,0,255,T.jb.length),e((T=h.Qa)!=null),T.Cb=0,T.Bb=0,T.Fb=1,s(T.Zb,0,0,T.Zb.length),s(T.Lb,0,0,T.Lb)}if(B.ub>O)return mr(h,7,"bad partition length");te(T=h.m,w,N,B.ub),N+=B.ub,O-=B.ub,B.Rb&&(U.Ld=he(T),U.Kd=he(T)),U=h.Qa;var H,G=h.Pa;if(e(T!=null),e(U!=null),U.Cb=he(T),U.Cb){if(U.Bb=he(T),he(T)){for(U.Fb=he(T),H=0;4>H;++H)U.Zb[H]=he(T)?se(T,7):0;for(H=0;4>H;++H)U.Lb[H]=he(T)?se(T,6):0}if(U.Bb)for(H=0;3>H;++H)G.jb[H]=he(T)?ne(T,8):255}else U.Bb=0;if(T.Ka)return mr(h,3,"cannot parse segment header");if((U=h.ed).zd=he(T),U.Tb=ne(T,6),U.wb=ne(T,3),U.Pc=he(T),U.Pc&&he(T)){for(G=0;4>G;++G)he(T)&&(U.vd[G]=se(T,6));for(G=0;4>G;++G)he(T)&&(U.od[G]=se(T,6))}if(h.L=U.Tb==0?0:U.zd?1:2,T.Ka)return mr(h,3,"cannot parse filter header");var oe=O;if(O=H=N,N=H+oe,U=oe,h.Xb=(1<<ne(h.m,2))-1,oe<3*(G=h.Xb))w=7;else{for(H+=3*G,U-=3*G,oe=0;oe<G;++oe){var me=w[O+0]|w[O+1]<<8|w[O+2]<<16;me>U&&(me=U),te(h.Jc[+oe],w,H,me),H+=me,U-=me,O+=3}te(h.Jc[+G],w,H,U),w=H<N?0:5}if(w!=0)return mr(h,w,"cannot parse partitions");for(w=ne(H=h.m,7),O=he(H)?se(H,4):0,N=he(H)?se(H,4):0,U=he(H)?se(H,4):0,G=he(H)?se(H,4):0,H=he(H)?se(H,4):0,oe=h.Qa,me=0;4>me;++me){if(oe.Cb){var X=oe.Zb[me];oe.Fb||(X+=w)}else{if(0<me){h.pb[me]=h.pb[0];continue}X=w}var le=h.pb[me];le.Sc[0]=Ad[Zn(X+O,127)],le.Sc[1]=Cd[Zn(X+0,127)],le.Eb[0]=2*Ad[Zn(X+N,127)],le.Eb[1]=101581*Cd[Zn(X+U,127)]>>16,8>le.Eb[1]&&(le.Eb[1]=8),le.Qc[0]=Ad[Zn(X+G,117)],le.Qc[1]=Cd[Zn(X+H,127)],le.lc=X+H}if(!B.Rb)return mr(h,4,"Not a key frame.");for(he(T),B=h.Pa,w=0;4>w;++w){for(O=0;8>O;++O)for(N=0;3>N;++N)for(U=0;11>U;++U)G=xe(T,ob[w][O][N][U])?ne(T,8):ib[w][O][N][U],B.Wc[w][O].Yb[N][U]=G;for(O=0;17>O;++O)B.Xc[w][O]=B.Wc[w][lb[O]]}return h.kc=he(T),h.kc&&(h.Bd=ne(T,8)),h.cb=1}function sa(h,p,w,N,O,T,B){var U=p[O].Yb[w];for(w=0;16>O;++O){if(!xe(h,U[w+0]))return O;for(;!xe(h,U[w+1]);)if(U=p[++O].Yb[0],w=0,O==16)return 16;var H=p[O+1].Yb;if(xe(h,U[w+2])){var G=h,oe=0;if(xe(G,(X=U)[(me=w)+3]))if(xe(G,X[me+6])){for(U=0,me=2*(oe=xe(G,X[me+8]))+(X=xe(G,X[me+9+oe])),oe=0,X=nb[me];X[U];++U)oe+=oe+xe(G,X[U]);oe+=3+(8<<me)}else xe(G,X[me+7])?(oe=7+2*xe(G,165),oe+=xe(G,145)):oe=5+xe(G,159);else oe=xe(G,X[me+4])?3+xe(G,X[me+5]):2;U=H[2]}else oe=1,U=H[1];H=B+sb[O],0>(G=h).b&&de(G);var me,X=G.b,le=(me=G.Ca>>1)-(G.I>>X)>>31;--G.b,G.Ca+=le,G.Ca|=1,G.I-=(me+1&le)<<X,T[H]=((oe^le)-le)*N[(0<O)+0]}return 16}function ll(h){var p=h.rb[h.sb-1];p.la=0,p.Na=0,s(h.zc,0,0,h.zc.length),h.ja=0}function Nn(h,p,w,N,O){O=h[p+w+32*N]+(O>>3),h[p+w+32*N]=-256&O?0>O?0:255:O}function vr(h,p,w,N,O,T){Nn(h,p,0,w,N+O),Nn(h,p,1,w,N+T),Nn(h,p,2,w,N-T),Nn(h,p,3,w,N-O)}function xs(h){return(20091*h>>16)+h}function cl(h,p,w,N){var O,T=0,B=i(16);for(O=0;4>O;++O){var U=h[p+0]+h[p+8],H=h[p+0]-h[p+8],G=(35468*h[p+4]>>16)-xs(h[p+12]),oe=xs(h[p+4])+(35468*h[p+12]>>16);B[T+0]=U+oe,B[T+1]=H+G,B[T+2]=H-G,B[T+3]=U-oe,T+=4,p++}for(O=T=0;4>O;++O)U=(h=B[T+0]+4)+B[T+8],H=h-B[T+8],G=(35468*B[T+4]>>16)-xs(B[T+12]),Nn(w,N,0,0,U+(oe=xs(B[T+4])+(35468*B[T+12]>>16))),Nn(w,N,1,0,H+G),Nn(w,N,2,0,H-G),Nn(w,N,3,0,U-oe),T++,N+=32}function ld(h,p,w,N){var O=h[p+0]+4,T=35468*h[p+4]>>16,B=xs(h[p+4]),U=35468*h[p+1]>>16;vr(w,N,0,O+B,h=xs(h[p+1]),U),vr(w,N,1,O+T,h,U),vr(w,N,2,O-T,h,U),vr(w,N,3,O-B,h,U)}function cd(h,p,w,N,O){cl(h,p,w,N),O&&cl(h,p+16,w,N+4)}function es(h,p,w,N){Ei(h,p+0,w,N,1),Ei(h,p+32,w,N+128,1)}function dl(h,p,w,N){var O;for(h=h[p+0]+4,O=0;4>O;++O)for(p=0;4>p;++p)Nn(w,N,p,O,h)}function ul(h,p,w,N){h[p+0]&&At(h,p+0,w,N),h[p+16]&&At(h,p+16,w,N+4),h[p+32]&&At(h,p+32,w,N+128),h[p+48]&&At(h,p+48,w,N+128+4)}function ia(h,p,w,N){var O,T=i(16);for(O=0;4>O;++O){var B=h[p+0+O]+h[p+12+O],U=h[p+4+O]+h[p+8+O],H=h[p+4+O]-h[p+8+O],G=h[p+0+O]-h[p+12+O];T[0+O]=B+U,T[8+O]=B-U,T[4+O]=G+H,T[12+O]=G-H}for(O=0;4>O;++O)B=(h=T[0+4*O]+3)+T[3+4*O],U=T[1+4*O]+T[2+4*O],H=T[1+4*O]-T[2+4*O],G=h-T[3+4*O],w[N+0]=B+U>>3,w[N+16]=G+H>>3,w[N+32]=B-U>>3,w[N+48]=G-H>>3,N+=64}function yi(h,p,w){var N,O=p-32,T=cn,B=255-h[O-1];for(N=0;N<w;++N){var U,H=T,G=B+h[p-1];for(U=0;U<w;++U)h[p+U]=H[G+h[O+U]];p+=32}}function dd(h,p){yi(h,p,4)}function ud(h,p){yi(h,p,8)}function hd(h,p){yi(h,p,16)}function qa(h,p){var w;for(w=0;16>w;++w)n(h,p+32*w,h,p-32,16)}function hl(h,p){var w;for(w=16;0<w;--w)s(h,p,h[p-1],16),p+=32}function Tn(h,p,w){var N;for(N=0;16>N;++N)s(p,w+32*N,h,16)}function fd(h,p){var w,N=16;for(w=0;16>w;++w)N+=h[p-1+32*w]+h[p+w-32];Tn(N>>5,h,p)}function vi(h,p){var w,N=8;for(w=0;16>w;++w)N+=h[p-1+32*w];Tn(N>>4,h,p)}function Wa(h,p){var w,N=8;for(w=0;16>w;++w)N+=h[p+w-32];Tn(N>>4,h,p)}function pd(h,p){Tn(128,h,p)}function ot(h,p,w){return h+2*p+w+2>>2}function gd(h,p){var w,N=p-32;for(N=new Uint8Array([ot(h[N-1],h[N+0],h[N+1]),ot(h[N+0],h[N+1],h[N+2]),ot(h[N+1],h[N+2],h[N+3]),ot(h[N+2],h[N+3],h[N+4])]),w=0;4>w;++w)n(h,p+32*w,N,0,N.length)}function md(h,p){var w=h[p-1],N=h[p-1+32],O=h[p-1+64],T=h[p-1+96];pe(h,p+0,16843009*ot(h[p-1-32],w,N)),pe(h,p+32,16843009*ot(w,N,O)),pe(h,p+64,16843009*ot(N,O,T)),pe(h,p+96,16843009*ot(O,T,T))}function xd(h,p){var w,N=4;for(w=0;4>w;++w)N+=h[p+w-32]+h[p-1+32*w];for(N>>=3,w=0;4>w;++w)s(h,p+32*w,N,4)}function bs(h,p){var w=h[p-1+0],N=h[p-1+32],O=h[p-1+64],T=h[p-1-32],B=h[p+0-32],U=h[p+1-32],H=h[p+2-32],G=h[p+3-32];h[p+0+96]=ot(N,O,h[p-1+96]),h[p+1+96]=h[p+0+64]=ot(w,N,O),h[p+2+96]=h[p+1+64]=h[p+0+32]=ot(T,w,N),h[p+3+96]=h[p+2+64]=h[p+1+32]=h[p+0+0]=ot(B,T,w),h[p+3+64]=h[p+2+32]=h[p+1+0]=ot(U,B,T),h[p+3+32]=h[p+2+0]=ot(H,U,B),h[p+3+0]=ot(G,H,U)}function ys(h,p){var w=h[p+1-32],N=h[p+2-32],O=h[p+3-32],T=h[p+4-32],B=h[p+5-32],U=h[p+6-32],H=h[p+7-32];h[p+0+0]=ot(h[p+0-32],w,N),h[p+1+0]=h[p+0+32]=ot(w,N,O),h[p+2+0]=h[p+1+32]=h[p+0+64]=ot(N,O,T),h[p+3+0]=h[p+2+32]=h[p+1+64]=h[p+0+96]=ot(O,T,B),h[p+3+32]=h[p+2+64]=h[p+1+96]=ot(T,B,U),h[p+3+64]=h[p+2+96]=ot(B,U,H),h[p+3+96]=ot(U,H,H)}function bd(h,p){var w=h[p-1+0],N=h[p-1+32],O=h[p-1+64],T=h[p-1-32],B=h[p+0-32],U=h[p+1-32],H=h[p+2-32],G=h[p+3-32];h[p+0+0]=h[p+1+64]=T+B+1>>1,h[p+1+0]=h[p+2+64]=B+U+1>>1,h[p+2+0]=h[p+3+64]=U+H+1>>1,h[p+3+0]=H+G+1>>1,h[p+0+96]=ot(O,N,w),h[p+0+64]=ot(N,w,T),h[p+0+32]=h[p+1+96]=ot(w,T,B),h[p+1+32]=h[p+2+96]=ot(T,B,U),h[p+2+32]=h[p+3+96]=ot(B,U,H),h[p+3+32]=ot(U,H,G)}function yd(h,p){var w=h[p+0-32],N=h[p+1-32],O=h[p+2-32],T=h[p+3-32],B=h[p+4-32],U=h[p+5-32],H=h[p+6-32],G=h[p+7-32];h[p+0+0]=w+N+1>>1,h[p+1+0]=h[p+0+64]=N+O+1>>1,h[p+2+0]=h[p+1+64]=O+T+1>>1,h[p+3+0]=h[p+2+64]=T+B+1>>1,h[p+0+32]=ot(w,N,O),h[p+1+32]=h[p+0+96]=ot(N,O,T),h[p+2+32]=h[p+1+96]=ot(O,T,B),h[p+3+32]=h[p+2+96]=ot(T,B,U),h[p+3+64]=ot(B,U,H),h[p+3+96]=ot(U,H,G)}function aa(h,p){var w=h[p-1+0],N=h[p-1+32],O=h[p-1+64],T=h[p-1+96];h[p+0+0]=w+N+1>>1,h[p+2+0]=h[p+0+32]=N+O+1>>1,h[p+2+32]=h[p+0+64]=O+T+1>>1,h[p+1+0]=ot(w,N,O),h[p+3+0]=h[p+1+32]=ot(N,O,T),h[p+3+32]=h[p+1+64]=ot(O,T,T),h[p+3+64]=h[p+2+64]=h[p+0+96]=h[p+1+96]=h[p+2+96]=h[p+3+96]=T}function Ha(h,p){var w=h[p-1+0],N=h[p-1+32],O=h[p-1+64],T=h[p-1+96],B=h[p-1-32],U=h[p+0-32],H=h[p+1-32],G=h[p+2-32];h[p+0+0]=h[p+2+32]=w+B+1>>1,h[p+0+32]=h[p+2+64]=N+w+1>>1,h[p+0+64]=h[p+2+96]=O+N+1>>1,h[p+0+96]=T+O+1>>1,h[p+3+0]=ot(U,H,G),h[p+2+0]=ot(B,U,H),h[p+1+0]=h[p+3+32]=ot(w,B,U),h[p+1+32]=h[p+3+64]=ot(N,w,B),h[p+1+64]=h[p+3+96]=ot(O,N,w),h[p+1+96]=ot(T,O,N)}function wi(h,p){var w;for(w=0;8>w;++w)n(h,p+32*w,h,p-32,8)}function vd(h,p){var w;for(w=0;8>w;++w)s(h,p,h[p-1],8),p+=32}function vs(h,p,w){var N;for(N=0;8>N;++N)s(p,w+32*N,h,8)}function wd(h,p){var w,N=8;for(w=0;8>w;++w)N+=h[p+w-32]+h[p-1+32*w];vs(N>>4,h,p)}function Va(h,p){var w,N=4;for(w=0;8>w;++w)N+=h[p+w-32];vs(N>>3,h,p)}function $a(h,p){var w,N=4;for(w=0;8>w;++w)N+=h[p-1+32*w];vs(N>>3,h,p)}function fl(h,p){vs(128,h,p)}function ws(h,p,w){var N=h[p-w],O=h[p+0],T=3*(O-N)+kd[1020+h[p-2*w]-h[p+w]],B=wl[112+(T+4>>3)];h[p-w]=cn[255+N+wl[112+(T+3>>3)]],h[p+0]=cn[255+O-B]}function Ya(h,p,w,N){var O=h[p+0],T=h[p+w];return Sn[255+h[p-2*w]-h[p-w]]>N||Sn[255+T-O]>N}function oa(h,p,w,N){return 4*Sn[255+h[p-w]-h[p+0]]+Sn[255+h[p-2*w]-h[p+w]]<=N}function Ga(h,p,w,N,O){var T=h[p-3*w],B=h[p-2*w],U=h[p-w],H=h[p+0],G=h[p+w],oe=h[p+2*w],me=h[p+3*w];return 4*Sn[255+U-H]+Sn[255+B-G]>N?0:Sn[255+h[p-4*w]-T]<=O&&Sn[255+T-B]<=O&&Sn[255+B-U]<=O&&Sn[255+me-oe]<=O&&Sn[255+oe-G]<=O&&Sn[255+G-H]<=O}function ki(h,p,w,N){var O=2*N+1;for(N=0;16>N;++N)oa(h,p+N,w,O)&&ws(h,p+N,w)}function Xa(h,p,w,N){var O=2*N+1;for(N=0;16>N;++N)oa(h,p+N*w,1,O)&&ws(h,p+N*w,1)}function pl(h,p,w,N){var O;for(O=3;0<O;--O)ki(h,p+=4*w,w,N)}function gl(h,p,w,N){var O;for(O=3;0<O;--O)Xa(h,p+=4,w,N)}function ks(h,p,w,N,O,T,B,U){for(T=2*T+1;0<O--;){if(Ga(h,p,w,T,B))if(Ya(h,p,w,U))ws(h,p,w);else{var H=h,G=p,oe=w,me=H[G-2*oe],X=H[G-oe],le=H[G+0],fe=H[G+oe],ye=H[G+2*oe],ge=27*(Ne=kd[1020+3*(le-X)+kd[1020+me-fe]])+63>>7,we=18*Ne+63>>7,Ne=9*Ne+63>>7;H[G-3*oe]=cn[255+H[G-3*oe]+Ne],H[G-2*oe]=cn[255+me+we],H[G-oe]=cn[255+X+ge],H[G+0]=cn[255+le-ge],H[G+oe]=cn[255+fe-we],H[G+2*oe]=cn[255+ye-Ne]}p+=N}}function Ns(h,p,w,N,O,T,B,U){for(T=2*T+1;0<O--;){if(Ga(h,p,w,T,B))if(Ya(h,p,w,U))ws(h,p,w);else{var H=h,G=p,oe=w,me=H[G-oe],X=H[G+0],le=H[G+oe],fe=wl[112+(4+(ye=3*(X-me))>>3)],ye=wl[112+(ye+3>>3)],ge=fe+1>>1;H[G-2*oe]=cn[255+H[G-2*oe]+ge],H[G-oe]=cn[255+me+ye],H[G+0]=cn[255+X-fe],H[G+oe]=cn[255+le-ge]}p+=N}}function ml(h,p,w,N,O,T){ks(h,p,w,1,16,N,O,T)}function Ni(h,p,w,N,O,T){ks(h,p,1,w,16,N,O,T)}function xl(h,p,w,N,O,T){var B;for(B=3;0<B;--B)Ns(h,p+=4*w,w,1,16,N,O,T)}function b(h,p,w,N,O,T){var B;for(B=3;0<B;--B)Ns(h,p+=4,1,w,16,N,O,T)}function E(h,p,w,N,O,T,B,U){ks(h,p,O,1,8,T,B,U),ks(w,N,O,1,8,T,B,U)}function J(h,p,w,N,O,T,B,U){ks(h,p,1,O,8,T,B,U),ks(w,N,1,O,8,T,B,U)}function ae(h,p,w,N,O,T,B,U){Ns(h,p+4*O,O,1,8,T,B,U),Ns(w,N+4*O,O,1,8,T,B,U)}function ue(h,p,w,N,O,T,B,U){Ns(h,p+4,1,O,8,T,B,U),Ns(w,N+4,1,O,8,T,B,U)}function ke(){this.ba=new bt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new St,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function _e(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Be(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ve(){this.ua=0,this.Wa=new Je,this.vb=new Je,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new V,this.yc=new R}function it(){this.xb=this.a=0,this.l=new na,this.ca=new bt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new I,this.Pb=0,this.wd=new I,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ve,this.ab=0,this.gc=a(4,Be),this.Oc=0}function ht(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new na,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function kt(h,p,w,N,O,T,B){for(h=h==null?0:h[p+0],p=0;p<B;++p)O[T+p]=h+w[N+p]&255,h=O[T+p]}function Zt(h,p,w,N,O,T,B){var U;if(h==null)kt(null,null,w,N,O,T,B);else for(U=0;U<B;++U)O[T+U]=h[p+U]+w[N+U]&255}function xr(h,p,w,N,O,T,B){if(h==null)kt(null,null,w,N,O,T,B);else{var U,H=h[p+0],G=H,oe=H;for(U=0;U<B;++U)G=oe+(H=h[p+U])-G,oe=w[N+U]+(-256&G?0>G?0:255:G)&255,G=H,O[T+U]=oe}}function Bt(h,p,w,N){var O=p.width,T=p.o;if(e(h!=null&&p!=null),0>w||0>=N||w+N>T)return null;if(!h.Cc){if(h.ga==null){var B;if(h.ga=new ht,(B=h.ga==null)||(B=p.width*p.o,e(h.Gb.length==0),h.Gb=i(B),h.Uc=0,h.Gb==null?B=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,B=1),B=!B),!B){B=h.ga;var U=h.Fa,H=h.P,G=h.qc,oe=h.mb,me=h.nb,X=H+1,le=G-1,fe=B.l;if(e(U!=null&&oe!=null&&p!=null),ei[0]=null,ei[1]=kt,ei[2]=Zt,ei[3]=xr,B.ca=oe,B.tb=me,B.c=p.width,B.i=p.height,e(0<B.c&&0<B.i),1>=G)p=0;else if(B.$a=3&U[H+0],B.Z=U[H+0]>>2&3,B.Lc=U[H+0]>>4&3,H=U[H+0]>>6&3,0>B.$a||1<B.$a||4<=B.Z||1<B.Lc||H)p=0;else if(fe.put=Qe,fe.ac=Xn,fe.bc=gs,fe.ma=B,fe.width=p.width,fe.height=p.height,fe.Da=p.Da,fe.v=p.v,fe.va=p.va,fe.j=p.j,fe.o=p.o,B.$a)e:{e(B.$a==1),p=xi();t:for(;;){if(p==null){p=0;break e}if(e(B!=null),B.mc=p,p.c=B.c,p.i=B.i,p.l=B.l,p.l.ma=B,p.l.width=B.c,p.l.height=B.i,p.a=0,K(p.m,U,X,le),!Kn(B.c,B.i,1,p,null)||(p.ab==1&&p.gc[0].hc==3&&Fn(p.s)?(B.ic=1,U=p.c*p.i,p.Ta=null,p.Ua=0,p.V=i(U),p.Ba=0,p.V==null?(p.a=1,p=0):p=1):(B.ic=0,p=bi(p,B.c)),!p))break t;p=1;break e}B.mc=null,p=0}else p=le>=B.c*B.i;B=!p}if(B)return null;h.ga.Lc!=1?h.Ga=0:N=T-w}e(h.ga!=null),e(w+N<=T);e:{if(p=(U=h.ga).c,T=U.l.o,U.$a==0){if(X=h.rc,le=h.Vc,fe=h.Fa,H=h.P+1+w*p,G=h.mb,oe=h.nb+w*p,e(H<=h.P+h.qc),U.Z!=0)for(e(ei[U.Z]!=null),B=0;B<N;++B)ei[U.Z](X,le,fe,H,G,oe,p),X=G,le=oe,oe+=p,H+=p;else for(B=0;B<N;++B)n(G,oe,fe,H,p),X=G,le=oe,oe+=p,H+=p;h.rc=X,h.Vc=le}else{if(e(U.mc!=null),p=w+N,e((B=U.mc)!=null),e(p<=B.i),B.C>=p)p=1;else if(U.ic||In(),U.ic){U=B.V,X=B.Ba,le=B.c;var ye=B.i,ge=(fe=1,H=B.$/le,G=B.$%le,oe=B.m,me=B.s,B.$),we=le*ye,Ne=le*p,Ce=me.wc,Se=ge<Ne?Lr(me,G,H):null;e(ge<=we),e(p<=ye),e(Fn(me));t:for(;;){for(;!oe.h&&ge<Ne;){if(G&Ce||(Se=Lr(me,G,H)),e(Se!=null),ce(oe),256>(ye=Qt(Se.G[0],Se.H[0],oe)))U[X+ge]=ye,++ge,++G>=le&&(G=0,++H<=p&&!(H%16)&&Rn(B,H));else{if(!(280>ye)){fe=0;break t}ye=yn(ye-256,oe);var Ye,Fe=Qt(Se.G[4],Se.H[4],oe);if(ce(oe),!(ge>=(Fe=vn(le,Fe=yn(Fe,oe)))&&we-ge>=ye)){fe=0;break t}for(Ye=0;Ye<ye;++Ye)U[X+ge+Ye]=U[X+ge+Ye-Fe];for(ge+=ye,G+=ye;G>=le;)G-=le,++H<=p&&!(H%16)&&Rn(B,H);ge<Ne&&G&Ce&&(Se=Lr(me,G,H))}e(oe.h==ee(oe))}Rn(B,H>p?p:H);break t}!fe||oe.h&&ge<we?(fe=0,B.a=oe.h?5:3):B.$=ge,p=fe}else p=Mn(B,B.V,B.Ba,B.c,B.i,p,ea);if(!p){N=0;break e}}w+N>=T&&(h.Cc=1),N=1}if(!N)return null;if(h.Cc&&((N=h.ga)!=null&&(N.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+w*O}function wr(h,p,w,N,O,T){for(;0<O--;){var B,U=h,H=p+(w?1:0),G=h,oe=p+(w?0:3);for(B=0;B<N;++B){var me=G[oe+4*B];me!=255&&(me*=32897,U[H+4*B+0]=U[H+4*B+0]*me>>23,U[H+4*B+1]=U[H+4*B+1]*me>>23,U[H+4*B+2]=U[H+4*B+2]*me>>23)}p+=T}}function br(h,p,w,N,O){for(;0<N--;){var T;for(T=0;T<w;++T){var B=h[p+2*T+0],U=15&(G=h[p+2*T+1]),H=4369*U,G=(240&G|G>>4)*H>>16;h[p+2*T+0]=(240&B|B>>4)*H>>16&240|(15&B|B<<4)*H>>16>>4&15,h[p+2*T+1]=240&G|U}p+=O}}function Er(h,p,w,N,O,T,B,U){var H,G,oe=255;for(G=0;G<O;++G){for(H=0;H<N;++H){var me=h[p+H];T[B+4*H]=me,oe&=me}p+=w,B+=U}return oe!=255}function js(h,p,w,N,O){var T;for(T=0;T<O;++T)w[N+T]=h[p+T]>>8}function In(){oo=wr,Jh=br,Kh=Er,Zh=js}function _s(h,p,w){_[h]=function(N,O,T,B,U,H,G,oe,me,X,le,fe,ye,ge,we,Ne,Ce){var Se,Ye=Ce-1>>1,Fe=U[H+0]|G[oe+0]<<16,pt=me[X+0]|le[fe+0]<<16;e(N!=null);var Ue=3*Fe+pt+131074>>2;for(p(N[O+0],255&Ue,Ue>>16,ye,ge),T!=null&&(Ue=3*pt+Fe+131074>>2,p(T[B+0],255&Ue,Ue>>16,we,Ne)),Se=1;Se<=Ye;++Se){var vt=U[H+Se]|G[oe+Se]<<16,Nr=me[X+Se]|le[fe+Se]<<16,gt=Fe+vt+pt+Nr+524296,qe=gt+2*(vt+pt)>>3;Ue=qe+Fe>>1,Fe=(gt=gt+2*(Fe+Nr)>>3)+vt>>1,p(N[O+2*Se-1],255&Ue,Ue>>16,ye,ge+(2*Se-1)*w),p(N[O+2*Se-0],255&Fe,Fe>>16,ye,ge+(2*Se-0)*w),T!=null&&(Ue=gt+pt>>1,Fe=qe+Nr>>1,p(T[B+2*Se-1],255&Ue,Ue>>16,we,Ne+(2*Se-1)*w),p(T[B+2*Se+0],255&Fe,Fe>>16,we,Ne+(2*Se+0)*w)),Fe=vt,pt=Nr}1&Ce||(Ue=3*Fe+pt+131074>>2,p(N[O+Ce-1],255&Ue,Ue>>16,ye,ge+(Ce-1)*w),T!=null&&(Ue=3*pt+Fe+131074>>2,p(T[B+Ce-1],255&Ue,Ue>>16,we,Ne+(Ce-1)*w)))}}function Ja(){An[kl]=db,An[Nl]=df,An[sf]=ub,An[jl]=uf,An[_l]=hf,An[Nd]=ff,An[af]=hb,An[jd]=df,An[_d]=uf,An[Sl]=hf,An[Sd]=ff}function la(h){return h&-16384?0>h?0:255:h>>fb}function Hs(h,p){return la((19077*h>>8)+(26149*p>>8)-14234)}function ji(h,p,w){return la((19077*h>>8)-(6419*p>>8)-(13320*w>>8)+8708)}function _i(h,p){return la((19077*h>>8)+(33050*p>>8)-17685)}function Vs(h,p,w,N,O){N[O+0]=Hs(h,w),N[O+1]=ji(h,p,w),N[O+2]=_i(h,p)}function Or(h,p,w,N,O){N[O+0]=_i(h,p),N[O+1]=ji(h,p,w),N[O+2]=Hs(h,w)}function Si(h,p,w,N,O){var T=ji(h,p,w);p=T<<3&224|_i(h,p)>>3,N[O+0]=248&Hs(h,w)|T>>5,N[O+1]=p}function Ai(h,p,w,N,O){var T=240&_i(h,p)|15;N[O+0]=240&Hs(h,w)|ji(h,p,w)>>4,N[O+1]=T}function Ka(h,p,w,N,O){N[O+0]=255,Vs(h,p,w,N,O+1)}function Za(h,p,w,N,O){Or(h,p,w,N,O),N[O+3]=255}function Yr(h,p,w,N,O){Vs(h,p,w,N,O),N[O+3]=255}function Ss(h,p,w){_[h]=function(N,O,T,B,U,H,G,oe,me){for(var X=oe+(-2&me)*w;oe!=X;)p(N[O+0],T[B+0],U[H+0],G,oe),p(N[O+1],T[B+0],U[H+0],G,oe+w),O+=2,++B,++H,oe+=2*w;1&me&&p(N[O+0],T[B+0],U[H+0],G,oe)}}function ca(h,p,w){return w==0?h==0?p==0?6:5:p==0?4:0:w}function bl(h,p,w,N,O){switch(h>>>30){case 3:Ei(p,w,N,O,0);break;case 2:_n(p,w,N,O);break;case 1:At(p,w,N,O)}}function jn(h,p){var w,N,O=p.M,T=p.Nb,B=h.oc,U=h.pc+40,H=h.oc,G=h.pc+584,oe=h.oc,me=h.pc+600;for(w=0;16>w;++w)B[U+32*w-1]=129;for(w=0;8>w;++w)H[G+32*w-1]=129,oe[me+32*w-1]=129;for(0<O?B[U-1-32]=H[G-1-32]=oe[me-1-32]=129:(s(B,U-32-1,127,21),s(H,G-32-1,127,9),s(oe,me-32-1,127,9)),N=0;N<h.za;++N){var X=p.ya[p.aa+N];if(0<N){for(w=-1;16>w;++w)n(B,U+32*w-4,B,U+32*w+12,4);for(w=-1;8>w;++w)n(H,G+32*w-4,H,G+32*w+4,4),n(oe,me+32*w-4,oe,me+32*w+4,4)}var le=h.Gd,fe=h.Hd+N,ye=X.ad,ge=X.Hc;if(0<O&&(n(B,U-32,le[fe].y,0,16),n(H,G-32,le[fe].f,0,8),n(oe,me-32,le[fe].ea,0,8)),X.Za){var we=B,Ne=U-32+16;for(0<O&&(N>=h.za-1?s(we,Ne,le[fe].y[15],4):n(we,Ne,le[fe+1].y,0,4)),w=0;4>w;w++)we[Ne+128+w]=we[Ne+256+w]=we[Ne+384+w]=we[Ne+0+w];for(w=0;16>w;++w,ge<<=2)we=B,Ne=U+gf[w],Bn[X.Ob[w]](we,Ne),bl(ge,ye,16*+w,we,Ne)}else if(we=ca(N,O,X.Ob[0]),Qs[we](B,U),ge!=0)for(w=0;16>w;++w,ge<<=2)bl(ge,ye,16*+w,B,U+gf[w]);for(w=X.Gc,we=ca(N,O,X.Dd),Ps[we](H,G),Ps[we](oe,me),ge=ye,we=H,Ne=G,255&(X=0|w)&&(170&X?ns(ge,256,we,Ne):Rt(ge,256,we,Ne)),X=oe,ge=me,255&(w>>=8)&&(170&w?ns(ye,320,X,ge):Rt(ye,320,X,ge)),O<h.Ub-1&&(n(le[fe].y,0,B,U+480,16),n(le[fe].f,0,H,G+224,8),n(le[fe].ea,0,oe,me+224,8)),w=8*T*h.B,le=h.sa,fe=h.ta+16*N+16*T*h.R,ye=h.qa,X=h.ra+8*N+w,ge=h.Ha,we=h.Ia+8*N+w,w=0;16>w;++w)n(le,fe+w*h.R,B,U+32*w,16);for(w=0;8>w;++w)n(ye,X+w*h.B,H,G+32*w,8),n(ge,we+w*h.B,oe,me+32*w,8)}}function Ci(h,p,w,N,O,T,B,U,H){var G=[0],oe=[0],me=0,X=H!=null?H.kd:0,le=H??new _e;if(h==null||12>w)return 7;le.data=h,le.w=p,le.ha=w,p=[p],w=[w],le.gb=[le.gb];e:{var fe=p,ye=w,ge=le.gb;if(e(h!=null),e(ye!=null),e(ge!=null),ge[0]=0,12<=ye[0]&&!r(h,fe[0],"RIFF")){if(r(h,fe[0]+8,"WEBP")){ge=3;break e}var we=Ee(h,fe[0]+4);if(12>we||4294967286<we){ge=3;break e}if(X&&we>ye[0]-8){ge=7;break e}ge[0]=we,fe[0]+=12,ye[0]-=12}ge=0}if(ge!=0)return ge;for(we=0<le.gb[0],w=w[0];;){e:{var Ne=h;ye=p,ge=w;var Ce=G,Se=oe,Ye=fe=[0];if((Ue=me=[me])[0]=0,8>ge[0])ge=7;else{if(!r(Ne,ye[0],"VP8X")){if(Ee(Ne,ye[0]+4)!=10){ge=3;break e}if(18>ge[0]){ge=7;break e}var Fe=Ee(Ne,ye[0]+8),pt=1+Pe(Ne,ye[0]+12);if(2147483648<=pt*(Ne=1+Pe(Ne,ye[0]+15))){ge=3;break e}Ye!=null&&(Ye[0]=Fe),Ce!=null&&(Ce[0]=pt),Se!=null&&(Se[0]=Ne),ye[0]+=18,ge[0]-=18,Ue[0]=1}ge=0}}if(me=me[0],fe=fe[0],ge!=0)return ge;if(ye=!!(2&fe),!we&&me)return 3;if(T!=null&&(T[0]=!!(16&fe)),B!=null&&(B[0]=ye),U!=null&&(U[0]=0),B=G[0],fe=oe[0],me&&ye&&H==null){ge=0;break}if(4>w){ge=7;break}if(we&&me||!we&&!me&&!r(h,p[0],"ALPH")){w=[w],le.na=[le.na],le.P=[le.P],le.Sa=[le.Sa];e:{Fe=h,ge=p,we=w;var Ue=le.gb;Ce=le.na,Se=le.P,Ye=le.Sa,pt=22,e(Fe!=null),e(we!=null),Ne=ge[0];var vt=we[0];for(e(Ce!=null),e(Ye!=null),Ce[0]=null,Se[0]=null,Ye[0]=0;;){if(ge[0]=Ne,we[0]=vt,8>vt){ge=7;break e}var Nr=Ee(Fe,Ne+4);if(4294967286<Nr){ge=3;break e}var gt=8+Nr+1&-2;if(pt+=gt,0<Ue&&pt>Ue){ge=3;break e}if(!r(Fe,Ne,"VP8 ")||!r(Fe,Ne,"VP8L")){ge=0;break e}if(vt[0]<gt){ge=7;break e}r(Fe,Ne,"ALPH")||(Ce[0]=Fe,Se[0]=Ne+8,Ye[0]=Nr),Ne+=gt,vt-=gt}}if(w=w[0],le.na=le.na[0],le.P=le.P[0],le.Sa=le.Sa[0],ge!=0)break}w=[w],le.Ja=[le.Ja],le.xa=[le.xa];e:if(Ue=h,ge=p,we=w,Ce=le.gb[0],Se=le.Ja,Ye=le.xa,Fe=ge[0],Ne=!r(Ue,Fe,"VP8 "),pt=!r(Ue,Fe,"VP8L"),e(Ue!=null),e(we!=null),e(Se!=null),e(Ye!=null),8>we[0])ge=7;else{if(Ne||pt){if(Ue=Ee(Ue,Fe+4),12<=Ce&&Ue>Ce-12){ge=3;break e}if(X&&Ue>we[0]-8){ge=7;break e}Se[0]=Ue,ge[0]+=8,we[0]-=8,Ye[0]=pt}else Ye[0]=5<=we[0]&&Ue[Fe+0]==47&&!(Ue[Fe+4]>>5),Se[0]=we[0];ge=0}if(w=w[0],le.Ja=le.Ja[0],le.xa=le.xa[0],p=p[0],ge!=0)break;if(4294967286<le.Ja)return 3;if(U==null||ye||(U[0]=le.xa?2:1),B=[B],fe=[fe],le.xa){if(5>w){ge=7;break}U=B,X=fe,ye=T,h==null||5>w?h=0:5<=w&&h[p+0]==47&&!(h[p+4]>>5)?(we=[0],Ue=[0],Ce=[0],K(Se=new I,h,p,w),ms(Se,we,Ue,Ce)?(U!=null&&(U[0]=we[0]),X!=null&&(X[0]=Ue[0]),ye!=null&&(ye[0]=Ce[0]),h=1):h=0):h=0}else{if(10>w){ge=7;break}U=fe,h==null||10>w||!ol(h,p+3,w-3)?h=0:(X=h[p+0]|h[p+1]<<8|h[p+2]<<16,ye=16383&(h[p+7]<<8|h[p+6]),h=16383&(h[p+9]<<8|h[p+8]),1&X||3<(X>>1&7)||!(X>>4&1)||X>>5>=le.Ja||!ye||!h?h=0:(B&&(B[0]=ye),U&&(U[0]=h),h=1))}if(!h||(B=B[0],fe=fe[0],me&&(G[0]!=B||oe[0]!=fe)))return 3;H!=null&&(H[0]=le,H.offset=p-H.w,e(4294967286>p-H.w),e(H.offset==H.ha-w));break}return ge==0||ge==7&&me&&H==null?(T!=null&&(T[0]|=le.na!=null&&0<le.na.length),N!=null&&(N[0]=B),O!=null&&(O[0]=fe),0):ge}function Qa(h,p,w){var N=p.width,O=p.height,T=0,B=0,U=N,H=O;if(p.Da=h!=null&&0<h.Da,p.Da&&(U=h.cd,H=h.bd,T=h.v,B=h.j,11>w||(T&=-2,B&=-2),0>T||0>B||0>=U||0>=H||T+U>N||B+H>O))return 0;if(p.v=T,p.j=B,p.va=T+U,p.o=B+H,p.U=U,p.T=H,p.da=h!=null&&0<h.da,p.da){if(!Le(U,H,w=[h.ib],T=[h.hb]))return 0;p.ib=w[0],p.hb=T[0]}return p.ob=h!=null&&h.ob,p.Kb=h==null||!h.Sd,p.da&&(p.ob=p.ib<3*N/4&&p.hb<3*O/4,p.Kb=0),1}function eo(h){if(h==null)return 2;if(11>h.S){var p=h.f.RGBA;p.fb+=(h.height-1)*p.A,p.A=-p.A}else p=h.f.kb,h=h.height,p.O+=(h-1)*p.fa,p.fa=-p.fa,p.N+=(h-1>>1)*p.Ab,p.Ab=-p.Ab,p.W+=(h-1>>1)*p.Db,p.Db=-p.Db,p.F!=null&&(p.J+=(h-1)*p.lb,p.lb=-p.lb);return 0}function $s(h,p,w,N){if(N==null||0>=h||0>=p)return 2;if(w!=null){if(w.Da){var O=w.cd,T=w.bd,B=-2&w.v,U=-2&w.j;if(0>B||0>U||0>=O||0>=T||B+O>h||U+T>p)return 2;h=O,p=T}if(w.da){if(!Le(h,p,O=[w.ib],T=[w.hb]))return 2;h=O[0],p=T[0]}}N.width=h,N.height=p;e:{var H=N.width,G=N.height;if(h=N.S,0>=H||0>=G||!(h>=kl&&13>h))h=2;else{if(0>=N.Rd&&N.sd==null){B=T=O=p=0;var oe=(U=H*mf[h])*G;if(11>h||(T=(G+1)/2*(p=(H+1)/2),h==12&&(B=(O=H)*G)),(G=i(oe+2*T+B))==null){h=1;break e}N.sd=G,11>h?((H=N.f.RGBA).eb=G,H.fb=0,H.A=U,H.size=oe):((H=N.f.kb).y=G,H.O=0,H.fa=U,H.Fd=oe,H.f=G,H.N=0+oe,H.Ab=p,H.Cd=T,H.ea=G,H.W=0+oe+T,H.Db=p,H.Ed=T,h==12&&(H.F=G,H.J=0+oe+2*T),H.Tc=B,H.lb=O)}if(p=1,O=N.S,T=N.width,B=N.height,O>=kl&&13>O)if(11>O)h=N.f.RGBA,p&=(U=Math.abs(h.A))*(B-1)+T<=h.size,p&=U>=T*mf[O],p&=h.eb!=null;else{h=N.f.kb,U=(T+1)/2,oe=(B+1)/2,H=Math.abs(h.fa),G=Math.abs(h.Ab);var me=Math.abs(h.Db),X=Math.abs(h.lb),le=X*(B-1)+T;p&=H*(B-1)+T<=h.Fd,p&=G*(oe-1)+U<=h.Cd,p=(p&=me*(oe-1)+U<=h.Ed)&H>=T&G>=U&me>=U,p&=h.y!=null,p&=h.f!=null,p&=h.ea!=null,O==12&&(p&=X>=T,p&=le<=h.Tc,p&=h.F!=null)}else p=0;h=p?0:2}}return h!=0||w!=null&&w.fd&&(h=eo(N)),h}var Pi=64,on=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ln=24,Ys=32,As=8,Gs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];De("Predictor0","PredictorAdd0"),_.Predictor0=function(){return 4278190080},_.Predictor1=function(h){return h},_.Predictor2=function(h,p,w){return p[w+0]},_.Predictor3=function(h,p,w){return p[w+1]},_.Predictor4=function(h,p,w){return p[w-1]},_.Predictor5=function(h,p,w){return He(He(h,p[w+1]),p[w+0])},_.Predictor6=function(h,p,w){return He(h,p[w-1])},_.Predictor7=function(h,p,w){return He(h,p[w+0])},_.Predictor8=function(h,p,w){return He(p[w-1],p[w+0])},_.Predictor9=function(h,p,w){return He(p[w+0],p[w+1])},_.Predictor10=function(h,p,w){return He(He(h,p[w-1]),He(p[w+0],p[w+1]))},_.Predictor11=function(h,p,w){var N=p[w+0];return 0>=ze(N>>24&255,h>>24&255,(p=p[w-1])>>24&255)+ze(N>>16&255,h>>16&255,p>>16&255)+ze(N>>8&255,h>>8&255,p>>8&255)+ze(255&N,255&h,255&p)?N:h},_.Predictor12=function(h,p,w){var N=p[w+0];return(tt((h>>24&255)+(N>>24&255)-((p=p[w-1])>>24&255))<<24|tt((h>>16&255)+(N>>16&255)-(p>>16&255))<<16|tt((h>>8&255)+(N>>8&255)-(p>>8&255))<<8|tt((255&h)+(255&N)-(255&p)))>>>0},_.Predictor13=function(h,p,w){var N=p[w-1];return(rt((h=He(h,p[w+0]))>>24&255,N>>24&255)<<24|rt(h>>16&255,N>>16&255)<<16|rt(h>>8&255,N>>8&255)<<8|rt(255&h,255&N))>>>0};var to=_.PredictorAdd0;_.PredictorAdd1=Ke,De("Predictor2","PredictorAdd2"),De("Predictor3","PredictorAdd3"),De("Predictor4","PredictorAdd4"),De("Predictor5","PredictorAdd5"),De("Predictor6","PredictorAdd6"),De("Predictor7","PredictorAdd7"),De("Predictor8","PredictorAdd8"),De("Predictor9","PredictorAdd9"),De("Predictor10","PredictorAdd10"),De("Predictor11","PredictorAdd11"),De("Predictor12","PredictorAdd12"),De("Predictor13","PredictorAdd13");var da=_.PredictorAdd2;Re("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),Re("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var sr,yl=_.ColorIndexInverseTransform,ts=_.MapARGB,rs=_.VP8LColorIndexInverseTransformAlpha,ro=_.MapAlpha,no=_.VP8LPredictorsAdd=[];no.length=16,(_.VP8LPredictors=[]).length=16,(_.VP8LPredictorsAdd_C=[]).length=16,(_.VP8LPredictors_C=[]).length=16;var so,io,Xs,Js,Ks,Li,Zs,Ei,_n,ns,At,Rt,ir,kr,Cs,ao,ua,vl,Hh,Vh,$h,Yh,Gh,Xh,oo,Jh,Kh,Zh,Qh=i(511),ef=i(2041),tf=i(225),rf=i(767),nf=0,kd=ef,wl=tf,cn=rf,Sn=Qh,kl=0,Nl=1,sf=2,jl=3,_l=4,Nd=5,af=6,jd=7,_d=8,Sl=9,Sd=10,J1=[2,3,7],K1=[3,3,11],of=[280,256,256,256,40],Z1=[0,1,1,1,0],Q1=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],eb=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],tb=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],rb=8,Ad=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Cd=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],lo=null,nb=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],sb=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],lf=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ib=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ab=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ob=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],lb=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Qs=[],Bn=[],Ps=[],cb=1,cf=2,ei=[],An=[];_s("UpsampleRgbLinePair",Vs,3),_s("UpsampleBgrLinePair",Or,3),_s("UpsampleRgbaLinePair",Yr,4),_s("UpsampleBgraLinePair",Za,4),_s("UpsampleArgbLinePair",Ka,4),_s("UpsampleRgba4444LinePair",Ai,2),_s("UpsampleRgb565LinePair",Si,2);var db=_.UpsampleRgbLinePair,ub=_.UpsampleBgrLinePair,df=_.UpsampleRgbaLinePair,uf=_.UpsampleBgraLinePair,hf=_.UpsampleArgbLinePair,ff=_.UpsampleRgba4444LinePair,hb=_.UpsampleRgb565LinePair,Al=16,Cl=1<<Al-1,co=-227,Pd=482,fb=6,pf=0,pb=i(256),gb=i(256),mb=i(256),xb=i(256),bb=i(Pd-co),yb=i(Pd-co);Ss("YuvToRgbRow",Vs,3),Ss("YuvToBgrRow",Or,3),Ss("YuvToRgbaRow",Yr,4),Ss("YuvToBgraRow",Za,4),Ss("YuvToArgbRow",Ka,4),Ss("YuvToRgba4444Row",Ai,2),Ss("YuvToRgb565Row",Si,2);var gf=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Pl=[0,2,8],vb=[8,7,6,4,4,2,2,2,1,1,1,1],wb=1;this.WebPDecodeRGBA=function(h,p,w,N,O){var T=Nl,B=new ke,U=new bt;B.ba=U,U.S=T,U.width=[U.width],U.height=[U.height];var H=U.width,G=U.height,oe=new Ze;if(oe==null||h==null)var me=2;else e(oe!=null),me=Ci(h,p,w,oe.width,oe.height,oe.Pd,oe.Qd,oe.format,null);if(me!=0?H=0:(H!=null&&(H[0]=oe.width[0]),G!=null&&(G[0]=oe.height[0]),H=1),H){U.width=U.width[0],U.height=U.height[0],N!=null&&(N[0]=U.width),O!=null&&(O[0]=U.height);e:{if(N=new na,(O=new _e).data=h,O.w=p,O.ha=w,O.kd=1,p=[0],e(O!=null),((h=Ci(O.data,O.w,O.ha,null,null,null,p,null,O))==0||h==7)&&p[0]&&(h=4),(p=h)==0){if(e(B!=null),N.data=O.data,N.w=O.w+O.offset,N.ha=O.ha-O.offset,N.put=Qe,N.ac=Xn,N.bc=gs,N.ma=B,O.xa){if((h=xi())==null){B=1;break e}if((function(X,le){var fe=[0],ye=[0],ge=[0];t:for(;;){if(X==null)return 0;if(le==null)return X.a=2,0;if(X.l=le,X.a=0,K(X.m,le.data,le.w,le.ha),!ms(X.m,fe,ye,ge)){X.a=3;break t}if(X.xb=cf,le.width=fe[0],le.height=ye[0],!Kn(fe[0],ye[0],1,X,null))break t;return 1}return e(X.a!=0),0})(h,N)){if(N=(p=$s(N.width,N.height,B.Oa,B.ba))==0){t:{N=h;r:for(;;){if(N==null){N=0;break t}if(e(N.s.yc!=null),e(N.s.Ya!=null),e(0<N.s.Wb),e((w=N.l)!=null),e((O=w.ma)!=null),N.xb!=0){if(N.ca=O.ba,N.tb=O.tb,e(N.ca!=null),!Qa(O.Oa,w,jl)){N.a=2;break r}if(!bi(N,w.width)||w.da)break r;if((w.da||et(N.ca.S))&&In(),11>N.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),N.ca.f.kb.F!=null&&In()),N.Pb&&0<N.s.ua&&N.s.vb.X==null&&!W(N.s.vb,N.s.Wa.Xa)){N.a=1;break r}N.xb=0}if(!Mn(N,N.V,N.Ba,N.c,N.i,w.o,Ws))break r;O.Dc=N.Ma,N=1;break t}e(N.a!=0),N=0}N=!N}N&&(p=h.a)}else p=h.a}else{if((h=new od)==null){B=1;break e}if(h.Fa=O.na,h.P=O.P,h.qc=O.Sa,Qn(h,N)){if((p=$s(N.width,N.height,B.Oa,B.ba))==0){if(h.Aa=0,w=B.Oa,e((O=h)!=null),w!=null){if(0<(H=0>(H=w.Md)?0:100<H?255:255*H/100)){for(G=oe=0;4>G;++G)12>(me=O.pb[G]).lc&&(me.ia=H*vb[0>me.lc?0:me.lc]>>3),oe|=me.ia;oe&&(alert("todo:VP8InitRandom"),O.ia=1)}O.Ga=w.Id,100<O.Ga?O.Ga=100:0>O.Ga&&(O.Ga=0)}(function(X,le){if(X==null)return 0;if(le==null)return mr(X,2,"NULL VP8Io parameter in VP8Decode().");if(!X.cb&&!Qn(X,le))return 0;if(e(X.cb),le.ac==null||le.ac(le)){le.ob&&(X.L=0);var fe=Pl[X.L];if(X.L==2?(X.yb=0,X.zb=0):(X.yb=le.v-fe>>4,X.zb=le.j-fe>>4,0>X.yb&&(X.yb=0),0>X.zb&&(X.zb=0)),X.Va=le.o+15+fe>>4,X.Hb=le.va+15+fe>>4,X.Hb>X.za&&(X.Hb=X.za),X.Va>X.Ub&&(X.Va=X.Ub),0<X.L){var ye=X.ed;for(fe=0;4>fe;++fe){var ge;if(X.Qa.Cb){var we=X.Qa.Lb[fe];X.Qa.Fb||(we+=ye.Tb)}else we=ye.Tb;for(ge=0;1>=ge;++ge){var Ne=X.gd[fe][ge],Ce=we;if(ye.Pc&&(Ce+=ye.vd[0],ge&&(Ce+=ye.od[0])),0<(Ce=0>Ce?0:63<Ce?63:Ce)){var Se=Ce;0<ye.wb&&(Se=4<ye.wb?Se>>2:Se>>1)>9-ye.wb&&(Se=9-ye.wb),1>Se&&(Se=1),Ne.dd=Se,Ne.tc=2*Ce+Se,Ne.ld=40<=Ce?2:15<=Ce?1:0}else Ne.tc=0;Ne.La=ge}}}fe=0}else mr(X,6,"Frame setup failed"),fe=X.a;if(fe=fe==0){if(fe){X.$c=0,0<X.Aa||(X.Ic=wb);t:{fe=X.Ic,ye=4*(Se=X.za);var Ye=32*Se,Fe=Se+1,pt=0<X.L?Se*(0<X.Aa?2:1):0,Ue=(X.Aa==2?2:1)*Se;if((Ne=ye+832+(ge=3*(16*fe+Pl[X.L])/2*Ye)+(we=X.Fa!=null&&0<X.Fa.length?X.Kc.c*X.Kc.i:0))!=Ne)fe=0;else{if(Ne>X.Vb){if(X.Vb=0,X.Ec=i(Ne),X.Fc=0,X.Ec==null){fe=mr(X,1,"no memory during frame initialization.");break t}X.Vb=Ne}Ne=X.Ec,Ce=X.Fc,X.Ac=Ne,X.Bc=Ce,Ce+=ye,X.Gd=a(Ye,il),X.Hd=0,X.rb=a(Fe+1,za),X.sb=1,X.wa=pt?a(pt,kn):null,X.Y=0,X.D.Nb=0,X.D.wa=X.wa,X.D.Y=X.Y,0<X.Aa&&(X.D.Y+=Se),e(!0),X.oc=Ne,X.pc=Ce,Ce+=832,X.ya=a(Ue,Ua),X.aa=0,X.D.ya=X.ya,X.D.aa=X.aa,X.Aa==2&&(X.D.aa+=Se),X.R=16*Se,X.B=8*Se,Se=(Ye=Pl[X.L])*X.R,Ye=Ye/2*X.B,X.sa=Ne,X.ta=Ce+Se,X.qa=X.sa,X.ra=X.ta+16*fe*X.R+Ye,X.Ha=X.qa,X.Ia=X.ra+8*fe*X.B+Ye,X.$c=0,Ce+=ge,X.mb=we?Ne:null,X.nb=we?Ce:null,e(Ce+we<=X.Fc+X.Vb),ll(X),s(X.Ac,X.Bc,0,ye),fe=1}}if(fe){if(le.ka=0,le.y=X.sa,le.O=X.ta,le.f=X.qa,le.N=X.ra,le.ea=X.Ha,le.Vd=X.Ia,le.fa=X.R,le.Rc=X.B,le.F=null,le.J=0,!nf){for(fe=-255;255>=fe;++fe)Qh[255+fe]=0>fe?-fe:fe;for(fe=-1020;1020>=fe;++fe)ef[1020+fe]=-128>fe?-128:127<fe?127:fe;for(fe=-112;112>=fe;++fe)tf[112+fe]=-16>fe?-16:15<fe?15:fe;for(fe=-255;510>=fe;++fe)rf[255+fe]=0>fe?0:255<fe?255:fe;nf=1}Zs=ia,Ei=cd,ns=es,At=dl,Rt=ul,_n=ld,ir=ml,kr=Ni,Cs=E,ao=J,ua=xl,vl=b,Hh=ae,Vh=ue,$h=ki,Yh=Xa,Gh=pl,Xh=gl,Bn[0]=xd,Bn[1]=dd,Bn[2]=gd,Bn[3]=md,Bn[4]=bs,Bn[5]=bd,Bn[6]=ys,Bn[7]=yd,Bn[8]=Ha,Bn[9]=aa,Qs[0]=fd,Qs[1]=hd,Qs[2]=qa,Qs[3]=hl,Qs[4]=vi,Qs[5]=Wa,Qs[6]=pd,Ps[0]=wd,Ps[1]=ud,Ps[2]=wi,Ps[3]=vd,Ps[4]=$a,Ps[5]=Va,Ps[6]=fl,fe=1}else fe=0}fe&&(fe=(function(vt,Nr){for(vt.M=0;vt.M<vt.Va;++vt.M){var gt,qe=vt.Jc[vt.M&vt.Xb],Oe=vt.m,ar=vt;for(gt=0;gt<ar.za;++gt){var dt=Oe,wt=ar,qt=wt.Ac,Dr=wt.Bc+4*gt,Gr=wt.zc,er=wt.ya[wt.aa+gt];if(wt.Qa.Bb?er.$b=xe(dt,wt.Pa.jb[0])?2+xe(dt,wt.Pa.jb[2]):xe(dt,wt.Pa.jb[1]):er.$b=0,wt.kc&&(er.Ad=xe(dt,wt.Bd)),er.Za=!xe(dt,145)+0,er.Za){var Ir=er.Ob,Xr=0;for(wt=0;4>wt;++wt){var jr,Nt=Gr[0+wt];for(jr=0;4>jr;++jr){Nt=ab[qt[Dr+jr]][Nt];for(var Ct=lf[xe(dt,Nt[0])];0<Ct;)Ct=lf[2*Ct+xe(dt,Nt[Ct])];Nt=-Ct,qt[Dr+jr]=Nt}n(Ir,Xr,qt,Dr,4),Xr+=4,Gr[0+wt]=Nt}}else Nt=xe(dt,156)?xe(dt,128)?1:3:xe(dt,163)?2:0,er.Ob[0]=Nt,s(qt,Dr,Nt,4),s(Gr,0,Nt,4);er.Dd=xe(dt,142)?xe(dt,114)?xe(dt,183)?1:3:2:0}if(ar.m.Ka)return mr(vt,7,"Premature end-of-partition0 encountered.");for(;vt.ja<vt.za;++vt.ja){if(ar=qe,dt=(Oe=vt).rb[Oe.sb-1],qt=Oe.rb[Oe.sb+Oe.ja],gt=Oe.ya[Oe.aa+Oe.ja],Dr=Oe.kc?gt.Ad:0)dt.la=qt.la=0,gt.Za||(dt.Na=qt.Na=0),gt.Hc=0,gt.Gc=0,gt.ia=0;else{var tr,Pt;if(dt=qt,qt=ar,Dr=Oe.Pa.Xc,Gr=Oe.ya[Oe.aa+Oe.ja],er=Oe.pb[Gr.$b],wt=Gr.ad,Ir=0,Xr=Oe.rb[Oe.sb-1],Nt=jr=0,s(wt,Ir,0,384),Gr.Za)var Fr=0,zn=Dr[3];else{Ct=i(16);var or=dt.Na+Xr.Na;if(or=lo(qt,Dr[1],or,er.Eb,0,Ct,0),dt.Na=Xr.Na=(0<or)+0,1<or)Zs(Ct,0,wt,Ir);else{var Qr=Ct[0]+3>>3;for(Ct=0;256>Ct;Ct+=16)wt[Ir+Ct]=Qr}Fr=1,zn=Dr[0]}var Mt=15&dt.la,_r=15&Xr.la;for(Ct=0;4>Ct;++Ct){var dn=1&_r;for(Qr=Pt=0;4>Qr;++Qr)Mt=Mt>>1|(dn=(or=lo(qt,zn,or=dn+(1&Mt),er.Sc,Fr,wt,Ir))>Fr)<<7,Pt=Pt<<2|(3<or?3:1<or?2:wt[Ir+0]!=0),Ir+=16;Mt>>=4,_r=_r>>1|dn<<7,jr=(jr<<8|Pt)>>>0}for(zn=Mt,Fr=_r>>4,tr=0;4>tr;tr+=2){for(Pt=0,Mt=dt.la>>4+tr,_r=Xr.la>>4+tr,Ct=0;2>Ct;++Ct){for(dn=1&_r,Qr=0;2>Qr;++Qr)or=dn+(1&Mt),Mt=Mt>>1|(dn=0<(or=lo(qt,Dr[2],or,er.Qc,0,wt,Ir)))<<3,Pt=Pt<<2|(3<or?3:1<or?2:wt[Ir+0]!=0),Ir+=16;Mt>>=2,_r=_r>>1|dn<<5}Nt|=Pt<<4*tr,zn|=Mt<<4<<tr,Fr|=(240&_r)<<tr}dt.la=zn,Xr.la=Fr,Gr.Hc=jr,Gr.Gc=Nt,Gr.ia=43690&Nt?0:er.ia,Dr=!(jr|Nt)}if(0<Oe.L&&(Oe.wa[Oe.Y+Oe.ja]=Oe.gd[gt.$b][gt.Za],Oe.wa[Oe.Y+Oe.ja].La|=!Dr),ar.Ka)return mr(vt,7,"Premature end-of-file encountered.")}if(ll(vt),Oe=Nr,ar=1,gt=(qe=vt).D,dt=0<qe.L&&qe.M>=qe.zb&&qe.M<=qe.Va,qe.Aa==0)t:{if(gt.M=qe.M,gt.uc=dt,jn(qe,gt),ar=1,gt=(Pt=qe.D).Nb,dt=(Nt=Pl[qe.L])*qe.R,qt=Nt/2*qe.B,Ct=16*gt*qe.R,Qr=8*gt*qe.B,Dr=qe.sa,Gr=qe.ta-dt+Ct,er=qe.qa,wt=qe.ra-qt+Qr,Ir=qe.Ha,Xr=qe.Ia-qt+Qr,_r=(Mt=Pt.M)==0,jr=Mt>=qe.Va-1,qe.Aa==2&&jn(qe,Pt),Pt.uc)for(dn=(or=qe).D.M,e(or.D.uc),Pt=or.yb;Pt<or.Hb;++Pt){Fr=Pt,zn=dn;var Jr=(un=(Rr=or).D).Nb;tr=Rr.R;var un=un.wa[un.Y+Fr],hn=Rr.sa,en=Rr.ta+16*Jr*tr+16*Fr,fn=un.dd,zt=un.tc;if(zt!=0)if(e(3<=zt),Rr.L==1)0<Fr&&Yh(hn,en,tr,zt+4),un.La&&Xh(hn,en,tr,zt),0<zn&&$h(hn,en,tr,zt+4),un.La&&Gh(hn,en,tr,zt);else{var pn=Rr.B,Un=Rr.qa,Oi=Rr.ra+8*Jr*pn+8*Fr,Ls=Rr.Ha,Rr=Rr.Ia+8*Jr*pn+8*Fr;Jr=un.ld,0<Fr&&(kr(hn,en,tr,zt+4,fn,Jr),ao(Un,Oi,Ls,Rr,pn,zt+4,fn,Jr)),un.La&&(vl(hn,en,tr,zt,fn,Jr),Vh(Un,Oi,Ls,Rr,pn,zt,fn,Jr)),0<zn&&(ir(hn,en,tr,zt+4,fn,Jr),Cs(Un,Oi,Ls,Rr,pn,zt+4,fn,Jr)),un.La&&(ua(hn,en,tr,zt,fn,Jr),Hh(Un,Oi,Ls,Rr,pn,zt,fn,Jr))}}if(qe.ia&&alert("todo:DitherRow"),Oe.put!=null){if(Pt=16*Mt,Mt=16*(Mt+1),_r?(Oe.y=qe.sa,Oe.O=qe.ta+Ct,Oe.f=qe.qa,Oe.N=qe.ra+Qr,Oe.ea=qe.Ha,Oe.W=qe.Ia+Qr):(Pt-=Nt,Oe.y=Dr,Oe.O=Gr,Oe.f=er,Oe.N=wt,Oe.ea=Ir,Oe.W=Xr),jr||(Mt-=Nt),Mt>Oe.o&&(Mt=Oe.o),Oe.F=null,Oe.J=null,qe.Fa!=null&&0<qe.Fa.length&&Pt<Mt&&(Oe.J=Bt(qe,Oe,Pt,Mt-Pt),Oe.F=qe.mb,Oe.F==null&&Oe.F.length==0)){ar=mr(qe,3,"Could not decode alpha data.");break t}Pt<Oe.j&&(Nt=Oe.j-Pt,Pt=Oe.j,e(!(1&Nt)),Oe.O+=qe.R*Nt,Oe.N+=qe.B*(Nt>>1),Oe.W+=qe.B*(Nt>>1),Oe.F!=null&&(Oe.J+=Oe.width*Nt)),Pt<Mt&&(Oe.O+=Oe.v,Oe.N+=Oe.v>>1,Oe.W+=Oe.v>>1,Oe.F!=null&&(Oe.J+=Oe.v),Oe.ka=Pt-Oe.j,Oe.U=Oe.va-Oe.v,Oe.T=Mt-Pt,ar=Oe.put(Oe))}gt+1!=qe.Ic||jr||(n(qe.sa,qe.ta-dt,Dr,Gr+16*qe.R,dt),n(qe.qa,qe.ra-qt,er,wt+8*qe.B,qt),n(qe.Ha,qe.Ia-qt,Ir,Xr+8*qe.B,qt))}if(!ar)return mr(vt,6,"Output aborted.")}return 1})(X,le)),le.bc!=null&&le.bc(le),fe&=1}return fe?(X.cb=0,fe):0})(h,N)||(p=h.a)}}else p=h.a}p==0&&B.Oa!=null&&B.Oa.fd&&(p=eo(B.ba))}B=p}T=B!=0?null:11>T?U.f.RGBA.eb:U.f.kb.y}else T=null;return T};var mf=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(_,M){for(var S="",C=0;C<4;C++)S+=String.fromCharCode(_[M++]);return S}function u(_,M){return _[M+0]|_[M+1]<<8}function g(_,M){return(_[M+0]|_[M+1]<<8|_[M+2]<<16)>>>0}function m(_,M){return(_[M+0]|_[M+1]<<8|_[M+2]<<16|_[M+3]<<24)>>>0}new c;var f=[0],x=[0],v=[],y=new c,k=t,A=(function(_,M){var S={},C=0,R=!1,F=0,V=0;if(S.frames=[],!(function(P,I){for(var Y=0;Y<4;Y++)if(P[I+Y]!="RIFF".charCodeAt(Y))return!0;return!1})(_,M)){for(m(_,M+=4),M+=8;M<_.length;){var te=d(_,M),ne=m(_,M+=4);M+=4;var se=ne+(1&ne);switch(te){case"VP8 ":case"VP8L":S.frames[C]===void 0&&(S.frames[C]={}),(re=S.frames[C]).src_off=R?V:M-8,re.src_size=F+ne+8,C++,R&&(R=!1,F=0,V=0);break;case"VP8X":(re=S.header={}).feature_flags=_[M];var K=M+4;re.canvas_width=1+g(_,K),K+=3,re.canvas_height=1+g(_,K),K+=3;break;case"ALPH":R=!0,F=se+8,V=M-8;break;case"ANIM":(re=S.header).bgcolor=m(_,M),K=M+4,re.loop_count=u(_,K),K+=2;break;case"ANMF":var Q,re;(re=S.frames[C]={}).offset_x=2*g(_,M),M+=3,re.offset_y=2*g(_,M),M+=3,re.width=1+g(_,M),M+=3,re.height=1+g(_,M),M+=3,re.duration=g(_,M),M+=3,Q=_[M++],re.dispose=1&Q,re.blend=Q>>1&1}te!="ANMF"&&(M+=se)}return S}})(k,0);A.response=k,A.rgbaoutput=!0,A.dataurl=!1;var D=A.header?A.header:null,L=A.frames?A.frames:null;if(D){D.loop_counter=D.loop_count,f=[D.canvas_height],x=[D.canvas_width];for(var q=0;q<L.length&&L[q].blend!=0;q++);}var z=L[0],$=y.WebPDecodeRGBA(k,z.src_off,z.src_size,x,f);z.rgba=$,z.imgwidth=x[0],z.imgheight=f[0];for(var j=0;j<x[0]*f[0]*4;j++)v[j]=$[j];return this.width=x,this.height=f,this.data=v,this}(function(t){var e,r,n,s,i,a,o,c,d,u=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new c,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new a,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new a,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new g(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,c=this.internal.Matrix,d=new u}]);var g=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var I=P;Object.defineProperty(this,"pdf",{get:function(){return I}});var Y=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Y},set:function(W){Y=!!W}});var ee=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ee},set:function(W){ee=!!W}});var ie=0;Object.defineProperty(this,"posX",{get:function(){return ie},set:function(W){isNaN(W)||(ie=W)}});var ce=0;Object.defineProperty(this,"posY",{get:function(){return ce},set:function(W){isNaN(W)||(ce=W)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(W){var je;typeof W=="number"?je=[W,W,W,W]:((je=new Array(4))[0]=W[0],je[1]=W.length>=2?W[1]:je[0],je[2]=W.length>=3?W[2]:je[0],je[3]=W.length>=4?W[3]:je[1]),d.margin=je}});var de=!1;Object.defineProperty(this,"autoPaging",{get:function(){return de},set:function(W){de=W}});var he=0;Object.defineProperty(this,"lastBreak",{get:function(){return he},set:function(W){he=W}});var xe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return xe},set:function(W){xe=W}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(W){W instanceof u&&(d=W)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(W){d.path=W}});var pe=[];Object.defineProperty(this,"ctxStack",{get:function(){return pe},set:function(W){pe=W}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(W){var je;je=m(W),this.ctx.fillStyle=je.style,this.ctx.isFillTransparent=je.a===0,this.ctx.fillOpacity=je.a,this.pdf.setFillColor(je.r,je.g,je.b,{a:je.a}),this.pdf.setTextColor(je.r,je.g,je.b,{a:je.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(W){var je=m(W);this.ctx.strokeStyle=je.style,this.ctx.isStrokeTransparent=je.a===0,this.ctx.strokeOpacity=je.a,je.a===0?this.pdf.setDrawColor(255,255,255):(je.a,this.pdf.setDrawColor(je.r,je.g,je.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(W){["butt","round","square"].indexOf(W)!==-1&&(this.ctx.lineCap=W,this.pdf.setLineCap(W))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(W){isNaN(W)||(this.ctx.lineWidth=W,this.pdf.setLineWidth(W))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(W){["bevel","round","miter"].indexOf(W)!==-1&&(this.ctx.lineJoin=W,this.pdf.setLineJoin(W))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(W){isNaN(W)||(this.ctx.miterLimit=W,this.pdf.setMiterLimit(W))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(W){this.ctx.textBaseline=W}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(W){["right","end","center","left","start"].indexOf(W)!==-1&&(this.ctx.textAlign=W)}});var Ae=null,Pe=null,Ee=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ee},set:function(W){Ae=null,Pe=null,Ee=W}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(W){var je;if(this.ctx.font=W,(je=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(W))!==null){var Je=je[1];je[2];var Le=je[3],ve=je[4];je[5];var We=je[6],De=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ve)[2];ve=Math.floor(De==="px"?parseFloat(ve)*this.pdf.internal.scaleFactor:De==="em"?parseFloat(ve)*this.pdf.getFontSize():parseFloat(ve)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ve);var Te=(function(Re){var jt,mt,ut=[],xt=Re.trim();if(xt==="")return mu;if(xt in fm)return[fm[xt]];for(;xt!=="";){switch(mt=null,jt=(xt=gm(xt)).charAt(0)){case'"':case"'":mt=M_(xt.substring(1),jt);break;default:mt=T_(xt)}if(mt===null||(ut.push(mt[0]),(xt=gm(mt[1]))!==""&&xt.charAt(0)!==","))return mu;xt=xt.replace(/^,/,"")}return ut})(We);if(this.fontFaces){var He=(function(Re,jt){var mt=Re.getFontList(),ut=JSON.stringify(mt);if(Ae===null||Pe!==ut){var xt=(function(Yt){var Xe=[];return Object.keys(Yt).forEach(function(It){Yt[It].forEach(function(et){var ct=null;switch(et){case"bold":ct={family:It,weight:"bold"};break;case"italic":ct={family:It,style:"italic"};break;case"bolditalic":ct={family:It,weight:"bold",style:"italic"};break;case"":case"normal":ct={family:It}}ct!==null&&(ct.ref={name:It,style:et},Xe.push(ct))})}),Xe})(mt);Ae=(function(Yt){for(var Xe={},It=0;It<Yt.length;++It){var et=gu(Yt[It]),ct=et.family,Gt=et.stretch,bt=et.style,Ze=et.weight;Xe[ct]=Xe[ct]||{},Xe[ct][Gt]=Xe[ct][Gt]||{},Xe[ct][Gt][bt]=Xe[ct][Gt][bt]||{},Xe[ct][Gt][bt][Ze]=et}return Xe})(xt.concat(jt)),Pe=ut}return Ae})(this.pdf,this.fontFaces),tt=Te.map(function(Re){return{family:Re,stretch:"normal",weight:Le,style:Je}}),rt=(function(Re,jt,mt){for(var ut=(mt=mt||{}).defaultFontFamily||"times",xt=Object.assign({},R_,mt.genericFontFamilies||{}),Yt=null,Xe=null,It=0;It<jt.length;++It)if(xt[(Yt=gu(jt[It])).family]&&(Yt.family=xt[Yt.family]),Re.hasOwnProperty(Yt.family)){Xe=Re[Yt.family];break}if(!(Xe=Xe||Re[ut]))throw new Error("Could not find a font-family for the rule '"+pm(Yt)+"' and default family '"+ut+"'.");if(Xe=(function(et,ct){if(ct[et])return ct[et];var Gt=rh[et],bt=Gt<=rh.normal?-1:1,Ze=hm(ct,v1,Gt,bt);if(!Ze)throw new Error("Could not find a matching font-stretch value for "+et);return Ze})(Yt.stretch,Xe),Xe=(function(et,ct){if(ct[et])return ct[et];for(var Gt=y1[et],bt=0;bt<Gt.length;++bt)if(ct[Gt[bt]])return ct[Gt[bt]];throw new Error("Could not find a matching font-style for "+et)})(Yt.style,Xe),!(Xe=(function(et,ct){if(ct[et])return ct[et];if(et===400&&ct[500])return ct[500];if(et===500&&ct[400])return ct[400];var Gt=F_[et],bt=hm(ct,w1,Gt,et<400?-1:1);if(!bt)throw new Error("Could not find a matching font-weight for value "+et);return bt})(Yt.weight,Xe)))throw new Error("Failed to resolve a font for the rule '"+pm(Yt)+"'.");return Xe})(He,tt);this.pdf.setFont(rt.ref.name,rt.ref.style)}else{var ze="";(Le==="bold"||parseInt(Le,10)>=700||Je==="bold")&&(ze="bold"),Je==="italic"&&(ze+="italic"),ze.length===0&&(ze="normal");for(var Ke="",st={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ie=0;Ie<Te.length;Ie++){if(this.pdf.internal.getFont(Te[Ie],ze,{noFallback:!0,disableWarning:!0})!==void 0){Ke=Te[Ie];break}if(ze==="bolditalic"&&this.pdf.internal.getFont(Te[Ie],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ke=Te[Ie],ze="bold";else if(this.pdf.internal.getFont(Te[Ie],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ke=Te[Ie],ze="normal";break}}if(Ke===""){for(var at=0;at<Te.length;at++)if(st[Te[at]]){Ke=st[Te[at]];break}}Ke=Ke===""?"Times":Ke,this.pdf.setFont(Ke,ze)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(W){this.ctx.globalCompositeOperation=W}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(W){this.ctx.globalAlpha=W}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(W){this.ctx.lineDashOffset=W,re.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(W){this.ctx.lineDash=W,re.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(W){this.ctx.ignoreClearRect=!!W}})};g.prototype.setLineDash=function(P){this.lineDash=P},g.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},g.prototype.fill=function(){L.call(this,"fill",!1)},g.prototype.stroke=function(){L.call(this,"stroke",!1)},g.prototype.beginPath=function(){this.path=[{type:"begin"}]},g.prototype.moveTo=function(P,I){if(isNaN(P)||isNaN(I))throw Tt.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Y=this.ctx.transform.applyToPoint(new a(P,I));this.path.push({type:"mt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new a(P,I)},g.prototype.closePath=function(){var P=new a(0,0),I=0;for(I=this.path.length-1;I!==-1;I--)if(this.path[I].type==="begin"&&Ot(this.path[I+1])==="object"&&typeof this.path[I+1].x=="number"){P=new a(this.path[I+1].x,this.path[I+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(P.x,P.y)},g.prototype.lineTo=function(P,I){if(isNaN(P)||isNaN(I))throw Tt.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Y=this.ctx.transform.applyToPoint(new a(P,I));this.path.push({type:"lt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new a(Y.x,Y.y)},g.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),L.call(this,null,!0)},g.prototype.quadraticCurveTo=function(P,I,Y,ee){if(isNaN(Y)||isNaN(ee)||isNaN(P)||isNaN(I))throw Tt.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ie=this.ctx.transform.applyToPoint(new a(Y,ee)),ce=this.ctx.transform.applyToPoint(new a(P,I));this.path.push({type:"qct",x1:ce.x,y1:ce.y,x:ie.x,y:ie.y}),this.ctx.lastPoint=new a(ie.x,ie.y)},g.prototype.bezierCurveTo=function(P,I,Y,ee,ie,ce){if(isNaN(ie)||isNaN(ce)||isNaN(P)||isNaN(I)||isNaN(Y)||isNaN(ee))throw Tt.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var de=this.ctx.transform.applyToPoint(new a(ie,ce)),he=this.ctx.transform.applyToPoint(new a(P,I)),xe=this.ctx.transform.applyToPoint(new a(Y,ee));this.path.push({type:"bct",x1:he.x,y1:he.y,x2:xe.x,y2:xe.y,x:de.x,y:de.y}),this.ctx.lastPoint=new a(de.x,de.y)},g.prototype.arc=function(P,I,Y,ee,ie,ce){if(isNaN(P)||isNaN(I)||isNaN(Y)||isNaN(ee)||isNaN(ie))throw Tt.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ce=!!ce,!this.ctx.transform.isIdentity){var de=this.ctx.transform.applyToPoint(new a(P,I));P=de.x,I=de.y;var he=this.ctx.transform.applyToPoint(new a(0,Y)),xe=this.ctx.transform.applyToPoint(new a(0,0));Y=Math.sqrt(Math.pow(he.x-xe.x,2)+Math.pow(he.y-xe.y,2))}Math.abs(ie-ee)>=2*Math.PI&&(ee=0,ie=2*Math.PI),this.path.push({type:"arc",x:P,y:I,radius:Y,startAngle:ee,endAngle:ie,counterclockwise:ce})},g.prototype.arcTo=function(P,I,Y,ee,ie){throw new Error("arcTo not implemented.")},g.prototype.rect=function(P,I,Y,ee){if(isNaN(P)||isNaN(I)||isNaN(Y)||isNaN(ee))throw Tt.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,I),this.lineTo(P+Y,I),this.lineTo(P+Y,I+ee),this.lineTo(P,I+ee),this.lineTo(P,I),this.lineTo(P+Y,I),this.lineTo(P,I)},g.prototype.fillRect=function(P,I,Y,ee){if(isNaN(P)||isNaN(I)||isNaN(Y)||isNaN(ee))throw Tt.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var ie={};this.lineCap!=="butt"&&(ie.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ie.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,I,Y,ee),this.fill(),ie.hasOwnProperty("lineCap")&&(this.lineCap=ie.lineCap),ie.hasOwnProperty("lineJoin")&&(this.lineJoin=ie.lineJoin)}},g.prototype.strokeRect=function(P,I,Y,ee){if(isNaN(P)||isNaN(I)||isNaN(Y)||isNaN(ee))throw Tt.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");x.call(this)||(this.beginPath(),this.rect(P,I,Y,ee),this.stroke())},g.prototype.clearRect=function(P,I,Y,ee){if(isNaN(P)||isNaN(I)||isNaN(Y)||isNaN(ee))throw Tt.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,I,Y,ee))},g.prototype.save=function(P){P=typeof P!="boolean"||P;for(var I=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("q");if(this.pdf.setPage(I),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var ee=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ee}},g.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var I=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("Q");this.pdf.setPage(I),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},g.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(P){var I,Y,ee,ie;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))I=0,Y=0,ee=0,ie=0;else{var ce=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(ce!==null)I=parseInt(ce[1]),Y=parseInt(ce[2]),ee=parseInt(ce[3]),ie=1;else if((ce=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)I=parseInt(ce[1]),Y=parseInt(ce[2]),ee=parseInt(ce[3]),ie=parseFloat(ce[4]);else{if(ie=1,typeof P=="string"&&P.charAt(0)!=="#"){var de=new h1(P);P=de.ok?de.toHex():"#000000"}P.length===4?(I=P.substring(1,2),I+=I,Y=P.substring(2,3),Y+=Y,ee=P.substring(3,4),ee+=ee):(I=P.substring(1,3),Y=P.substring(3,5),ee=P.substring(5,7)),I=parseInt(I,16),Y=parseInt(Y,16),ee=parseInt(ee,16)}}return{r:I,g:Y,b:ee,a:ie,style:P}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},x=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};g.prototype.fillText=function(P,I,Y,ee){if(isNaN(I)||isNaN(Y)||typeof P!="string")throw Tt.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ee=isNaN(ee)?void 0:ee,!f.call(this)){var ie=se(this.ctx.transform.rotation),ce=this.ctx.transform.scaleX;C.call(this,{text:P,x:I,y:Y,scale:ce,angle:ie,align:this.textAlign,maxWidth:ee})}},g.prototype.strokeText=function(P,I,Y,ee){if(isNaN(I)||isNaN(Y)||typeof P!="string")throw Tt.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!x.call(this)){ee=isNaN(ee)?void 0:ee;var ie=se(this.ctx.transform.rotation),ce=this.ctx.transform.scaleX;C.call(this,{text:P,x:I,y:Y,scale:ce,renderingMode:"stroke",angle:ie,align:this.textAlign,maxWidth:ee})}},g.prototype.measureText=function(P){if(typeof P!="string")throw Tt.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var I=this.pdf,Y=this.pdf.internal.scaleFactor,ee=I.internal.getFontSize(),ie=I.getStringUnitWidth(P)*ee/I.internal.scaleFactor;return new function(ce){var de=(ce=ce||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return de}}),this}({width:ie*=Math.round(96*Y/72*1e4)/1e4})},g.prototype.scale=function(P,I){if(isNaN(P)||isNaN(I))throw Tt.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Y=new c(P,0,0,I,0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},g.prototype.rotate=function(P){if(isNaN(P))throw Tt.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var I=new c(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(I)},g.prototype.translate=function(P,I){if(isNaN(P)||isNaN(I))throw Tt.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Y=new c(1,0,0,1,P,I);this.ctx.transform=this.ctx.transform.multiply(Y)},g.prototype.transform=function(P,I,Y,ee,ie,ce){if(isNaN(P)||isNaN(I)||isNaN(Y)||isNaN(ee)||isNaN(ie)||isNaN(ce))throw Tt.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var de=new c(P,I,Y,ee,ie,ce);this.ctx.transform=this.ctx.transform.multiply(de)},g.prototype.setTransform=function(P,I,Y,ee,ie,ce){P=isNaN(P)?1:P,I=isNaN(I)?0:I,Y=isNaN(Y)?0:Y,ee=isNaN(ee)?1:ee,ie=isNaN(ie)?0:ie,ce=isNaN(ce)?0:ce,this.ctx.transform=new c(P,I,Y,ee,ie,ce)};var v=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};g.prototype.drawImage=function(P,I,Y,ee,ie,ce,de,he,xe){var pe=this.pdf.getImageProperties(P),Ae=1,Pe=1,Ee=1,W=1;ee!==void 0&&he!==void 0&&(Ee=he/ee,W=xe/ie,Ae=pe.width/ee*he/ee,Pe=pe.height/ie*xe/ie),ce===void 0&&(ce=I,de=Y,I=0,Y=0),ee!==void 0&&he===void 0&&(he=ee,xe=ie),ee===void 0&&he===void 0&&(he=pe.width,xe=pe.height);var je=this.ctx.transform.decompose(),Je=se(je.rotate.shx),Le=new c,ve=(Le=(Le=(Le=Le.multiply(je.translate)).multiply(je.skew)).multiply(je.scale)).applyToRectangle(new o(ce-I*Ee,de-Y*W,ee*Ae,ie*Pe));if(this.autoPaging){for(var We,De=y.call(this,ve),Te=[],He=0;He<De.length;He+=1)Te.indexOf(De[He])===-1&&Te.push(De[He]);D(Te);for(var tt=Te[0],rt=Te[Te.length-1],ze=tt;ze<rt+1;ze++){this.pdf.setPage(ze);var Ke=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],st=ze===1?this.posY+this.margin[0]:this.margin[0],Ie=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],at=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Re=ze===1?0:Ie+(ze-2)*at;if(this.ctx.clip_path.length!==0){var jt=this.path;We=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(We,this.posX+this.margin[3],-Re+st+this.ctx.prevPageLastElemOffset),q.call(this,"fill",!0),this.path=jt}var mt=JSON.parse(JSON.stringify(ve));mt=A([mt],this.posX+this.margin[3],-Re+st+this.ctx.prevPageLastElemOffset)[0];var ut=(ze>tt||ze<rt)&&v.call(this);ut&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ke,at,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",mt.x,mt.y,mt.w,mt.h,null,null,Je),ut&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(P,"JPEG",ve.x,ve.y,ve.w,ve.h,null,null,Je)};var y=function(P,I,Y){var ee=[];I=I||this.pdf.internal.pageSize.width,Y=Y||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ie=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":ee.push(Math.floor((P.y+ie)/Y)+1);break;case"arc":ee.push(Math.floor((P.y+ie-P.radius)/Y)+1),ee.push(Math.floor((P.y+ie+P.radius)/Y)+1);break;case"qct":var ce=K(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);ee.push(Math.floor((ce.y+ie)/Y)+1),ee.push(Math.floor((ce.y+ce.h+ie)/Y)+1);break;case"bct":var de=Q(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);ee.push(Math.floor((de.y+ie)/Y)+1),ee.push(Math.floor((de.y+de.h+ie)/Y)+1);break;case"rect":ee.push(Math.floor((P.y+ie)/Y)+1),ee.push(Math.floor((P.y+P.h+ie)/Y)+1)}for(var he=0;he<ee.length;he+=1)for(;this.pdf.internal.getNumberOfPages()<ee[he];)k.call(this);return ee},k=function(){var P=this.fillStyle,I=this.strokeStyle,Y=this.font,ee=this.lineCap,ie=this.lineWidth,ce=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=I,this.font=Y,this.lineCap=ee,this.lineWidth=ie,this.lineJoin=ce},A=function(P,I,Y){for(var ee=0;ee<P.length;ee++)switch(P[ee].type){case"bct":P[ee].x2+=I,P[ee].y2+=Y;case"qct":P[ee].x1+=I,P[ee].y1+=Y;default:P[ee].x+=I,P[ee].y+=Y}return P},D=function(P){return P.sort(function(I,Y){return I-Y})},L=function(P,I){var Y=this.fillStyle,ee=this.strokeStyle,ie=this.lineCap,ce=this.lineWidth,de=Math.abs(ce*this.ctx.transform.scaleX),he=this.lineJoin;if(this.autoPaging){for(var xe,pe,Ae=JSON.parse(JSON.stringify(this.path)),Pe=JSON.parse(JSON.stringify(this.path)),Ee=[],W=0;W<Pe.length;W++)if(Pe[W].x!==void 0)for(var je=y.call(this,Pe[W]),Je=0;Je<je.length;Je+=1)Ee.indexOf(je[Je])===-1&&Ee.push(je[Je]);for(var Le=0;Le<Ee.length;Le++)for(;this.pdf.internal.getNumberOfPages()<Ee[Le];)k.call(this);D(Ee);for(var ve=Ee[0],We=Ee[Ee.length-1],De=ve;De<We+1;De++){this.pdf.setPage(De),this.fillStyle=Y,this.strokeStyle=ee,this.lineCap=ie,this.lineWidth=de,this.lineJoin=he;var Te=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],He=De===1?this.posY+this.margin[0]:this.margin[0],tt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],rt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ze=De===1?0:tt+(De-2)*rt;if(this.ctx.clip_path.length!==0){var Ke=this.path;xe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(xe,this.posX+this.margin[3],-ze+He+this.ctx.prevPageLastElemOffset),q.call(this,P,!0),this.path=Ke}if(pe=JSON.parse(JSON.stringify(Ae)),this.path=A(pe,this.posX+this.margin[3],-ze+He+this.ctx.prevPageLastElemOffset),I===!1||De===0){var st=(De>ve||De<We)&&v.call(this);st&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Te,rt,null).clip().discardPath()),q.call(this,P,I),st&&this.pdf.restoreGraphicsState()}this.lineWidth=ce}this.path=Ae}else this.lineWidth=de,q.call(this,P,I),this.lineWidth=ce},q=function(P,I){if((P!=="stroke"||I||!x.call(this))&&(P==="stroke"||I||!f.call(this))){for(var Y,ee,ie=[],ce=this.path,de=0;de<ce.length;de++){var he=ce[de];switch(he.type){case"begin":ie.push({begin:!0});break;case"close":ie.push({close:!0});break;case"mt":ie.push({start:he,deltas:[],abs:[]});break;case"lt":var xe=ie.length;if(ce[de-1]&&!isNaN(ce[de-1].x)&&(Y=[he.x-ce[de-1].x,he.y-ce[de-1].y],xe>0)){for(;xe>=0;xe--)if(ie[xe-1].close!==!0&&ie[xe-1].begin!==!0){ie[xe-1].deltas.push(Y),ie[xe-1].abs.push(he);break}}break;case"bct":Y=[he.x1-ce[de-1].x,he.y1-ce[de-1].y,he.x2-ce[de-1].x,he.y2-ce[de-1].y,he.x-ce[de-1].x,he.y-ce[de-1].y],ie[ie.length-1].deltas.push(Y);break;case"qct":var pe=ce[de-1].x+2/3*(he.x1-ce[de-1].x),Ae=ce[de-1].y+2/3*(he.y1-ce[de-1].y),Pe=he.x+2/3*(he.x1-he.x),Ee=he.y+2/3*(he.y1-he.y),W=he.x,je=he.y;Y=[pe-ce[de-1].x,Ae-ce[de-1].y,Pe-ce[de-1].x,Ee-ce[de-1].y,W-ce[de-1].x,je-ce[de-1].y],ie[ie.length-1].deltas.push(Y);break;case"arc":ie.push({deltas:[],abs:[],arc:!0}),Array.isArray(ie[ie.length-1].abs)&&ie[ie.length-1].abs.push(he)}}ee=I?null:P==="stroke"?"stroke":"fill";for(var Je=!1,Le=0;Le<ie.length;Le++)if(ie[Le].arc)for(var ve=ie[Le].abs,We=0;We<ve.length;We++){var De=ve[We];De.type==="arc"?j.call(this,De.x,De.y,De.radius,De.startAngle,De.endAngle,De.counterclockwise,void 0,I,!Je):R.call(this,De.x,De.y),Je=!0}else if(ie[Le].close===!0)this.pdf.internal.out("h"),Je=!1;else if(ie[Le].begin!==!0){var Te=ie[Le].start.x,He=ie[Le].start.y;F.call(this,ie[Le].deltas,Te,He),Je=!0}ee&&_.call(this,ee),I&&M.call(this)}},z=function(P){var I=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Y=I*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-Y;case"top":return P+I-Y;case"hanging":return P+I-2*Y;case"middle":return P+I/2-Y;default:return P}},$=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};g.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(I,Y){this.colorStops.push([I,Y])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},g.prototype.createPattern=function(){return this.createLinearGradient()},g.prototype.createRadialGradient=function(){return this.createLinearGradient()};var j=function(P,I,Y,ee,ie,ce,de,he,xe){for(var pe=te.call(this,Y,ee,ie,ce),Ae=0;Ae<pe.length;Ae++){var Pe=pe[Ae];Ae===0&&(xe?S.call(this,Pe.x1+P,Pe.y1+I):R.call(this,Pe.x1+P,Pe.y1+I)),V.call(this,P,I,Pe.x2,Pe.y2,Pe.x3,Pe.y3,Pe.x4,Pe.y4)}he?M.call(this):_.call(this,de)},_=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},M=function(){this.pdf.clip(),this.pdf.discardPath()},S=function(P,I){this.pdf.internal.out(r(P)+" "+n(I)+" m")},C=function(P){var I;switch(P.align){case"right":case"end":I="right";break;case"center":I="center";break;default:I="left"}var Y,ee,ie,ce=this.pdf.getTextDimensions(P.text),de=z.call(this,P.y),he=$.call(this,de)-ce.h,xe=this.ctx.transform.applyToPoint(new a(P.x,de));if(this.autoPaging){var pe=this.ctx.transform.decompose(),Ae=new c;Ae=(Ae=(Ae=Ae.multiply(pe.translate)).multiply(pe.skew)).multiply(pe.scale);for(var Pe=this.ctx.transform.applyToRectangle(new o(P.x,de,ce.w,ce.h)),Ee=Ae.applyToRectangle(new o(P.x,he,ce.w,ce.h)),W=y.call(this,Ee),je=[],Je=0;Je<W.length;Je+=1)je.indexOf(W[Je])===-1&&je.push(W[Je]);D(je);for(var Le=je[0],ve=je[je.length-1],We=Le;We<ve+1;We++){this.pdf.setPage(We);var De=We===1?this.posY+this.margin[0]:this.margin[0],Te=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],He=this.pdf.internal.pageSize.height-this.margin[2],tt=He-this.margin[0],rt=this.pdf.internal.pageSize.width-this.margin[1],ze=rt-this.margin[3],Ke=We===1?0:Te+(We-2)*tt;if(this.ctx.clip_path.length!==0){var st=this.path;Y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(Y,this.posX+this.margin[3],-1*Ke+De),q.call(this,"fill",!0),this.path=st}var Ie=A([JSON.parse(JSON.stringify(Ee))],this.posX+this.margin[3],-Ke+De+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(ee=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ee*P.scale),ie=this.lineWidth,this.lineWidth=ie*P.scale);var at=this.autoPaging!=="text";if(at||Ie.y+Ie.h<=He){if(at||Ie.y>=De&&Ie.x<=rt){var Re=at?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||rt-Ie.x)[0],jt=A([JSON.parse(JSON.stringify(Pe))],this.posX+this.margin[3],-Ke+De+this.ctx.prevPageLastElemOffset)[0],mt=at&&(We>Le||We<ve)&&v.call(this);mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ze,tt,null).clip().discardPath()),this.pdf.text(Re,jt.x,jt.y,{angle:P.angle,align:I,renderingMode:P.renderingMode}),mt&&this.pdf.restoreGraphicsState()}}else Ie.y<He&&(this.ctx.prevPageLastElemOffset+=He-Ie.y);P.scale>=.01&&(this.pdf.setFontSize(ee),this.lineWidth=ie)}}else P.scale>=.01&&(ee=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ee*P.scale),ie=this.lineWidth,this.lineWidth=ie*P.scale),this.pdf.text(P.text,xe.x+this.posX,xe.y+this.posY,{angle:P.angle,align:I,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(ee),this.lineWidth=ie)},R=function(P,I,Y,ee){Y=Y||0,ee=ee||0,this.pdf.internal.out(r(P+Y)+" "+n(I+ee)+" l")},F=function(P,I,Y){return this.pdf.lines(P,I,Y,null,null)},V=function(P,I,Y,ee,ie,ce,de,he){this.pdf.internal.out([e(s(Y+P)),e(i(ee+I)),e(s(ie+P)),e(i(ce+I)),e(s(de+P)),e(i(he+I)),"c"].join(" "))},te=function(P,I,Y,ee){for(var ie=2*Math.PI,ce=Math.PI/2;I>Y;)I-=ie;var de=Math.abs(Y-I);de<ie&&ee&&(de=ie-de);for(var he=[],xe=ee?-1:1,pe=I;de>1e-5;){var Ae=pe+xe*Math.min(de,ce);he.push(ne.call(this,P,pe,Ae)),de-=Math.abs(Ae-pe),pe=Ae}return he},ne=function(P,I,Y){var ee=(Y-I)/2,ie=P*Math.cos(ee),ce=P*Math.sin(ee),de=ie,he=-ce,xe=de*de+he*he,pe=xe+de*ie+he*ce,Ae=4/3*(Math.sqrt(2*xe*pe)-pe)/(de*ce-he*ie),Pe=de-Ae*he,Ee=he+Ae*de,W=Pe,je=-Ee,Je=ee+I,Le=Math.cos(Je),ve=Math.sin(Je);return{x1:P*Math.cos(I),y1:P*Math.sin(I),x2:Pe*Le-Ee*ve,y2:Pe*ve+Ee*Le,x3:W*Le-je*ve,y3:W*ve+je*Le,x4:P*Math.cos(Y),y4:P*Math.sin(Y)}},se=function(P){return 180*P/Math.PI},K=function(P,I,Y,ee,ie,ce){var de=P+.5*(Y-P),he=I+.5*(ee-I),xe=ie+.5*(Y-ie),pe=ce+.5*(ee-ce),Ae=Math.min(P,ie,de,xe),Pe=Math.max(P,ie,de,xe),Ee=Math.min(I,ce,he,pe),W=Math.max(I,ce,he,pe);return new o(Ae,Ee,Pe-Ae,W-Ee)},Q=function(P,I,Y,ee,ie,ce,de,he){var xe,pe,Ae,Pe,Ee,W,je,Je,Le,ve,We,De,Te,He,tt=Y-P,rt=ee-I,ze=ie-Y,Ke=ce-ee,st=de-ie,Ie=he-ce;for(pe=0;pe<41;pe++)Le=(je=(Ae=P+(xe=pe/40)*tt)+xe*((Ee=Y+xe*ze)-Ae))+xe*(Ee+xe*(ie+xe*st-Ee)-je),ve=(Je=(Pe=I+xe*rt)+xe*((W=ee+xe*Ke)-Pe))+xe*(W+xe*(ce+xe*Ie-W)-Je),pe==0?(We=Le,De=ve,Te=Le,He=ve):(We=Math.min(We,Le),De=Math.min(De,ve),Te=Math.max(Te,Le),He=Math.max(He,ve));return new o(Math.round(We),Math.round(De),Math.round(Te-We),Math.round(He-De))},re=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,I,Y=(P=this.ctx.lineDash,I=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:I}));this.prevLineDash!==Y&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Y)}}})($e.API),(function(t){var e=function(a){var o,c,d,u,g,m,f,x,v,y;for(c=[],d=0,u=(a+=o="\0\0\0\0".slice(a.length%4||4)).length;u>d;d+=4)(g=(a.charCodeAt(d)<<24)+(a.charCodeAt(d+1)<<16)+(a.charCodeAt(d+2)<<8)+a.charCodeAt(d+3))!==0?(m=(g=((g=((g=((g=(g-(y=g%85))/85)-(v=g%85))/85)-(x=g%85))/85)-(f=g%85))/85)%85,c.push(m+33,f+33,x+33,v+33,y+33)):c.push(122);return(function(k,A){for(var D=A;D>0;D--)k.pop()})(c,o.length),String.fromCharCode.apply(String,c)+"~>"},r=function(a){var o,c,d,u,g,m=String,f="length",x=255,v="charCodeAt",y="slice",k="replace";for(a[y](-2),a=a[y](0,-2)[k](/\s/g,"")[k]("z","!!!!!"),d=[],u=0,g=(a+=o="uuuuu"[y](a[f]%5||5))[f];g>u;u+=5)c=52200625*(a[v](u)-33)+614125*(a[v](u+1)-33)+7225*(a[v](u+2)-33)+85*(a[v](u+3)-33)+(a[v](u+4)-33),d.push(x&c>>24,x&c>>16,x&c>>8,x&c);return(function(A,D){for(var L=D;L>0;L--)A.pop()})(d,o[f]),m.fromCharCode.apply(m,d)},n=function(a){return a.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},s=function(a){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),o.test(a)===!1)return"";for(var c="",d=0;d<a.length;d+=2)c+=String.fromCharCode("0x"+(a[d]+a[d+1]));return c},i=function(a){for(var o=new Uint8Array(a.length),c=a.length;c--;)o[c]=a.charCodeAt(c);return(o=Xu(o)).reduce(function(d,u){return d+String.fromCharCode(u)},"")};t.processDataByFilters=function(a,o){var c=0,d=a||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),c=0;c<o.length;c+=1)switch(o[c]){case"ASCII85Decode":case"/ASCII85Decode":d=r(d),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=e(d),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=s(d),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=n(d),u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=i(d),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[c]+'" is not implemented')}return{data:d,reverseChain:u.reverse().join(" ")}}})($e.API),(function(t){t.loadFile=function(e,r,n){return(function(s,i,a){i=i!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=(function(c,d,u){var g=new XMLHttpRequest,m=0,f=function(x){var v=x.length,y=[],k=String.fromCharCode;for(m=0;m<v;m+=1)y.push(k(255&x.charCodeAt(m)));return y.join("")};if(g.open("GET",c,!d),g.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(g.onload=function(){g.status===200?u(f(this.responseText)):u(void 0)}),g.send(null),d&&g.status===200)return f(g.responseText)})(s,i,a)}catch{}return o})(e,r,n)},t.loadImageFile=t.loadFile})($e.API),(function(t){function e(){return(nt.html2canvas?Promise.resolve(nt.html2canvas):Kd(()=>import("./html2canvas.esm-Ge7aVWlp.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(nt.DOMPurify?Promise.resolve(nt.DOMPurify):Kd(()=>import("./purify.es-C65SP4u9.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var c=Ot(o);return c==="undefined"?"undefined":c==="string"||o instanceof String?"string":c==="number"||o instanceof Number?"number":c==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":c==="object"?"object":"unknown"},s=function(o,c){var d=document.createElement(o);for(var u in c.className&&(d.className=c.className),c.innerHTML&&c.dompurify&&(d.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)d.style[u]=c.style[u];return d},i=function o(c,d){for(var u=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),g=c.firstChild;g;g=g.nextSibling)d!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||u.appendChild(o(g,d));return c.nodeType===1&&(c.nodeName==="CANVAS"?(u.width=c.width,u.height=c.height,u.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(u.value=c.value),u.addEventListener("load",function(){u.scrollTop=c.scrollTop,u.scrollLeft=c.scrollLeft},!0)),u},a=function o(c){var d=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),d);return(u=u.setProgress(1,o,1,[o])).set(c)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(o,c){return o.__proto__=c||a.prototype,o},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(o,c){return this.then(function(){switch(c=c||(function(d){switch(n(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(o),c){case"string":return this.then(r).then(function(d){return this.set({src:s("div",{innerHTML:o,dompurify:d})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},a.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(c){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,c(this.prop.container,d)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(c){var d=this.opt.jsPDF,u=this.opt.fontFaces,g=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,m=Object.assign({async:!0,allowTaint:!0,scale:g,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete m.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=u,u)for(var f=0;f<u.length;++f){var x=u[f],v=x.src.find(function(y){return y.format==="truetype"});v&&d.addFont(v.url,x.ref.name,x.ref.style)}return m.windowHeight=m.windowHeight||0,m.windowHeight=m.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):m.windowHeight,d.context2d.save(!0),c(this.prop.container,m)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(o,c,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(o,c):this.outputPdf(o,c)},a.prototype.outputPdf=function(o,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,c)})},a.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},a.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(o){if(n(o)!=="object")return this;var c=Object.keys(o||{}).map(function(d){if(d in a.template.prop)return function(){this.prop[d]=o[d]};switch(d){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[d]=o[d]}}},this);return this.then(function(){return this.thenList(c)})},a.prototype.get=function(o,c){return this.then(function(){var d=o in a.template.prop?this.prop[o]:this.opt[o];return c?c(d):d})},a.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},a.prototype.setPageSize=function(o){function c(d,u){return Math.floor(d*u/72*96)}return this.then(function(){(o=o||$e.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:c(o.inner.width,o.k),height:c(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},a.prototype.setProgress=function(o,c,d,u){return o!=null&&(this.progress.val=o),c!=null&&(this.progress.state=c),d!=null&&(this.progress.n=d),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(o,c,d,u){return this.setProgress(o?this.progress.val+o:null,c||null,d?this.progress.n+d:null,u?this.progress.stack.concat(u):null)},a.prototype.then=function(o,c){var d=this;return this.thenCore(o,c,function(u,g){return d.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(m){return d.updateProgress(null,u),m}).then(u,g).then(function(m){return d.updateProgress(1),m})})},a.prototype.thenCore=function(o,c,d){d=d||Promise.prototype.then;var u=this;o&&(o=o.bind(u)),c&&(c=c.bind(u));var g=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?u:a.convert(Object.assign({},u),Promise.prototype),m=d.call(g,o,c);return a.convert(m,u.__proto__)},a.prototype.thenExternal=function(o,c){return Promise.prototype.then.call(this,o,c)},a.prototype.thenList=function(o){var c=this;return o.forEach(function(d){c=c.thenCore(d)}),c},a.prototype.catch=function(o){o&&(o=o.bind(this));var c=Promise.prototype.catch.call(this,o);return a.convert(c,this)},a.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},a.prototype.error=function(o){return this.then(function(){throw new Error(o)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,$e.getPageSize=function(o,c,d){if(Ot(o)==="object"){var u=o;o=u.orientation,c=u.unit||c,d=u.format||d}c=c||"mm",d=d||"a4",o=(""+(o||"P")).toLowerCase();var g,m=(""+d).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":g=1;break;case"mm":g=72/25.4;break;case"cm":g=72/2.54;break;case"in":g=72;break;case"px":g=.75;break;case"pc":case"em":g=12;break;case"ex":g=6;break;default:throw"Invalid unit: "+c}var x,v=0,y=0;if(f.hasOwnProperty(m))v=f[m][1]/g,y=f[m][0]/g;else try{v=d[1],y=d[0]}catch{throw new Error("Invalid format: "+d)}if(o==="p"||o==="portrait")o="p",y>v&&(x=y,y=v,v=x);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",v>y&&(x=y,y=v,v=x)}return{width:y,height:v,unit:c,k:g,orientation:o}},t.html=function(o,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(gu):null;var d=new a(c);return c.worker?d:d.from(o).doCallback()}})($e.API),$e.API.addJS=function(t){return xm=t,this.internal.events.subscribe("postPutResources",function(){ac=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(ac+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),mm=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+xm+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){ac!==void 0&&mm!==void 0&&this.internal.out("/Names <</JavaScript "+ac+" 0 R>>")}),this},(function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),i=0;i<s.length;i++){var a=s[i],o=n.exec(a);if(o!=null){var c=o[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(a)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,u=[];for(i=0;i<d;i++){var g=r.internal.newObject();u.push(g);var m=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var f=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<u.length;i++)r.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+f+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,s,i){var a={title:s,options:i,children:[]};return n==null&&(n=this.root),n.children.push(a),a},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var s=0;s<n.children.length;s++)this.genIds_r(n.children[s])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var a=n.children[i];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var c=r.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var d=0;d<n.children.length;d++)this.renderItems(n.children[d])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,s){for(var i=0;i<s.children.length;i++)n.count++,this.count_r(n,s.children[i]);return n.count}}])})($e.API),(function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,s,i,a,o){var c,d=this.decode.DCT_DECODE,u=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=a||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,c=(function(g){for(var m,f=256*g.charCodeAt(4)+g.charCodeAt(5),x=g.length,v={width:0,height:0,numcomponents:1},y=4;y<x;y+=2){if(y+=f,e.indexOf(g.charCodeAt(y+1))!==-1){m=256*g.charCodeAt(y+5)+g.charCodeAt(y+6),v={width:256*g.charCodeAt(y+7)+g.charCodeAt(y+8),height:m,numcomponents:g.charCodeAt(y+9)};break}f=256*g.charCodeAt(y+2)+g.charCodeAt(y+3)}return v})(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),c.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}u={data:r,width:c.width,height:c.height,colorSpace:o,bitsPerComponent:8,filter:d,index:n,alias:s}}return u}})($e.API),$e.API.processPNG=function(t,e,r,n){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var s,i=v_(t,{checkCrc:!0}),a=i.width,o=i.height,c=i.channels,d=i.palette,u=i.depth;s=d&&c===1?(function(j){for(var _=j.width,M=j.height,S=j.data,C=j.palette,R=j.depth,F=!1,V=[],te=[],ne=void 0,se=!1,K=0,Q=0;Q<C.length;Q++){var re=wg(C[Q],4),P=re[0],I=re[1],Y=re[2],ee=re[3];V.push(P,I,Y),ee!=null&&(ee===0?(K++,te.length<1&&te.push(Q)):ee<255&&(se=!0))}if(se||K>1){F=!0,te=void 0;var ie=_*M;ne=new Uint8Array(ie);for(var ce=new DataView(S.buffer),de=0;de<ie;de++){var he=xu(ce,de,R),xe=wg(C[he],4)[3];ne[de]=xe}}else K===0&&(te=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:F?8:void 0,colorBytes:S,alphaBytes:ne,needSMask:F,palette:V,mask:te}})(i):c===2||c===4?(function(j){for(var _=j.data,M=j.width,S=j.height,C=j.channels,R=j.depth,F=C===2?"DeviceGray":"DeviceRGB",V=C-1,te=M*S,ne=V,se=te*ne,K=1*te,Q=Math.ceil(se*R/8),re=Math.ceil(K*R/8),P=new Uint8Array(Q),I=new Uint8Array(re),Y=new DataView(_.buffer),ee=new DataView(P.buffer),ie=new DataView(I.buffer),ce=!1,de=0;de<te;de++){for(var he=de*C,xe=0;xe<ne;xe++)Sm(ee,xu(Y,he+xe,R),de*ne+xe,R);var pe=xu(Y,he+ne,R);pe<(1<<R)-1&&(ce=!0),Sm(ie,pe,1*de,R)}return{colorSpace:F,colorsPerPixel:V,sMaskBitsPerComponent:ce?R:void 0,colorBytes:P,alphaBytes:I,needSMask:ce}})(i):(function(j){var _=j.data,M=j.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:M,colorsPerPixel:M==="DeviceGray"?1:3,colorBytes:_ instanceof Uint16Array?(function(S){for(var C=S.length,R=new Uint8Array(2*C),F=new DataView(R.buffer,R.byteOffset,R.byteLength),V=0;V<C;V++)F.setUint16(2*V,S[V],!1);return R})(_):_,needSMask:!1}})(i);var g,m,f,x=s,v=x.colorSpace,y=x.colorsPerPixel,k=x.sMaskBitsPerComponent,A=x.colorBytes,D=x.alphaBytes,L=x.needSMask,q=x.palette,z=x.mask,$=null;return n!==$e.API.image_compression.NONE&&typeof Xu=="function"?($=(function(j){var _;switch(j){case $e.API.image_compression.FAST:_=11;break;case $e.API.image_compression.MEDIUM:_=13;break;case $e.API.image_compression.SLOW:_=14;break;default:_=12}return _})(n),g=this.decode.FLATE_DECODE,m="/Predictor ".concat($," /Colors ").concat(y," /BitsPerComponent ").concat(u," /Columns ").concat(a),t=wm(A,Math.ceil(a*y*u/8),y,u,n),L&&(f=wm(D,Math.ceil(a*k/8),1,k,n))):(g=void 0,m=void 0,t=A,L&&(f=D)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(f&&this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),{alias:r,data:t,index:e,filter:g,decodeParameters:m,transparency:z,palette:q,sMask:f,predictor:$,width:a,height:o,bitsPerComponent:u,sMaskBitsPerComponent:k,colorSpace:v}}},(function(t){t.processGIF89A=function(e,r,n,s){var i=new U_(e),a=i.width,o=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:a,height:o},u=new bu(100).encode(d,100);return t.processJPEG.call(this,u,r,n,s)},t.processGIF87A=t.processGIF89A})($e.API),qn.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},qn.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){Tt.log("bit decode error:"+r)}},qn.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,s=0;s<e;s++)for(var i=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+8*s*4,o=0;o<8&&8*s+o<this.width;o++){var c=this.palette[i>>7-o&1];this.data[a+4*o]=c.blue,this.data[a+4*o+1]=c.green,this.data[a+4*o+2]=c.red,this.data[a+4*o+3]=255}r!==0&&(this.pos+=4-r)}},qn.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<t;s++){var i=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+2*s*4,o=i>>4,c=15&i,d=this.palette[o];if(this.data[a]=d.blue,this.data[a+1]=d.green,this.data[a+2]=d.red,this.data[a+3]=255,2*s+1>=this.width)break;d=this.palette[c],this.data[a+4]=d.blue,this.data[a+4+1]=d.green,this.data[a+4+2]=d.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},qn.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(s<this.palette.length){var a=this.palette[s];this.data[i]=a.red,this.data[i+1]=a.green,this.data[i+2]=a.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}t!==0&&(this.pos+=4-t)}},qn.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(i&e)/e*255|0,o=(i>>5&e)/e*255|0,c=(i>>10&e)/e*255|0,d=i>>15?255:0,u=n*this.width*4+4*s;this.data[u]=c,this.data[u+1]=o,this.data[u+2]=a,this.data[u+3]=d}this.pos+=t}},qn.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,c=(a>>5&r)/r*255|0,d=(a>>11)/e*255|0,u=s*this.width*4+4*i;this.data[u]=d,this.data[u+1]=c,this.data[u+2]=o,this.data[u+3]=255}this.pos+=t}},qn.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*r;this.data[a]=i,this.data[a+1]=s,this.data[a+2]=n,this.data[a+3]=255}this.pos+=this.width%4}},qn.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=i,this.data[o+1]=s,this.data[o+2]=n,this.data[o+3]=a}},qn.prototype.getData=function(){return this.data},(function(t){t.processBMP=function(e,r,n,s){var i=new qn(e,!1),a=i.width,o=i.height,c={data:i.getData(),width:a,height:o},d=new bu(100).encode(c,100);return t.processJPEG.call(this,d,r,n,s)}})($e.API),Cm.prototype.getData=function(){return this.data},(function(t){t.processWEBP=function(e,r,n,s){var i=new Cm(e),a=i.width,o=i.height,c={data:i.getData(),width:a,height:o},d=new bu(100).encode(c,100);return t.processJPEG.call(this,d,r,n,s)}})($e.API),$e.API.processRGBA=function(t,e,r){for(var n=t.data,s=n.length,i=new Uint8Array(s/4*3),a=new Uint8Array(s/4),o=0,c=0,d=0;d<s;d+=4){var u=n[d],g=n[d+1],m=n[d+2],f=n[d+3];i[o++]=u,i[o++]=g,i[o++]=m,a[c++]=f}var x=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:x,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},$e.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},ba=$e.API,oc=ba.getCharWidthsArray=function(t,e){var r,n,s=(e=e||{}).font||this.internal.getFont(),i=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:s.metadata.Unicode.widths,c=o.fof?o.fof:1,d=e.kerning?e.kerning:s.metadata.Unicode.kerning,u=d.fof?d.fof:1,g=e.doKerning!==!1,m=0,f=t.length,x=0,v=o[0]||c,y=[];for(r=0;r<f;r++)n=t.charCodeAt(r),typeof s.metadata.widthOfString=="function"?y.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(n))+a*(1e3/i)||0)/1e3):(m=g&&Ot(d[n])==="object"&&!isNaN(parseInt(d[n][x],10))?d[n][x]/u:0,y.push((o[n]||v)/c+m)),x=n;return y},bm=ba.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return ba.processArabic&&(t=ba.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,s)/r:oc.apply(this,arguments).reduce(function(i,a){return i+a},0)},ym=function(t,e,r,n){for(var s=[],i=0,a=t.length,o=0;i!==a&&o+e[i]<r;)o+=e[i],i++;s.push(t.slice(0,i));var c=i;for(o=0;i!==a;)o+e[i]>n&&(s.push(t.slice(c,i)),o=0,c=i),o+=e[i],i++;return c!==i&&s.push(t.slice(c,i)),s},vm=function(t,e,r){r||(r={});var n,s,i,a,o,c,d,u=[],g=[u],m=r.textIndent||0,f=0,x=0,v=t.split(" "),y=oc.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?v[0].length+2:r.lineIndent||0){var k=Array(c).join(" "),A=[];v.map(function(L){(L=L.split(/\s*\n/)).length>1?A=A.concat(L.map(function(q,z){return(z&&q.length?`
`:"")+q})):A.push(L[0])}),v=A,c=bm.apply(this,[k,r])}for(i=0,a=v.length;i<a;i++){var D=0;if(n=v[i],c&&n[0]==`
`&&(n=n.substr(1),D=1),m+f+(x=(s=oc.apply(this,[n,r])).reduce(function(L,q){return L+q},0))>e||D){if(x>e){for(o=ym.apply(this,[n,s,e-(m+f),e]),u.push(o.shift()),u=[o.pop()];o.length;)g.push([o.shift()]);x=s.slice(n.length-(u[0]?u[0].length:0)).reduce(function(L,q){return L+q},0)}else u=[n];g.push(u),m=x+c,f=y}else u.push(n),m+=f+x,f=y}return d=c?function(L,q){return(q?k:"")+L.join(" ")}:function(L){return L.join(" ")},g.map(d)},ba.splitTextToSize=function(t,e,r){var n,s=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var g=this.internal.getFont(u.fontName,u.fontStyle),m="Unicode";return g.metadata[m]?{widths:g.metadata[m].widths||{0:1},kerning:g.metadata[m].kerning||{}}:{font:g.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/s;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=r.lineIndent;var o,c,d=[];for(o=0,c=n.length;o<c;o++)d=d.concat(vm.apply(this,[n[o],a,i]));return d},(function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",r="klmnopqrstuvwxyz",n={},s={},i=0;i<16;i++)n[r[i]]=e[i],s[e[i]]=r[i];var a=function(m){return"0x"+parseInt(m,10).toString(16)},o=t.__fontmetrics__.compress=function(m){var f,x,v,y,k=["{"];for(var A in m){if(f=m[A],isNaN(parseInt(A,10))?x="'"+A+"'":(A=parseInt(A,10),x=(x=a(A).slice(2)).slice(0,-1)+s[x.slice(-1)]),typeof f=="number")f<0?(v=a(f).slice(3),y="-"):(v=a(f).slice(2),y=""),v=y+v.slice(0,-1)+s[v.slice(-1)];else{if(Ot(f)!=="object")throw new Error("Don't know what to do with value type "+Ot(f)+".");v=o(f)}k.push(x+v)}return k.push("}"),k.join("")},c=t.__fontmetrics__.uncompress=function(m){if(typeof m!="string")throw new Error("Invalid argument passed to uncompress.");for(var f,x,v,y,k={},A=1,D=k,L=[],q="",z="",$=m.length-1,j=1;j<$;j+=1)(y=m[j])=="'"?f?(v=f.join(""),f=void 0):f=[]:f?f.push(y):y=="{"?(L.push([D,v]),D={},v=void 0):y=="}"?((x=L.pop())[0][x[1]]=D,v=void 0,D=x[0]):y=="-"?A=-1:v===void 0?n.hasOwnProperty(y)?(q+=n[y],v=parseInt(q,16)*A,A=1,q=""):q+=y:n.hasOwnProperty(y)?(z+=n[y],D[v]=parseInt(z,16)*A,A=1,v=void 0,z=""):z+=y;return k},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},g={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(m){var f=m.font,x=g.Unicode[f.postScriptName];x&&(f.metadata.Unicode={},f.metadata.Unicode.widths=x.widths,f.metadata.Unicode.kerning=x.kerning);var v=u.Unicode[f.postScriptName];v&&(f.metadata.Unicode.encoding=v,f.encoding=v.codePages[0])}])})($e.API),(function(t){var e=function(r){for(var n=r.length,s=new Uint8Array(n),i=0;i<n;i++)s[i]=r.charCodeAt(i);return s};t.API.events.push(["addFont",function(r){var n=void 0,s=r.font,i=r.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(n=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(mc(o)),a.metadata=t.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(s,n)}}])})($e),$e.API.addSvgAsImage=function(t,e,r,n,s,i,a,o){if(isNaN(e)||isNaN(r))throw Tt.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(s))throw Tt.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=s;var d=c.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,c.width,c.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return(nt.canvg?Promise.resolve(nt.canvg):Kd(()=>import("./index.es-BP6Y0MBi.js"),__vite__mapDeps([0,1,2,3]))).catch(function(m){return Promise.reject(new Error("Could not load canvg: "+m))}).then(function(m){return m.default?m.default:m}).then(function(m){return m.fromString(d,t,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(m){return m.render(u)}).then(function(){g.addImage(c.toDataURL("image/jpeg",1),e,r,n,s,a,o)})},$e.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var s=0;s<this.internal.pages[n].length;s++)this.internal.pages[n][s]=this.internal.pages[n][s].replace(e,r);return this},$e.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,s,i,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),c=[],d=0,u=0,g=0;function m(x,v){var y,k=!1;for(y=0;y<x.length;y+=1)x[y]===v&&(k=!0);return k}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var f=o.length;for(g=0;g<f;g+=1)r[o[g]].value=r[o[g]].defaultValue,r[o[g]].explicitSet=!1}if(Ot(t)==="object"){for(s in t)if(i=t[s],m(o,s)&&i!==void 0){if(r[s].type==="boolean"&&typeof i=="boolean")r[s].value=i;else if(r[s].type==="name"&&m(r[s].valueSet,i))r[s].value=i;else if(r[s].type==="integer"&&Number.isInteger(i))r[s].value=i;else if(r[s].type==="array"){for(d=0;d<i.length;d+=1)if(n=!0,i[d].length===1&&typeof i[d][0]=="number")c.push(String(i[d]-1));else if(i[d].length>1){for(u=0;u<i[d].length;u+=1)typeof i[d][u]!="number"&&(n=!1);n===!0&&c.push([i[d][0]-1,i[d][1]-1].join(" "))}r[s].value="["+c.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var x,v=[];for(x in r)r[x].explicitSet===!0&&(r[x].type==="name"?v.push("/"+x+" /"+r[x].value):v.push("/"+x+" "+r[x].value));v.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+v.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},(function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=i.length+a.length+o.length+s.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(s+i+a+o+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}})($e.API),(function(t){var e=t.API,r=e.pdfEscape16=function(i,a){for(var o,c=a.metadata.Unicode.widths,d=["","0","00","000","0000"],u=[""],g=0,m=i.length;g<m;++g){if(o=a.metadata.characterToGlyph(i.charCodeAt(g)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=i.charCodeAt(g),c.indexOf(o)==-1&&(c.push(o),c.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return u.join("");o=o.toString(16),u.push(d[4-o.length],o)}return u.join("")},n=function(i){var a,o,c,d,u,g,m;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],g=0,m=(o=Object.keys(i).sort(function(f,x){return f-x})).length;g<m;g++)a=o[g],c.length>=100&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[a]!==void 0&&i[a]!==null&&typeof i[a].toString=="function"&&(d=("0000"+i[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),c.push("<"+a+"><"+d+">"));return c.length&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),u+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(i){(function(a){var o=a.font,c=a.out,d=a.newObject,u=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var g=o.metadata.Unicode.widths,m=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),f="",x=0;x<m.length;x++)f+=String.fromCharCode(m[x]);var v=d();u({data:f,addLength1:!0,objectId:v}),c("endobj");var y=d();u({data:n(o.metadata.toUnicode),addLength1:!0,objectId:y}),c("endobj");var k=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+va(o.fontName)),c("/FontFile2 "+v+" 0 R"),c("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),c("/Flags "+o.metadata.flags),c("/StemV "+o.metadata.stemV),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c(">>"),c("endobj");var A=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+va(o.fontName)),c("/FontDescriptor "+k+" 0 R"),c("/W "+t.API.PDFObject.convert(g)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+o.encoding+")"),c(">>"),c(">>"),c("endobj"),o.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+y+" 0 R"),c("/BaseFont /"+va(o.fontName)),c("/Encoding /"+o.encoding),c("/DescendantFonts ["+A+" 0 R]"),c(">>"),c("endobj"),o.isAlreadyPutted=!0}})(i)}]),e.events.push(["putFont",function(i){(function(a){var o=a.font,c=a.out,d=a.newObject,u=a.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var g=o.metadata.rawData,m="",f=0;f<g.length;f++)m+=String.fromCharCode(g[f]);var x=d();u({data:m,addLength1:!0,objectId:x}),c("endobj");var v=d();u({data:n(o.metadata.toUnicode),addLength1:!0,objectId:v}),c("endobj");var y=d();c("<<"),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c("/StemV "+o.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+x+" 0 R"),c("/Flags 96"),c("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),c("/FontName /"+va(o.fontName)),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c(">>"),c("endobj"),o.objectNumber=d();for(var k=0;k<o.metadata.hmtx.widths.length;k++)o.metadata.hmtx.widths[k]=parseInt(o.metadata.hmtx.widths[k]*(1e3/o.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+v+" 0 R/BaseFont/"+va(o.fontName)+"/FontDescriptor "+y+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),c("endobj"),o.isAlreadyPutted=!0}})(i)}]);var s=function(i){var a,o=i.text||"",c=i.x,d=i.y,u=i.options||{},g=i.mutex||{},m=g.pdfEscape,f=g.activeFontKey,x=g.fonts,v=f,y="",k=0,A="",D=x[v].encoding;if(x[v].encoding!=="Identity-H")return{text:o,x:c,y:d,options:u,mutex:g};for(A=o,v=f,Array.isArray(o)&&(A=o[0]),k=0;k<A.length;k+=1)x[v].metadata.hasOwnProperty("cmap")&&(a=x[v].metadata.cmap.unicode.codeMap[A[k].charCodeAt(0)]),a||A[k].charCodeAt(0)<256&&x[v].metadata.hasOwnProperty("Unicode")?y+=A[k]:y+="";var L="";return parseInt(v.slice(1))<14||D==="WinAnsiEncoding"?L=m(y,v).split("").map(function(q){return q.charCodeAt(0).toString(16)}).join(""):D==="Identity-H"&&(L=r(y,x[v])),g.isHex=!0,{text:L,x:c,y:d,options:u,mutex:g}};e.events.push(["postProcessText",function(i){var a=i.text||"",o=[],c={text:a,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(a)){var d=0;for(d=0;d<a.length;d+=1)Array.isArray(a[d])&&a[d].length===3?o.push([s(Object.assign({},c,{text:a[d][0]})).text,a[d][1],a[d][2]]):o.push(s(Object.assign({},c,{text:a[d]})).text);i.text=o}else i.text=s(Object.assign({},c,{text:a})).text}])})($e),(function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}})($e.API),(function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var s,i,a,o,c,d,u,g=e,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],x={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},v={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},y=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],k=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),A=!1,D=0;this.__bidiEngine__={};var L=function(S){var C=S.charCodeAt(),R=C>>8,F=v[R];return F!==void 0?g[256*F+(255&C)]:R===252||R===253?"AL":k.test(R)?"L":R===8?"R":"N"},q=function(S){for(var C,R=0;R<S.length;R++){if((C=L(S.charAt(R)))==="L")return!1;if(C==="R")return!0}return!1},z=function(S,C,R,F){var V,te,ne,se,K=C[F];switch(K){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":A=!1;break;case"N":case"AN":break;case"EN":A&&(K="AN");break;case"AL":A=!0,K="R";break;case"WS":case"BN":K="N";break;case"CS":F<1||F+1>=C.length||(V=R[F-1])!=="EN"&&V!=="AN"||(te=C[F+1])!=="EN"&&te!=="AN"?K="N":A&&(te="AN"),K=te===V?te:"N";break;case"ES":K=(V=F>0?R[F-1]:"B")==="EN"&&F+1<C.length&&C[F+1]==="EN"?"EN":"N";break;case"ET":if(F>0&&R[F-1]==="EN"){K="EN";break}if(A){K="N";break}for(ne=F+1,se=C.length;ne<se&&C[ne]==="ET";)ne++;K=ne<se&&C[ne]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(se=C.length,ne=F+1;ne<se&&C[ne]==="NSM";)ne++;if(ne<se){var Q=S[F],re=Q>=1425&&Q<=2303||Q===64286;if(V=C[ne],re&&(V==="R"||V==="AL")){K="R";break}}}K=F<1||(V=C[F-1])==="B"?"N":R[F-1];break;case"B":A=!1,s=!0,K=D;break;case"S":i=!0,K="N"}return K},$=function(S,C,R){var F=S.split("");return R&&j(F,R,{hiLevel:D}),F.reverse(),C&&C.reverse(),F.join("")},j=function(S,C,R){var F,V,te,ne,se,K=-1,Q=S.length,re=0,P=[],I=D?f:m,Y=[];for(A=!1,s=!1,i=!1,V=0;V<Q;V++)Y[V]=L(S[V]);for(te=0;te<Q;te++){if(se=re,P[te]=z(S,Y,P,te),F=240&(re=I[se][x[P[te]]]),re&=15,C[te]=ne=I[re][5],F>0)if(F===16){for(V=K;V<te;V++)C[V]=1;K=-1}else K=-1;if(I[re][6])K===-1&&(K=te);else if(K>-1){for(V=K;V<te;V++)C[V]=ne;K=-1}Y[te]==="B"&&(C[te]=0),R.hiLevel|=ne}i&&(function(ee,ie,ce){for(var de=0;de<ce;de++)if(ee[de]==="S"){ie[de]=D;for(var he=de-1;he>=0&&ee[he]==="WS";he--)ie[he]=D}})(Y,C,Q)},_=function(S,C,R,F,V){if(!(V.hiLevel<S)){if(S===1&&D===1&&!s)return C.reverse(),void(R&&R.reverse());for(var te,ne,se,K,Q=C.length,re=0;re<Q;){if(F[re]>=S){for(se=re+1;se<Q&&F[se]>=S;)se++;for(K=re,ne=se-1;K<ne;K++,ne--)te=C[K],C[K]=C[ne],C[ne]=te,R&&(te=R[K],R[K]=R[ne],R[ne]=te);re=se}re++}}},M=function(S,C,R){var F=S.split(""),V={hiLevel:D};return R||(R=[]),j(F,R,V),(function(te,ne,se){if(se.hiLevel!==0&&u)for(var K,Q=0;Q<te.length;Q++)ne[Q]===1&&(K=y.indexOf(te[Q]))>=0&&(te[Q]=y[K+1])})(F,R,V),_(2,F,C,R,V),_(1,F,C,R,V),F.join("")};return this.__bidiEngine__.doBidiReorder=function(S,C,R){if((function(V,te){if(te)for(var ne=0;ne<V.length;ne++)te[ne]=ne;o===void 0&&(o=q(V)),d===void 0&&(d=q(V))})(S,C),a||!c||d)if(a&&c&&o^d)D=o?1:0,S=$(S,C,R);else if(!a&&c&&d)D=o?1:0,S=M(S,C,R),S=$(S,C);else if(!a||o||c||d){if(a&&!c&&o^d)S=$(S,C),o?(D=0,S=M(S,C,R)):(D=1,S=M(S,C,R),S=$(S,C));else if(a&&o&&!c&&d)D=1,S=M(S,C,R),S=$(S,C);else if(!a&&!c&&o^d){var F=u;o?(D=1,S=M(S,C,R),D=0,u=!1,S=M(S,C,R),u=F):(D=0,S=M(S,C,R),S=$(S,C),D=1,u=!1,S=M(S,C,R),u=F,S=$(S,C))}}else D=0,S=M(S,C,R);else D=o?1:0,S=M(S,C,R);return S},this.__bidiEngine__.setOptions=function(S){S&&(a=S.isInputVisual,c=S.isOutputVisual,o=S.isInputRtl,d=S.isOutputRtl,u=S.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var s=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var a=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var o=0;for(a=[],o=0;o<s.length;o+=1)Object.prototype.toString.call(s[o])==="[object Array]"?a.push([r.doBidiReorder(s[o][0]),s[o][1],s[o][2]]):a.push([r.doBidiReorder(s[o])]);n.text=a}else n.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])})($e),$e.API.TTFFont=(function(){function t(e){var r;if(this.rawData=e,r=this.contents=new fi(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new rS(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new q_(this.contents),this.head=new H_(this),this.name=new X_(this),this.cmap=new N1(this),this.toUnicode={},this.hhea=new V_(this),this.maxp=new J_(this),this.hmtx=new K_(this),this.post=new Y_(this),this.os2=new $_(this),this.loca=new tS(this),this.glyf=new Z_(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,c,d;for(d=[],a=0,o=(c=this.bbox).length;a<o;a++)e=c[a],d.push(Math.round(e*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(n=255&(s=this.post.italic_angle),32768&(r=s>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var s,i,a,o;for(a=0,i=0,o=(e=""+e).length;0<=o?i<o:i>o;i=0<=o?++i:--i)s=e.charCodeAt(i),a+=this.widthOfGlyph(this.characterToGlyph(s))+n*(1e3/r)||0;return a*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t})();var Gn,fi=(function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,s;for(s=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)s.push(this.writeByte(e.charCodeAt(r)));return s},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,s,i,a,o,c;return e=this.readByte(),r=this.readByte(),n=this.readByte(),s=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^s)+16777216*(255^i)+65536*(255^a)+256*(255^o)+(255^c)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*s+16777216*i+65536*a+256*o+c},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,s,i;for(i=[],n=0,s=e.length;n<s;n++)r=e[n],i.push(this.writeByte(r));return i},t})(),q_=(function(){var t;function e(r){var n,s,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,s,i,a,o,c,d,u,g,m,f,x,v;for(v in f=Object.keys(r).length,c=Math.log(2),g=16*Math.floor(Math.log(f)/c),a=Math.floor(g/c),u=16*f-g,(s=new fi).writeInt(this.scalarType),s.writeShort(f),s.writeShort(g),s.writeShort(a),s.writeShort(u),i=16*f,d=s.pos+i,o=null,x=[],r)for(m=r[v],s.writeString(v),s.writeInt(t(m)),s.writeInt(d),s.writeInt(m.length),x=x.concat(m),v==="head"&&(o=d),d+=m.length;d%4;)x.push(0),d++;return s.write(x),n=2981146554-t(s.data),s.pos=o+8,s.writeUInt32(n),s.data},t=function(r){var n,s,i,a;for(r=j1.call(r);r.length%4;)r.push(0);for(i=new fi(r),s=0,n=0,a=r.length;n<a;n=n+=4)s+=i.readUInt32();return 4294967295&s},e})(),W_={}.hasOwnProperty,fs=function(t,e){for(var r in e)W_.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Gn=(function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t})();var H_=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return fs(t,Gn),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var r;return(r=new fi).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(e),r.writeShort(this.glyphDataFormat),r.data},t})(),Pm=(function(){function t(e,r){var n,s,i,a,o,c,d,u,g,m,f,x,v,y,k,A,D;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),g=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(f=e.readUInt16(),m=f/2,e.pos+=6,i=(function(){var L,q;for(q=[],c=L=0;0<=m?L<m:L>m;c=0<=m?++L:--L)q.push(e.readUInt16());return q})(),e.pos+=2,v=(function(){var L,q;for(q=[],c=L=0;0<=m?L<m:L>m;c=0<=m?++L:--L)q.push(e.readUInt16());return q})(),d=(function(){var L,q;for(q=[],c=L=0;0<=m?L<m:L>m;c=0<=m?++L:--L)q.push(e.readUInt16());return q})(),u=(function(){var L,q;for(q=[],c=L=0;0<=m?L<m:L>m;c=0<=m?++L:--L)q.push(e.readUInt16());return q})(),s=(this.length-e.pos+this.offset)/2,o=(function(){var L,q;for(q=[],c=L=0;0<=s?L<s:L>s;c=0<=s?++L:--L)q.push(e.readUInt16());return q})(),c=k=0,D=i.length;k<D;c=++k)for(y=i[c],n=A=x=v[c];x<=y?A<=y:A>=y;n=x<=y?++A:--A)u[c]===0?a=n+d[c]:(a=o[u[c]/2+(n-x)-(m-c)]||0)!==0&&(a+=d[c]),this.codeMap[n]=65535&a}e.pos=g}return t.encode=function(e,r){var n,s,i,a,o,c,d,u,g,m,f,x,v,y,k,A,D,L,q,z,$,j,_,M,S,C,R,F,V,te,ne,se,K,Q,re,P,I,Y,ee,ie,ce,de,he,xe,pe,Ae;switch(F=new fi,a=Object.keys(e).sort(function(Pe,Ee){return Pe-Ee}),r){case"macroman":for(v=0,y=(function(){var Pe=[];for(x=0;x<256;++x)Pe.push(0);return Pe})(),A={0:0},i={},V=0,K=a.length;V<K;V++)A[he=e[s=a[V]]]==null&&(A[he]=++v),i[s]={old:e[s],new:A[e[s]]},y[s]=A[e[s]];return F.writeUInt16(1),F.writeUInt16(0),F.writeUInt32(12),F.writeUInt16(0),F.writeUInt16(262),F.writeUInt16(0),F.write(y),{charMap:i,subtable:F.data,maxGlyphID:v+1};case"unicode":for(C=[],g=[],D=0,A={},n={},k=d=null,te=0,Q=a.length;te<Q;te++)A[q=e[s=a[te]]]==null&&(A[q]=++D),n[s]={old:q,new:A[q]},o=A[q]-s,k!=null&&o===d||(k&&g.push(k),C.push(s),d=o),k=s;for(k&&g.push(k),g.push(65535),C.push(65535),M=2*(_=C.length),j=2*Math.pow(Math.log(_)/Math.LN2,2),m=Math.log(j/2)/Math.LN2,$=2*_-j,c=[],z=[],f=[],x=ne=0,re=C.length;ne<re;x=++ne){if(S=C[x],u=g[x],S===65535){c.push(0),z.push(0);break}if(S-(R=n[S].new)>=32768)for(c.push(0),z.push(2*(f.length+_-x)),s=se=S;S<=u?se<=u:se>=u;s=S<=u?++se:--se)f.push(n[s].new);else c.push(R-S),z.push(0)}for(F.writeUInt16(3),F.writeUInt16(1),F.writeUInt32(12),F.writeUInt16(4),F.writeUInt16(16+8*_+2*f.length),F.writeUInt16(0),F.writeUInt16(M),F.writeUInt16(j),F.writeUInt16(m),F.writeUInt16($),ce=0,P=g.length;ce<P;ce++)s=g[ce],F.writeUInt16(s);for(F.writeUInt16(0),de=0,I=C.length;de<I;de++)s=C[de],F.writeUInt16(s);for(xe=0,Y=c.length;xe<Y;xe++)o=c[xe],F.writeUInt16(o);for(pe=0,ee=z.length;pe<ee;pe++)L=z[pe],F.writeUInt16(L);for(Ae=0,ie=f.length;Ae<ie;Ae++)v=f[Ae],F.writeUInt16(v);return{charMap:n,subtable:F.data,maxGlyphID:D+1}}},t})(),N1=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return fs(t,Gn),t.prototype.tag="cmap",t.prototype.parse=function(e){var r,n,s;for(e.pos=this.offset,this.version=e.readUInt16(),s=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=s?n<s:n>s;n=0<=s?++n:--n)r=new Pm(e,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(e,r){var n,s;return r==null&&(r="macroman"),n=Pm.encode(e,r),(s=new fi).writeUInt16(0),s.writeUInt16(1),n.table=s.data.concat(n.subtable),n},t})(),V_=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return fs(t,Gn),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t})(),$_=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return fs(t,Gn),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var r,n;for(n=[],r=0;r<10;++r)n.push(e.readByte());return n})(),this.charRange=(function(){var r,n;for(n=[],r=0;r<4;++r)n.push(e.readInt());return n})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(e.readInt());return n})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t})(),Y_=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return fs(t,Gn),t.prototype.tag="post",t.prototype.parse=function(e){var r,n,s;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(n=e.readUInt16(),this.glyphNameIndex=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],s=[];e.pos<this.offset+this.length;)r=e.readByte(),s.push(this.names.push(e.readString(r)));return s;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var a,o,c;for(c=[],i=a=0,o=this.file.maxp.numGlyphs;0<=o?a<o:a>o;i=0<=o?++a:--a)c.push(e.readUInt32());return c}).call(this)}},t})(),G_=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},X_=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return fs(t,Gn),t.prototype.tag="name",t.prototype.parse=function(e){var r,n,s,i,a,o,c,d,u,g,m;for(e.pos=this.offset,e.readShort(),r=e.readShort(),o=e.readShort(),n=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+o+e.readShort()});for(c={},i=u=0,g=n.length;u<g;i=++u)s=n[i],e.pos=s.offset,d=e.readString(s.length),a=new G_(d,s),c[m=s.nameID]==null&&(c[m]=[]),c[s.nameID].push(a);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},t})(),J_=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return fs(t,Gn),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t})(),K_=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return fs(t,Gn),t.prototype.tag="hmtx",t.prototype.parse=function(e){var r,n,s,i,a,o,c;for(e.pos=this.offset,this.metrics=[],r=0,o=this.file.hhea.numberOfMetrics;0<=o?r<o:r>o;r=0<=o?++r:--r)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var d,u;for(u=[],r=d=0;0<=s?d<s:d>s;r=0<=s?++d:--d)u.push(e.readInt16());return u})(),this.widths=(function(){var d,u,g,m;for(m=[],d=0,u=(g=this.metrics).length;d<u;d++)i=g[d],m.push(i.advance);return m}).call(this),n=this.widths[this.widths.length-1],c=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)c.push(this.widths.push(n));return c},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t})(),j1=[].slice,Z_=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return fs(t,Gn),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var r,n,s,i,a,o,c,d,u,g;return e in this.cache?this.cache[e]:(i=this.file.loca,r=this.file.contents,n=i.indexOf(e),(s=i.lengthOf(e))===0?this.cache[e]=null:(r.pos=this.offset+n,a=(o=new fi(r.read(s))).readShort(),d=o.readShort(),g=o.readShort(),c=o.readShort(),u=o.readShort(),this.cache[e]=a===-1?new eS(o,d,g,c,u):new Q_(o,a,d,g,c,u),this.cache[e]))},t.prototype.encode=function(e,r,n){var s,i,a,o,c;for(a=[],i=[],o=0,c=r.length;o<c;o++)s=e[r[o]],i.push(a.length),s&&(a=a.concat(s.encode(n)));return i.push(a.length),{table:a,offsets:i}},t})(),Q_=(function(){function t(e,r,n,s,i,a){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=s,this.xMax=i,this.yMax=a,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t})(),eS=(function(){function t(e,r,n,s,i){var a,o;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new fi(j1.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t})(),tS=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return fs(t,Gn),t.prototype.tag="loca",t.prototype.parse=function(e){var r,n;return e.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,i;for(i=[],n=0,s=this.length;n<s;n+=2)i.push(2*e.readUInt16());return i}).call(this):(function(){var s,i;for(i=[],n=0,s=this.length;n<s;n+=4)i.push(e.readUInt32());return i}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,r){for(var n=new Uint32Array(this.offsets.length),s=0,i=0,a=0;a<n.length;++a)if(n[a]=s,i<r.length&&r[i]==a){++i,n[a]=s;var o=this.offsets[a],c=this.offsets[a+1]-o;c>0&&(s+=c)}for(var d=new Array(4*n.length),u=0;u<n.length;++u)d[4*u+3]=255&n[u],d[4*u+2]=(65280&n[u])>>8,d[4*u+1]=(16711680&n[u])>>16,d[4*u]=(4278190080&n[u])>>24;return d},t})(),rS=(function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,s,i;for(r in s=this.font.cmap.tables[0].codeMap,e={},i=this.subset)n=i[r],e[r]=s[n];return e},t.prototype.glyphsFor=function(e){var r,n,s,i,a,o,c;for(s={},a=0,o=e.length;a<o;a++)s[i=e[a]]=this.font.glyf.glyphFor(i);for(i in r=[],s)(n=s[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in c=this.glyphsFor(r))n=c[i],s[i]=n;return s},t.prototype.encode=function(e,r){var n,s,i,a,o,c,d,u,g,m,f,x,v,y,k;for(s in n=N1.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),f={0:0},k=n.charMap)f[(c=k[s]).old]=c.new;for(x in m=n.maxGlyphID,a)x in f||(f[x]=m++);return u=(function(A){var D,L;for(D in L={},A)L[A[D]]=D;return L})(f),g=Object.keys(u).sort(function(A,D){return A-D}),v=(function(){var A,D,L;for(L=[],A=0,D=g.length;A<D;A++)o=g[A],L.push(u[o]);return L})(),i=this.font.glyf.encode(a,v,f),d=this.font.loca.encode(i.offsets,v),y={cmap:this.font.cmap.raw(),glyf:i.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(y["OS/2"]=this.font.os2.raw()),this.font.directory.encode(y)},t})();$e.API.PDFObject=(function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,s,i,a;if(Array.isArray(r))return"["+(function(){var o,c,d;for(d=[],o=0,c=r.length;o<c;o++)n=r[o],d.push(e.convert(n));return d})().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in i=["<<"],r)a=r[s],i.push("/"+s+" "+e.convert(a));return i.push(">>"),i.join(`
`)}return""+r},e})();function _1(t,e,r,n,s){n=n||{};var i=1.15,a=s.internal.scaleFactor,o=s.internal.getFontSize()/a,c=s.getLineHeightFactor?s.getLineHeightFactor():i,d=o*c,u=/\r\n|\r|\n/g,g="",m=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(g=typeof t=="string"?t.split(u):t,m=g.length||1),r+=o*(2-i),n.valign==="middle"?r-=m/2*d:n.valign==="bottom"&&(r-=m*d),n.halign==="center"||n.halign==="right"){var f=o;if(n.halign==="center"&&(f*=.5),g&&m>=1){for(var x=0;x<g.length;x++)s.text(g[x],e-s.getStringUnitWidth(g[x])*f,r),r+=d;return s}e-=s.getStringUnitWidth(t)*f}return n.halign==="justify"?s.text(t,e,r,{maxWidth:n.maxWidth||100,align:"justify"}):s.text(t,e,r),s}var Lm={},Pa=(function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=e:Lm=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,r){var n,s,i;r===void 0&&(r=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var a=this.jsPDFDocument.internal.getFont(),o=a.fontStyle,c=a.fontName;if(e.font&&(c=e.font),e.fontStyle){o=e.fontStyle;var d=this.getFontList()[c];d&&d.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(d[0]),o=d[0])}if(this.jsPDFDocument.setFont(c,o),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!r){var u=t.unifyColor(e.fillColor);u&&(n=this.jsPDFDocument).setFillColor.apply(n,u),u=t.unifyColor(e.textColor),u&&(s=this.jsPDFDocument).setTextColor.apply(s,u),u=t.unifyColor(e.lineColor),u&&(i=this.jsPDFDocument).setDrawColor.apply(i,u),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,r,n){return this.jsPDFDocument.splitTextToSize(e,r,n)},t.prototype.rect=function(e,r,n,s,i){return this.jsPDFDocument.rect(e,r,n,s,i)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return Lm||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t})(),nh=function(t,e){return nh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},nh(t,e)};function S1(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");nh(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var A1=(function(t){S1(e,t);function e(r){var n=t.call(this)||this;return n._element=r,n}return e})(Array);function nS(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function sS(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function Tc(t,e,r){r.applyStyles(e,!0);var n=Array.isArray(t)?t:[t],s=n.map(function(i){return r.getTextWidth(i)}).reduce(function(i,a){return Math.max(i,a)},0);return s}function C1(t,e,r,n){var s=e.settings.tableLineWidth,i=e.settings.tableLineColor;t.applyStyles({lineWidth:s,lineColor:i});var a=P1(s,!1);a&&t.rect(r.x,r.y,e.getWidth(t.pageSize().width),n.y-r.y,a)}function P1(t,e){var r=t>0,n=e||e===0;return r&&n?"DF":r?"S":n?"F":null}function sd(t,e){var r,n,s,i;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(r=t.left)!==null&&r!==void 0?r:e,top:(n=t.top)!==null&&n!==void 0?n:e,right:(s=t.right)!==null&&s!==void 0?s:e,bottom:(i=t.bottom)!==null&&i!==void 0?i:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function L1(t,e){var r=sd(e.settings.margin,0);return t.pageSize().width-(r.left+r.right)}function iS(t,e,r,n,s){var i={},a=1.3333333333333333,o=yu(e,function(D){return s.getComputedStyle(D).backgroundColor});o!=null&&(i.fillColor=o);var c=yu(e,function(D){return s.getComputedStyle(D).color});c!=null&&(i.textColor=c);var d=oS(n,r);d&&(i.cellPadding=d);var u="borderTopColor",g=a*r,m=n.borderTopWidth;if(n.borderBottomWidth===m&&n.borderRightWidth===m&&n.borderLeftWidth===m){var f=(parseFloat(m)||0)/g;f&&(i.lineWidth=f)}else i.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/g,right:(parseFloat(n.borderRightWidth)||0)/g,bottom:(parseFloat(n.borderBottomWidth)||0)/g,left:(parseFloat(n.borderLeftWidth)||0)/g},i.lineWidth.top||(i.lineWidth.right?u="borderRightColor":i.lineWidth.bottom?u="borderBottomColor":i.lineWidth.left&&(u="borderLeftColor"));var x=yu(e,function(D){return s.getComputedStyle(D)[u]});x!=null&&(i.lineColor=x);var v=["left","right","center","justify"];v.indexOf(n.textAlign)!==-1&&(i.halign=n.textAlign),v=["middle","bottom","top"],v.indexOf(n.verticalAlign)!==-1&&(i.valign=n.verticalAlign);var y=parseInt(n.fontSize||"");isNaN(y)||(i.fontSize=y/a);var k=aS(n);k&&(i.fontStyle=k);var A=(n.fontFamily||"").toLowerCase();return t.indexOf(A)!==-1&&(i.font=A),i}function aS(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function yu(t,e){var r=E1(t,e);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var s=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],i=parseInt(n[4]);return i===0||isNaN(s[0])||isNaN(s[1])||isNaN(s[2])?null:s}function E1(t,e){var r=e(t);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?t.parentElement==null?null:E1(t.parentElement,e):r}function oS(t,e){var r=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],n=96/(72/e),s=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,i=r.map(function(o){return parseInt(o||"0")/n}),a=sd(i,0);return s>a.top&&(a.top=s),s>a.bottom&&(a.bottom=s),a}function O1(t,e,r,n,s){var i,a;n===void 0&&(n=!1),s===void 0&&(s=!1);var o;typeof e=="string"?o=r.document.querySelector(e):o=e;var c=Object.keys(t.getFontList()),d=t.scaleFactor(),u=[],g=[],m=[];if(!o)return console.error("Html table could not be found with input: ",e),{head:u,body:g,foot:m};for(var f=0;f<o.rows.length;f++){var x=o.rows[f],v=(a=(i=x?.parentElement)===null||i===void 0?void 0:i.tagName)===null||a===void 0?void 0:a.toLowerCase(),y=lS(c,d,r,x,n,s);y&&(v==="thead"?u.push(y):v==="tfoot"?m.push(y):g.push(y))}return{head:u,body:g,foot:m}}function lS(t,e,r,n,s,i){for(var a=new A1(n),o=0;o<n.cells.length;o++){var c=n.cells[o],d=r.getComputedStyle(c);if(s||d.display!=="none"){var u=void 0;i&&(u=iS(t,c,e,d,r)),a.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:u,_element:c,content:cS(c)})}}var g=r.getComputedStyle(n);if(a.length>0&&(s||g.display!=="none"))return a}function cS(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),e.innerText||e.textContent||""}function dS(t,e,r){for(var n=0,s=[t,e,r];n<s.length;n++){var i=s[n];i&&typeof i!="object"&&console.error("The options parameter should be of type object, is: "+typeof i),i.startY&&typeof i.startY!="number"&&(console.error("Invalid value for startY option",i.startY),delete i.startY)}}function zs(t,e,r,n,s){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),a=1;a<arguments.length;a++){var o=arguments[a];if(o!=null)for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(i[c]=o[c])}return i}function D1(t,e){var r=new Pa(t),n=r.getDocumentOptions(),s=r.getGlobalOptions();dS(s,n,e);var i=zs({},s,n,e),a;typeof window<"u"&&(a=window);var o=uS(s,n,e),c=hS(s,n,e),d=fS(r,i),u=gS(r,i,a);return{id:e.tableId,content:u,hooks:c,styles:o,settings:d}}function uS(t,e,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},s=function(c){if(c==="columnStyles"){var d=t[c],u=e[c],g=r[c];n.columnStyles=zs({},d,u,g)}else{var m=[t,e,r],f=m.map(function(x){return x[c]||{}});n[c]=zs({},f[0],f[1],f[2])}},i=0,a=Object.keys(n);i<a.length;i++){var o=a[i];s(o)}return n}function hS(t,e,r){for(var n=[t,e,r],s={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},i=0,a=n;i<a.length;i++){var o=a[i];o.didParseCell&&s.didParseCell.push(o.didParseCell),o.willDrawCell&&s.willDrawCell.push(o.willDrawCell),o.didDrawCell&&s.didDrawCell.push(o.didDrawCell),o.willDrawPage&&s.willDrawPage.push(o.willDrawPage),o.didDrawPage&&s.didDrawPage.push(o.didDrawPage)}return s}function fS(t,e){var r,n,s,i,a,o,c,d,u,g,m,f,x=sd(e.margin,40/t.scaleFactor()),v=(r=pS(t,e.startY))!==null&&r!==void 0?r:x.top,y;e.showFoot===!0?y="everyPage":e.showFoot===!1?y="never":y=(n=e.showFoot)!==null&&n!==void 0?n:"everyPage";var k;e.showHead===!0?k="everyPage":e.showHead===!1?k="never":k=(s=e.showHead)!==null&&s!==void 0?s:"everyPage";var A=(i=e.useCss)!==null&&i!==void 0?i:!1,D=e.theme||(A?"plain":"striped"),L=!!e.horizontalPageBreak,q=(a=e.horizontalPageBreakRepeat)!==null&&a!==void 0?a:null;return{includeHiddenHtml:(o=e.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:A,theme:D,startY:v,margin:x,pageBreak:(c=e.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(d=e.rowPageBreak)!==null&&d!==void 0?d:"auto",tableWidth:(u=e.tableWidth)!==null&&u!==void 0?u:"auto",showHead:k,showFoot:y,tableLineWidth:(g=e.tableLineWidth)!==null&&g!==void 0?g:0,tableLineColor:(m=e.tableLineColor)!==null&&m!==void 0?m:200,horizontalPageBreak:L,horizontalPageBreakRepeat:q,horizontalPageBreakBehaviour:(f=e.horizontalPageBreakBehaviour)!==null&&f!==void 0?f:"afterAllRows"}}function pS(t,e){var r=t.getLastAutoTable(),n=t.scaleFactor(),s=t.pageNumber(),i=!1;if(r&&r.startPageNumber){var a=r.startPageNumber+r.pageNumber-1;i=a===s}return typeof e=="number"?e:(e==null||e===!1)&&i&&r?.finalY!=null?r.finalY+20/n:null}function gS(t,e,r){var n=e.head||[],s=e.body||[],i=e.foot||[];if(e.html){var a=e.includeHiddenHtml;if(r){var o=O1(t,e.html,r,a,e.useCss)||{};n=o.head||n,s=o.body||n,i=o.foot||n}else console.error("Cannot parse html in non browser environment")}var c=e.columns||mS(n,s,i);return{columns:c,head:n,body:s,foot:i}}function mS(t,e,r){var n=t[0]||e[0]||r[0]||[],s=[];return Object.keys(n).filter(function(i){return i!=="_element"}).forEach(function(i){var a=1,o;Array.isArray(n)?o=n[parseInt(i)]:o=n[i],typeof o=="object"&&!Array.isArray(o)&&(a=o?.colSpan||1);for(var c=0;c<a;c++){var d=void 0;Array.isArray(n)?d=s.length:d=i+(c>0?"_".concat(c):"");var u={dataKey:d};s.push(u)}}),s}var sh=(function(){function t(e,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=e.getDocument()}return t})(),xS=(function(t){S1(e,t);function e(r,n,s,i,a,o){var c=t.call(this,r,n,o)||this;return c.cell=s,c.row=i,c.column=a,c.section=i.section,c}return e})(sh),bS=(function(){function t(e,r){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,r,n,s,i,a){for(var o=0,c=r;o<c.length;o++){var d=c[o],u=new xS(e,this,n,s,i,a),g=d(u)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],g)return!1}return!0},t.prototype.callEndPageHooks=function(e,r){e.applyStyles(e.userStyles);for(var n=0,s=this.hooks.didDrawPage;n<s.length;n++){var i=s[n];i(new sh(e,this,r))}},t.prototype.callWillDrawPageHooks=function(e,r){for(var n=0,s=this.hooks.willDrawPage;n<s.length;n++){var i=s[n];i(new sh(e,this,r))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(s,i){return s+i.wrappedWidth},0);return r}else{var n=this.settings.margin;return e-n.left-n.right}},t})(),F1=(function(){function t(e,r,n,s,i){i===void 0&&(i=!1),this.height=0,this.raw=e,e instanceof A1&&(this.raw=e._element,this.element=e._element),this.index=r,this.section=n,this.cells=s,this.spansMultiplePages=i}return t.prototype.getMaxCellHeight=function(e){var r=this;return e.reduce(function(n,s){var i;return Math.max(n,((i=r.cells[s.index])===null||i===void 0?void 0:i.height)||0)},0)},t.prototype.hasRowSpan=function(e){var r=this;return e.filter(function(n){var s=r.cells[n.index];return s?s.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,r){return this.getMaxCellHeight(r)<=e},t.prototype.getMinimumRowHeight=function(e,r){var n=this;return e.reduce(function(s,i){var a=n.cells[i.index];if(!a)return 0;var o=r.getLineHeight(a.styles.fontSize),c=a.padding("vertical"),d=c+o;return d>s?d:s},0)},t})(),R1=(function(){function t(e,r,n){var s;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=e;var i=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,i=(s=e.content)!==null&&s!==void 0?s:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var a=i!=null?""+i:"",o=/\r\n|\r|\n/g;this.text=a.split(o)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");e=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var s=this.width-this.padding("horizontal");n=this.x+s/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:e}},t.prototype.getContentHeight=function(e,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,s=this.styles.fontSize/e*r,i=n*s+this.padding("vertical");return Math.max(i,this.styles.minCellHeight)},t.prototype.padding=function(e){var r=sd(this.styles.cellPadding,0);return e==="vertical"?r.top+r.bottom:e==="horizontal"?r.left+r.right:r[e]},t})(),yS=(function(){function t(e,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=r,this.index=n}return t.prototype.getMaxCustomCellWidth=function(e){for(var r=0,n=0,s=e.allRows();n<s.length;n++){var i=s[n],a=i.cells[this.index];a&&typeof a.styles.cellWidth=="number"&&(r=Math.max(r,a.styles.cellWidth))}return r},t})();function vS(t,e){wS(t,e);var r=[],n=0;e.columns.forEach(function(i){var a=i.getMaxCustomCellWidth(e);a?i.width=a:(i.width=i.wrappedWidth,r.push(i)),n+=i.width});var s=e.getWidth(t.pageSize().width)-n;s&&(s=ih(r,s,function(i){return Math.max(i.minReadableWidth,i.minWidth)})),s&&(s=ih(r,s,function(i){return i.minWidth})),s=Math.abs(s),!e.settings.horizontalPageBreak&&s>.1/t.scaleFactor()&&(s=s<1?s:Math.round(s),console.warn("Of the table content, ".concat(s," units width could not fit page"))),NS(e),jS(e,t),kS(e)}function wS(t,e){var r=t.scaleFactor(),n=e.settings.horizontalPageBreak,s=L1(t,e);e.allRows().forEach(function(i){for(var a=0,o=e.columns;a<o.length;a++){var c=o[a],d=i.cells[c.index];if(d){var u=e.hooks.didParseCell;e.callCellHooks(t,u,d,i,c,null);var g=d.padding("horizontal");d.contentWidth=Tc(d.text,d.styles,t)+g;var m=Tc(d.text.join(" ").split(/[^\S\u00A0]+/),d.styles,t);if(d.minReadableWidth=m+d.padding("horizontal"),typeof d.styles.cellWidth=="number")d.minWidth=d.styles.cellWidth,d.wrappedWidth=d.styles.cellWidth;else if(d.styles.cellWidth==="wrap"||n===!0)d.contentWidth>s?(d.minWidth=s,d.wrappedWidth=s):(d.minWidth=d.contentWidth,d.wrappedWidth=d.contentWidth);else{var f=10/r;d.minWidth=d.styles.minCellWidth||f,d.wrappedWidth=d.contentWidth,d.minWidth>d.wrappedWidth&&(d.wrappedWidth=d.minWidth)}}}}),e.allRows().forEach(function(i){for(var a=0,o=e.columns;a<o.length;a++){var c=o[a],d=i.cells[c.index];if(d&&d.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,d.wrappedWidth),c.minWidth=Math.max(c.minWidth,d.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,d.minReadableWidth);else{var u=e.styles.columnStyles[c.dataKey]||e.styles.columnStyles[c.index]||{},g=u.cellWidth||u.minCellWidth;g&&typeof g=="number"&&(c.minWidth=g,c.wrappedWidth=g)}d&&(d.colSpan>1&&!c.minWidth&&(c.minWidth=d.minWidth),d.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=d.minWidth))}})}function ih(t,e,r){for(var n=e,s=t.reduce(function(f,x){return f+x.wrappedWidth},0),i=0;i<t.length;i++){var a=t[i],o=a.wrappedWidth/s,c=n*o,d=a.width+c,u=r(a),g=d<u?u:d;e-=g-a.width,a.width=g}if(e=Math.round(e*1e10)/1e10,e){var m=t.filter(function(f){return e<0?f.width>r(f):!0});m.length&&(e=ih(m,e,r))}return e}function kS(t){for(var e={},r=1,n=t.allRows(),s=0;s<n.length;s++)for(var i=n[s],a=0,o=t.columns;a<o.length;a++){var c=o[a],d=e[c.index];if(r>1)r--,delete i.cells[c.index];else if(d)d.cell.height+=i.height,r=d.cell.colSpan,delete i.cells[c.index],d.left--,d.left<=1&&delete e[c.index];else{var u=i.cells[c.index];if(!u)continue;if(u.height=i.height,u.rowSpan>1){var g=n.length-s,m=u.rowSpan>g?g:u.rowSpan;e[c.index]={cell:u,left:m,row:i}}}}}function NS(t){for(var e=t.allRows(),r=0;r<e.length;r++)for(var n=e[r],s=null,i=0,a=0,o=0;o<t.columns.length;o++){var c=t.columns[o];if(a-=1,a>1&&t.columns[o+1])i+=c.width,delete n.cells[c.index];else if(s){var d=s;delete n.cells[c.index],s=null,d.width=c.width+i}else{var d=n.cells[c.index];if(!d)continue;if(a=d.colSpan,i=0,d.colSpan>1){s=d,i+=c.width;continue}d.width=c.width+i}}}function jS(t,e){for(var r={count:0,height:0},n=0,s=t.allRows();n<s.length;n++){for(var i=s[n],a=0,o=t.columns;a<o.length;a++){var c=o[a],d=i.cells[c.index];if(d){e.applyStyles(d.styles,!0);var u=d.width-d.padding("horizontal");if(d.styles.overflow==="linebreak")d.text=e.splitTextToSize(d.text,u+1/e.scaleFactor(),{fontSize:d.styles.fontSize});else if(d.styles.overflow==="ellipsize")d.text=Em(d.text,u,d.styles,e,"...");else if(d.styles.overflow==="hidden")d.text=Em(d.text,u,d.styles,e,"");else if(typeof d.styles.overflow=="function"){var g=d.styles.overflow(d.text,u);typeof g=="string"?d.text=[g]:d.text=g}d.contentHeight=d.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var m=d.contentHeight/d.rowSpan;d.rowSpan>1&&r.count*r.height<m*d.rowSpan?r={height:m,count:d.rowSpan}:r&&r.count>0&&r.height>m&&(m=r.height),m>i.height&&(i.height=m)}}r.count--}}function Em(t,e,r,n,s){return t.map(function(i){return _S(i,e,r,n,s)})}function _S(t,e,r,n,s){var i=1e4*n.scaleFactor();if(e=Math.ceil(e*i)/i,e>=Tc(t,r,n))return t;for(;e<Tc(t+s,r,n)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+s}function M1(t,e){var r=new Pa(t),n=SS(e,r.scaleFactor()),s=new bS(e,n);return vS(r,s),r.applyStyles(r.userStyles),s}function SS(t,e){var r=t.content,n=CS(r.columns);if(r.head.length===0){var s=Om(n,"head");s&&r.head.push(s)}if(r.foot.length===0){var s=Om(n,"foot");s&&r.foot.push(s)}var i=t.settings.theme,a=t.styles;return{columns:n,head:vu("head",r.head,n,a,i,e),body:vu("body",r.body,n,a,i,e),foot:vu("foot",r.foot,n,a,i,e)}}function vu(t,e,r,n,s,i){var a={},o=e.map(function(c,d){for(var u=0,g={},m=0,f=0,x=0,v=r;x<v.length;x++){var y=v[x];if(a[y.index]==null||a[y.index].left===0)if(f===0){var k=void 0;Array.isArray(c)?k=c[y.index-m-u]:k=c[y.dataKey];var A={};typeof k=="object"&&!Array.isArray(k)&&(A=k?.styles||{});var D=PS(t,y,d,s,n,i,A),L=new R1(k,D,t);g[y.dataKey]=L,g[y.index]=L,f=L.colSpan-1,a[y.index]={left:L.rowSpan-1,times:f}}else f--,m++;else a[y.index].left--,f=a[y.index].times,u++}return new F1(c,d,t,g)});return o}function Om(t,e){var r={};return t.forEach(function(n){if(n.raw!=null){var s=AS(e,n.raw);s!=null&&(r[n.dataKey]=s)}}),Object.keys(r).length>0?r:null}function AS(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function CS(t){return t.map(function(e,r){var n,s;return typeof e=="object"?s=(n=e.dataKey)!==null&&n!==void 0?n:r:s=r,new yS(s,e,r)})}function PS(t,e,r,n,s,i,a){var o=sS(n),c;t==="head"?c=s.headStyles:t==="body"?c=s.bodyStyles:t==="foot"&&(c=s.footStyles);var d=zs({},o.table,o[t],s.styles,c),u=s.columnStyles[e.dataKey]||s.columnStyles[e.index]||{},g=t==="body"?u:{},m=t==="body"&&r%2===0?zs({},o.alternateRow,s.alternateRowStyles):{},f=nS(i),x=zs({},f,d,m,g);return zs(x,a)}function LS(t,e,r){var n;r===void 0&&(r={});var s=L1(t,e),i=new Map,a=[],o=[],c=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?c=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(c=[e.settings.horizontalPageBreakRepeat]),c.forEach(function(m){var f=e.columns.find(function(x){return x.dataKey===m||x.index===m});f&&!i.has(f.index)&&(i.set(f.index,!0),a.push(f.index),o.push(e.columns[f.index]),s-=f.wrappedWidth)});for(var d=!0,u=(n=r?.start)!==null&&n!==void 0?n:0;u<e.columns.length;){if(i.has(u)){u++;continue}var g=e.columns[u].wrappedWidth;if(d||s>=g)d=!1,a.push(u),o.push(e.columns[u]),s-=g;else break;u++}return{colIndexes:a,columns:o,lastIndex:u-1}}function ES(t,e){for(var r=[],n=0;n<e.columns.length;n++){var s=LS(t,e,{start:n});s.columns.length&&(r.push(s),n=s.lastIndex)}return r}function T1(t,e){var r=e.settings,n=r.startY,s=r.margin,i={x:s.left,y:n},a=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),o=n+s.bottom+a;if(r.pageBreak==="avoid"){var c=e.body,d=c.reduce(function(m,f){return m+f.height},0);o+=d}var u=new Pa(t);(r.pageBreak==="always"||r.startY!=null&&o>u.pageSize().height)&&(B1(u),i.y=s.top),e.callWillDrawPageHooks(u,i);var g=zs({},i);e.startPageNumber=u.pageNumber(),r.horizontalPageBreak?OS(u,e,g,i):(u.applyStyles(u.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&e.head.forEach(function(m){return qs(u,e,m,i,e.columns)}),u.applyStyles(u.userStyles),e.body.forEach(function(m,f){var x=f===e.body.length-1;Ic(u,e,m,x,g,i,e.columns)}),u.applyStyles(u.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&e.foot.forEach(function(m){return qs(u,e,m,i,e.columns)})),C1(u,e,g,i),e.callEndPageHooks(u,i),e.finalY=i.y,t.lastAutoTable=e,u.applyStyles(u.userStyles)}function OS(t,e,r,n){var s=ES(t,e),i=e.settings;if(i.horizontalPageBreakBehaviour==="afterAllRows")s.forEach(function(d,u){t.applyStyles(t.userStyles),u>0?Do(t,e,r,n,d.columns,!0):Dm(t,e,n,d.columns),DS(t,e,r,n,d.columns),wu(t,e,n,d.columns)});else for(var a=-1,o=s[0],c=function(){var d=a;if(o){t.applyStyles(t.userStyles);var u=o.columns;a>=0?Do(t,e,r,n,u,!0):Dm(t,e,n,u),d=Fm(t,e,a+1,n,u),wu(t,e,n,u)}var g=d-a;s.slice(1).forEach(function(m){t.applyStyles(t.userStyles),Do(t,e,r,n,m.columns,!0),Fm(t,e,a+1,n,m.columns,g),wu(t,e,n,m.columns)}),a=d};a<e.body.length-1;)c()}function Dm(t,e,r,n){var s=e.settings;t.applyStyles(t.userStyles),(s.showHead==="firstPage"||s.showHead==="everyPage")&&e.head.forEach(function(i){return qs(t,e,i,r,n)})}function DS(t,e,r,n,s){t.applyStyles(t.userStyles),e.body.forEach(function(i,a){var o=a===e.body.length-1;Ic(t,e,i,o,r,n,s)})}function Fm(t,e,r,n,s,i){t.applyStyles(t.userStyles),i=i??e.body.length;var a=Math.min(r+i,e.body.length),o=-1;return e.body.slice(r,a).forEach(function(c,d){var u=r+d===e.body.length-1,g=I1(t,e,u,n);c.canEntireRowFit(g,s)&&(qs(t,e,c,n,s),o=r+d)}),o}function wu(t,e,r,n){var s=e.settings;t.applyStyles(t.userStyles),(s.showFoot==="lastPage"||s.showFoot==="everyPage")&&e.foot.forEach(function(i){return qs(t,e,i,r,n)})}function FS(t,e,r){var n=r.getLineHeight(t.styles.fontSize),s=t.padding("vertical"),i=Math.floor((e-s)/n);return Math.max(0,i)}function RS(t,e,r,n){var s={};t.spansMultiplePages=!0,t.height=0;for(var i=0,a=0,o=r.columns;a<o.length;a++){var c=o[a],d=t.cells[c.index];if(d){Array.isArray(d.text)||(d.text=[d.text]);var u=new R1(d.raw,d.styles,d.section);u=zs(u,d),u.text=[];var g=FS(d,e,n);d.text.length>g&&(u.text=d.text.splice(g,d.text.length));var m=n.scaleFactor(),f=n.getLineHeightFactor();d.contentHeight=d.getContentHeight(m,f),d.contentHeight>=e&&(d.contentHeight=e,u.styles.minCellHeight-=e),d.contentHeight>t.height&&(t.height=d.contentHeight),u.contentHeight=u.getContentHeight(m,f),u.contentHeight>i&&(i=u.contentHeight),s[c.index]=u}}var x=new F1(t.raw,-1,t.section,s,!0);x.height=i;for(var v=0,y=r.columns;v<y.length;v++){var c=y[v],u=x.cells[c.index];u&&(u.height=x.height);var d=t.cells[c.index];d&&(d.height=t.height)}return x}function MS(t,e,r,n){var s=t.pageSize().height,i=n.settings.margin,a=i.top+i.bottom,o=s-a;e.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=e.getMinimumRowHeight(n.columns,t),d=c<r;if(c>o)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!d)return!1;var u=e.hasRowSpan(n.columns),g=e.getMaxCellHeight(n.columns)>o;return g?(u&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(u||n.settings.rowPageBreak==="avoid")}function Ic(t,e,r,n,s,i,a){var o=I1(t,e,n,i);if(r.canEntireRowFit(o,a))qs(t,e,r,i,a);else if(MS(t,r,o,e)){var c=RS(r,o,e,t);qs(t,e,r,i,a),Do(t,e,s,i,a),Ic(t,e,c,n,s,i,a)}else Do(t,e,s,i,a),Ic(t,e,r,n,s,i,a)}function qs(t,e,r,n,s){n.x=e.settings.margin.left;for(var i=0,a=s;i<a.length;i++){var o=a[i],c=r.cells[o.index];if(!c){n.x+=o.width;continue}t.applyStyles(c.styles),c.x=n.x,c.y=n.y;var d=e.callCellHooks(t,e.hooks.willDrawCell,c,r,o,n);if(d===!1){n.x+=o.width;continue}TS(t,c,n);var u=c.getTextPos();_1(c.text,u.x,u.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,c,r,o,n),n.x+=o.width}n.y+=r.height}function TS(t,e,r){var n=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof n.lineWidth=="number"){var s=P1(n.lineWidth,n.fillColor);s&&t.rect(e.x,r.y,e.width,e.height,s)}else typeof n.lineWidth=="object"&&(n.fillColor&&t.rect(e.x,r.y,e.width,e.height,"F"),IS(t,e,r,n.lineWidth))}function IS(t,e,r,n){var s,i,a,o;n.top&&(s=r.x,i=r.y,a=r.x+e.width,o=r.y,n.right&&(a+=.5*n.right),n.left&&(s-=.5*n.left),c(n.top,s,i,a,o)),n.bottom&&(s=r.x,i=r.y+e.height,a=r.x+e.width,o=r.y+e.height,n.right&&(a+=.5*n.right),n.left&&(s-=.5*n.left),c(n.bottom,s,i,a,o)),n.left&&(s=r.x,i=r.y,a=r.x,o=r.y+e.height,n.top&&(i-=.5*n.top),n.bottom&&(o+=.5*n.bottom),c(n.left,s,i,a,o)),n.right&&(s=r.x+e.width,i=r.y,a=r.x+e.width,o=r.y+e.height,n.top&&(i-=.5*n.top),n.bottom&&(o+=.5*n.bottom),c(n.right,s,i,a,o));function c(d,u,g,m,f){t.getDocument().setLineWidth(d),t.getDocument().line(u,g,m,f,"S")}}function I1(t,e,r,n){var s=e.settings.margin.bottom,i=e.settings.showFoot;return(i==="everyPage"||i==="lastPage"&&r)&&(s+=e.getFootHeight(e.columns)),t.pageSize().height-n.y-s}function Do(t,e,r,n,s,i){s===void 0&&(s=[]),i===void 0&&(i=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!i&&e.foot.forEach(function(o){return qs(t,e,o,n,s)}),e.callEndPageHooks(t,n);var a=e.settings.margin;C1(t,e,r,n),B1(t),e.pageNumber++,n.x=a.left,n.y=a.top,r.y=a.top,e.callWillDrawPageHooks(t,n),e.settings.showHead==="everyPage"&&(e.head.forEach(function(o){return qs(t,e,o,n,s)}),t.applyStyles(t.userStyles))}function B1(t){var e=t.pageNumber();t.setPage(e+1);var r=t.pageNumber();return r===e?(t.addPage(),!0):!1}function BS(t){t.API.autoTable=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e[0],s=D1(this,n),i=M1(this,s);return T1(this,i),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,r,n,s){_1(e,r,n,s,this)},t.API.autoTableSetDefaults=function(e){return Pa.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,r){Pa.setDefaults(e,r)},t.API.autoTableHtmlToJson=function(e,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var s=new Pa(this),i=O1(s,e,window,r,!1),a=i.head,o=i.body,c=((n=a[0])===null||n===void 0?void 0:n.map(function(d){return d.content}))||[];return{columns:c,rows:o,data:o}}}var ku;function Fo(t,e){var r=D1(t,e),n=M1(t,r);T1(t,n)}try{if(typeof window<"u"&&window){var Rm=window,Mm=Rm.jsPDF||((ku=Rm.jspdf)===null||ku===void 0?void 0:ku.jsPDF);Mm&&BS(Mm)}}catch(t){console.error("Could not apply autoTable plugin",t)}const z1=t=>new Promise(e=>{const r=new Image;r.crossOrigin="Anonymous",r.onload=()=>{const n=document.createElement("canvas"),s=2;n.width=r.width*s,n.height=r.height*s;const i=n.getContext("2d");i?(i.drawImage(r,0,0,n.width,n.height),e(n.toDataURL("image/png"))):e(null)},r.onerror=()=>{e(null)},r.src=t||"/assets/LOGO_PREMEZCLADOS.svg"}),U1=(t,e,r={})=>{const{name:n="PREMEZCLADOS MANZANILLO, C.A.",rif:s="J-29762187-3",phone:i="0295-8726210",address:a="Av. 31 de Julio, Edif Cantera Manzanillo, Sector Guatamare"}=r;let o=15;return e?(t.addImage(e,"PNG",14,10,30,30),t.setFontSize(14),t.setTextColor(22,163,74),t.setFont("helvetica","bold"),t.text(n,48,20),t.setFontSize(9),t.setTextColor(80),t.setFont("helvetica","normal"),t.text(`R.I.F. ${s}`,48,26),t.text(`Telf: ${i}`,48,31),t.text(a,48,36,{maxWidth:140}),o=45):(t.setFontSize(16),t.setTextColor(22,163,74),t.setFont("helvetica","bold"),t.text(n,14,20),t.setFontSize(10),t.setTextColor(100),t.setFont("helvetica","normal"),t.text(`R.I.F. ${s} | Telf: ${i}`,14,27),o=35),t.setDrawColor(22,163,74),t.setLineWidth(.5),t.line(14,o,196,o),o+10},Nu=t=>{if(!t)return"";try{const e=new Date(t);if(!isNaN(e))return e.toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"})}catch{}return t},zS=({budget:t,client:e,small:r=!1,className:n=""})=>{const{settings:s}=Kc(),{formatPrice:i,currency:a,exchangeRate:o}=xh(),{user:c}=Mr(),d=(c?.["https://premezcladomanzanillo.com/roles"]||[]).map(x=>x.toLowerCase()),u=d.includes("operaciones"),g=d.includes("administrador")||d.includes("contable"),m=u&&!g;if(!t)return null;const f=async()=>{const x=new $e,v=await z1(s?.company_logo);let y=U1(x,v,{name:s?.company_name,rif:s?.company_rif,phone:s?.company_phone,address:s?.company_address});x.setFontSize(10),x.setTextColor(0),x.setFont("helvetica","bold"),x.text(`Cotización N°: ${t.folio||t.id.slice(-6).toUpperCase()}`,196,20,{align:"right"}),x.setFont("helvetica","normal"),x.text(`Fecha: ${Nu(t.createdAt)}`,196,26,{align:"right"}),t.validUntil&&(x.setFont("helvetica","bold"),x.setTextColor(180,0,0),x.text(`Válido hasta: ${Nu(t.validUntil)}`,196,32,{align:"right"}),x.setTextColor(0),x.setFont("helvetica","normal")),x.setFontSize(11),x.setFont("helvetica","bold"),x.text("DATOS DEL CLIENTE",14,y),y+=7,x.setFontSize(10),x.setFont("helvetica","normal"),x.text(`Cliente: ${e?.name||t.clientName||"N/A"}`,14,y),y+=5,x.text(`RIF / C.I.: ${e?.rif||"N/A"}`,14,y),y+=5,x.text(`Atención: ${e?.contactPerson||"N/A"}`,14,y),y+=10,x.setFillColor(240,240,240),x.rect(14,y,182,35,"F"),x.setFontSize(10),x.setFont("helvetica","bold"),x.text("FICHA TÉCNICA DE OBRA / DESPACHO",18,y+7),x.setFontSize(9),x.setFont("helvetica","normal"),x.text(`Ubiciación: ${t.address||"No especificada"}`,18,y+14),x.text(`Tipo de Obra: ${t.workType||"No especificado"}`,18,y+19),x.text(`Resistencia (f'c): ${t.resistance||"N/A"} kg/cm²`,18,y+24),x.text(`Tipo Concreto: ${t.concreteType||"N/A"}`,100,y+24),x.text(`Volumen Est.: ${t.volume||0} m³`,18,y+29),x.text(`Fecha Colado: ${Nu(t.deliveryDate)}`,100,y+29),y+=45;const k=m?["Descripción","Unidad","Cantidad"]:["Descripción","Unidad","Cantidad","Precio Unitario","Total"],A=t.products||t.items||[],D=A.map(L=>{const q=L.product||{},$=[L.tipoConcreto&&L.resistencia?`${L.tipoConcreto} ${L.resistencia}`:q.name||L.description||"N/A",L.unit||q.type||"N/A",(L.quantity||L.volume||0).toLocaleString("es-VE",{minimumFractionDigits:2})];return m||($.push(i(L.unitPrice||0)),$.push(i(L.totalPrice||L.total||0))),$});if(Fo(x,{startY:y,head:[k],body:D,theme:"grid",styles:{fontSize:9,cellPadding:2,textColor:[0,0,0]},headStyles:{fillColor:[22,163,74],textColor:[255,255,255],fontStyle:"bold"},columnStyles:{2:{halign:"right"},3:{halign:"right"},4:{halign:"right"}},didDrawPage:L=>{y=L.cursor.y}}),y+=10,!m){const L=parseFloat(s?.company_iva||"16")/100,q=parseFloat(s?.company_igtf||"3")/100,z=A.reduce((M,S)=>M+(S.totalPrice||S.total||0),0),$=z*L,j=z+$,_=[["Subtotal:",i(t.subtotal||z)],[`IVA (${s?.company_iva||16}%):`,i(t.iva||$)]];if(q>0){const M=j*q;_.push([`IGTF Aplicable (${s?.company_igtf}%):`,i(M)]),_.push(["Total (inc. IVA + IGTF):",i(j+M)])}else _.push(["Total a Pagar:",i(t.total||j)]);Fo(x,{startY:y,body:_,theme:"plain",styles:{fontSize:10,cellPadding:1,textColor:[0,0,0]},columnStyles:{0:{fontStyle:"bold",halign:"right"},1:{halign:"right",fontStyle:"bold"}},margin:{left:100},tableWidth:90,didDrawPage:M=>{y=M.cursor.y}}),y+=5,a==="VES"&&o&&(x.setFontSize(8),x.setTextColor(100),x.text(`Tasa de cambio de referencia (BCV): ${o.toLocaleString("es-VE",{minimumFractionDigits:2})} Bs./USD`,196,y,{align:"right"}),y+=5)}y+=5,x.setFontSize(9),x.text("Notas:",14,y),y+=5,x.text("1. Todos los productos ofertados están sujetos a cambios de precio antes de realizada la venta.",14,y),y+=4,x.text(`2. Los pagos en divisas (USD/Efectivo/Transferencia) están sujetos al IGTF (${s?.company_igtf||3}%) según ley vigente.`,14,y),y+=4,x.text("3. La resistencia del concreto premezclado que suministra la empresa, al ser descargado del camión mezclador, estará",14,y),y+=4,x.text("condicionada a que los cilindros de muestras en todo lo concerniente a su toma, curado, manipulación, ensayo e",14,y),y+=4,x.text("interpretación de resultados cumplan estrictamente con las normas COVENIN 338,339,344,633,1976 y COVENIN-MINDUR 1753.",14,y),y+=4,x.text("Fractil 10%.",14,y),y+=4,x.text("3. Favor hacer depósitos ó transferencia al Banco en la cuenta número",14,y),x.save(`presupuesto-${t.folio||t.id}.pdf`)};return l.jsx("div",{children:l.jsxs("button",{onClick:f,"aria-label":"Generar Presupuesto",title:"Generar Presupuesto",className:`${r?"px-3 py-1 text-sm rounded-md":"px-4 py-2 text-base rounded-md"} bg-green-700 text-white hover:bg-green-600 flex items-center gap-2 ${n}`,children:[l.jsx(Pn,{className:`${r?"w-3 h-3":"w-5 h-5"}`}),r?"Generar":"Generar Presupuesto"]})})},ju=t=>{if(!t)return"";if(typeof t=="string"){if(t.length>=10&&/\d{4}-\d{2}-\d{2}/.test(t))return t.slice(0,10);const e=new Date(t);return isNaN(e)?t:e.toISOString().slice(0,10)}if(t instanceof Date)return t.toISOString().slice(0,10);if(typeof t=="number"){const e=new Date(t);return isNaN(e)?String(t):e.toISOString().slice(0,10)}try{const e=new Date(t);if(!isNaN(e))return e.toISOString().slice(0,10)}catch{}return""},US=({budget:t,onClose:e=()=>{},userRoles:r=[],onApprove:n})=>{if(Z.useEffect(()=>{const c=d=>{d.key==="Escape"&&e()};return document.addEventListener("keydown",c),()=>document.removeEventListener("keydown",c)},[e]),!t)return null;const s={nombreProyecto:t.title||"",direccion:t.address||"",fechaColado:t.deliveryDate?ju(t.deliveryDate):"",tipoObra:t.workType||"",resistencia:t.resistance||"",tipoConcreto:t.concreteType||"",volumen:t.volume??"",elemento:t.element||"",requiereBomba:t.pumpRequired?"Sí":t.pumpRequired===!1?"No":"",observaciones:t.observations||""},i=s.fechaColado||ju(t.createdAt),a=r.includes("Administrador")||r.includes("Contable"),o=a&&t.status==="PENDING";return console.log("Inspeccionando presupuesto en BudgetDetail:",t),l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",onClick:c=>{c.target===c.currentTarget&&e()},children:l.jsxs("div",{className:"relative w-full max-w-xl bg-white dark:bg-dark-primary rounded-xl shadow-lg border border-gray-200 dark:border-dark-surface overflow-auto",children:[l.jsx("button",{onClick:e,className:"absolute right-3 top-3 w-8 h-8 rounded-full bg-gray-100 dark:bg-dark-surface flex items-center justify-center text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600","aria-label":"Cerrar",children:"✕"}),l.jsxs("div",{className:"p-5",children:[l.jsxs("div",{className:"flex justify-between items-start mb-3",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-green-900 dark:text-green-300",children:t.title||s.nombreProyecto||"Presupuesto"}),l.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Folio: ",t.folio||t.id]}),l.jsxs("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:["Estado: ",t.status]})," "]}),l.jsx("div",{className:"flex gap-2"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-800 dark:text-gray-300 mb-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Datos del proyecto"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Nombre:"})," ",s.nombreProyecto||l.jsx("span",{className:"text-gray-400 italic",children:"No especificado"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Dirección:"})," ",s.direccion||l.jsx("span",{className:"text-gray-400 italic",children:"No especificada"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Fecha estimada de colado:"})," ",i||l.jsx("span",{className:"text-gray-400 italic",children:"Pendiente por definir"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Tipo de obra:"})," ",s.tipoObra||l.jsx("span",{className:"text-gray-400 italic",children:"No especificado"})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Especificaciones del concreto"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Resistencia (f’c):"})," ",s.resistencia||l.jsx("span",{className:"text-gray-400 italic",children:"No especificada"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Tipo de concreto:"})," ",s.tipoConcreto||l.jsx("span",{className:"text-gray-400 italic",children:"No especificado"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Volumen (m³):"})," ",s.volumen!==""?s.volumen:l.jsx("span",{className:"text-gray-400 italic",children:"—"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Elemento a colar:"})," ",s.elemento||l.jsx("span",{className:"text-gray-400 italic",children:"No especificado"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Requiere bomba:"})," ",s.requiereBomba||l.jsx("span",{className:"text-gray-400 italic",children:"No especificado"})]})]})]}),l.jsxs("div",{className:"pt-2 border-t border-gray-100 dark:border-gray-700",children:[l.jsx("h4",{className:"font-medium text-red-700 dark:text-red-400 mb-2 flex items-center gap-1",children:"Vencimiento"}),a&&(t.status==="PENDING"||t.status==="APPROVED")?l.jsxs("div",{className:"space-y-1",children:[l.jsx("input",{type:"date",defaultValue:t.validUntil?ju(t.validUntil):"",onChange:async c=>{try{await api.put(`/api/budgets/${t.id}`,{validUntil:c.target.value}),alert("Fecha de vencimiento actualizada correctamente.")}catch{alert("Error al actualizar la fecha.")}},className:"w-full p-2 bg-red-50/50 dark:bg-red-900/10 border border-red-200 dark:border-red-900 rounded-md text-xs font-bold"}),l.jsx("p",{className:"text-[10px] text-gray-500 italic",children:"Ajuste opcional por gerencia."})]}):l.jsx("div",{className:"text-xs font-bold text-gray-700 dark:text-gray-300",children:t.validUntil?format(new Date(t.validUntil),"dd/MM/yyyy"):"No definida"})]})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Observaciones"}),l.jsx("div",{className:"text-sm text-gray-800 dark:text-gray-300 bg-gray-50 dark:bg-dark-surface p-3 rounded-lg border border-gray-100 dark:border-gray-700",children:s.observaciones?s.observaciones:l.jsx("span",{className:"text-gray-400 italic",children:"Sin observaciones registradas."})})]}),l.jsxs("div",{className:"flex justify-end mt-5 gap-2 items-center",children:[o&&l.jsx("button",{onClick:()=>n(t.id),className:"px-4 py-2 rounded-md bg-green-600 text-white border border-green-700 text-sm hover:bg-green-700 transition duration-150",children:"Aprobar Presupuesto"}),t.status==="APPROVED"&&l.jsxs(Ft,{to:`/payments?budgetId=${t.id}`,onClick:e,className:"px-4 py-2 rounded-md bg-blue-600 text-white border border-blue-700 text-sm hover:bg-blue-700 transition duration-150 flex items-center gap-1",children:[l.jsx(Km,{size:16})," Ver/Registrar Pagos"]}),l.jsx(zS,{budget:t,client:t.client,className:"ml-1"}),l.jsx("button",{onClick:e,className:"px-4 py-2 rounded-md bg-gray-100 dark:bg-dark-surface text-gray-700 dark:text-gray-200 border border-gray-200 dark:border-gray-600 text-sm",children:"Cerrar"})]})]})]})})},q1=({onAddProduct:t})=>{const[e,r]=Z.useState([]),[n,s]=Z.useState(!0),[i,a]=Z.useState(null),[o,c]=Z.useState(""),[d,u]=Z.useState("ALL"),g=[{id:"ALL",label:"Todos",icon:ah},{id:"CONCRETE",label:"Concreto",icon:e0},{id:"BLOCK",label:"Bloques",icon:Rb},{id:"SERVICE",label:"Servicios",icon:Mb},{id:"OTHER",label:"Otros",icon:Lu}];Z.useEffect(()=>{(async()=>{try{s(!0);const v=await Ge.get("/api/products");r(v.data)}catch(v){a("No se pudieron cargar los productos."),console.error(v)}finally{s(!1)}})()},[]);const m=Z.useMemo(()=>e.filter(x=>{const v=x.name.toLowerCase().includes(o.toLowerCase()),y=d==="ALL"||x.type===d;return v&&y}),[e,o,d]),f=Z.useMemo(()=>m.reduce((x,v)=>{const y=v.category?.name||"Sin Categoría";return x[y]||(x[y]=[]),x[y].push(v),x},{}),[m]);return n?l.jsx("div",{className:"p-4 text-center dark:text-gray-400 text-xs",children:"Cargando productos..."}):i?l.jsx("div",{className:"p-4 text-center text-red-500 text-xs",children:i}):l.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-dark-surface rounded-xl shadow-lg border border-gray-100 dark:border-gray-800 overflow-hidden",children:[l.jsxs("div",{className:"p-3 bg-gray-50/50 dark:bg-dark-primary/20 border-b border-gray-100 dark:border-gray-800 space-y-3",children:[l.jsxs("div",{className:"relative",children:[l.jsx($o,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"Buscar por nombre...",value:o,onChange:x=>c(x.target.value),className:"w-full pl-9 pr-4 py-2 text-xs bg-white dark:bg-dark-primary/60 border border-gray-100 dark:border-gray-700 rounded-lg focus:ring-1 focus:ring-brand-primary outline-none dark:text-white"})]}),l.jsx("div",{className:"flex gap-1 overflow-x-auto no-scrollbar pb-1",children:g.map(x=>{const v=x.icon,y=d===x.id;return l.jsxs("button",{onClick:()=>u(x.id),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all whitespace-nowrap ${y?"bg-brand-primary text-white shadow-md":"bg-white dark:bg-dark-primary/40 text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-dark-primary/60"}`,children:[l.jsx(v,{size:12}),x.label]},x.id)})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2",children:Object.keys(f).length===0?l.jsx("div",{className:"text-center py-10 text-gray-400 text-[10px] uppercase font-bold tracking-widest",children:"Sin resultados"}):Object.keys(f).map(x=>l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2 px-2",children:[l.jsx("span",{className:"h-px bg-gray-100 dark:bg-gray-800 flex-1"}),l.jsx("span",{className:"text-[9px] font-black text-gray-400 dark:text-gray-500 uppercase tracking-[0.2em]",children:x}),l.jsx("span",{className:"h-px bg-gray-100 dark:bg-gray-800 flex-1"})]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:f[x].map(v=>l.jsxs("div",{className:"flex items-center justify-between gap-3 px-3 py-2 bg-gray-50/50 dark:bg-dark-primary/30 rounded-lg border border-transparent hover:border-brand-primary/20 transition-all group",title:v.description||"Sin descripción",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"font-bold text-[11px] text-gray-700 dark:text-gray-200 truncate group-hover:text-brand-primary transition-colors",children:v.name}),l.jsx("div",{className:"text-[10px] font-medium text-brand-primary/80",children:$r(v.price)})]}),l.jsx("button",{onClick:()=>t(v),className:"p-1.5 bg-white dark:bg-dark-surface text-brand-primary shadow-sm rounded-md border border-gray-100 dark:border-gray-800 hover:bg-brand-primary hover:text-white hover:border-brand-primary transition-all transform active:scale-90",title:"Añadir",children:l.jsx(Lu,{size:12})})]},v.id))})]},x))})]})},qS=({initialValues:t={},onSave:e,onCancel:r,userRoles:n=[]})=>{const[s,i]=Z.useState([]),[a,o]=Z.useState(!1),[c,d]=Z.useState(null),[u,g]=Z.useState({clientId:t.clientId||"",title:t.title||"",address:t.address||"",deliveryDate:t.deliveryDate?Hn(new Date(t.deliveryDate),"yyyy-MM-dd"):"",workType:t.workType||"vivienda",resistance:t.resistance||"150",concreteType:t.concreteType||"convencional",element:t.element||"",observations:t.observations||"",volume:t.volume||"",validUntil:t.validUntil?Hn(new Date(t.validUntil),"yyyy-MM-dd"):"",pumpRequired:t.pumpRequired===!0?"true":"false"}),[m,f]=Z.useState(t.products?.map(V=>({productId:V.product.id,quantity:V.quantity,unitPrice:V.unitPrice,name:V.product.name}))||[]),[x,v]=Z.useState({}),k=(t.status||"")==="APPROVED",A=n.includes("Contable")||n.includes("Administrador"),D=k||A||n.includes("Comercial"),L=async()=>{try{const V=await Ge.get("/api/clients");i(V.data)}catch(V){console.error("Failed to fetch clients",V)}};Z.useEffect(()=>{L()},[]);const q=V=>{const{name:te,value:ne}=V.target;g(se=>({...se,[te]:ne}))},z=V=>{f(te=>te.find(se=>se.productId===V.id)?te.map(se=>se.productId===V.id?{...se,quantity:se.quantity+1}:se):[...te,{productId:V.id,name:V.name,quantity:1,unitPrice:V.price}])},$=(V,te)=>{te>0&&f(ne=>ne.map(se=>se.productId===V?{...se,quantity:te}:se))},j=V=>{f(te=>te.filter(ne=>ne.productId!==V))},_=()=>m.reduce((V,te)=>V+te.quantity*te.unitPrice,0),M=()=>{const V={};return u.clientId||(V.clientId="Selecciona un cliente."),u.title.trim()||(V.title="El título del presupuesto es requerido."),u.observations.trim()||(V.observations="Las observaciones son obligatorias."),m.length===0&&(V.items="Añade al menos un producto o servicio."),V},S=V=>{V.preventDefault();const te=M();if(Object.keys(te).length>0){v(te);return}const ne={...u,volume:u.volume?parseFloat(u.volume):void 0,validUntil:u.validUntil||void 0,pumpRequired:u.pumpRequired==="true",products:m.map(({productId:se,quantity:K,unitPrice:Q})=>{const re={productId:se,quantity:Number(K)};return A&&(re.unitPrice=Number(Q||0)),re})};e(ne)},C=()=>{o(!0),d(null)},R=()=>{o(!1),d(null)},F=async V=>{d(null);try{const te=await Ge.post("/api/clients",V);R(),await L(),g(ne=>({...ne,clientId:te.data.id}))}catch(te){d(te.response?.data?.error||"Error al crear el cliente.")}};return l.jsxs("div",{className:"flex gap-6",children:[l.jsxs("div",{className:"w-1/2 space-y-4",children:[l.jsxs("form",{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Cliente"}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsxs("select",{name:"clientId",value:u.clientId,onChange:q,className:"block w-full rounded-lg border border-gray-200 dark:border-gray-600 bg-white dark:bg-dark-surface px-3 py-2 focus:ring-2 focus:ring-green-200 dark:text-gray-200",children:[l.jsx("option",{value:"",children:"Seleccionar Cliente"}),s.map(V=>l.jsx("option",{value:V.id,children:V.name},V.id))]}),l.jsx("button",{type:"button",onClick:C,className:"p-2 bg-green-700 hover:bg-green-600 text-white rounded-lg transition-colors",title:"Crear Nuevo Cliente",children:l.jsx(Hc,{size:20})})]}),x.clientId&&l.jsx("p",{className:"text-sm text-red-600 mt-1",children:x.clientId})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Título del Proyecto"}),l.jsx("input",{type:"text",name:"title",value:u.title,onChange:q,className:"mt-1 block w-full rounded-lg border border-gray-200 dark:border-gray-600 bg-white dark:bg-dark-surface px-3 py-2 focus:ring-2 focus:ring-green-200 dark:text-gray-200",placeholder:"Ej. Losa Casa Familia Pérez"}),x.title&&l.jsx("p",{className:"text-sm text-red-600 mt-1",children:x.title})]})]}),l.jsx("hr",{className:"border-gray-200 dark:border-gray-700"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Dirección de Obra"}),l.jsx("input",{type:"text",name:"address",value:u.address,onChange:q,className:"mt-1 block w-full rounded-lg border border-gray-200 dark:border-gray-600 bg-white dark:bg-dark-surface px-3 py-2 focus:ring-2 focus:ring-green-200 dark:text-gray-200",placeholder:"Calle, Sector, Ciudad"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Fecha Estimada"}),l.jsx("input",{type:"date",name:"deliveryDate",value:u.deliveryDate,onChange:q,className:"mt-1 block w-full rounded-lg border border-gray-200 dark:border-gray-600 bg-white dark:bg-dark-surface px-3 py-2 focus:ring-2 focus:ring-green-200 dark:text-gray-200"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-400 font-bold",children:"Válido Hasta (Vencimiento)"}),l.jsx("input",{type:"date",name:"validUntil",value:u.validUntil||Hn(new Date(Date.now()+7200*60*1e3),"yyyy-MM-dd"),onChange:q,disabled:!A,className:`mt-1 block w-full rounded-lg border px-3 py-2 focus:ring-2 dark:text-gray-200 ${A?"border-red-200 dark:border-red-900 bg-red-50/30 dark:bg-red-900/10 focus:ring-red-200":"bg-gray-100 dark:bg-dark-surface/50 border-gray-200 text-gray-500 cursor-not-allowed"}`}),!A&&l.jsx("p",{className:"text-[10px] text-gray-400 mt-1 italic",children:"Solo Administradores pueden cambiar esta fecha."})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Tipo de Obra"}),l.jsxs("select",{name:"workType",value:u.workType,onChange:q,className:"mt-1 block w-full rounded-lg border border-gray-200 dark:border-gray-600 bg-white dark:bg-dark-surface px-3 py-2 focus:ring-2 focus:ring-green-200 dark:text-gray-200",children:[l.jsx("option",{value:"vivienda",children:"Vivienda"}),l.jsx("option",{value:"edificio",children:"Edificio"}),l.jsx("option",{value:"comercial",children:"Comercial"}),l.jsx("option",{value:"pavimento",children:"Pavimento"}),l.jsx("option",{value:"otro",children:"Otro"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Elemento"}),l.jsx("input",{type:"text",name:"element",value:u.element,onChange:q,className:"mt-1 block w-full rounded-lg border border-gray-200 dark:border-gray-600 bg-white dark:bg-dark-surface px-3 py-2 focus:ring-2 focus:ring-green-200 dark:text-gray-200",placeholder:"Ej. Losa PB, Columnas"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Resistencia (kg/cm²)"}),l.jsxs("select",{name:"resistance",value:u.resistance,onChange:q,className:"mt-1 block w-full rounded-lg border border-gray-200 dark:border-gray-600 bg-white dark:bg-dark-surface px-3 py-2 focus:ring-2 focus:ring-green-200 dark:text-gray-200",children:[l.jsx("option",{value:"150",children:"150"}),l.jsx("option",{value:"180",children:"180"}),l.jsx("option",{value:"200",children:"200"}),l.jsx("option",{value:"210",children:"210"}),l.jsx("option",{value:"250",children:"250"}),l.jsx("option",{value:"280",children:"280"}),l.jsx("option",{value:"300",children:"300"}),l.jsx("option",{value:"350",children:"350"}),l.jsx("option",{value:"otro",children:"Otro"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Tipo Concreto"}),l.jsxs("select",{name:"concreteType",value:u.concreteType,onChange:q,className:"mt-1 block w-full rounded-lg border border-gray-200 dark:border-gray-600 bg-white dark:bg-dark-surface px-3 py-2 focus:ring-2 focus:ring-green-200 dark:text-gray-200",children:[l.jsx("option",{value:"convencional",children:"Convencional"}),l.jsx("option",{value:"bombeable",children:"Bombeable"}),l.jsx("option",{value:"mr",children:"MR (Pavimento)"}),l.jsx("option",{value:"fino",children:"Fino"})]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Volumen Estimado (m³)"}),l.jsx("input",{type:"number",step:"0.01",min:"0",name:"volume",value:u.volume,onChange:q,className:"mt-1 block w-full rounded-lg border border-gray-200 dark:border-gray-600 bg-white dark:bg-dark-surface px-3 py-2 focus:ring-2 focus:ring-green-200 dark:text-gray-200",placeholder:"0.00"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Servicio de Bomba"}),l.jsxs("select",{name:"pumpRequired",value:u.pumpRequired,onChange:q,className:"mt-1 block w-full rounded-lg border border-gray-200 dark:border-gray-600 bg-white dark:bg-dark-surface px-3 py-2 focus:ring-2 focus:ring-green-200 dark:text-gray-200",children:[l.jsx("option",{value:"false",children:"No requiere"}),l.jsx("option",{value:"true",children:"Sí requiere"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Observaciones (Requerido para aprobación)"}),l.jsx("textarea",{name:"observations",value:u.observations,onChange:q,rows:"3",className:`mt-1 block w-full rounded-lg border ${x.observations?"border-red-500":"border-gray-200 dark:border-gray-600"} bg-white dark:bg-dark-surface px-3 py-2 focus:ring-2 focus:ring-green-200 dark:text-gray-200`,placeholder:"Detalles importantes para la logística o validación técnica..."}),x.observations&&l.jsx("p",{className:"text-sm text-red-600 mt-1",children:x.observations})]})]}),l.jsx("hr",{className:"my-4 border-gray-300 dark:border-gray-600"}),l.jsxs("div",{className:"bg-gray-50 dark:bg-dark-primary/30 rounded-xl border border-gray-100 dark:border-gray-800 overflow-hidden",children:[l.jsxs("div",{className:"px-4 py-3 border-b border-gray-100 dark:border-gray-800 bg-white dark:bg-dark-surface flex justify-between items-center",children:[l.jsx("h3",{className:"text-xs font-black text-brand-primary uppercase tracking-widest",children:"Ítems del Presupuesto"}),l.jsxs("span",{className:"text-[10px] font-bold text-gray-400",children:[m.length," productos"]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"text-[10px] uppercase font-black text-gray-400 dark:text-gray-500 bg-gray-50 dark:bg-dark-surface/50",children:[l.jsx("th",{className:"px-4 py-2",children:"Producto"}),l.jsx("th",{className:"px-2 py-2 text-center w-20",children:"Cant."}),D&&l.jsx("th",{className:"px-2 py-2 text-right",children:"Precio"}),l.jsx("th",{className:"px-4 py-2 text-right w-10"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-800",children:m.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:D?4:3,className:"px-4 py-8 text-center text-[11px] text-gray-400 italic",children:"No hay productos seleccionados. Usa el catálogo a la derecha."})}):m.map(V=>l.jsxs("tr",{className:"hover:bg-white dark:hover:bg-dark-surface/30 transition-colors group",children:[l.jsx("td",{className:"px-4 py-2 text-xs font-bold text-gray-700 dark:text-gray-200",children:V.name}),l.jsx("td",{className:"px-2 py-2",children:l.jsx("input",{type:"number",min:"1",value:V.quantity,onChange:te=>$(V.productId,parseInt(te.target.value,10)||1),className:"w-full h-8 rounded-lg border-gray-200 dark:border-gray-700 bg-white dark:bg-dark-surface text-center text-xs font-black text-brand-primary focus:ring-1 focus:ring-brand-primary"})}),D&&l.jsxs("td",{className:"px-2 py-2 text-right text-xs font-bold text-gray-500 dark:text-gray-400",children:["$",V.unitPrice.toFixed(2)]}),l.jsx("td",{className:"px-4 py-2 text-right",children:l.jsx("button",{onClick:()=>j(V.productId),className:"p-1 text-gray-300 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-all",children:l.jsx(bn,{size:14})})})]},V.productId))})]})}),x.items&&l.jsx("p",{className:"text-[10px] text-red-500 font-bold px-4 py-2 bg-red-50 dark:bg-red-900/10 border-t border-red-100 dark:border-red-900/30",children:x.items})]}),l.jsxs("div",{className:"pt-4 space-y-4",children:[D&&m.length>0&&l.jsxs("div",{className:"text-right text-2xl font-bold text-gray-800 dark:text-white",children:["Total: $",_().toFixed(2)]}),l.jsxs("div",{className:"flex justify-end gap-4",children:[l.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-600",children:"Cancelar"}),l.jsx("button",{type:"button",onClick:S,className:"px-6 py-2 rounded-lg text-white bg-brand-primary hover:bg-brand-mid",children:"Guardar"})]})]})]}),l.jsx("div",{className:"w-1/2",children:l.jsx(q1,{onAddProduct:z})}),a&&l.jsx(Dx,{onSave:F,onCancel:R,isEditing:!1,serverError:c})]})},WS=({isEditing:t,initialValues:e,onSave:r,onCancel:n,userRoles:s})=>{const i=t?"Editar Presupuesto":"Constructor de Presupuestos";return l.jsx(Qo,{onClose:n,title:i,maxWidth:"max-w-6xl",children:l.jsx(qS,{initialValues:e,onSave:r,onCancel:n,userRoles:s})})},HS=()=>{const{user:t}=Mr(),e=t?.["https://premezcladomanzanillo.com/roles"]||[],[r,n]=Z.useState([]),[s,i]=Z.useState(!0),[a,o]=Z.useState(null),[c,d]=Z.useState(!1),[u,g]=Z.useState(null),[m,f]=Z.useState(null),[x,v]=Z.useState("list"),[y,k]=Z.useState(""),[A,D]=Z.useState("all"),[L,q]=Z.useState("all"),[z,$]=Z.useState(""),j=Z.useCallback(async()=>{try{i(!0);const Q=await Ge.get("/api/budgets");n(Q.data)}catch(Q){o("Failed to fetch budgets."),console.error(Q)}finally{i(!1)}},[]);Z.useEffect(()=>{j()},[j]);const _=Z.useMemo(()=>{const Q=new Map;r.forEach(P=>{P.client&&Q.set(P.client.id,P.client.name)});const re=Array.from(Q,([P,I])=>({value:P,label:I}));return[{value:"all",label:"Todos los Clientes"},...re]},[r]),M=Z.useMemo(()=>r.filter(Q=>{const re=Q.title.toLowerCase().includes(y.toLowerCase())||Q.client?.name.toLowerCase().includes(y.toLowerCase()),P=A==="all"||Q.clientId===A,I=L==="all"||Q.status===L,Y=!z||Q.createdAt&&Hn(new Date(Q.createdAt),"yyyy-MM-dd")===z;return re&&P&&I&&Y}),[r,y,A,L,z]),S=()=>{g(null),d(!0)},C=Q=>{g(Q),d(!0)},R=()=>{d(!1),g(null)},F=async Q=>{try{u?await Ge.put(`/api/budgets/${u.id}`,Q):await Ge.post("/api/budgets",Q),R(),j()}catch(re){console.error("Error saving budget:",re),alert("Error al guardar el presupuesto. Verifica los datos e intenta de nuevo.")}},V=async Q=>{if(window.confirm("¿Estás seguro de que quieres eliminar este presupuesto?"))try{await Ge.delete(`/api/budgets/${Q}`),j()}catch(re){o("Failed to delete budget."),console.error(re)}},te=async Q=>{if(window.confirm("¿Estás seguro de que quieres aprobar este presupuesto?"))try{await Ge.post(`/api/budgets/${Q}/approve`),j()}catch(re){o("Failed to approve budget."),console.error(re)}},ne=async(Q,re)=>{if(window.confirm("¿Estás seguro de que quieres rechazar este presupuesto?"))try{await Ge.post(`/api/budgets/${Q}/reject`,{rejectionReason:re}),j()}catch(P){o("Failed to reject budget."),console.error(P)}},se=Q=>{f(Q)},K=()=>{f(null)};return s?l.jsx("div",{className:"p-6 text-center",children:"Cargando presupuestos..."}):a?l.jsx("div",{className:"p-6 text-center text-red-500",children:a}):l.jsxs("div",{className:"w-full p-6 dark:bg-dark-primary",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(Uc,{className:"w-8 h-8 text-black dark:text-green-400"}),l.jsx("h1",{className:"text-3xl font-bold text-brand-primary dark:text-white",children:"Presupuestos"})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>v("canvas"),className:`p-2 rounded-lg ${x==="canvas"?"bg-brand-primary text-white":"bg-gray-200 dark:bg-dark-surface text-gray-600 dark:text-gray-300"}`,children:l.jsx(qc,{size:20})}),l.jsx("button",{onClick:()=>v("list"),className:`p-2 rounded-lg ${x==="list"?"bg-brand-primary text-white":"bg-gray-200 dark:bg-dark-surface text-gray-600 dark:text-gray-300"}`,children:l.jsx(Wc,{size:20})})]}),l.jsxs("button",{onClick:S,className:"bg-brand-primary text-white px-4 py-2 rounded-xl hover:bg-brand-mid transition duration-150 flex items-center gap-2",children:[l.jsx(Hc,{size:20}),"Nuevo Presupuesto"]})]})]}),l.jsx("div",{className:"bg-white dark:bg-dark-primary rounded-2xl p-6 shadow-lg border border-brand-light dark:border-dark-surface mb-6",children:l.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-3",children:[l.jsxs("div",{className:"flex-1 flex items-center gap-3 w-full md:w-auto",children:[l.jsx($o,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"}),l.jsx("input",{type:"text",placeholder:"Buscar por título o cliente...",value:y,onChange:Q=>k(Q.target.value),className:"flex-1 p-3 border border-brand-light dark:border-dark-surface rounded-xl dark:bg-dark-surface focus:outline-none focus:ring-2 focus:ring-brand-mid dark:text-gray-200"})]}),l.jsxs("div",{className:"flex gap-2 w-full md:w-auto justify-end",children:[l.jsx("select",{value:A,onChange:Q=>D(Q.target.value),className:"p-3 border border-brand-light dark:border-dark-surface rounded-xl dark:bg-dark-surface text-sm dark:text-gray-200",children:_.map(Q=>l.jsx("option",{value:Q.value,children:Q.label},Q.value))}),l.jsxs("select",{value:L,onChange:Q=>q(Q.target.value),className:"p-3 border border-brand-light dark:border-dark-surface rounded-xl dark:bg-dark-surface text-sm dark:text-gray-200",children:[l.jsx("option",{value:"all",children:"Todos los Estados"}),l.jsx("option",{value:"DRAFT",children:"Borrador"}),l.jsx("option",{value:"PENDING",children:"Pendiente"}),l.jsx("option",{value:"APPROVED",children:"Aprobado"}),l.jsx("option",{value:"REJECTED",children:"Rechazado"})]}),l.jsx("input",{type:"date",value:z,onChange:Q=>$(Q.target.value),className:"p-3 border border-brand-light dark:border-dark-surface rounded-xl dark:bg-dark-surface text-sm dark:text-gray-200"})]})]})}),l.jsx(hN,{budgets:M,viewMode:x,onEdit:C,onDelete:V,onApprove:te,onReject:ne,onViewDetail:se,userRoles:e,currentUserId:t?.sub}),c&&l.jsx(WS,{isEditing:!!u,initialValues:u||{},onSave:F,onCancel:R,userRoles:e}),m&&l.jsx(US,{budget:m,onClose:K,onApprove:te,userRoles:e})]})},VS=({isOpen:t,onClose:e,onSave:r,product:n})=>{const[s,i]=Z.useState({name:"",description:"",price:"",type:"CONCRETE",category:""});Z.useEffect(()=>{if(n){const c=["CONCRETE","BLOCK","SERVICE","OTHER"],d=n.type||"CONCRETE",u=c.includes(d.toUpperCase())?d.toUpperCase():"OTHER";i({name:n.name||"",description:n.description||"",price:n.price||"",type:u,category:n.category?.name||n.category||""})}else i({name:"",description:"",price:"",type:"CONCRETE",category:""})},[n,t]);const a=c=>{const{name:d,value:u}=c.target;i(g=>({...g,[d]:u}))},o=c=>{c.preventDefault(),r(s)};return t?l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center z-50",children:l.jsxs(Kt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"relative max-w-lg mx-auto bg-white dark:bg-dark-primary p-6 rounded-2xl shadow-lg border border-brand-light dark:border-dark-surface",children:[l.jsx("h2",{className:"text-xl font-semibold text-green-800 dark:text-green-300 mb-4",children:n?"Editar Producto":"Nuevo Producto"}),l.jsxs("form",{onSubmit:o,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nombre"}),l.jsx("input",{type:"text",name:"name",id:"name",value:s.name,onChange:a,className:"mt-1 block w-full rounded-lg border border-gray-200 dark:border-gray-600 bg-white dark:bg-dark-surface px-3 py-2 focus:ring-2 focus:ring-green-200 dark:text-gray-200",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Descripción"}),l.jsx("textarea",{name:"description",id:"description",value:s.description,onChange:a,rows:"3",className:"mt-1 block w-full rounded-lg border border-gray-200 dark:border-gray-600 bg-white dark:bg-dark-surface px-3 py-2 focus:ring-2 focus:ring-green-200 dark:text-gray-200"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Precio"}),l.jsx("input",{type:"number",name:"price",id:"price",step:"0.01",value:s.price,onChange:a,className:"mt-1 block w-full rounded-lg border border-gray-200 dark:border-gray-600 bg-white dark:bg-dark-surface px-3 py-2 focus:ring-2 focus:ring-green-200 dark:text-gray-200",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Tipo"}),l.jsxs("select",{name:"type",id:"type",value:s.type,onChange:a,className:"mt-1 block w-full rounded-lg border border-gray-200 dark:border-gray-600 bg-white dark:bg-dark-surface px-3 py-2 focus:ring-2 focus:ring-green-200 dark:text-gray-200",children:[l.jsx("option",{value:"CONCRETE",children:"Concreto"}),l.jsx("option",{value:"BLOCK",children:"Bloque"}),l.jsx("option",{value:"SERVICE",children:"Servicio"}),l.jsx("option",{value:"OTHER",children:"Otro"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Categoría"}),l.jsx("input",{type:"text",name:"category",id:"category",value:s.category,onChange:a,className:"mt-1 block w-full rounded-lg border border-gray-200 dark:border-gray-600 bg-white dark:bg-dark-surface px-3 py-2 focus:ring-2 focus:ring-green-200 dark:text-gray-200",placeholder:"Ej: Estructural, Bombeo, Asesoría"})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[l.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 rounded-lg bg-gray-100 dark:bg-dark-surface text-gray-700 dark:text-gray-200 border border-gray-200 dark:border-gray-600",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"px-5 py-2 rounded-lg bg-green-700 text-white hover:bg-green-600",children:"Guardar"})]})]})]})}):null},$S=({products:t,onEditProduct:e,onDeleteProduct:r,canManageProduct:n})=>l.jsx("div",{className:"overflow-x-auto bg-white dark:bg-dark-primary rounded-2xl shadow-lg border border-brand-light dark:border-dark-surface",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-brand-light dark:divide-dark-surface",children:[l.jsx("thead",{className:"dark:bg-dark-surface",children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Nombre"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Categoría"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Tipo"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Precio"}),n&&l.jsx("th",{scope:"col",className:"relative px-6 py-3",children:l.jsx("span",{className:"sr-only",children:"Acciones"})})]})}),l.jsx("tbody",{className:"bg-white dark:bg-dark-primary divide-y divide-brand-light dark:divide-dark-surface",children:t.map(s=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-brand-primary dark:text-gray-100",children:s.name}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text dark:text-gray-300",children:s.category?.name||s.category||"N/A"}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text dark:text-gray-300",children:s.type}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text dark:text-gray-300",children:["$",s.price.toFixed(2)]}),n&&l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:l.jsxs("div",{className:"flex items-center justify-end gap-2",children:[l.jsx("button",{onClick:()=>e(s),className:"text-brand-mid hover:text-brand-primary dark:text-green-400 dark:hover:text-green-300",title:"Editar",children:l.jsx(Fa,{className:"w-5 h-5"})}),l.jsx("button",{onClick:()=>r(s.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Eliminar",children:l.jsx(bn,{className:"w-5 h-5"})})]})})]},s.id))})]})})}),YS=({products:t=[],onEditProduct:e,onDeleteProduct:r,canManageProduct:n})=>l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map((s,i)=>l.jsxs(Kt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:i*.05},className:"bg-white dark:bg-dark-surface rounded-2xl p-6 shadow-md border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow flex flex-col justify-between",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-brand-primary dark:text-gray-100 mb-2",children:s.name}),l.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-1",children:["Categoría: ",s.category?.name||s.category||"N/A"]}),l.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-1",children:["Tipo: ",s.type]}),l.jsxs("p",{className:"text-lg font-semibold text-gray-800 dark:text-white mt-3",children:["$",s.price.toFixed(2)]})]}),n&&l.jsxs("div",{className:"flex gap-2 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[l.jsxs("button",{onClick:()=>e(s),className:"flex-1 bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 py-2 px-4 rounded-lg text-center hover:bg-gray-200 dark:hover:bg-gray-600 flex items-center justify-center gap-2",children:[l.jsx(Fa,{className:"w-4 h-4"})," Editar"]}),l.jsx("button",{onClick:()=>r(s.id),className:"bg-red-50 dark:bg-red-900/50 text-red-600 dark:text-red-400 py-2 px-4 rounded-lg hover:bg-red-100 dark:hover:bg-red-900 flex items-center justify-center gap-2",children:l.jsx(bn,{className:"w-4 h-4"})})]})]},s.id))}),GS=({products:t,viewMode:e,onEditProduct:r,onDeleteProduct:n,canManageProduct:s})=>t.length===0?l.jsxs("div",{className:"text-center py-10",children:[l.jsx(ch,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No hay productos que coincidan con la búsqueda."})]}):e==="canvas"?l.jsx(YS,{products:t,onEditProduct:r,onDeleteProduct:n,canManageProduct:s}):l.jsx($S,{products:t,onEditProduct:r,onDeleteProduct:n,canManageProduct:s}),XS=()=>{const{user:t}=Mr(),e=t?.["https://premezcladomanzanillo.com/roles"]||[],[r,n]=Z.useState([]),[s,i]=Z.useState(!0),[a,o]=Z.useState(null),[c,d]=Z.useState(!1),[u,g]=Z.useState(null),[m,f]=Z.useState("list"),[x,v]=Z.useState(""),[y,k]=Z.useState("all"),[A,D]=Z.useState("all"),L=Z.useCallback(async()=>{try{i(!0);const F=await Ge.get("/api/products");n(F.data)}catch(F){o("Error al cargar los productos."),console.error(F)}finally{i(!1)}},[]);Z.useEffect(()=>{L()},[L]);const q=Z.useMemo(()=>e.includes("Administrador")||e.includes("Contable"),[e]),z=Z.useMemo(()=>{const F=r.map(te=>te.category?.name||(typeof te.category=="string"?te.category:null)).filter(Boolean),V=[...new Set(F)];return[{value:"all",label:"Todas las Categorías"},...V.map(te=>({value:te,label:te}))]},[r]),$=Z.useMemo(()=>{const F=[...new Set(r.map(V=>V.type))];return[{value:"all",label:"Todos los Tipos"},...F.map(V=>({value:V,label:V}))]},[r]),j=Z.useMemo(()=>r.filter(F=>{const V=F.name.toLowerCase().includes(x.toLowerCase()),te=F.category?.name||(typeof F.category=="string"?F.category:""),ne=y==="all"||te===y,se=A==="all"||F.type===A;return V&&ne&&se}),[r,x,y,A]),_=()=>{g(null),d(!0)},M=F=>{g(F),d(!0)},S=async F=>{try{u?await Ge.put(`/api/products/${u.id}`,F):await Ge.post("/api/products",F),R(),L()}catch(V){console.error("Error saving product:",V)}},C=async F=>{if(window.confirm("¿Estás seguro de que quieres eliminar este producto?"))try{await Ge.delete(`/api/products/${F}`),L()}catch(V){console.error("Error deleting product:",V),alert("Error al eliminar el producto. Inténtalo de nuevo.")}},R=()=>{d(!1),g(null)};return s?l.jsx("div",{className:"p-6 text-center",children:"Cargando productos..."}):a?l.jsx("div",{className:"p-6 text-center text-red-500",children:a}):l.jsxs("div",{className:"w-full p-6 dark:bg-dark-primary",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(ch,{className:"w-8 h-8 text-black dark:text-green-400"}),l.jsx("h1",{className:"text-3xl font-bold text-brand-primary dark:text-white",children:"Productos y Servicios"})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>f("canvas"),className:`p-2 rounded-lg ${m==="canvas"?"bg-brand-primary text-white":"bg-gray-200 dark:bg-dark-surface text-gray-600 dark:text-gray-300"}`,children:l.jsx(qc,{size:20})}),l.jsx("button",{onClick:()=>f("list"),className:`p-2 rounded-lg ${m==="list"?"bg-brand-primary text-white":"bg-gray-200 dark:bg-dark-surface text-gray-600 dark:text-gray-300"}`,children:l.jsx(Wc,{size:20})})]}),q&&l.jsxs("button",{onClick:_,className:"bg-brand-primary text-white px-4 py-2 rounded-xl hover:bg-brand-mid transition duration-150 flex items-center gap-2",children:[l.jsx(Hc,{size:20}),"Añadir Producto"]})]})]}),l.jsx("div",{className:"bg-white dark:bg-dark-primary rounded-2xl p-6 shadow-lg border border-brand-light dark:border-dark-surface mb-6",children:l.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-3",children:[l.jsxs("div",{className:"flex-1 flex items-center gap-3 w-full md:w-auto",children:[l.jsx($o,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"}),l.jsx("input",{type:"text",placeholder:"Buscar por nombre...",value:x,onChange:F=>v(F.target.value),className:"flex-1 p-3 border border-brand-light dark:border-dark-surface rounded-xl dark:bg-dark-surface focus:outline-none focus:ring-2 focus:ring-brand-mid dark:text-gray-200"})]}),l.jsxs("div",{className:"flex gap-2 w-full md:w-auto justify-end",children:[l.jsx("select",{value:y,onChange:F=>k(F.target.value),className:"p-3 border border-brand-light dark:border-dark-surface rounded-xl dark:bg-dark-surface text-sm dark:text-gray-200",children:z.map((F,V)=>l.jsx("option",{value:F.value,children:F.label},`${F.value}-${V}`))}),l.jsx("select",{value:A,onChange:F=>D(F.target.value),className:"p-3 border border-brand-light dark:border-dark-surface rounded-xl dark:bg-dark-surface text-sm dark:text-gray-200",children:$.map((F,V)=>l.jsx("option",{value:F.value,children:F.label},`${F.value}-${V}`))})]})]})}),l.jsx(GS,{products:j,viewMode:m,onEditProduct:M,onDeleteProduct:C,canManageProduct:q}),c&&l.jsx(VS,{isOpen:c,onClose:R,onSave:S,product:u})]})},JS=({payment:t,onOpenValidationModal:e,onResend:r,onDownloadReceipt:n,canValidatePayment:s,onPayPending:i=()=>{},budgetRemainingDebt:a=0})=>l.jsxs("div",{className:"bg-white dark:bg-dark-surface rounded-lg shadow-md p-4 border border-brand-light dark:border-gray-700",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-brand-primary dark:text-green-400",children:t.budget?.title||t.budgetId}),l.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Cliente: ",t.budget?.client?.name||"N/A"]}),l.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["ID Pago: ",t.id]})]}),l.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${t.status==="PENDING"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300":t.status==="VALIDATED"?"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"}`,children:t.status||"PENDING"})]}),l.jsxs("div",{className:"mt-4",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("p",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:$r(t.paidAmount)}),t.igtfAmount>0&&l.jsxs("span",{className:"text-[10px] font-bold text-orange-600 bg-orange-100 dark:bg-orange-900/30 px-2 py-0.5 rounded-full",children:["+ IGTF: $",t.igtfAmount.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),t.currency==="VES"&&t.amountInCurrency&&l.jsxs("p",{className:"text-xs text-gray-500 font-medium",children:["Equivalente de ",t.amountInCurrency.toLocaleString("es-VE")," Bs. (Tasa: ",t.exchangeRate?.toFixed(2),")"]})]}),l.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Pendiente: ",$r(t.pending)]}),l.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Fecha Pago: ",t.date?new Date(t.date).toLocaleDateString():"N/A"]}),l.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Método: ",t.method||"-"]}),t.validator&&l.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Validado por: ",t.validator.name," el ",t.validatedAt?new Date(t.validatedAt).toLocaleDateString():"N/A"]}),t.observations&&l.jsxs("p",{className:"text-sm text-red-500 dark:text-red-400",children:["Observaciones: ",t.observations]})]}),l.jsxs("div",{className:"mt-4 border-t border-brand-light dark:border-gray-700 pt-3",children:[l.jsx("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Documentos:"}),l.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[t.receiptUrl?l.jsxs("a",{href:t.receiptUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline flex items-center gap-1",children:[l.jsx(Pn,{size:16})," Recibo de Pago"]}):l.jsx("span",{className:"text-gray-500",children:"Recibo no disponible"}),t.proFormaInvoiceUrl?l.jsxs("a",{href:t.proFormaInvoiceUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline flex items-center gap-1",children:[l.jsx(Pn,{size:16})," Factura Proforma"]}):l.jsx("span",{className:"text-gray-500",children:"Proforma no disponible"}),t.fiscalInvoiceUrl?l.jsxs("a",{href:t.fiscalInvoiceUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline flex items-center gap-1",children:[l.jsx(Pn,{size:16})," Factura Fiscal"]}):l.jsx("span",{className:"text-gray-500",children:"Factura Fiscal no disponible"}),t.deliveryOrderUrl?l.jsxs("a",{href:t.deliveryOrderUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline flex items-center gap-1",children:[l.jsx(Pn,{size:16})," Orden de Entrega"]}):l.jsx("span",{className:"text-gray-500",children:"Orden de Entrega no disponible"})]})]}),l.jsxs("div",{className:"mt-4 flex gap-2",children:[s(t)&&l.jsxs("button",{onClick:()=>e(t),title:"Validar pago",className:"flex-1 px-2 py-1 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg text-sm flex items-center justify-center gap-2",children:["✅",l.jsx("span",{children:"Validar"})]}),t.status==="REJECTED"&&l.jsx("button",{onClick:()=>r(t.id),className:"flex-1 px-2 py-1 bg-brand-primary text-white rounded-lg text-sm",children:"Reenviar"}),a>.01&&l.jsx("button",{onClick:()=>i(t),className:"flex-1 px-2 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm flex items-center justify-center gap-2",children:"Abonar"})]})]}),KS=({onClose:t,onSubmit:e,payment:r})=>{const[n,s]=Z.useState(r.status||"PENDING"),[i,a]=Z.useState(r.observations||""),[o,c]=Z.useState(null),[d,u]=Z.useState(null),[g,m]=Z.useState({});Z.useEffect(()=>{s(r.status||"PENDING"),a(r.observations||""),c(null),u(null)},[r]);const f=()=>{const v={};return n==="REJECTED"&&!i.trim()&&(v.observations="Debe proporcionar una razón para el rechazo."),m(v),Object.keys(v).length===0},x=v=>{if(v.preventDefault(),!f())return;const y=new FormData;y.append("status",n),y.append("observations",i),o&&y.append("fiscalInvoice",o),d&&y.append("deliveryOrder",d),e(r.id,y),t()};return l.jsx(Qo,{onClose:t,title:`Validar Pago para Presupuesto: ${r.budget?.title||r.budgetId}`,children:l.jsxs("form",{onSubmit:x,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Estado del Pago"}),l.jsxs("select",{value:n,onChange:v=>s(v.target.value),className:"w-full p-2 border border-gray-300 rounded-md dark:bg-dark-surface dark:text-gray-200",children:[l.jsx("option",{value:"PENDING",children:"PENDIENTE"}),l.jsx("option",{value:"VALIDATED",children:"VALIDADO"}),l.jsx("option",{value:"REJECTED",children:"RECHAZADO"})]})]}),n==="REJECTED"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Motivo de Rechazo"}),l.jsx("textarea",{value:i,onChange:v=>a(v.target.value),className:"w-full p-2 border border-gray-300 rounded-md dark:bg-dark-surface dark:text-gray-200",rows:"3",placeholder:"Ingrese el motivo por el cual se rechaza el pago."}),g.observations&&l.jsx("p",{className:"text-red-500 text-xs mt-1",children:g.observations})]}),n==="VALIDATED"&&l.jsxs("div",{className:"space-y-3",children:[l.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-100",children:"Documentos (Opcional)"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Factura Fiscal (PDF)"}),l.jsx("input",{type:"file",accept:"application/pdf",onChange:v=>c(v.target.files[0]),className:"w-full text-sm dark:text-gray-300"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Orden de Entrega (PDF)"}),l.jsx("input",{type:"file",accept:"application/pdf",onChange:v=>u(v.target.files[0]),className:"w-full text-sm dark:text-gray-300"})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[l.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md dark:bg-dark-surface dark:text-gray-200",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"px-4 py-2 bg-brand-primary text-white rounded-md",children:"Guardar Cambios"})]})]})})},ZS=({payments:t=[],viewMode:e="list",onValidate:r=()=>{},onResend:n=()=>{},onDownloadReceipt:s=()=>{},onPayPending:i=()=>{},budgetDebtMap:a={},userRoles:o=[],currentUserId:c=null})=>{const[d,u]=Z.useState(!1),[g,m]=Z.useState(null),f=A=>(o.includes("Administrador")||o.includes("Contable"))&&A.status==="PENDING",x=A=>{m(A),u(!0)},v=()=>{u(!1),m(null)},y=(A,D)=>{r(A,D)},k=()=>{if(!Array.isArray(t)||t.length===0){alert("No hay pagos para exportar");return}const A=t.map(j=>({ID:j.id,Presupuesto:j.budgetId||"",Fecha:j.date?new Date(j.date).toLocaleDateString():"",Monto:j.amount||j.paidAmount||0,Metodo:j.method||j.metodo||"",Estado:j.status||"",Referencia:j.reference||"",Cliente:j.budget?.client?.name||"",ProcesadoPor:j.validator?.name||"",FechaValidacion:j.validatedAt?new Date(j.validatedAt).toLocaleDateString():""})),D=Object.keys(A[0]),L=j=>j==null?"":`"${String(j).replace(/"/g,'""')}"`,q=[D.join(",")].concat(A.map(j=>D.map(_=>L(j[_])).join(","))).join(`
`),z=new Blob([q],{type:"text/csv;charset=utf-8;"}),$=`pagos-${new Date().toISOString().slice(0,19).replace(/[:T]/g,"-")}.csv`;if(navigator.msSaveBlob)navigator.msSaveBlob(z,$);else{const j=document.createElement("a"),_=URL.createObjectURL(z);j.setAttribute("href",_),j.setAttribute("download",$),j.style.visibility="hidden",document.body.appendChild(j),j.click(),document.body.removeChild(j),URL.revokeObjectURL(_)}};return l.jsxs("div",{className:"bg-white dark:bg-dark-primary rounded-2xl p-4 shadow-lg border border-brand-light dark:border-dark-surface",children:[l.jsxs("div",{className:"flex items-center justify-end mb-4",children:[" ",l.jsx("div",{children:l.jsx("button",{onClick:k,className:"px-3 py-2 bg-gray-100 hover:bg-gray-200 dark:bg-dark-surface dark:text-gray-200 rounded-lg",children:"Exportar CSV"})})]}),e==="list"?l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"text-sm text-brand-text dark:text-gray-400",children:[l.jsx("th",{className:"p-2 font-semibold",children:"ID"}),l.jsx("th",{className:"p-2 font-semibold",children:"Presupuesto"}),l.jsx("th",{className:"p-2 font-semibold",children:"Cliente"}),l.jsx("th",{className:"p-2 font-semibold",children:"Monto Pagado"}),l.jsx("th",{className:"p-2 font-semibold",children:"Monto Pendiente"}),l.jsx("th",{className:"p-2 font-semibold",children:"Fecha Pago"}),l.jsx("th",{className:"p-2 font-semibold",children:"Método"}),l.jsx("th",{className:"p-2 font-semibold",children:"Estado"}),l.jsx("th",{className:"p-2 font-semibold",children:"Procesado Por"}),l.jsx("th",{className:"p-2 font-semibold",children:"Fecha Procesado"}),l.jsx("th",{className:"p-2 font-semibold",children:"Archivos"}),l.jsx("th",{className:"p-2 font-semibold",children:"Acciones"})]})}),l.jsx("tbody",{children:t.map(A=>l.jsxs("tr",{className:"border-t dark:border-dark-surface",children:[l.jsx("td",{className:"p-2 text-sm text-gray-700 dark:text-gray-300",children:A.id}),l.jsx("td",{className:"p-2 text-sm text-gray-700 dark:text-gray-300",children:A.budget?.title||A.budgetId}),l.jsx("td",{className:"p-2 text-sm text-gray-700 dark:text-gray-300",children:A.budget?.client?.name||"N/A"}),l.jsx("td",{className:"p-2 text-sm",children:l.jsxs("div",{className:"flex flex-col",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-bold",children:$r(A.paidAmount)}),A.igtfAmount>0&&l.jsx("span",{className:"text-[9px] font-bold text-orange-600 bg-orange-100 dark:bg-orange-900/30 px-1.5 py-0.5 rounded-full",title:"IGTF Aplicado",children:"+IGTF"})]}),A.currency==="VES"&&A.amountInCurrency&&l.jsxs("span",{className:"text-[10px] text-gray-500 dark:text-gray-400",children:["Original: ",A.amountInCurrency.toLocaleString("es-VE")," Bs.",l.jsx("br",{}),"(Tasa: ",A.exchangeRate?.toFixed(2),")"]})]})}),l.jsx("td",{className:"p-2 text-sm text-gray-700 dark:text-gray-100 font-medium",children:$r(A.pending)}),l.jsx("td",{className:"p-2 text-sm text-gray-700 dark:text-gray-300",children:A.date?new Date(A.date).toLocaleDateString():"N/A"}),l.jsx("td",{className:"p-2 text-sm text-gray-700 dark:text-gray-300",children:A.method||"-"}),l.jsx("td",{className:"p-2 text-sm",children:l.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${A.status==="PENDING"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300":A.status==="VALIDATED"?"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"}`,children:A.status||"PENDING"})}),l.jsx("td",{className:"p-2 text-sm text-gray-700 dark:text-gray-300",children:A.validator?.name||"N/A"}),l.jsx("td",{className:"p-2 text-sm text-gray-700 dark:text-gray-300",children:A.validatedAt?new Date(A.validatedAt).toLocaleDateString():"N/A"}),l.jsx("td",{className:"p-2 text-sm",children:l.jsx("div",{className:"flex flex-col gap-2",children:[{url:A.receiptUrl,label:"Recibo"},{url:A.proFormaInvoiceUrl,label:"Proforma"},{url:A.fiscalInvoiceUrl,label:"F. Fiscal"},{url:A.deliveryOrderUrl,label:"O. Entrega"}].filter(D=>D.url).map((D,L)=>l.jsxs("div",{className:"flex items-center gap-2 group",children:[l.jsx("span",{className:"text-[10px] font-bold text-gray-400 dark:text-gray-500 w-16 truncate",children:D.label}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("a",{href:D.url,target:"_blank",rel:"noopener noreferrer",className:"p-1 text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-md transition-colors",title:`Ver ${D.label}`,children:l.jsx(Eu,{size:14})}),l.jsx("a",{href:D.url,download:!0,className:"p-1 text-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 rounded-md transition-colors",title:`Descargar ${D.label}`,children:l.jsx(Pn,{size:14})})]})]},L))})}),l.jsx("td",{className:"p-2 text-sm",children:l.jsxs("div",{className:"flex gap-2",children:[f(A)&&l.jsx("button",{onClick:()=>x(A),title:"Validar pago",className:"px-2 py-1 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg",children:"Validar"}),A.status==="REJECTED"&&l.jsx("button",{onClick:()=>n(A.id),className:"px-2 py-1 bg-brand-primary text-white rounded-lg",children:"Reenviar"}),a[A.budgetId]>.01&&l.jsx("button",{onClick:()=>i(A),className:"px-2 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded-lg flex items-center gap-1",title:"Registrar abono",children:"Abonar"}),o.includes("Administrador")&&l.jsx("button",{onClick:async()=>{if(window.confirm("¿Estás 100% seguro de ELIMINAR este pago? Esta acción es irreversible y también borrará la factura asociada."))try{await api.delete(`/api/payments/${A.id}`),window.location.reload()}catch{alert("Error al eliminar el pago.")}},className:"p-1 px-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"ELIMINAR PAGO (Admin)",children:l.jsx(bn,{size:16})})]})})]},A.id))})]})}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(A=>l.jsx(JS,{payment:A,onOpenValidationModal:x,onResend:n,onDownloadReceipt:s,onPayPending:i,budgetRemainingDebt:a[A.budgetId],canValidatePayment:f},A.id))}),d&&l.jsx(KS,{onClose:v,onSubmit:y,payment:g})]})},QS=({onSubmit:t=()=>{},onCancel:e=()=>{},approvedBudgets:r=[],initialValues:n=null})=>{const{exchangeRate:s}=xh(),{settings:i}=Kc(),[a,o]=Z.useState(""),[c,d]=Z.useState(""),[u,g]=Z.useState(""),[m,f]=Z.useState("USD"),[x,v]=Z.useState(!1),[y,k]=Z.useState(""),[A,D]=Z.useState(s||""),[L,q]=Z.useState("Transferencia"),[z,$]=Z.useState(""),[j,_]=Z.useState(""),[M,S]=Z.useState(""),[C,R]=Z.useState(null),[F,V]=Z.useState({});Z.useEffect(()=>{n?(n.budgetId&&o(n.budgetId),n.amount&&g(n.amount)):r.length>0&&!a&&o(r[0].id)},[r,a,n]);const te=()=>{const K={};return a||(K.budgetId="Debe seleccionar un presupuesto."),m==="USD"?(!u||parseFloat(u)<=0)&&(K.paidAmount="El monto pagado debe ser mayor a 0."):((!y||parseFloat(y)<=0)&&(K.amountInCurrency="El monto en Bs. debe ser mayor a 0."),(!A||parseFloat(A)<=0)&&(K.exchangeRate="La tasa de cambio debe ser válida.")),L||(K.method="Debe seleccionar un método de pago."),V(K),Object.keys(K).length===0};Z.useEffect(()=>{if(m==="VES"&&y&&A){const K=(parseFloat(y)/parseFloat(A)).toFixed(2);g(K)}},[m,y,A]),Z.useEffect(()=>{if(m==="VES"&&u&&!y&&A){const K=(parseFloat(u)*parseFloat(A)).toFixed(2);k(K)}},[m]);const ne=K=>parseFloat(K||0).toLocaleString("en-US",{style:"currency",currency:"USD"}),se=K=>{if(K.preventDefault(),!te())return;const Q=new FormData;if(Q.append("budgetId",a),Q.append("paidAmount",u),Q.append("date",c||new Date().toISOString()),Q.append("method",L),Q.append("currency",m),m==="VES"&&(Q.append("exchangeRate",A),Q.append("amountInCurrency",y)),x){const re=parseFloat(u||0)*(parseFloat(i?.company_igtf||3)/100);Q.append("igtfAmount",re.toFixed(2))}z&&Q.append("reference",z),j&&Q.append("bankFrom",j),M&&Q.append("bankTo",M),C&&Q.append("receipt",C),t(Q)};return l.jsxs("form",{onSubmit:se,className:"bg-white dark:bg-dark-primary rounded-2xl p-6 shadow-md border border-brand-light dark:border-dark-surface",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-brand-text dark:text-gray-300 mb-1",children:"Presupuesto Asociado"}),l.jsx("select",{value:a,onChange:K=>o(K.target.value),className:"w-full p-3 border border-brand-light dark:border-gray-600 bg-white dark:bg-dark-surface dark:text-gray-200 rounded-lg",children:r.length===0?l.jsx("option",{value:"",children:"No hay presupuestos aprobados"}):r.map(K=>l.jsxs("option",{value:K.id,children:[K.title," (Total: $",K.total.toFixed(2),")"]},K.id))}),F.budgetId&&l.jsx("p",{className:"text-red-500 text-xs mt-1",children:F.budgetId})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-brand-text dark:text-gray-300 mb-1",children:"Fecha de pago"}),l.jsx("input",{type:"date",value:c,onChange:K=>d(K.target.value),className:"w-full p-3 border border-brand-light dark:border-gray-600 bg-white dark:bg-dark-surface dark:text-gray-200 rounded-lg"})]}),l.jsxs("div",{className:"flex flex-col gap-4",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"block text-sm text-brand-text dark:text-gray-300 mb-1",children:"Moneda del Pago"}),l.jsxs("select",{value:m,onChange:K=>f(K.target.value),className:"w-full p-3 border border-brand-light dark:border-gray-600 bg-white dark:bg-dark-surface dark:text-gray-200 rounded-lg",children:[l.jsx("option",{value:"USD",children:"Dólares ($)"}),l.jsx("option",{value:"VES",children:"Bolívares (Bs.)"})]})]}),l.jsxs("div",{className:"flex-[2]",children:[l.jsx("label",{className:"block text-sm text-brand-text dark:text-gray-300 mb-1",children:m==="USD"?"Monto a Abonar a Deuda ($)":"Monto en Bolívares (Bs.)"}),l.jsx("input",{type:"number",step:"0.01",value:m==="USD"?u:y,onChange:K=>m==="USD"?g(K.target.value):k(K.target.value),className:"w-full p-3 border border-brand-light dark:border-gray-600 bg-white dark:bg-dark-surface dark:text-gray-200 rounded-lg font-bold",placeholder:"0.00"}),F.paidAmount&&l.jsx("p",{className:"text-red-500 text-xs mt-1",children:F.paidAmount}),F.amountInCurrency&&l.jsx("p",{className:"text-red-500 text-xs mt-1",children:F.amountInCurrency})]})]}),l.jsxs("div",{className:"p-4 bg-orange-50 dark:bg-orange-900/20 rounded-xl border border-orange-100 dark:border-orange-800",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:x,onChange:K=>v(K.target.checked),className:"rounded text-orange-600 focus:ring-orange-500"}),l.jsxs("span",{className:"text-sm font-bold text-orange-800 dark:text-orange-300",children:["¿Aplica IGTF? (",i?.company_igtf||3,"%)"]})]}),x&&l.jsxs("div",{className:"text-right",children:[l.jsxs("span",{className:"block text-sm font-bold text-orange-700 dark:text-orange-400",children:["+ ",ne(parseFloat(u||0)*(parseFloat(i?.company_igtf||3)/100))]}),m==="VES"&&A&&l.jsxs("span",{className:"text-[10px] text-orange-600 dark:text-orange-400",children:["≈ ",(parseFloat(u||0)*(parseFloat(i?.company_igtf||3)/100)*parseFloat(A)).toLocaleString("es-VE",{minimumFractionDigits:2})," Bs."]})]})]}),l.jsx("p",{className:"text-[10px] text-orange-600 dark:text-orange-400",children:"El IGTF es un impuesto adicional y no se resta del saldo pendiente del presupuesto."})]}),m==="VES"&&l.jsxs("div",{className:"flex gap-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-100 dark:border-blue-800",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"block text-xs font-bold text-blue-700 dark:text-blue-300 mb-1",children:"Tasa BCV del Pago"}),l.jsx("input",{type:"number",step:"0.01",value:A,onChange:K=>D(K.target.value),className:"w-full p-2 border border-blue-200 dark:border-blue-700 bg-white dark:bg-dark-primary dark:text-white rounded-lg text-sm"}),F.exchangeRate&&l.jsx("p",{className:"text-red-500 text-xs mt-1",children:F.exchangeRate})]}),l.jsxs("div",{className:"flex-[1.5] flex flex-col justify-center",children:[l.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium",children:"Equivalente a abonar:"}),l.jsx("span",{className:"text-lg font-bold text-blue-800 dark:text-blue-200",children:u?`$ ${parseFloat(u).toLocaleString("en-US",{minimumFractionDigits:2})}`:"$ 0.00"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-brand-text dark:text-gray-300 mb-1",children:"Método"}),l.jsxs("select",{value:L,onChange:K=>q(K.target.value),className:"w-full p-3 border border-brand-light dark:border-gray-600 bg-white dark:bg-dark-surface dark:text-gray-200 rounded-lg",children:[l.jsx("option",{value:"Transferencia",children:"Transferencia"}),l.jsx("option",{value:"Depósito",children:"Depósito"}),l.jsx("option",{value:"Cheque",children:"Cheque"}),l.jsx("option",{value:"Efectivo",children:"Efectivo"}),l.jsx("option",{value:"Punto de Venta",children:"Punto de Venta"})]}),F.method&&l.jsx("p",{className:"text-red-500 text-xs mt-1",children:F.method})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-brand-text dark:text-gray-300 mb-1",children:"Referencia (Opcional)"}),l.jsx("input",{value:z,onChange:K=>$(K.target.value),className:"w-full p-3 border border-brand-light dark:border-gray-600 bg-white dark:bg-dark-surface dark:text-gray-200 rounded-lg"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-brand-text dark:text-gray-300 mb-1",children:"Banco emisor (Opcional)"}),l.jsx("input",{value:j,onChange:K=>_(K.target.value),className:"w-full p-3 border border-brand-light dark:border-gray-600 bg-white dark:bg-dark-surface dark:text-gray-200 rounded-lg"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-brand-text dark:text-gray-300 mb-1",children:"Banco receptor (Opcional)"}),l.jsx("input",{value:M,onChange:K=>S(K.target.value),className:"w-full p-3 border border-brand-light dark:border-gray-600 bg-white dark:bg-dark-surface dark:text-gray-200 rounded-lg"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm text-brand-text dark:text-gray-300 mb-1",children:"Comprobante (PDF/Imagen) (Opcional)"}),l.jsx("input",{type:"file",accept:"application/pdf,image/*",onChange:K=>R(K.target.files[0]),className:"w-full dark:text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-brand-primary file:text-white hover:file:bg-brand-mid"})]})]}),l.jsxs("div",{className:"mt-4 flex gap-2 justify-end",children:[l.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 rounded-lg bg-gray-100 dark:bg-dark-surface dark:text-gray-200",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"px-4 py-2 rounded-lg bg-brand-primary text-white",children:"Registrar Pago"})]})]})},e6=({receipt:t,onClose:e=()=>{},onDownload:r=()=>{}})=>t?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-white dark:bg-dark-primary rounded-2xl w-full max-w-2xl p-6 shadow-lg border border-brand-light dark:border-dark-surface",children:[l.jsxs("div",{className:"flex items-start justify-between mb-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-brand-primary dark:text-gray-100",children:"Comprobante de Pago"}),l.jsxs("p",{className:"text-sm text-brand-text dark:text-gray-400",children:["ID: ",t.id]})]}),l.jsx("button",{onClick:e,className:"p-2 rounded-md bg-gray-100 dark:bg-dark-surface hover:bg-gray-200 dark:hover:bg-gray-600",children:l.jsx(Ji,{className:"w-5 h-5 text-gray-700 dark:text-gray-300"})})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-brand-text dark:text-gray-400",children:"Cliente"}),l.jsx("p",{className:"font-medium text-gray-800 dark:text-gray-100",children:t.clientName||"—"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-brand-text dark:text-gray-400",children:"Fecha"}),l.jsx("p",{className:"font-medium text-gray-800 dark:text-gray-100",children:new Date(t.date).toLocaleString()})]})]}),l.jsxs("div",{className:"mb-4 dark:bg-dark-surface/50 p-4 rounded-lg",children:[l.jsx("p",{className:"text-sm text-brand-text dark:text-gray-400",children:"Presupuesto"}),l.jsx("p",{className:"font-medium text-gray-800 dark:text-gray-100",children:t.budgetTitle||t.budgetId}),l.jsx("p",{className:"text-sm text-brand-text dark:text-gray-400 mt-2",children:"Monto"}),l.jsx("p",{className:"font-bold text-brand-dark dark:text-gray-100",children:$r(t.amount)})]}),l.jsxs("div",{className:"flex gap-2 justify-end",children:[l.jsxs("button",{onClick:()=>r(t),className:"flex items-center gap-2 bg-brand-primary text-white px-4 py-2 rounded-lg hover:bg-brand-mid",children:[l.jsx(Pn,{className:"w-4 h-4"})," Descargar PDF (simulado)"]}),l.jsx("button",{onClick:e,className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-surface",children:"Cerrar"})]})]})}):null,t6=()=>{const{user:t}=Mr(),e=t?.["https://premezcladomanzanillo.com/roles"]||[],r=t?.sub,[n,s]=Z.useState([]),[i,a]=Z.useState([]),[o,c]=Z.useState(!0),[d,u]=Z.useState(null),[g,m]=Z.useState(!1),[f,x]=Z.useState(null),[v,y]=Z.useState("list"),[k,A]=Z.useState(""),D=Z.useCallback(async()=>{try{c(!0);const F=await Ge.get("/api/payments");s(F.data)}catch(F){u("Error al cargar pagos."),console.error(F)}finally{c(!1)}},[]),L=Z.useCallback(async()=>{try{const F=await Ge.get("/api/budgets");a(F.data)}catch(F){console.error("Error al cargar presupuestos:",F)}},[]);Z.useEffect(()=>{D(),L()},[D,L]);const q=Z.useMemo(()=>i.filter(F=>F.status==="APPROVED"),[i]),z=Z.useMemo(()=>n.filter(F=>F.budgetId.toLowerCase().includes(k.toLowerCase())||F.reference?.toLowerCase().includes(k.toLowerCase())||F.method.toLowerCase().includes(k.toLowerCase())),[n,k]),[$,j]=Z.useState(null),_=F=>{j({budgetId:F.budgetId,amount:F.pending}),m(!0)},M=async F=>{try{await Ge.post("/api/payments",F),m(!1),j(null),D(),alert("Pago registrado con éxito. Pendiente de validación.")}catch(V){console.error("Error al registrar pago:",V),u(V.response?.data?.error||"Error al registrar pago.")}},S=async(F,V)=>{try{await Ge.put(`/api/payments/${F}`,V),D(),alert("Pago procesado con éxito.")}catch(te){console.error("Error al validar pago:",te),u(te.response?.data?.error||"Error al validar pago.")}},C=F=>{F.paymentReceiptUrl?window.open(F.paymentReceiptUrl,"_blank"):alert("No hay comprobante de pago disponible para descargar.")},R=async F=>{alert(`Reenviar para validación ${F} (funcionalidad pendiente de implementar)`)};return o?l.jsx("div",{className:"p-6 text-center",children:"Cargando pagos..."}):d?l.jsx("div",{className:"p-6 text-center text-red-500",children:d}):l.jsxs("div",{className:"container mx-auto px-4 py-8",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(Uc,{className:"w-8 h-8 text-black dark:text-green-400"}),l.jsx("h1",{className:"text-3xl font-bold text-brand-primary dark:text-white",children:"Pagos"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>y("canvas"),className:`p-2 rounded-lg ${v==="canvas"?"bg-brand-primary text-white":"bg-gray-200 dark:bg-dark-surface text-gray-600 dark:text-gray-300"}`,children:l.jsx(qc,{className:"w-5 h-5"})}),l.jsx("button",{onClick:()=>y("list"),className:`p-2 rounded-lg ${v==="list"?"bg-brand-primary text-white":"bg-gray-200 dark:bg-dark-surface text-gray-600 dark:text-gray-300"}`,children:l.jsx(Wc,{className:"w-5 h-5"})})]}),l.jsx("button",{onClick:()=>m(!0),className:"bg-brand-primary text-white px-4 py-2 rounded-xl hover:bg-brand-mid",children:"Registrar Pago"})]})]}),l.jsx("div",{className:"bg-white dark:bg-dark-primary rounded-2xl p-6 shadow-lg border border-brand-light dark:border-dark-surface mb-6",children:l.jsx("div",{className:"flex flex-col md:flex-row items-center gap-3",children:l.jsxs("div",{className:"flex-1 flex items-center gap-3 w-full md:w-auto",children:[l.jsx($o,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"}),l.jsx("input",{type:"text",placeholder:"Buscar por ID de presupuesto o referencia...",value:k,onChange:F=>A(F.target.value),className:"flex-1 p-3 border border-brand-light dark:border-dark-surface rounded-xl dark:bg-dark-surface focus:outline-none focus:ring-2 focus:ring-brand-mid dark:text-gray-200"})]})})}),g&&l.jsx("div",{className:"mb-6",children:l.jsx(QS,{onCancel:()=>m(!1),onSubmit:M,approvedBudgets:q})}),l.jsx(ZS,{payments:z,viewMode:v,onValidate:S,onResend:R,onDownloadReceipt:C,onPayPending:_,userRoles:e,currentUserId:r}),f&&l.jsx(e6,{receipt:f,onClose:()=>x(null),onDownload:C})]})},r6=()=>{const{user:t}=Mr(),e=t?.["https://premezcladomanzanillo.com/roles"]||[],[r,n]=Z.useState([]),[s,i]=Z.useState(!0),[a,o]=Z.useState(null),[c,d]=Z.useState(!1),[u,g]=Z.useState(null),[m,f]=Z.useState(!1),[x,v]=Z.useState(null),[y,k]=Z.useState(null),[A,D]=Z.useState(null),L=Z.useCallback(async()=>{try{i(!0);const C=await Ge.get("/api/invoices");n(C.data)}catch(C){o("Error al cargar facturas."),console.error(C)}finally{i(!1)}},[]);Z.useEffect(()=>{L()},[L]);const q=e.includes("Administrador")||e.includes("Contable")||e.includes("Operaciones"),z=e.includes("Contable"),$=e.includes("Operaciones"),j=e.includes("Administrador")||e.includes("Contable"),_=C=>{g(C),d(!0),k(null),D(null),v(null)},M=()=>{d(!1),g(null),k(null),D(null),v(null)},S=async()=>{if(u){if(z&&(!y||!A)){v("Para el rol Contable, tanto la Factura Fiscal como la Orden de Entrega son obligatorias.");return}if(!y&&!A){v("Por favor, selecciona al menos un documento para subir.");return}try{f(!0),v(null);const C=new FormData;y&&C.append("fiscalInvoice",y),A&&C.append("deliveryOrder",A),await Ge.patch(`/api/invoices/${u.id}`,C,{headers:{"Content-Type":"multipart/form-data"}}),M(),L()}catch(C){console.error("Error uploading documents:",C),v(C.response?.data?.error||"Error al subir los documentos. Por favor, inténtalo de nuevo.")}finally{f(!1)}}};return s?l.jsx("div",{className:"p-6 text-center dark:text-white",children:"Cargando facturas..."}):a?l.jsx("div",{className:"p-6 text-center text-red-500 dark:text-red-400",children:a}):l.jsxs("div",{className:"w-full p-6 dark:bg-dark-primary",children:[l.jsx("div",{className:"flex justify-between items-center mb-6",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(Uc,{className:"w-8 h-8 text-black dark:text-green-400"}),l.jsx("h1",{className:"text-3xl font-bold text-brand-primary dark:text-white",children:"Facturas"})]})}),l.jsx("div",{className:"bg-white dark:bg-dark-primary rounded-2xl shadow-lg border border-brand-light dark:border-dark-surface mb-6",children:r.length===0?l.jsx("p",{className:"text-center text-gray-500 dark:text-gray-300 p-6",children:"No hay facturas disponibles."}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-brand-light dark:divide-dark-surface",children:[l.jsx("thead",{className:"dark:bg-dark-surface",children:l.jsxs("tr",{className:"text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:[l.jsx("th",{scope:"col",className:"px-6 py-3",children:"No. Factura"}),l.jsx("th",{scope:"col",className:"px-6 py-3",children:"Presupuesto"}),l.jsx("th",{scope:"col",className:"px-6 py-3",children:"Cliente"}),l.jsx("th",{scope:"col",className:"px-6 py-3",children:"Estado"}),l.jsx("th",{scope:"col",className:"px-6 py-3",children:"Generada"}),l.jsx("th",{scope:"col",className:"relative px-6 py-3",children:l.jsx("span",{className:"sr-only",children:"Acciones"})})]})}),l.jsx("tbody",{className:"bg-white dark:bg-dark-primary divide-y divide-brand-light dark:divide-dark-surface",children:r.map(C=>l.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-dark-surface",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-brand-primary dark:text-gray-100",children:C.invoiceNumber}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text dark:text-gray-300",children:C.payment?.budget?.title||"N/A"}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text dark:text-gray-300",children:C.payment?.budget?.client?.name||"N/A"}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${C.status==="FISCAL_ISSUED"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:C.status==="PROFORMA"?"Proforma":"Fiscal Emitida"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-brand-text dark:text-gray-300",children:Hn(new Date(C.proformaGeneratedAt),"dd/MM/yyyy")}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:l.jsxs("div",{className:"flex flex-col gap-1 items-end",children:[C.fiscalInvoiceUrl&&(!$||j)&&l.jsxs("div",{className:"flex items-center gap-2 group",children:[l.jsx("span",{className:"text-[10px] font-bold text-gray-400 dark:text-gray-500",children:"Factura"}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("a",{href:C.fiscalInvoiceUrl,target:"_blank",rel:"noopener noreferrer",className:"p-1 text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-md transition-colors",title:"Ver Factura Fiscal",children:l.jsx(Eu,{className:"w-4 h-4"})}),l.jsx("a",{href:C.fiscalInvoiceUrl,download:!0,className:"p-1 text-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 rounded-md transition-colors",title:"Descargar Factura Fiscal",children:l.jsx(Pn,{className:"w-4 h-4"})})]})]}),C.deliveryOrderUrl&&l.jsxs("div",{className:"flex items-center gap-2 group",children:[l.jsx("span",{className:"text-[10px] font-bold text-gray-400 dark:text-gray-500",children:"Entrega"}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("a",{href:C.deliveryOrderUrl,target:"_blank",rel:"noopener noreferrer",className:"p-1 text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-md transition-colors",title:"Ver Orden de Entrega",children:l.jsx(Eu,{className:"w-4 h-4"})}),l.jsx("a",{href:C.deliveryOrderUrl,download:!0,className:"p-1 text-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 rounded-md transition-colors",title:"Descargar Orden de Entrega",children:l.jsx(Pn,{className:"w-4 h-4"})})]})]}),l.jsxs("div",{className:"flex gap-2 items-center mt-2",children:[q&&(C.status==="PROFORMA"||!C.fiscalInvoiceUrl||!C.deliveryOrderUrl)&&l.jsx("button",{onClick:()=>_(C),className:"text-brand-mid hover:text-brand-primary dark:text-green-400 dark:hover:text-green-300 transition-colors",title:"Subir documentos",children:l.jsx(Tb,{className:"w-5 h-5"})}),j&&l.jsx("button",{onClick:async()=>{if(window.confirm("¿Estás seguro de eliminar esta factura? Solo el registro se borrará."))try{await Ge.delete(`/api/invoices/${C.id}`),L()}catch{alert("Error al eliminar la factura.")}},className:"text-red-500 hover:text-red-700 transition-colors p-1",title:"Eliminar Factura (Admin)",children:l.jsx(bn,{className:"w-4 h-4"})})]})]})})]},C.id))})]})})}),c&&u&&l.jsx(Qo,{onClose:M,title:"Subir Documentos de Factura",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"mb-4",children:[l.jsxs("p",{className:"text-sm text-brand-text dark:text-gray-300 mb-2",children:["Factura: ",l.jsx("span",{className:"font-semibold",children:u.invoiceNumber})]}),z&&l.jsxs("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 bg-yellow-50 dark:bg-yellow-900/20 p-2 rounded",children:[l.jsx("strong",{children:"Nota:"})," Para el rol Contable, ambos documentos son obligatorios."]})]}),x&&l.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-300 px-4 py-3 rounded-lg text-sm",children:x}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-brand-text dark:text-gray-300 mb-2",children:["Factura Fiscal ",z&&l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"file",accept:".pdf,image/*",onChange:C=>k(C.target.files?.[0]||null),className:`block w-full text-sm text-gray-500 dark:text-gray-300
                    file:mr-4 file:py-2 file:px-4
                    file:rounded-lg file:border-0
                    file:text-sm file:font-semibold
                    file:bg-brand-primary file:text-white
                    hover:file:bg-brand-mid
                    dark:file:bg-green-600 dark:hover:file:bg-green-700
                    file:cursor-pointer`}),u.fiscalInvoiceUrl&&l.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Documento actual: ",l.jsx("a",{href:u.fiscalInvoiceUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:"Ver documento actual"})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-brand-text dark:text-gray-300 mb-2",children:["Orden de Entrega ",z&&l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"file",accept:".pdf,image/*",onChange:C=>D(C.target.files?.[0]||null),className:`block w-full text-sm text-gray-500 dark:text-gray-300
                    file:mr-4 file:py-2 file:px-4
                    file:rounded-lg file:border-0
                    file:text-sm file:font-semibold
                    file:bg-brand-primary file:text-white
                    hover:file:bg-brand-mid
                    dark:file:bg-green-600 dark:hover:file:bg-green-700
                    file:cursor-pointer`}),u.deliveryOrderUrl&&l.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Documento actual: ",l.jsx("a",{href:u.deliveryOrderUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:"Ver documento actual"})]})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[l.jsx("button",{onClick:M,disabled:m,className:"px-4 py-2 rounded-lg bg-gray-100 dark:bg-dark-surface text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:"Cancelar"}),l.jsx("button",{onClick:S,disabled:m||z&&(!y||!A),className:"px-4 py-2 rounded-lg bg-brand-primary text-white hover:bg-brand-mid dark:bg-green-600 dark:hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Subiendo...":"Subir Documentos"})]})]})})]})},n6=({user:t})=>{const[e,r]=Z.useState(!1);return t.picture&&!e?l.jsx("img",{className:"h-10 w-10 rounded-full object-cover border border-gray-200 dark:border-gray-700 shadow-sm",src:t.picture,alt:t.name,onError:()=>r(!0)}):l.jsx("div",{className:"h-10 w-10 rounded-full bg-brand-primary flex items-center justify-center text-white font-bold border-2 border-white dark:border-gray-700 shadow-sm",children:t.name?t.name.charAt(0).toUpperCase():"U"})},s6=()=>{const{user:t}=Mr(),[e,r]=Z.useState([]),[n,s]=Z.useState([]),[i,a]=Z.useState(!0),[o,c]=Z.useState(!1),[d,u]=Z.useState(null),[g,m]=Z.useState(null),[f,x]=Z.useState(null),[v,y]=Z.useState({action:"",entity:"",userName:""}),[k,A]=Z.useState(null),[D,L]=Z.useState("");Z.useEffect(()=>{q(),z()},[v]);const q=async()=>{try{a(!0);const R=await Ge.get("/api/users");r(R.data),u(null)}catch(R){console.error("Error fetching users:",R),e.length===0&&u("No se pudieron cargar los usuarios. Asegúrate de tener permisos de administrador.")}finally{a(!1)}},z=async()=>{try{c(!0);const R=new URLSearchParams;v.action&&R.append("action",v.action),v.entity&&R.append("entity",v.entity),v.userName&&R.append("userName",v.userName);const F=await Ge.get(`/api/audit?${R.toString()}`);s(F.data)}catch(R){console.error("Error fetching audit logs:",R)}finally{c(!1)}},$=async(R,F)=>{try{x(R),u(null),m(null);const V=[F];await Ge.put(`/api/users/${R}/roles`,{roles:V}),r(te=>te.map(ne=>ne.user_id===R?{...ne,roles:[F]}:ne)),m("Rol actualizado correctamente."),z()}catch(V){console.error("Error updating role:",V),u("Error al actualizar el rol.")}finally{x(null)}},j=async(R,F)=>{if(window.confirm(`¿Estás COMPLETAMENTE SEGURO de eliminar a "${F}"? Esta acción lo borrará de Auth0 y del sistema. No se puede deshacer.`))try{x(R),u(null),m(null),await Ge.delete(`/api/users/${R}`),r(V=>V.filter(te=>te.user_id!==R)),m(`Usuario "${F}" eliminado correctamente.`),z()}catch(V){console.error("Error deleting user:",V),u(V.response?.data?.error||"Error al eliminar el usuario.")}finally{x(null)}},_=async R=>{if(D.trim())try{x(R),await Ge.put(`/api/users/${R}`,{name:D}),r(F=>F.map(V=>V.user_id===R?{...V,name:D}:V)),m("Nombre de usuario actualizado correctamente."),A(null),z()}catch(F){console.error("Error updating name:",F),u("Error al actualizar el nombre.")}finally{x(null)}},M=()=>{const R=["ID","Nombre","Email","Roles"],F=e.map(V=>[V.user_id,V.name||"Sin nombre",V.email,(V.roles||[]).join(" | ")]);C(`reporte-usuarios-${new Date().toISOString().split("T")[0]}`,R,F)},S=async()=>{try{const R=new URLSearchParams;v.action&&R.append("action",v.action),v.entity&&R.append("entity",v.entity),v.userName&&R.append("userName",v.userName),R.append("all","true");const V=(await Ge.get(`/api/audit?${R.toString()}`)).data,te=["Fecha","Usuario","Acción","Entidad","Detalles"],ne=V.map(se=>[new Date(se.createdAt).toLocaleString(),se.userName||"Sistema",se.action,se.entity,se.details||""]);C(`auditoria-${new Date().toISOString().split("T")[0]}`,te,ne)}catch(R){console.error("Error al exportar auditoría:",R),alert("Error al generar el reporte de auditoría.")}},C=(R,F,V)=>{const te=re=>`"${String(re).replace(/"/g,'""')}"`,ne=[F.map(te).join(","),...V.map(re=>re.map(te).join(","))].join(`
`),se=new Blob([ne],{type:"text/csv;charset=utf-8;"}),K=document.createElement("a"),Q=URL.createObjectURL(se);K.setAttribute("href",Q),K.setAttribute("download",`${R}.csv`),K.style.visibility="hidden",document.body.appendChild(K),K.click(),document.body.removeChild(K)};return i?l.jsx("div",{className:"p-8 text-center text-gray-600 dark:text-gray-300",children:"Cargando usuarios..."}):l.jsxs("div",{className:"w-full p-6 dark:bg-dark-primary min-h-screen",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[l.jsx("div",{className:"p-3 bg-white dark:bg-dark-surface rounded-xl shadow-sm",children:l.jsx(t0,{className:"w-8 h-8 text-brand-primary dark:text-green-400"})}),l.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Gestión de Usuarios y Roles"}),l.jsxs("button",{onClick:M,className:"ml-auto flex items-center gap-2 px-4 py-2 bg-white dark:bg-dark-surface border border-gray-200 dark:border-gray-700 rounded-xl text-sm font-bold text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-dark-primary transition-all shadow-sm",children:[l.jsx(Pf,{className:"w-4 h-4 text-brand-primary"}),"Reporte de Usuarios"]})]}),d&&l.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4 flex items-center gap-2",children:[l.jsx(Lf,{size:20}),l.jsx("span",{children:d})]}),g&&l.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4",children:l.jsx("span",{className:"block sm:inline",children:g})}),l.jsx("div",{className:"bg-white dark:bg-dark-surface rounded-2xl shadow-lg border border-gray-100 dark:border-gray-800 overflow-hidden mb-12",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-800",children:[l.jsx("thead",{className:"bg-gray-50 dark:bg-dark-primary",children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Usuario"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Email"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Rol Actual"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-dark-surface divide-y divide-gray-100 dark:divide-gray-800",children:e.map(R=>l.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-dark-primary transition-colors",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:l.jsx(n6,{user:R})}),l.jsx("div",{className:"ml-4 flex items-center gap-2",children:k===R.user_id?l.jsxs(l.Fragment,{children:[l.jsx("input",{type:"text",value:D,onChange:F=>L(F.target.value),className:"text-sm font-bold text-gray-900 dark:text-white bg-gray-100 dark:bg-dark-primary border-b border-brand-primary focus:outline-none px-1",autoFocus:!0}),l.jsx("button",{onClick:()=>_(R.user_id),className:"text-green-600 hover:text-green-700",children:l.jsx(oh,{size:16})}),l.jsx("button",{onClick:()=>A(null),className:"text-red-600 hover:text-red-700",children:l.jsx(Ji,{size:16})})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"text-sm font-bold text-gray-900 dark:text-white",children:R.name||"Sin nombre"}),l.jsx("button",{onClick:()=>{A(R.user_id),L(R.name||"")},className:"text-gray-400 hover:text-brand-primary",title:"Editar nombre",children:l.jsx(Jm,{size:14})})]})})]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:R.email})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-bold rounded-full ${R.roles&&R.roles.length>0?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300":"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400"}`,children:R.roles&&R.roles.length>0?R.roles.join(", "):"Sin rol"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("select",{disabled:f===R.user_id,className:"block w-full pl-3 pr-10 py-2 text-sm font-medium border-gray-200 focus:outline-none focus:ring-brand-primary focus:border-brand-primary rounded-lg dark:bg-dark-primary dark:border-gray-700 dark:text-white transition-shadow shadow-sm",value:R.roles&&R.roles.length>0?R.roles[0]:"",onChange:F=>{const V=F.target.value;window.confirm(`¿Estás seguro de asignar el rol ${V} a ${R.name}?`)&&$(R.user_id,V)},children:[l.jsx("option",{value:"",disabled:!0,children:"Seleccionar Rol"}),l.jsx("option",{value:"",children:"Sin rol (Ninguno)"}),l.jsx("option",{value:"Administrador",children:"Administrador"}),l.jsx("option",{value:"Contable",children:"Contable"}),l.jsx("option",{value:"Operaciones",children:"Operaciones"}),l.jsx("option",{value:"Comercial",children:"Comercial"}),l.jsx("option",{value:"Usuario",children:"Usuario"})]}),l.jsx("button",{onClick:()=>j(R.user_id,R.name),disabled:f===R.user_id||R.email===t.email,className:`p-2 rounded-lg transition-colors ${R.email===t.email?"text-gray-300 cursor-not-allowed":"text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20"}`,title:R.email===t.email?"No puedes eliminarte a ti mismo":"Eliminar usuario definitivamente",children:l.jsx(bn,{size:18})}),f===R.user_id&&l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-brand-primary border-t-transparent"})]})})]},R.user_id))})]})})}),l.jsxs("div",{className:"mt-12",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[l.jsx(Lf,{className:"w-6 h-6 text-brand-primary"}),"Historial de Actividad"]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("button",{onClick:S,className:"flex items-center gap-2 px-4 py-2 bg-brand-primary text-white rounded-xl text-sm font-bold hover:bg-brand-mid transition-all shadow-md",children:[l.jsx(Pf,{className:"w-4 h-4"}),"Exportar Auditoría"]}),l.jsx("button",{onClick:()=>{y({action:"",entity:"",userName:""}),z()},className:"text-sm font-semibold text-brand-primary hover:underline",children:"Limpiar Filtros"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6 bg-white dark:bg-dark-surface p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-800",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Acción"}),l.jsxs("select",{value:v.action,onChange:R=>y({...v,action:R.target.value}),className:"w-full rounded-lg border-gray-200 dark:bg-dark-primary dark:border-gray-700 text-sm",children:[l.jsx("option",{value:"",children:"Todas las acciones"}),l.jsx("option",{value:"CREATE",children:"CREATE (Creación)"}),l.jsx("option",{value:"UPDATE",children:"UPDATE (Edición)"}),l.jsx("option",{value:"DELETE",children:"DELETE (Eliminación)"}),l.jsx("option",{value:"APPROVE",children:"APPROVE (Aprobación)"}),l.jsx("option",{value:"REJECT",children:"REJECT (Rechazo)"}),l.jsx("option",{value:"VALIDATE",children:"VALIDATE (Validación)"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Entidad"}),l.jsxs("select",{value:v.entity,onChange:R=>y({...v,entity:R.target.value}),className:"w-full rounded-lg border-gray-200 dark:bg-dark-primary dark:border-gray-700 text-sm",children:[l.jsx("option",{value:"",children:"Todas las entidades"}),l.jsx("option",{value:"CLIENT",children:"CLIENT (Clientes)"}),l.jsx("option",{value:"BUDGET",children:"BUDGET (Presupuestos)"}),l.jsx("option",{value:"PAYMENT",children:"PAYMENT (Pagos)"}),l.jsx("option",{value:"USER_ROLE",children:"USER_ROLE (Roles)"}),l.jsx("option",{value:"USER",children:"USER (Usuarios)"}),l.jsx("option",{value:"PRODUCT",children:"PRODUCT (Productos)"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Buscar Usuario"}),l.jsx("input",{type:"text",placeholder:"Ej: Juan Perez...",value:v.userName,onChange:R=>y({...v,userName:R.target.value}),className:"w-full rounded-lg border-gray-200 dark:bg-dark-primary dark:border-gray-700 text-sm"})]})]}),l.jsx("div",{className:"bg-white dark:bg-dark-surface rounded-2xl shadow-lg border border-gray-100 dark:border-gray-800 overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-800",children:[l.jsx("thead",{className:"bg-gray-50 dark:bg-dark-primary",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Fecha"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Usuario"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Acción"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Entidad"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Detalles"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-800",children:n.length>0?n.map(R=>l.jsxs("tr",{className:"text-sm hover:bg-gray-50 dark:hover:bg-dark-primary/30 transition-colors",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500 dark:text-gray-400",children:new Date(R.createdAt).toLocaleString()}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-bold text-gray-900 dark:text-white",children:R.userName||"Sistema"}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 py-1 rounded-md text-[10px] font-bold uppercase ${R.action==="DELETE"||R.action==="REJECT"?"bg-red-100 text-red-700":R.action==="CREATE"||R.action==="APPROVE"||R.action==="VALIDATE"?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:R.action})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs font-bold text-gray-500 dark:text-gray-400 uppercase",children:R.entity}),l.jsx("td",{className:"px-6 py-4 text-gray-600 dark:text-gray-300",children:R.details})]},R.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:"5",className:"px-6 py-10 text-center text-gray-500",children:o?"Buscando registros...":"No se encontraron registros con estos filtros."})})})]})})})]})]})},i6=()=>{const{user:t,isLoading:e}=Mr(),[r,n]=Z.useState([]),[s,i]=Z.useState(!0),a=t?.sub,o=async()=>{if(a)try{i(!0);const m=await Ge.get("/api/notifications");n(m.data)}catch(m){console.error("Error fetching notifications:",m)}finally{i(!1)}};Z.useEffect(()=>{a&&o()},[a]);const c=async m=>{try{await Ge.patch(`/api/notifications/${m}/read`),n(f=>f.map(x=>x.id===m?{...x,read:!0}:x))}catch(f){console.error("Error marking notification as read:",f)}},d=async m=>{try{await Ge.delete(`/api/notifications/${m}`),n(f=>f.filter(x=>x.id!==m))}catch(f){console.error("Error deleting notification:",f)}},u=async()=>{try{await Ge.patch("/api/notifications/read-all"),n(m=>m.map(f=>({...f,read:!0})))}catch(m){console.error("Error marking all notifications as read:",m)}};if(e||s)return l.jsx("div",{className:"p-8 text-center dark:text-gray-300",children:"Cargando notificaciones..."});const g=r.filter(m=>!m.read).length;return l.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-dark-primary p-6",children:l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-3 bg-white dark:bg-dark-surface rounded-full shadow-sm",children:l.jsx(Ou,{className:"w-6 h-6 text-brand-primary dark:text-green-400"})}),l.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Notificaciones"})]}),g>0&&l.jsx("button",{onClick:u,className:"bg-brand-primary hover:bg-brand-dark text-white px-4 py-2 rounded-lg text-sm transition-colors",children:"Marcar todas como leídas"})]}),l.jsx("div",{className:"bg-white dark:bg-dark-surface rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:r.length===0?l.jsxs("div",{className:"p-12 text-center",children:[l.jsx(Ou,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:"No tienes notificaciones."})]}):l.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:r.map(m=>l.jsxs("div",{className:`flex items-start justify-between p-6 transition-colors ${m.read?"bg-white dark:bg-dark-surface hover:bg-gray-50 dark:hover:bg-dark-primary":"bg-blue-50 dark:bg-blue-900/10 hover:bg-blue-100 dark:hover:bg-blue-900/20 border-l-4 border-l-brand-primary"}`,children:[l.jsxs("div",{className:"flex-1 pr-6",children:[l.jsx("p",{className:`text-base ${m.read?"text-gray-600 dark:text-gray-300":"text-gray-900 dark:text-white font-semibold"}`,children:m.message}),l.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-2",children:new Date(m.createdAt).toLocaleString("es-ES",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[!m.read&&l.jsx("button",{onClick:()=>c(m.id),className:"p-2 rounded-lg text-brand-primary hover:bg-brand-light/50 dark:text-green-400 dark:hover:bg-green-900/20 transition-colors",title:"Marcar como leído",children:l.jsx(Ef,{className:"w-5 h-5"})}),m.read&&l.jsx("button",{onClick:()=>c(m.id),className:"p-2 rounded-lg text-gray-400 hover:bg-gray-100 dark:text-gray-500 transition-colors",title:"Leído",disabled:!0,children:l.jsx(Ef,{className:"w-5 h-5"})}),l.jsx("button",{onClick:()=>d(m.id),className:"p-2 rounded-lg text-red-500 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20 transition-colors",title:"Eliminar",children:l.jsx(bn,{className:"w-5 h-5"})})]})]},m.id))})})]})})};class rC extends Jt.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,r){console.error("ErrorBoundary caught an error:",e,r),this.setState({error:e,errorInfo:r})}render(){return this.state.hasError?l.jsxs("div",{className:"p-8 text-center bg-red-50 dark:bg-red-900/10 rounded-lg m-4 border border-red-200 dark:border-red-900",children:[l.jsx("h2",{className:"text-xl font-bold text-red-600 dark:text-red-400 mb-2",children:"Algo salió mal."}),l.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"Ha ocurrido un error inesperado al renderizar este componente."}),l.jsxs("details",{className:"whitespace-pre-wrap text-left text-xs text-gray-500 dark:text-gray-400 bg-white dark:bg-black/20 p-4 rounded overflow-auto max-h-64",children:[this.state.error&&this.state.error.toString(),l.jsx("br",{}),this.state.errorInfo&&this.state.errorInfo.componentStack]}),l.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition",children:"Recargar página"})]}):this.props.children}}const a6=async(t,e,r,n)=>{const s=new $e,i=await z1();let a=U1(s,i);if(s.setDrawColor(200),s.line(14,a,196,a),a+=10,s.setFontSize(14),s.setTextColor(0),s.text(`Reporte de Gestión - ${r}`,14,a),s.setFontSize(10),s.text(`Generado por: ${n}`,196,a,{align:"right"}),a+=6,s.text(`Fecha: ${new Date().toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}`,196,a,{align:"right"}),a+=10,["Administrador","Contable"].includes(r)){s.setFontSize(12),s.setTextColor(0),s.text("Resumen Financiero",14,a),a+=6;const c=[["Total Ingresos",$r(e?.totalIncome||0)],["Total Pendiente por Cobrar",$r(e?.pendingAmount||0)],["Total Presupuestos Aprobados",(e?.approvedBudgets||0).toString()],["Total Pagos Procesados",(e?.totalPayments||0).toString()]];Fo(s,{startY:a,head:[["Concepto","Valor"]],body:c,theme:"striped",headStyles:{fillColor:[22,163,74]},columnStyles:{1:{halign:"right",fontStyle:"bold"}}}),a=s.lastAutoTable.finalY+15}if(e?.chartData&&["Administrador","Contable"].includes(r)){s.setFontSize(12),s.text("Evolución Mensual (Últimos 6 Meses)",14,a),a+=6;const c=[["Mes","Ingresos ($)","Pendiente ($)"]],d=e.chartData.labels.map((u,g)=>[u,$r(e.chartData.ingresosSeries[g]),$r(e.chartData.pendientesSeries[g])]);Fo(s,{startY:a,head:c,body:d,theme:"grid",headStyles:{fillColor:[55,65,81]},columnStyles:{1:{halign:"right"},2:{halign:"right",textColor:[220,38,38]}}}),a=s.lastAutoTable.finalY+15}if(["Administrador","Comercial"].includes(r)){a>250&&(s.addPage(),a=20),s.setFontSize(12),s.text("Resumen Operativo y Comercial",14,a),a+=6;const c=[["Total Clientes Registrados",(e?.totalClients||0).toString()],["Total Presupuestos Generados",(e?.totalBudgets||0).toString()],["Presupuestos Aprobados",(e?.approvedBudgets||0).toString()],["Tasa de Conversión (Aprox)",e?.totalBudgets?`${(e.approvedBudgets/e.totalBudgets*100).toFixed(1)}%`:"0%"]];Fo(s,{startY:a,head:[["Indicador","Valor"]],body:c,theme:"striped",headStyles:{fillColor:[234,88,12]},columnStyles:{1:{halign:"right",fontStyle:"bold"}}})}const o=s.internal.getNumberOfPages();for(let c=1;c<=o;c++)s.setPage(c),s.setFontSize(8),s.setTextColor(150),s.text("Premezclados Manzanillo, C.A. - Sistema de Gestión",14,285),s.text(`Página ${c} de ${o}`,196,285,{align:"right"});s.save(`reporte-${r.toLowerCase()}-${new Date().toISOString().split("T")[0]}.pdf`)};Zo.register(xk,vx,xx);const o6=()=>{const{isAuthenticated:t,user:e}=Mr(),r=e?.["https://premezcladomanzanillo.com/roles"]||[],n=r.includes("Administrador")?"Administrador":r.includes("Contable")?"Contable":r.includes("Comercial")?"Comercial":"Usuario",[s,i]=Z.useState(null),[a,o]=Z.useState(!0),[c,d]=Z.useState(null);Z.useEffect(()=>{(async()=>{o(!0),d(null);try{const k=await F0();i(k)}catch(k){d("Error al cargar los datos del reporte."),console.error("Report data fetch error:",k)}finally{o(!1)}})()},[]);const u=s?.totalIncome||0,g=s?.pendingAmount||0,m=s?.totalPayments||0,f=Z.useMemo(()=>({labels:["Pagado","Pendiente"],datasets:[{data:[u,g],backgroundColor:["rgb(34, 197, 94)","rgb(251, 191, 36)"],borderColor:[document.body.classList.contains("dark")?"#1A362C":"#FFFFFF"],borderWidth:2}]}),[u,g]),x=Z.useMemo(()=>({responsive:!0,plugins:{legend:{position:"top",labels:{color:document.body.classList.contains("dark")?"#F9FAFB":"#333"}},title:{display:!0,text:"Distribución de Pagos",color:document.body.classList.contains("dark")?"#F9FAFB":"#333"}}}),[]),v=y=>{y==="pdf"?a6(null,s,n,e?.name||"Usuario"):alert(`Exportación en ${y.toUpperCase()} no disponible por el momento.`)};return a?l.jsx("div",{className:"text-center py-8 dark:text-gray-200",children:"Cargando datos del reporte..."}):c?l.jsxs("div",{className:"text-center py-8 text-red-600 dark:text-red-400",children:["Error: ",c]}):l.jsxs("div",{className:"container mx-auto px-4 py-8",children:[l.jsxs(Kt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center gap-4 mb-8",children:[l.jsx(Ib,{className:"w-8 h-8 text-black dark:text-green-400"}),l.jsx("h1",{className:"text-3xl font-bold text-brand-primary dark:text-white",children:"Reportes Financieros"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[l.jsxs(Kt.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white dark:bg-dark-primary rounded-2xl p-6 shadow-lg border border-brand-light dark:border-dark-surface",children:[l.jsx("h3",{className:"text-xl font-bold text-brand-primary dark:text-gray-100 mb-4",children:"Resumen General"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-brand-text dark:text-gray-300",children:"Total Ingresos:"}),l.jsx("span",{className:"font-bold text-brand-primary dark:text-green-400",children:$r(u)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-brand-text dark:text-gray-300",children:"Total Pendiente:"}),l.jsx("span",{className:"font-bold text-orange-600 dark:text-orange-400",children:$r(g)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-brand-text dark:text-gray-300",children:"Pagos Realizados:"}),l.jsx("span",{className:"font-bold dark:text-gray-100",children:m})]})]})]}),l.jsx(Kt.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"bg-white dark:bg-dark-primary rounded-2xl p-6 shadow-lg border border-brand-light dark:border-dark-surface",children:l.jsx(s4,{data:f,options:x})})]}),l.jsx(Kt.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"bg-white dark:bg-dark-primary rounded-2xl p-6 shadow-lg border border-brand-light dark:border-dark-surface",children:l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h3",{className:"text-xl font-bold text-brand-primary dark:text-gray-100",children:"Opciones de Exportación"}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("button",{onClick:()=>v("pdf"),className:"flex items-center gap-2 bg-brand-primary text-white px-4 py-2 rounded-lg hover:bg-brand-mid",children:[l.jsx(Pn,{className:"w-4 h-4"})," PDF"]}),l.jsxs("button",{onClick:()=>v("excel"),className:"flex items-center gap-2 bg-brand-primary text-white px-4 py-2 rounded-lg hover:bg-brand-mid",children:[l.jsx(Pn,{className:"w-4 h-4"})," Excel"]})]})]})})]})};var wc={exports:{}};var l6=wc.exports,Tm;function c6(){return Tm||(Tm=1,(function(t,e){((r,n)=>{t.exports=n()})(l6,function r(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},s,i=!n.document&&!!n.postMessage,a=n.IS_PAPA_WORKER||!1,o={},c=0,d={};function u(j){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(_){var M=q(_);M.chunkSize=parseInt(M.chunkSize),_.step||_.chunk||(M.chunkSize=null),this._handle=new v(M),(this._handle.streamer=this)._config=M}).call(this,j),this.parseChunk=function(_,M){var S=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<S){let R=this._config.newline;R||(C=this._config.quoteChar||'"',R=this._handle.guessLineEndings(_,C)),_=[..._.split(R).slice(S)].join(R)}this.isFirstChunk&&$(this._config.beforeFirstChunk)&&(C=this._config.beforeFirstChunk(_))!==void 0&&(_=C),this.isFirstChunk=!1,this._halted=!1;var S=this._partialLine+_,C=(this._partialLine="",this._handle.parse(S,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(_=C.meta.cursor,S=(this._finished||(this._partialLine=S.substring(_-this._baseIndex),this._baseIndex=_),C&&C.data&&(this._rowCount+=C.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),a)n.postMessage({results:C,workerId:d.WORKER_ID,finished:S});else if($(this._config.chunk)&&!M){if(this._config.chunk(C,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=C=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(C.data),this._completeResults.errors=this._completeResults.errors.concat(C.errors),this._completeResults.meta=C.meta),this._completed||!S||!$(this._config.complete)||C&&C.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),S||C&&C.meta.paused||this._nextChunk(),C}this._halted=!0},this._sendError=function(_){$(this._config.error)?this._config.error(_):a&&this._config.error&&n.postMessage({workerId:d.WORKER_ID,error:_,finished:!1})}}function g(j){var _;(j=j||{}).chunkSize||(j.chunkSize=d.RemoteChunkSize),u.call(this,j),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(M){this._input=M,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(_=new XMLHttpRequest,this._config.withCredentials&&(_.withCredentials=this._config.withCredentials),i||(_.onload=z(this._chunkLoaded,this),_.onerror=z(this._chunkError,this)),_.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var M,S=this._config.downloadRequestHeaders;for(M in S)_.setRequestHeader(M,S[M])}var C;this._config.chunkSize&&(C=this._start+this._config.chunkSize-1,_.setRequestHeader("Range","bytes="+this._start+"-"+C));try{_.send(this._config.downloadRequestBody)}catch(R){this._chunkError(R.message)}i&&_.status===0&&this._chunkError()}},this._chunkLoaded=function(){_.readyState===4&&(_.status<200||400<=_.status?this._chunkError():(this._start+=this._config.chunkSize||_.responseText.length,this._finished=!this._config.chunkSize||this._start>=(M=>(M=M.getResponseHeader("Content-Range"))!==null?parseInt(M.substring(M.lastIndexOf("/")+1)):-1)(_),this.parseChunk(_.responseText)))},this._chunkError=function(M){M=_.statusText||M,this._sendError(new Error(M))}}function m(j){(j=j||{}).chunkSize||(j.chunkSize=d.LocalChunkSize),u.call(this,j);var _,M,S=typeof FileReader<"u";this.stream=function(C){this._input=C,M=C.slice||C.webkitSlice||C.mozSlice,S?((_=new FileReader).onload=z(this._chunkLoaded,this),_.onerror=z(this._chunkError,this)):_=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var C=this._input,R=(this._config.chunkSize&&(R=Math.min(this._start+this._config.chunkSize,this._input.size),C=M.call(C,this._start,R)),_.readAsText(C,this._config.encoding));S||this._chunkLoaded({target:{result:R}})},this._chunkLoaded=function(C){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(C.target.result)},this._chunkError=function(){this._sendError(_.error)}}function f(j){var _;u.call(this,j=j||{}),this.stream=function(M){return _=M,this._nextChunk()},this._nextChunk=function(){var M,S;if(!this._finished)return M=this._config.chunkSize,_=M?(S=_.substring(0,M),_.substring(M)):(S=_,""),this._finished=!_,this.parseChunk(S)}}function x(j){u.call(this,j=j||{});var _=[],M=!0,S=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(C){this._input=C,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){S&&_.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),_.length?this.parseChunk(_.shift()):M=!0},this._streamData=z(function(C){try{_.push(typeof C=="string"?C:C.toString(this._config.encoding)),M&&(M=!1,this._checkIsFinished(),this.parseChunk(_.shift()))}catch(R){this._streamError(R)}},this),this._streamError=z(function(C){this._streamCleanUp(),this._sendError(C)},this),this._streamEnd=z(function(){this._streamCleanUp(),S=!0,this._streamData("")},this),this._streamCleanUp=z(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function v(j){var _,M,S,C,R=Math.pow(2,53),F=-R,V=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,te=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,ne=this,se=0,K=0,Q=!1,re=!1,P=[],I={data:[],errors:[],meta:{}};function Y(de){return j.skipEmptyLines==="greedy"?de.join("").trim()==="":de.length===1&&de[0].length===0}function ee(){if(I&&S&&(ce("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+d.DefaultDelimiter+"'"),S=!1),j.skipEmptyLines&&(I.data=I.data.filter(function(pe){return!Y(pe)})),ie()){let pe=function(Ae,Pe){$(j.transformHeader)&&(Ae=j.transformHeader(Ae,Pe)),P.push(Ae)};if(I)if(Array.isArray(I.data[0])){for(var de=0;ie()&&de<I.data.length;de++)I.data[de].forEach(pe);I.data.splice(0,1)}else I.data.forEach(pe)}function he(pe,Ae){for(var Pe=j.header?{}:[],Ee=0;Ee<pe.length;Ee++){var W=Ee,je=pe[Ee],je=((Je,Le)=>(ve=>(j.dynamicTypingFunction&&j.dynamicTyping[ve]===void 0&&(j.dynamicTyping[ve]=j.dynamicTypingFunction(ve)),(j.dynamicTyping[ve]||j.dynamicTyping)===!0))(Je)?Le==="true"||Le==="TRUE"||Le!=="false"&&Le!=="FALSE"&&((ve=>{if(V.test(ve)&&(ve=parseFloat(ve),F<ve&&ve<R))return 1})(Le)?parseFloat(Le):te.test(Le)?new Date(Le):Le===""?null:Le):Le)(W=j.header?Ee>=P.length?"__parsed_extra":P[Ee]:W,je=j.transform?j.transform(je,W):je);W==="__parsed_extra"?(Pe[W]=Pe[W]||[],Pe[W].push(je)):Pe[W]=je}return j.header&&(Ee>P.length?ce("FieldMismatch","TooManyFields","Too many fields: expected "+P.length+" fields but parsed "+Ee,K+Ae):Ee<P.length&&ce("FieldMismatch","TooFewFields","Too few fields: expected "+P.length+" fields but parsed "+Ee,K+Ae)),Pe}var xe;I&&(j.header||j.dynamicTyping||j.transform)&&(xe=1,!I.data.length||Array.isArray(I.data[0])?(I.data=I.data.map(he),xe=I.data.length):I.data=he(I.data,0),j.header&&I.meta&&(I.meta.fields=P),K+=xe)}function ie(){return j.header&&P.length===0}function ce(de,he,xe,pe){de={type:de,code:he,message:xe},pe!==void 0&&(de.row=pe),I.errors.push(de)}$(j.step)&&(C=j.step,j.step=function(de){I=de,ie()?ee():(ee(),I.data.length!==0&&(se+=de.data.length,j.preview&&se>j.preview?M.abort():(I.data=I.data[0],C(I,ne))))}),this.parse=function(de,he,xe){var pe=j.quoteChar||'"',pe=(j.newline||(j.newline=this.guessLineEndings(de,pe)),S=!1,j.delimiter?$(j.delimiter)&&(j.delimiter=j.delimiter(de),I.meta.delimiter=j.delimiter):((pe=((Ae,Pe,Ee,W,je)=>{var Je,Le,ve,We;je=je||[",","	","|",";",d.RECORD_SEP,d.UNIT_SEP];for(var De=0;De<je.length;De++){for(var Te,He=je[De],tt=0,rt=0,ze=0,Ke=(ve=void 0,new k({comments:W,delimiter:He,newline:Pe,preview:10}).parse(Ae)),st=0;st<Ke.data.length;st++)Ee&&Y(Ke.data[st])?ze++:(Te=Ke.data[st].length,rt+=Te,ve===void 0?ve=Te:0<Te&&(tt+=Math.abs(Te-ve),ve=Te));0<Ke.data.length&&(rt/=Ke.data.length-ze),(Le===void 0||tt<=Le)&&(We===void 0||We<rt)&&1.99<rt&&(Le=tt,Je=He,We=rt)}return{successful:!!(j.delimiter=Je),bestDelimiter:Je}})(de,j.newline,j.skipEmptyLines,j.comments,j.delimitersToGuess)).successful?j.delimiter=pe.bestDelimiter:(S=!0,j.delimiter=d.DefaultDelimiter),I.meta.delimiter=j.delimiter),q(j));return j.preview&&j.header&&pe.preview++,_=de,M=new k(pe),I=M.parse(_,he,xe),ee(),Q?{meta:{paused:!0}}:I||{meta:{paused:!1}}},this.paused=function(){return Q},this.pause=function(){Q=!0,M.abort(),_=$(j.chunk)?"":_.substring(M.getCharIndex())},this.resume=function(){ne.streamer._halted?(Q=!1,ne.streamer.parseChunk(_,!0)):setTimeout(ne.resume,3)},this.aborted=function(){return re},this.abort=function(){re=!0,M.abort(),I.meta.aborted=!0,$(j.complete)&&j.complete(I),_=""},this.guessLineEndings=function(Ae,pe){Ae=Ae.substring(0,1048576);var pe=new RegExp(y(pe)+"([^]*?)"+y(pe),"gm"),xe=(Ae=Ae.replace(pe,"")).split("\r"),pe=Ae.split(`
`),Ae=1<pe.length&&pe[0].length<xe[0].length;if(xe.length===1||Ae)return`
`;for(var Pe=0,Ee=0;Ee<xe.length;Ee++)xe[Ee][0]===`
`&&Pe++;return Pe>=xe.length/2?`\r
`:"\r"}}function y(j){return j.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function k(j){var _=(j=j||{}).delimiter,M=j.newline,S=j.comments,C=j.step,R=j.preview,F=j.fastMode,V=null,te=!1,ne=j.quoteChar==null?'"':j.quoteChar,se=ne;if(j.escapeChar!==void 0&&(se=j.escapeChar),(typeof _!="string"||-1<d.BAD_DELIMITERS.indexOf(_))&&(_=","),S===_)throw new Error("Comment character same as delimiter");S===!0?S="#":(typeof S!="string"||-1<d.BAD_DELIMITERS.indexOf(S))&&(S=!1),M!==`
`&&M!=="\r"&&M!==`\r
`&&(M=`
`);var K=0,Q=!1;this.parse=function(re,P,I){if(typeof re!="string")throw new Error("Input must be a string");var Y=re.length,ee=_.length,ie=M.length,ce=S.length,de=$(C),he=[],xe=[],pe=[],Ae=K=0;if(!re)return tt();if(F||F!==!1&&re.indexOf(ne)===-1){for(var Pe=re.split(M),Ee=0;Ee<Pe.length;Ee++){if(pe=Pe[Ee],K+=pe.length,Ee!==Pe.length-1)K+=M.length;else if(I)return tt();if(!S||pe.substring(0,ce)!==S){if(de){if(he=[],We(pe.split(_)),rt(),Q)return tt()}else We(pe.split(_));if(R&&R<=Ee)return he=he.slice(0,R),tt(!0)}}return tt()}for(var W=re.indexOf(_,K),je=re.indexOf(M,K),Je=new RegExp(y(se)+y(ne),"g"),Le=re.indexOf(ne,K);;)if(re[K]===ne)for(Le=K,K++;;){if((Le=re.indexOf(ne,Le+1))===-1)return I||xe.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:he.length,index:K}),Te();if(Le===Y-1)return Te(re.substring(K,Le).replace(Je,ne));if(ne===se&&re[Le+1]===se)Le++;else if(ne===se||Le===0||re[Le-1]!==se){W!==-1&&W<Le+1&&(W=re.indexOf(_,Le+1));var ve=De((je=je!==-1&&je<Le+1?re.indexOf(M,Le+1):je)===-1?W:Math.min(W,je));if(re.substr(Le+1+ve,ee)===_){pe.push(re.substring(K,Le).replace(Je,ne)),re[K=Le+1+ve+ee]!==ne&&(Le=re.indexOf(ne,K)),W=re.indexOf(_,K),je=re.indexOf(M,K);break}if(ve=De(je),re.substring(Le+1+ve,Le+1+ve+ie)===M){if(pe.push(re.substring(K,Le).replace(Je,ne)),He(Le+1+ve+ie),W=re.indexOf(_,K),Le=re.indexOf(ne,K),de&&(rt(),Q))return tt();if(R&&he.length>=R)return tt(!0);break}xe.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:he.length,index:K}),Le++}}else if(S&&pe.length===0&&re.substring(K,K+ce)===S){if(je===-1)return tt();K=je+ie,je=re.indexOf(M,K),W=re.indexOf(_,K)}else if(W!==-1&&(W<je||je===-1))pe.push(re.substring(K,W)),K=W+ee,W=re.indexOf(_,K);else{if(je===-1)break;if(pe.push(re.substring(K,je)),He(je+ie),de&&(rt(),Q))return tt();if(R&&he.length>=R)return tt(!0)}return Te();function We(ze){he.push(ze),Ae=K}function De(ze){var Ke=0;return Ke=ze!==-1&&(ze=re.substring(Le+1,ze))&&ze.trim()===""?ze.length:Ke}function Te(ze){return I||(ze===void 0&&(ze=re.substring(K)),pe.push(ze),K=Y,We(pe),de&&rt()),tt()}function He(ze){K=ze,We(pe),pe=[],je=re.indexOf(M,K)}function tt(ze){if(j.header&&!P&&he.length&&!te){var Ke=he[0],st=Object.create(null),Ie=new Set(Ke);let at=!1;for(let Re=0;Re<Ke.length;Re++){let jt=Ke[Re];if(st[jt=$(j.transformHeader)?j.transformHeader(jt,Re):jt]){let mt,ut=st[jt];for(;mt=jt+"_"+ut,ut++,Ie.has(mt););Ie.add(mt),Ke[Re]=mt,st[jt]++,at=!0,(V=V===null?{}:V)[mt]=jt}else st[jt]=1,Ke[Re]=jt;Ie.add(jt)}at&&console.warn("Duplicate headers found and renamed."),te=!0}return{data:he,errors:xe,meta:{delimiter:_,linebreak:M,aborted:Q,truncated:!!ze,cursor:Ae+(P||0),renamedHeaders:V}}}function rt(){C(tt()),he=[],xe=[]}},this.abort=function(){Q=!0},this.getCharIndex=function(){return K}}function A(j){var _=j.data,M=o[_.workerId],S=!1;if(_.error)M.userError(_.error,_.file);else if(_.results&&_.results.data){var C={abort:function(){S=!0,D(_.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:L,resume:L};if($(M.userStep)){for(var R=0;R<_.results.data.length&&(M.userStep({data:_.results.data[R],errors:_.results.errors,meta:_.results.meta},C),!S);R++);delete _.results}else $(M.userChunk)&&(M.userChunk(_.results,C,_.file),delete _.results)}_.finished&&!S&&D(_.workerId,_.results)}function D(j,_){var M=o[j];$(M.userComplete)&&M.userComplete(_),M.terminate(),delete o[j]}function L(){throw new Error("Not implemented.")}function q(j){if(typeof j!="object"||j===null)return j;var _,M=Array.isArray(j)?[]:{};for(_ in j)M[_]=q(j[_]);return M}function z(j,_){return function(){j.apply(_,arguments)}}function $(j){return typeof j=="function"}return d.parse=function(j,_){var M=(_=_||{}).dynamicTyping||!1;if($(M)&&(_.dynamicTypingFunction=M,M={}),_.dynamicTyping=M,_.transform=!!$(_.transform)&&_.transform,!_.worker||!d.WORKERS_SUPPORTED)return M=null,d.NODE_STREAM_INPUT,typeof j=="string"?(j=(S=>S.charCodeAt(0)!==65279?S:S.slice(1))(j),M=new(_.download?g:f)(_)):j.readable===!0&&$(j.read)&&$(j.on)?M=new x(_):(n.File&&j instanceof File||j instanceof Object)&&(M=new m(_)),M.stream(j);(M=(()=>{var S;return!!d.WORKERS_SUPPORTED&&(S=(()=>{var C=n.URL||n.webkitURL||null,R=r.toString();return d.BLOB_URL||(d.BLOB_URL=C.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",R,")();"],{type:"text/javascript"})))})(),(S=new n.Worker(S)).onmessage=A,S.id=c++,o[S.id]=S)})()).userStep=_.step,M.userChunk=_.chunk,M.userComplete=_.complete,M.userError=_.error,_.step=$(_.step),_.chunk=$(_.chunk),_.complete=$(_.complete),_.error=$(_.error),delete _.worker,M.postMessage({input:j,config:_,workerId:M.id})},d.unparse=function(j,_){var M=!1,S=!0,C=",",R=`\r
`,F='"',V=F+F,te=!1,ne=null,se=!1,K=((()=>{if(typeof _=="object"){if(typeof _.delimiter!="string"||d.BAD_DELIMITERS.filter(function(P){return _.delimiter.indexOf(P)!==-1}).length||(C=_.delimiter),typeof _.quotes!="boolean"&&typeof _.quotes!="function"&&!Array.isArray(_.quotes)||(M=_.quotes),typeof _.skipEmptyLines!="boolean"&&typeof _.skipEmptyLines!="string"||(te=_.skipEmptyLines),typeof _.newline=="string"&&(R=_.newline),typeof _.quoteChar=="string"&&(F=_.quoteChar),typeof _.header=="boolean"&&(S=_.header),Array.isArray(_.columns)){if(_.columns.length===0)throw new Error("Option columns is empty");ne=_.columns}_.escapeChar!==void 0&&(V=_.escapeChar+F),_.escapeFormulae instanceof RegExp?se=_.escapeFormulae:typeof _.escapeFormulae=="boolean"&&_.escapeFormulae&&(se=/^[=+\-@\t\r].*$/)}})(),new RegExp(y(F),"g"));if(typeof j=="string"&&(j=JSON.parse(j)),Array.isArray(j)){if(!j.length||Array.isArray(j[0]))return Q(null,j,te);if(typeof j[0]=="object")return Q(ne||Object.keys(j[0]),j,te)}else if(typeof j=="object")return typeof j.data=="string"&&(j.data=JSON.parse(j.data)),Array.isArray(j.data)&&(j.fields||(j.fields=j.meta&&j.meta.fields||ne),j.fields||(j.fields=Array.isArray(j.data[0])?j.fields:typeof j.data[0]=="object"?Object.keys(j.data[0]):[]),Array.isArray(j.data[0])||typeof j.data[0]=="object"||(j.data=[j.data])),Q(j.fields||[],j.data||[],te);throw new Error("Unable to serialize unrecognized input");function Q(P,I,Y){var ee="",ie=(typeof P=="string"&&(P=JSON.parse(P)),typeof I=="string"&&(I=JSON.parse(I)),Array.isArray(P)&&0<P.length),ce=!Array.isArray(I[0]);if(ie&&S){for(var de=0;de<P.length;de++)0<de&&(ee+=C),ee+=re(P[de],de);0<I.length&&(ee+=R)}for(var he=0;he<I.length;he++){var xe=(ie?P:I[he]).length,pe=!1,Ae=ie?Object.keys(I[he]).length===0:I[he].length===0;if(Y&&!ie&&(pe=Y==="greedy"?I[he].join("").trim()==="":I[he].length===1&&I[he][0].length===0),Y==="greedy"&&ie){for(var Pe=[],Ee=0;Ee<xe;Ee++){var W=ce?P[Ee]:Ee;Pe.push(I[he][W])}pe=Pe.join("").trim()===""}if(!pe){for(var je=0;je<xe;je++){0<je&&!Ae&&(ee+=C);var Je=ie&&ce?P[je]:je;ee+=re(I[he][Je],je)}he<I.length-1&&(!Y||0<xe&&!Ae)&&(ee+=R)}}return ee}function re(P,I){var Y,ee;return P==null?"":P.constructor===Date?JSON.stringify(P).slice(1,25):(ee=!1,se&&typeof P=="string"&&se.test(P)&&(P="'"+P,ee=!0),Y=P.toString().replace(K,V),(ee=ee||M===!0||typeof M=="function"&&M(P,I)||Array.isArray(M)&&M[I]||((ie,ce)=>{for(var de=0;de<ce.length;de++)if(-1<ie.indexOf(ce[de]))return!0;return!1})(Y,d.BAD_DELIMITERS)||-1<Y.indexOf(C)||Y.charAt(0)===" "||Y.charAt(Y.length-1)===" ")?F+Y+F:Y)}},d.RECORD_SEP="",d.UNIT_SEP="",d.BYTE_ORDER_MARK="\uFEFF",d.BAD_DELIMITERS=["\r",`
`,'"',d.BYTE_ORDER_MARK],d.WORKERS_SUPPORTED=!i&&!!n.Worker,d.NODE_STREAM_INPUT=1,d.LocalChunkSize=10485760,d.RemoteChunkSize=5242880,d.DefaultDelimiter=",",d.Parser=k,d.ParserHandle=v,d.NetworkStreamer=g,d.FileStreamer=m,d.StringStreamer=f,d.ReadableStreamStreamer=x,n.jQuery&&((s=n.jQuery).fn.parse=function(j){var _=j.config||{},M=[];return this.each(function(R){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var F=0;F<this.files.length;F++)M.push({file:this.files[F],inputElem:this,instanceConfig:s.extend({},_)})}),S(),this;function S(){if(M.length===0)$(j.complete)&&j.complete();else{var R,F,V,te,ne=M[0];if($(j.before)){var se=j.before(ne.file,ne.inputElem);if(typeof se=="object"){if(se.action==="abort")return R="AbortError",F=ne.file,V=ne.inputElem,te=se.reason,void($(j.error)&&j.error({name:R},F,V,te));if(se.action==="skip")return void C();typeof se.config=="object"&&(ne.instanceConfig=s.extend(ne.instanceConfig,se.config))}else if(se==="skip")return void C()}var K=ne.instanceConfig.complete;ne.instanceConfig.complete=function(Q){$(K)&&K(Q,ne.file,ne.inputElem),C()},d.parse(ne.file,ne.instanceConfig)}}function C(){M.splice(0,1),S()}}),a&&(n.onmessage=function(j){j=j.data,d.WORKER_ID===void 0&&j&&(d.WORKER_ID=j.workerId),typeof j.input=="string"?n.postMessage({workerId:d.WORKER_ID,results:d.parse(j.input,j.config),finished:!0}):(n.File&&j.input instanceof File||j.input instanceof Object)&&(j=d.parse(j.input,j.config))&&n.postMessage({workerId:d.WORKER_ID,results:j,finished:!0})}),(g.prototype=Object.create(u.prototype)).constructor=g,(m.prototype=Object.create(u.prototype)).constructor=m,(f.prototype=Object.create(f.prototype)).constructor=f,(x.prototype=Object.create(u.prototype)).constructor=x,d})})(wc)),wc.exports}var d6=c6();const u6=l0(d6),h6=()=>{const{settings:t,updateSetting:e,refreshSettings:r,loading:n}=Kc(),[s,i]=Z.useState({}),[a,o]=Z.useState(!1),[c,d]=Z.useState(null),[u,g]=Z.useState(null);Z.useEffect(()=>{t&&i({company_name:t.company_name||"",company_rif:t.company_rif||"",company_phone:t.company_phone||"",company_address:t.company_address||"",company_logo:t.company_logo||"",company_iva:t.company_iva||"16",company_igtf:t.company_igtf||"3"})},[t]);const m=v=>{const{name:y,value:k}=v.target;i(A=>({...A,[y]:k}))},f=async v=>{v.preventDefault(),o(!0);try{for(const y in s)s[y]!==t[y]&&await e(y,s[y]);alert("Configuraciones guardadas con éxito!"),r()}catch(y){console.error("Error saving settings:",y),alert("Error al guardar las configuraciones.")}finally{o(!1)}},x=async()=>{if(!c){alert("Selecciona un archivo primero.");return}u6.parse(c,{header:!0,skipEmptyLines:!0,complete:async v=>{const y=v.data||[];if(y.length===0){alert("Archivo vacío.");return}o(!0);let k=0,A=0;for(const D of y)try{const L=(D.tipo||D.Tipo||D.type||D.Type||"OTHER").toUpperCase();let q="OTHER";L.includes("CONCRE")?q="CONCRETE":L.includes("BLOQU")||L.includes("BLOCK")?q="BLOCK":L.includes("SERVIC")&&(q="SERVICE");const z={name:D.nombre||D.name||D.Nombre||D.Name,price:D.precio||D.price||D.Precio||D.Price,type:q,category:D.categoria||D.category||D.Categoria||D.Category,description:D.descripcion||D.description||D.Descripcion||D.Description||D.unidad||D.Unidad||""};z.name&&z.price?(await Ge.post("/api/products",z),k++):A++}catch(L){console.error("Error importando fila:",D,L),A++}g({added:k,updated:0,skipped:A}),o(!1),alert(`Importación finalizada: ${k} productos añadidos, ${A} fallidos o incompletos.`)}})};return n?l.jsx("div",{className:"p-8 text-center",children:"Cargando configuración..."}):l.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-5xl",children:[l.jsxs(Kt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center gap-4 mb-8",children:[l.jsx(r0,{className:"w-10 h-10 text-brand-primary dark:text-green-400"}),l.jsx("h1",{className:"text-4xl font-bold text-gray-800 dark:text-white",children:"Configuración del Sistema"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsx("div",{className:"lg:col-span-2 space-y-6",children:l.jsxs(Kt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"bg-white dark:bg-dark-primary rounded-2xl p-8 shadow-lg border border-brand-light dark:border-dark-surface",children:[l.jsxs("h2",{className:"text-xl font-bold text-brand-primary mb-6 flex items-center gap-2",children:[l.jsx(Bb,{size:24})," Identidad Corporativa"]}),l.jsxs("form",{onSubmit:f,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-bold text-gray-600 dark:text-gray-400 mb-1",children:"Nombre de la Empresa"}),l.jsx("input",{type:"text",name:"company_name",value:s.company_name,onChange:m,className:"w-full p-3 border rounded-xl dark:bg-dark-surface dark:text-white focus:ring-2 focus:ring-brand-primary"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-gray-600 dark:text-gray-400 mb-1",children:"RIF / ID Fiscal"}),l.jsx("input",{type:"text",name:"company_rif",value:s.company_rif,onChange:m,className:"w-full p-3 border rounded-xl dark:bg-dark-surface dark:text-white focus:ring-2 focus:ring-brand-primary"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-gray-600 dark:text-gray-400 mb-1",children:"Teléfono"}),l.jsx("input",{type:"text",name:"company_phone",value:s.company_phone,onChange:m,className:"w-full p-3 border rounded-xl dark:bg-dark-surface dark:text-white focus:ring-2 focus:ring-brand-primary"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-bold text-gray-600 dark:text-gray-400 mb-1",children:"Dirección Física"}),l.jsx("textarea",{name:"company_address",value:s.company_address,onChange:m,rows:"3",className:"w-full p-3 border rounded-xl dark:bg-dark-surface dark:text-white focus:ring-2 focus:ring-brand-primary"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-bold text-gray-600 dark:text-gray-400 mb-1 flex items-center gap-1",children:[l.jsx(Of,{size:14})," Tasa de IVA (%)"]}),l.jsx("input",{type:"number",name:"company_iva",value:s.company_iva,onChange:m,className:"w-full p-3 border rounded-xl dark:bg-dark-surface dark:text-white focus:ring-2 focus:ring-brand-primary"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-bold text-gray-600 dark:text-gray-400 mb-1 flex items-center gap-1",children:[l.jsx(Of,{size:14})," Tasa IGTF (%)"]}),l.jsx("input",{type:"number",name:"company_igtf",value:s.company_igtf,onChange:m,className:"w-full p-3 border rounded-xl dark:bg-dark-surface dark:text-white focus:ring-2 focus:ring-brand-primary"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-bold text-gray-600 dark:text-gray-400 mb-1 flex items-center gap-1",children:[l.jsx(n0,{size:14})," Logo de la Empresa"]}),l.jsxs("div",{className:"flex gap-4 items-center",children:[s.company_logo&&l.jsx("div",{className:"w-16 h-16 rounded-lg border bg-gray-50 flex-shrink-0 overflow-hidden",children:l.jsx("img",{src:s.company_logo,alt:"Logo actual",className:"w-full h-full object-contain"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("input",{type:"file",accept:"image/*",onChange:async v=>{const y=v.target.files[0];if(y){o(!0);try{const k=new FormData;k.append("asset",y);const{data:A}=await Ge.post("/api/settings/upload",k,{headers:{"Content-Type":"multipart/form-data"}});i(D=>({...D,company_logo:A.url}))}catch{alert("Error al subir el logo.")}finally{o(!1)}}},className:"w-full text-xs text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-brand-primary file:text-white"}),l.jsx("p",{className:"text-[10px] text-gray-400 mt-1 truncate max-w-xs",children:s.company_logo})]})]})]})]}),l.jsx("div",{className:"pt-4",children:l.jsxs("button",{type:"submit",disabled:a,className:"flex items-center justify-center gap-2 bg-brand-primary text-white px-8 py-3 rounded-xl font-bold hover:bg-green-700 w-full transition-all disabled:opacity-50",children:[l.jsx(cc,{size:20})," ",a?"Guardando...":"Guardar Cambios Corporativos"]})})]})]})}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs(Kt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-white dark:bg-dark-primary rounded-2xl p-8 shadow-lg border border-brand-light dark:border-dark-surface",children:[l.jsxs("h2",{className:"text-xl font-bold text-brand-primary mb-6 flex items-center gap-2",children:[l.jsx(s0,{size:24})," Importar Datos"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-xs text-gray-500",children:"Cargue masivamente sus productos desde un archivo CSV."}),l.jsx("input",{type:"file",accept:".csv",onChange:v=>d(v.target.files[0]),className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-gray-100 dark:file:bg-dark-surface file:text-brand-primary"}),l.jsx("button",{onClick:x,className:"w-full py-2 bg-gray-200 dark:bg-dark-surface dark:text-white rounded-xl font-bold hover:bg-gray-300 transition",children:"Procesar Archivo"}),u&&l.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg text-xs text-green-700 dark:text-green-300",children:["Importación exitosa: ",u.added," productos detectados."]})]})]}),l.jsxs("div",{className:"bg-brand-soft-bg dark:bg-dark-surface/50 p-6 rounded-2xl border-2 border-brand-mid",children:[l.jsx("h3",{className:"font-bold text-brand-primary dark:text-green-300 mb-2",children:"💡 Consejos"}),l.jsxs("ul",{className:"text-xs space-y-2 text-gray-600 dark:text-gray-400",children:[l.jsx("li",{children:"• El logo cargado aquí se reflejará en todos los PDFs."}),l.jsx("li",{children:"• Use la tasa de IVA actual (16% en Venezuela)."}),l.jsxs("li",{children:["• ",l.jsx("strong",{children:"Importación CSV:"})," El archivo debe tener estos encabezados para funcionar:",l.jsxs("table",{className:"mt-2 w-full border-collapse border border-gray-300 dark:border-gray-600",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gray-100 dark:bg-dark-primary",children:[l.jsx("th",{className:"border p-1",children:"Columna"}),l.jsx("th",{className:"border p-1",children:"Dato"})]})}),l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{className:"border p-1",children:"nombre"}),l.jsx("td",{className:"border p-1",children:"Ej: Concreto 250"})]}),l.jsxs("tr",{children:[l.jsx("td",{className:"border p-1",children:"precio"}),l.jsx("td",{className:"border p-1",children:"Ej: 145.50"})]}),l.jsxs("tr",{children:[l.jsx("td",{className:"border p-1",children:"tipo"}),l.jsx("td",{className:"border p-1",children:"Tipología (Concreto, Bloque, Servicio, Otro)"})]}),l.jsxs("tr",{children:[l.jsx("td",{className:"border p-1",children:"categoria"}),l.jsx("td",{className:"border p-1",children:"Ej: Estructurales"})]})]})]})]})]})]})]})]})]})},f6=()=>{const[t,e]=Z.useState(["/assets/Hero.png","/assets/Toma frontal Planta.jpeg","/assets/Toma araña Planta.jpeg","/assets/Toma aerea Planta.jpeg"]),[r,n]=Z.useState(["Calidad y resistencia para los proyectos que construyen nuestro futuro.","Tu obra, nuestra prioridad. Concreto premezclado entregado a tiempo.","Innovación en cada mezcla. Soluciones de concreto para desafíos modernos.","Construye con confianza. La base de tu proyecto comienza con nosotros."]),[s,i]=Z.useState(0);Z.useEffect(()=>{fetch("http://localhost:3001/api/settings").then(c=>c.json()).then(c=>{if(c.hero_config)try{const d=JSON.parse(c.hero_config);d.images&&e(d.images),d.texts&&n(d.texts)}catch(d){console.error("Error parsing hero_config",d)}}).catch(c=>console.error("Error loading settings",c))},[]),Z.useEffect(()=>{if(t.length<=1)return;const o=setInterval(()=>{i(c=>c>=t.length-1?0:c+1)},5e3);return()=>clearInterval(o)},[t]);const a=o=>{i(o)};return l.jsxs("section",{className:"relative h-[85vh] flex items-end justify-center text-white overflow-hidden rounded-xl mb-16 shadow-2xl",children:[l.jsx(dh,{children:l.jsx(Kt.img,{src:t[s],alt:"Fondo de construcción",className:"absolute inset-0 w-full h-full object-cover",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:1}},s)}),l.jsx("div",{className:"absolute inset-0 bg-black opacity-50"}),l.jsx(Kt.div,{className:"relative z-10 text-center p-4 mb-16",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:l.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-white max-w-4xl mx-auto",children:r[s]})},s),l.jsx("div",{className:"absolute bottom-5 z-10 flex space-x-3",children:t.map((o,c)=>l.jsx("button",{onClick:()=>a(c),className:`w-3 h-3 rounded-full transition-colors duration-300 ${s===c?"bg-white":"bg-white/50"}`,"aria-label":`Ir a la imagen ${c+1}`},c))})]})},Uh=({title:t,description:e,imgSrc:r})=>l.jsxs("div",{className:"relative h-80 bg-white dark:bg-dark-surface rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden border border-gray-100 dark:border-dark-surface group",children:[l.jsx("img",{src:r,alt:t,className:"w-full h-full object-cover transition duration-500 group-hover:scale-105"}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/40 to-transparent flex items-end p-6",children:l.jsxs("div",{className:"text-white",children:[l.jsx("h3",{className:"text-2xl font-bold text-white mb-2 drop-shadow-md",children:t}),l.jsx("p",{className:"text-sm text-gray-100 leading-relaxed font-medium",children:e})]})})]}),p6=()=>{const[t,e]=Z.useState([{id:"estructurales",title:"Concretos Estructurales",description:"Mezclas de alta resistencia para cimentaciones, columnas y losas.",imgSrc:"/assets/Concreto.png"},{id:"pavimentos",title:"Concretos para Pavimentos",description:"Diseñados para soportar cargas dinámicas en vialidades y patios de maniobra.",imgSrc:"/assets/Concreto-Pavimento.png"},{id:"especiales",title:"Concretos Especiales",description:"Rellenos fluidos y mezclas autocompactables para aplicaciones específicas.",imgSrc:"/assets/Edificio.png"}]);return Z.useEffect(()=>{fetch("http://localhost:3001/api/settings").then(n=>n.json()).then(n=>{if(n.products_config)try{e(JSON.parse(n.products_config))}catch(s){console.error(s)}})},[]),l.jsxs("section",{id:"productos",className:"py-12",children:[l.jsx("h2",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-10 text-center",children:"Nuestros Productos Destacados"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map(r=>l.jsx(Ft,{to:`/productos/${r.id}`,className:"block h-full transition duration-300 hover:scale-[1.02]",children:l.jsx(Uh,{...r})},r.id))}),l.jsx("div",{className:"text-center mt-10",children:l.jsx(Ft,{to:"/productos",className:"inline-block bg-white text-brand-primary font-bold px-8 py-3 rounded-full text-lg border-2 border-brand-primary hover:bg-green-50 transition shadow-md dark:bg-dark-surface dark:text-gray-100 dark:border-brand-primary",children:"Ver Catálogo Completo"})})]})},g6=()=>{const[t,e]=Z.useState([{title:"Servicio de Bombeo",description:"Llegamos a cualquier altura.",imgSrc:"/assets/Bombeo.png"},{title:"Asesoría Técnica",description:"Expertos te guían en tu proyecto.",imgSrc:"/assets/Asesoria.png"},{title:"Entrega Express",description:"Garantizamos tu concreto a tiempo.",imgSrc:"/assets/Entrega.png"}]);return Z.useEffect(()=>{fetch("http://localhost:3001/api/settings").then(n=>n.json()).then(n=>{if(n.services_config)try{e(JSON.parse(n.services_config))}catch(s){console.error(s)}})},[]),l.jsxs("section",{id:"servicios",className:"py-12",children:[l.jsx("h2",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-10 text-center",children:"Nuestros Servicios"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:t.map((r,n)=>l.jsx("div",{className:"h-full transition duration-300 hover:scale-[1.02]",children:l.jsx(Uh,{...r})},n))}),l.jsx("div",{className:"text-center mt-12",children:l.jsx(Ft,{to:"/servicios",className:"inline-block bg-white text-brand-primary font-bold px-8 py-3 rounded-full text-lg border-2 border-brand-primary hover:bg-green-50 transition shadow-md dark:bg-dark-surface dark:text-gray-100 dark:border-brand-primary",children:"Conocer Más Sobre Nuestros Servicios"})})]})},m6=({title:t,location:e,category:r,imgSrc:n,className:s=""})=>{const i=e??r??"Proyecto destacado";return l.jsxs("div",{className:`relative w-full h-80 rounded-xl overflow-hidden shadow-xl group ${s}`,children:[l.jsx("img",{src:n,alt:t,className:"w-full h-full object-cover transition duration-500 group-hover:scale-105"}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/80 via-black/30 to-black/80 transition duration-300 group-hover:from-black/90 group-hover:to-black/90"}),l.jsxs("div",{className:"absolute inset-0 flex flex-col justify-between p-6",children:[l.jsxs("div",{children:[l.jsx("span",{className:"inline-block px-3 py-1 text-xs font-semibold uppercase tracking-wider bg-brand-primary text-white rounded-full shadow-md",children:i}),l.jsx("h3",{className:"mt-4 text-2xl font-bold text-white drop-shadow-lg leading-snug",children:t})]}),l.jsx("div",{className:"flex justify-end opacity-0 group-hover:opacity-100 transition",children:l.jsx("span",{className:"text-sm font-semibold text-white/80 bg-white/10 backdrop-blur px-4 py-2 rounded-full",children:"Explorar proyecto"})})]})]})},x6={"concreto-estructural":{id:"concreto-estructural",title:"Concreto Estructural",subtitle:"Conoce nuestros productos de concreto.",description:"El concreto estructural es el pilar de cualquier proyecto de construcción, ofreciendo resistencia, durabilidad y la capacidad de soportar grandes cargas estructurales. Es la elección ideal para cimentaciones, columnas y losas de alta exigencia. Ofrecemos diferentes resistencias (f'c) y tiempos de fraguado.",imageSrc:"/assets/Concreto.png",benefits:["Fuerza y durabilidad garantizada (f'c=250 a 400 kg/cm²)","Excelente trabajabilidad para colocación","Resistencia optimizada para tu proyecto","Cumplimiento con normas de construcción"],categories:["Estructural","Cimentación","Alta Resistencia"],relatedProducts:[{id:"tubos-concreto",title:"Tubos de Concreto"},{id:"bloques-concreto",title:"Bloques de Concreto"}]},"tubos-concreto":{id:"tubos-concreto",title:"Tubos de Concreto",subtitle:"Soluciones para sistemas de drenaje.",description:"Tubos de concreto reforzado diseñados para el manejo eficiente de agua pluvial y sanitaria en proyectos de infraestructura.",imageSrc:"/assets/Tubos.png",benefits:["Alta durabilidad y resistencia a la corrosión","Fácil instalación","Variedad de diámetros","Larga vida útil"],categories:["Drenaje","Infraestructura","Saneamiento"],relatedProducts:[{id:"concreto-estructural",title:"Concreto Estructural"},{id:"bloques-concreto",title:"Bloques de Concreto"}]},"bloques-concreto":{id:"bloques-concreto",title:"Bloques de Concreto",subtitle:"Para muros y acabados específicos.",description:"Unidades de mampostería utilizadas para la construcción de muros portantes y no portantes. Ofrecen aislamiento térmico y acústico.",imageSrc:"/assets/Bloques.png",benefits:["Excelentes propiedades aislantes","Rápida construcción","Resistencia al fuego","Bajo mantenimiento"],categories:["Muros","Acabados","Aislamiento"],relatedProducts:[{id:"concreto-estructural",title:"Concreto Estructural"},{id:"tubos-concreto",title:"Tubos de Concreto"}]}},W1=[{id:"estructurales",title:"Concretos Estructurales",subtitle:"Desarrollados para ofrecer alta resistencia y desempeño confiable en elementos como columnas, vigas, losas y fundaciones.",description:"Disponibles en diferentes grados según las exigencias del proyecto. (Disponible con asentamiento normal 5” o con bomba 7”, según el método de colocación requerido).",heroImageSrc:"/assets/Concreto.png",products:[{id:"c-100",title:"Concreto 100 kg/cm²",description:"Ideal para obras livianas o no estructurales.",f_c:"100 kg/cm²",imageSrc:"/assets/Concreto.png"},{id:"c-120",title:"Concreto 120 kg/cm²",description:"Para cimentaciones o pisos de baja carga.",f_c:"120 kg/cm²",imageSrc:"/assets/Concreto.png"},{id:"c-150",title:"Concreto 150 kg/cm²",description:"Recomendado para estructuras ligeras o muros.",f_c:"150 kg/cm²",imageSrc:"/assets/Concreto.png"},{id:"c-210",title:"Concreto 210 kg/cm²",description:"Uso general en estructuras residenciales y comerciales.",f_c:"210 kg/cm²",imageSrc:"/assets/Concreto.png"},{id:"c-250",title:"Concreto 250 kg/cm²",description:"Excelente equilibrio entre resistencia y trabajabilidad.",f_c:"250 kg/cm²",imageSrc:"/assets/Concreto.png"},{id:"c-280",title:"Concreto 280 kg/cm²",description:"Ideal para estructuras de mayor exigencia.",f_c:"280 kg/cm²",imageSrc:"/assets/Concreto.png"},{id:"c-300",title:"Concreto 300 kg/cm²",description:"Para proyectos industriales o de alta carga.",f_c:"300 kg/cm²",imageSrc:"/assets/Concreto.png"},{id:"c-350",title:"Concreto 350 kg/cm²",description:"Máxima resistencia para aplicaciones especiales.",f_c:"350 kg/cm²",imageSrc:"/assets/Concreto.png"}]},{id:"pavimentos",title:"Concretos para Pavimentos",subtitle:"Diseñados para soportar tránsito vehicular y ofrecer una superficie durable y uniforme.",description:"Recomendados para calles, avenidas, patios de maniobra y zonas industriales.",heroImageSrc:"/assets/Concreto-Pavimento.png",products:[{id:"pavi-vial-40",title:"PAVI-VIAL 40",description:"Pavimentos de tráfico ligero.",f_c:null,imageSrc:"/assets/Carretera.png"},{id:"pavi-vial-45",title:"PAVI-VIAL 45",description:"Calles urbanas o estacionamientos.",f_c:null,imageSrc:"/assets/Carretera.png"},{id:"pavi-vial-50",title:"PAVI-VIAL 50",description:"Vías de tráfico medio o pesado.",f_c:null,imageSrc:"/assets/Carretera.png"},{id:"pavi-vial-50-ft",title:"PAVI-VIAL 50 FT",description:"Pavimentos de alta resistencia con aditivos especiales.",f_c:null,imageSrc:"/assets/Carretera.png"}]},{id:"especiales",title:"Concretos Especiales",subtitle:"Formulados para aplicaciones con requerimientos específicos, donde se necesita una mezcla fluida, de fácil colocación y sin necesidad de vibrado.",description:"Facilitan el trabajo, reducen tiempos de colocación y mejoran la compactación.",heroImageSrc:"/assets/Edificio.png",products:[{id:"relleno-fluido-10",title:"Relleno Fluido 10 kg/cm²",description:"Ideal para relleno de ductos, zanjas o huecos.",f_c:"10 kg/cm²",imageSrc:"/assets/Bloques.png"},{id:"relleno-fluido-20",title:"Relleno Fluido 20 kg/cm²",description:"Mayor resistencia para rellenos estructurales o áreas de difícil acceso.",f_c:"20 kg/cm²",imageSrc:"/assets/Bloques.png"}]}],H1=[{title:"Centro Comercial La Vela",description:"Suministro de concreto de alta resistencia para la construcción de uno de los centros comerciales más grandes de la isla.",imgSrc:"/assets/project-1.png",category:"Edificación Comercial"},{title:"Autopista Circunvalación Norte",description:"Bombeo y colocación de concreto para pavimentos en la principal arteria vial de la región.",imgSrc:"/assets/project-2.png",category:"Infraestructura Vial"},{title:"Conjunto Residencial Costa Azul",description:"Concreto premezclado para la construcción de un complejo de edificios residenciales de lujo.",imgSrc:"/assets/project-3.png",category:"Vivienda Multifamiliar"},{title:"Edificio Residencial Sol Naciente",description:"Concreto estructural para un moderno edificio de apartamentos con vistas al mar.",imgSrc:"/assets/Edificio.png",category:"Vivienda Multifamiliar"},{title:"Planta de Tratamiento de Aguas",description:"Suministro de concretos especiales resistentes a agentes químicos para la nueva planta de tratamiento.",imgSrc:"/assets/Toma araña Planta.jpeg",category:"Infraestructura Sanitaria"},{title:"Hotel Boutique Coral",description:"Concreto bombeable para la construcción de un hotel boutique de cinco estrellas en la costa.",imgSrc:"/assets/Oficina.jpeg",category:"Hotelería y Turismo"}],b6=(t,e)=>Array.from({length:Math.ceil(t.length/e)},(r,n)=>t.slice(n*e,n*e+e)),y6=()=>{const[t,e]=Z.useState(0),[r,n]=Z.useState(0),s=b6(H1,3),i=o=>{n(o),e(c=>(c+o+s.length)%s.length)},a={enter:o=>({x:o>0?"100%":"-100%",opacity:0}),center:{x:0,opacity:1},exit:o=>({x:o<0?"100%":"-100%",opacity:0})};return l.jsxs("section",{id:"proyectos-destacados",className:"py-16 dark:bg-dark-surface overflow-hidden",children:[l.jsx("h2",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-10 text-center",children:"Proyectos Destacados de la Región"}),l.jsx("div",{className:"relative max-w-6xl mx-auto",children:l.jsxs("div",{className:"relative h-[450px] overflow-hidden rounded-2xl bg-white dark:bg-dark-green-darker border border-gray-200/70 dark:border-white/10 shadow-lg",children:[l.jsx(dh,{initial:!1,custom:r,children:l.jsx(Kt.div,{custom:r,variants:a,initial:"enter",animate:"center",exit:"exit",transition:{x:{type:"spring",stiffness:260,damping:32},opacity:{duration:.25}},className:"absolute inset-0 grid grid-cols-1 md:grid-cols-3 gap-8 px-6 md:px-10 py-6 items-center",children:s[t]?.map(o=>l.jsx(m6,{...o},o.title))},t)}),l.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[l.jsx("button",{onClick:()=>i(-1),className:"pointer-events-auto absolute left-4 top-1/2 -translate-y-1/2 inline-flex items-center justify-center w-12 h-12 rounded-full bg-white/30 backdrop-blur-md text-white shadow-lg hover:bg-white/50 transition","aria-label":"Proyecto anterior",children:l.jsx(zb,{className:"w-5 h-5"})}),l.jsx("button",{onClick:()=>i(1),className:"pointer-events-auto absolute right-4 top-1/2 -translate-y-1/2 inline-flex items-center justify-center w-12 h-12 rounded-full bg-white/30 backdrop-blur-md text-white shadow-lg hover:bg-white/50 transition","aria-label":"Siguiente proyecto",children:l.jsx(Ub,{className:"w-5 h-5"})})]})]})}),l.jsx("div",{className:"flex justify-center mt-12",children:l.jsx(Ft,{to:"/proyectos",children:l.jsx("button",{className:"px-8 py-3 bg-white text-brand-primary font-bold rounded-full text-lg border-2 border-brand-primary hover:bg-green-50 transition shadow-md dark:bg-dark-surface dark:text-gray-100 dark:border-brand-primary",children:"Ver Galería Completa"})})})]})},hr=()=>{const t=new Date().getFullYear();return l.jsx("footer",{className:"w-full bg-white dark:bg-dark-primary border-t border-gray-200 dark:border-gray-700 py-8",children:l.jsxs("div",{className:"max-w-[1280px] mx-auto px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-8 pb-8 border-b border-gray-200 dark:border-gray-700",children:[" ",l.jsxs("div",{children:[l.jsxs(Ft,{to:"/",className:"flex items-center mb-4",children:[l.jsx("img",{src:"/assets/LOGO_PREMEZCLADOS.svg",alt:"Logo Premezclados",className:"h-12 w-auto mr-2"}),l.jsx("span",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:"Premezclado Manzanillo, C.A."})]}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Concreto de calidad para tus proyectos."}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Innovación y resistencia en cada mezcla."})]}),l.jsx("div",{className:"hidden lg:block"})," ",l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Contacto"}),l.jsxs("ul",{className:"space-y-2",children:[l.jsxs("li",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[l.jsx(uh,{className:"w-4 h-4 mr-2 text-brand-primary"}),"Sector Guatamare, Av. 31 de Julio, Edif. Cantera Manzanillo."]}),l.jsxs("li",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[l.jsx(i0,{className:"w-4 h-4 mr-2 text-brand-primary"}),"0295-287.14.22 / 0295-287.08.45"]}),l.jsxs("li",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[l.jsx(a0,{className:"w-4 h-4 mr-2 text-brand-primary"}),"info@premezclados.com"]})]})]}),l.jsx("div",{className:"hidden lg:block"})," ",l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Clientes"}),l.jsxs("ul",{className:"space-y-2",children:[l.jsx("li",{children:l.jsx(Ft,{to:"/dashboard",className:"text-sm text-gray-600 dark:text-gray-400 hover:text-brand-primary transition",children:"Acceso a Clientes"})}),l.jsx("li",{children:l.jsx("a",{href:"#",className:"text-sm text-gray-600 dark:text-gray-400 hover:text-brand-primary transition",children:"Preguntas Frecuentes"})}),l.jsx("li",{children:l.jsx("a",{href:"#",className:"text-sm text-gray-600 dark:text-gray-400 hover:text-brand-primary transition",children:"Términos y Condiciones"})})]})]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row justify-center items-center pt-6 gap-6",children:[l.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4 sm:mb-0",children:["© ",t," Premezclados Manzanillo. Todos los derechos reservados."]}),l.jsx("div",{className:"flex",children:l.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer","aria-label":"Instagram",className:"text-gray-600 dark:text-gray-400 hover:text-brand-primary transition",children:l.jsx(qb,{className:"w-5 h-5"})})})]})]})})},v6=()=>l.jsxs("div",{className:"relative min-h-screen bg-white dark:bg-dark-primary",children:[l.jsx(yr,{}),l.jsxs("main",{className:"w-full pt-32 md:pt-36",children:[" ",l.jsxs("div",{className:"max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8",children:[l.jsx(f6,{}),l.jsx(p6,{}),l.jsx(g6,{}),l.jsx(y6,{})]})]}),l.jsx(hr,{})]}),w6=({product:t})=>l.jsxs("div",{className:"py-12 lg:py-16",children:[l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-10 lg:gap-16 items-start pb-12 border-b border-gray-200 dark:border-gray-700",children:[l.jsxs("div",{className:"lg:col-span-7",children:[l.jsx("h1",{className:"text-5xl font-extrabold text-gray-900 dark:text-gray-100 mb-4",children:t.title}),l.jsx("p",{className:"text-xl font-medium text-brand-primary dark:text-green-400 mb-6",children:t.subtitle}),l.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-8 leading-relaxed",children:t.description}),l.jsxs("div",{className:"flex space-x-4",children:[l.jsx(Ft,{to:"/cotizaciones",className:"bg-brand-primary text-white px-8 py-3 rounded-full text-lg hover:bg-brand-mid transition duration-150",children:"Solicitar Cotización"}),l.jsx("a",{href:`/assets/data/ficha-tecnica-${t.id}.pdf`,target:"_blank",rel:"noopener noreferrer",className:"border border-brand-primary text-brand-primary dark:border-green-400 dark:text-green-400 px-8 py-3 rounded-full text-lg hover:bg-brand-primary hover:text-white transition duration-150",children:"Descargar Ficha Técnica"})]})]}),l.jsx("div",{className:"lg:col-span-5 flex justify-center lg:justify-end",children:l.jsx("div",{className:"w-full h-80 bg-gray-200 dark:bg-gray-700 rounded-lg overflow-hidden shadow-lg flex items-center justify-center",children:l.jsx("img",{src:t.imageSrc,alt:t.title,className:"w-full h-full object-cover"})})})]}),l.jsxs("div",{className:"pt-12",children:[l.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-8",children:"Beneficios Clave"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:t.benefits&&t.benefits.map((e,r)=>l.jsxs("div",{className:"flex items-start space-x-3 p-4 dark:bg-dark-surface rounded-lg",children:[l.jsx(lh,{className:"w-6 h-6 text-green-500 flex-shrink-0 mt-1"}),l.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:e})]},r))})]}),l.jsxs("div",{className:"pt-16",children:[l.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-8",children:"Otros productos que se adaptan a tus necesidades"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:t.relatedProducts&&t.relatedProducts.map(e=>l.jsxs(Ft,{to:`/productos/${e.id}`,className:"block p-4 border-2 border-gray-200 dark:border-gray-700 rounded-lg hover:shadow-lg transition duration-200 dark:hover:border-green-400",children:[l.jsx("h3",{className:"text-lg font-semibold text-brand-primary dark:text-green-400",children:e.title}),l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Ver detalles del producto."})]},e.id))})]})]}),k6=()=>{const{productId:t}=c0(),[e,r]=Z.useState(null),[n,s]=Z.useState(!0);return Z.useEffect(()=>{s(!0);const i=x6[t];setTimeout(()=>{r(i),s(!1)},300)},[t]),n?l.jsx("div",{className:"min-h-screen bg-white dark:bg-dark-primary flex items-center justify-center",children:l.jsx("p",{className:"text-xl dark:text-gray-200",children:"Cargando detalles del producto..."})}):e?l.jsxs("div",{className:"relative min-h-screen bg-white dark:bg-dark-primary",children:[l.jsx(yr,{}),l.jsx("main",{className:"pt-24 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsx(w6,{product:e})}),l.jsx(hr,{})]}):l.jsxs("div",{className:"min-h-screen bg-white dark:bg-dark-primary pt-16",children:[l.jsx(yr,{}),l.jsxs("div",{className:"max-w-7xl mx-auto py-12 px-4 text-center",children:[l.jsx("h1",{className:"text-3xl font-bold text-red-500 dark:text-red-400",children:"Producto No Encontrado"}),l.jsx(Ft,{to:"/",className:"mt-4 text-brand-primary dark:text-green-400 hover:underline",children:"Volver al Inicio"})]}),l.jsx(hr,{})]})},id=({product:t})=>l.jsxs("div",{className:"relative bg-white dark:bg-dark-surface rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300 overflow-hidden border border-gray-100 dark:border-dark-surface",children:[t.imageSrc&&l.jsx("img",{src:t.imageSrc,alt:t.title,className:"w-full h-40 object-cover"}),l.jsxs("div",{className:"p-4",children:[l.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-1",children:t.title}),t.f_c&&l.jsxs("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-300 mb-2",children:["f'c = ",t.f_c]}),l.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:t.description})]}),l.jsx("div",{className:"flex justify-center space-x-3 mt-4 p-4",children:l.jsxs("a",{href:`/assets/data/ficha-tecnica-${t.id}.pdf`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 text-sm border border-brand-primary dark:border-green-400 text-brand-primary dark:text-green-400 px-3 py-2 rounded-full hover:bg-brand-primary hover:text-white dark:hover:bg-green-600 dark:hover:text-white transition",children:[l.jsx(Pn,{size:16}),l.jsx("span",{children:"Ficha Técnica"})]})})]}),N6=()=>l.jsxs("div",{className:"relative min-h-screen bg-white dark:bg-dark-primary",children:[l.jsx(yr,{}),l.jsx("header",{className:"pt-32 md:pt-40 lg:pt-44 pb-12 dark:bg-dark-secondary text-center min-h-[160px]",children:l.jsx("h1",{className:"text-5xl md:text-6xl font-extrabold text-gray-900 dark:text-gray-100 mb-3 whitespace-normal leading-tight max-w-4xl mx-auto",children:"Catálogo de productos"})}),l.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:W1.map(t=>l.jsxs("div",{className:"mb-16",children:[l.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-8 text-center",children:t.title}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:t.products.map(e=>l.jsx(id,{product:e},e.id))})]},t.id))}),l.jsx(hr,{})]}),qh=({currentCategoryId:t})=>{const e=W1.filter(r=>r.id!==t);return e.length===0?null:l.jsxs("div",{className:"py-12 border-t border-gray-200 dark:border-gray-700 mt-16",children:[l.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-8 text-center",children:"Otras Categorías"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:e.map(r=>l.jsx(Ft,{to:`/productos/${r.id}`,className:"block h-full transition duration-300 hover:scale-[1.02]",children:l.jsx(Uh,{title:r.title,description:r.subtitle,imgSrc:r.heroImageSrc})},r.id))})]})},j6=({category:t})=>l.jsxs("div",{className:"mb-16",children:[l.jsx("div",{className:"bg-white dark:bg-dark-surface shadow-md",children:l.jsxs("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8 text-center",children:[l.jsx("h2",{className:"text-3xl sm:text-4xl font-extrabold tracking-tight text-gray-900 dark:text-gray-100",children:t.title}),l.jsx("p",{className:"text-base sm:text-lg text-gray-600 dark:text-gray-300 max-w-3xl mx-auto",children:t.subtitle})]})}),l.jsx("div",{className:"w-full bg-cover bg-center",style:{height:"400px",backgroundImage:`url(${t.heroImageSrc||"/assets/HERO.png"})`}}),l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-10",children:[l.jsx("p",{className:"text-center text-gray-700 dark:text-gray-300 mb-10 italic max-w-4xl mx-auto",children:t.description}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:t.products.map(e=>l.jsx(id,{product:e},e.id))})]})]}),_6=()=>{const[t,e]=Z.useState([]),[r,n]=Z.useState(!0),[s,i]=Z.useState(null);Z.useEffect(()=>{(async()=>{try{const c=await Ge.get("/api/products");e(c.data),n(!1)}catch(c){console.error("Error fetching products:",c),i("Error al cargar los productos."),n(!1)}})()},[]);const a=Z.useMemo(()=>{const o=t.filter(d=>d.category==="Estructural"||d.category&&typeof d.category=="object"&&d.category.name==="Estructural");return{id:"estructurales",title:"Concretos Estructurales",subtitle:"Desarrollados para ofrecer alta resistencia y desempeño confiable en elementos como columnas, vigas, losas y fundaciones.",description:"Disponibles en diferentes grados según las exigencias del proyecto. (Disponible con asentamiento normal 5” o con bomba 7”, según el método de colocación requerido).",heroImageSrc:"/assets/Concreto.png",products:o.length>0?o.map(d=>({id:d.id,title:d.name,description:d.description,f_c:d.resistance,imageSrc:d.image||"/assets/Concreto.png"})):[{id:"c-100",title:"Concreto 100 kg/cm²",description:"Ideal para obras livianas o no estructurales.",f_c:"100 kg/cm²",imageSrc:"/assets/Concreto.png"},{id:"c-120",title:"Concreto 120 kg/cm²",description:"Para cimentaciones o pisos de baja carga.",f_c:"120 kg/cm²",imageSrc:"/assets/Concreto.png"},{id:"c-150",title:"Concreto 150 kg/cm²",description:"Recomendado para estructuras ligeras o muros.",f_c:"150 kg/cm²",imageSrc:"/assets/Concreto.png"},{id:"c-210",title:"Concreto 210 kg/cm²",description:"Uso general en estructuras residenciales y comerciales.",f_c:"210 kg/cm²",imageSrc:"/assets/Concreto.png"},{id:"c-250",title:"Concreto 250 kg/cm²",description:"Excelente equilibrio entre resistencia y trabajabilidad.",f_c:"250 kg/cm²",imageSrc:"/assets/Concreto.png"},{id:"c-280",title:"Concreto 280 kg/cm²",description:"Ideal para estructuras de mayor exigencia.",f_c:"280 kg/cm²",imageSrc:"/assets/Concreto.png"},{id:"c-300",title:"Concreto 300 kg/cm²",description:"Para proyectos industriales o de alta carga.",f_c:"300 kg/cm²",imageSrc:"/assets/Concreto.png"},{id:"c-350",title:"Concreto 350 kg/cm²",description:"Máxima resistencia para aplicaciones especiales.",f_c:"350 kg/cm²",imageSrc:"/assets/Concreto.png"}]}},[t]);return r?l.jsxs("div",{className:"min-h-screen bg-white dark:bg-dark-primary pt-16",children:[l.jsx(yr,{}),l.jsx("div",{className:"max-w-7xl mx-auto py-12 px-4 text-center",children:l.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"Cargando productos..."})}),l.jsx(hr,{})]}):s?l.jsxs("div",{className:"min-h-screen bg-white dark:bg-dark-primary pt-16",children:[l.jsx(yr,{}),l.jsxs("div",{className:"max-w-7xl mx-auto py-12 px-4 text-center",children:[l.jsxs("h1",{className:"text-3xl font-bold text-red-500 dark:text-red-400",children:["Error: ",s]}),l.jsx(Ft,{to:"/productos",className:"mt-4 text-brand-primary dark:text-green-400 hover:underline",children:"Volver al Catálogo"})]}),l.jsx(hr,{})]}):a?l.jsxs("div",{className:"relative min-h-screen bg-white dark:bg-dark-primary",children:[l.jsx(yr,{}),l.jsxs("main",{className:"pt-32 pb-16",children:[l.jsx(j6,{category:a}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsx(qh,{currentCategoryId:"estructurales"})})]}),l.jsx(hr,{})]}):l.jsxs("div",{className:"min-h-screen bg-white dark:bg-dark-primary pt-16",children:[l.jsx(yr,{}),l.jsxs("div",{className:"max-w-7xl mx-auto py-12 px-4 text-center",children:[l.jsx("h1",{className:"text-3xl font-bold text-red-500 dark:text-red-400",children:"Categoría no encontrada"}),l.jsx(Ft,{to:"/productos",className:"mt-4 text-brand-primary dark:text-green-400 hover:underline",children:"Volver al Catálogo"})]}),l.jsx(hr,{})]})},S6=({category:t})=>l.jsxs("div",{className:"mb-16",children:[l.jsx("div",{className:"bg-white dark:bg-dark-surface shadow-md",children:l.jsxs("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8 text-center",children:[l.jsx("h2",{className:"text-3xl sm:text-4xl font-extrabold tracking-tight text-gray-900 dark:text-gray-100",children:t.title}),l.jsx("p",{className:"text-base sm:text-lg text-gray-600 dark:text-gray-300 max-w-3xl mx-auto",children:t.subtitle})]})}),l.jsx("div",{className:"w-full bg-cover bg-center",style:{height:"400px",backgroundImage:`url(${t.heroImageSrc||"/assets/HERO.png"})`}}),l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-10",children:[l.jsx("p",{className:"text-center text-gray-700 dark:text-gray-300 mb-10 italic max-w-4xl mx-auto",children:t.description}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:t.products.map(e=>l.jsx(id,{product:e},e.id))})]})]}),A6=()=>{const[t,e]=Z.useState([]),[r,n]=Z.useState(!0),[s,i]=Z.useState(null);Z.useEffect(()=>{(async()=>{try{const c=await Ge.get("/api/products");e(c.data),n(!1)}catch(c){console.error("Error fetching products:",c),i("Error al cargar los productos."),n(!1)}})()},[]);const a=Z.useMemo(()=>{const o=t.filter(d=>d.category==="Pavimento"||d.category&&typeof d.category=="object"&&d.category.name==="Pavimento");return{id:"pavimentos",title:"Concretos para Pavimentos",subtitle:"Diseñados para soportar tránsito vehicular y ofrecer una superficie durable y uniforme.",description:"Recomendados para calles, avenidas, patios de maniobra y zonas industriales.",heroImageSrc:"/assets/Concreto-Pavimento.png",products:o.length>0?o.map(d=>({id:d.id,title:d.name,description:d.description,f_c:d.resistance,imageSrc:d.image||"/assets/Carretera.png"})):[{id:"pavi-vial-40",title:"PAVI-VIAL 40",description:"Pavimentos de tráfico ligero.",f_c:null,imageSrc:"/assets/Carretera.png"},{id:"pavi-vial-45",title:"PAVI-VIAL 45",description:"Calles urbanas o estacionamientos.",f_c:null,imageSrc:"/assets/Carretera.png"},{id:"pavi-vial-50",title:"PAVI-VIAL 50",description:"Vías de tráfico medio o pesado.",f_c:null,imageSrc:"/assets/Carretera.png"},{id:"pavi-vial-50-ft",title:"PAVI-VIAL 50 FT",description:"Pavimentos de alta resistencia con aditivos especiales.",f_c:null,imageSrc:"/assets/Carretera.png"}]}},[t]);return r?l.jsxs("div",{className:"min-h-screen bg-white dark:bg-dark-primary pt-16",children:[l.jsx(yr,{}),l.jsx("div",{className:"max-w-7xl mx-auto py-12 px-4 text-center",children:l.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"Cargando productos..."})}),l.jsx(hr,{})]}):s?l.jsxs("div",{className:"min-h-screen bg-white dark:bg-dark-primary pt-16",children:[l.jsx(yr,{}),l.jsxs("div",{className:"max-w-7xl mx-auto py-12 px-4 text-center",children:[l.jsxs("h1",{className:"text-3xl font-bold text-red-500 dark:text-red-400",children:["Error: ",s]}),l.jsx(Ft,{to:"/productos",className:"mt-4 text-brand-primary dark:text-green-400 hover:underline",children:"Volver al Catálogo"})]}),l.jsx(hr,{})]}):a?l.jsxs("div",{className:"relative min-h-screen bg-white dark:bg-dark-primary",children:[l.jsx(yr,{}),l.jsxs("main",{className:"pt-32 pb-16",children:[l.jsx(S6,{category:a}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsx(qh,{currentCategoryId:"pavimentos"})})]}),l.jsx(hr,{})]}):l.jsxs("div",{className:"min-h-screen bg-white dark:bg-dark-primary pt-16",children:[l.jsx(yr,{}),l.jsxs("div",{className:"max-w-7xl mx-auto py-12 px-4 text-center",children:[l.jsx("h1",{className:"text-3xl font-bold text-red-500 dark:text-red-400",children:"Categoría no encontrada"}),l.jsx(Ft,{to:"/productos",className:"mt-4 text-brand-primary dark:text-green-400 hover:underline",children:"Volver al Catálogo"})]}),l.jsx(hr,{})]})},Im={droplet:Wb,"layers-3":e0,default:Nc},C6=({item:t})=>{const e=Im[t.icon]||Im.default;return l.jsxs("div",{className:"flex items-start space-x-4 p-4 dark:bg-dark-secondary rounded-lg",children:[l.jsx(e,{size:24,className:"text-brand-primary dark:text-green-400 flex-shrink-0 mt-1"}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:t.title}),l.jsx("p",{className:"text-gray-600 text-sm",children:t.description})]})]})},P6=({category:t})=>l.jsxs("div",{className:"mb-16",children:[l.jsx("div",{className:"bg-white dark:bg-dark-surface shadow-md",children:l.jsxs("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8 text-center",children:[l.jsx("h2",{className:"text-3xl sm:text-4xl font-extrabold tracking-tight text-gray-900 dark:text-gray-100",children:t.title}),l.jsx("p",{className:"text-base sm:text-lg text-gray-600 dark:text-gray-300 max-w-3xl mx-auto",children:t.subtitle})]})}),l.jsx("div",{className:"w-full bg-cover bg-center",style:{height:"400px",backgroundImage:`url(${t.heroImageSrc||"/assets/HERO.png"})`}}),l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-10",children:[l.jsx("p",{className:"text-center text-gray-700 dark:text-gray-300 mb-10 italic max-w-4xl mx-auto",children:t.description}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 justify-items-center",children:t.products.map(e=>l.jsx(id,{product:e},e.id))})]})]}),L6=({data:t})=>l.jsxs("div",{className:"py-12 border-t border-gray-200 dark:border-gray-700 mt-16",children:[l.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:t.title}),l.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400 mb-8",children:t.subtitle}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.items.map((e,r)=>l.jsx(C6,{item:e},r))})]}),E6=()=>{const[t,e]=Z.useState([]),[r,n]=Z.useState(!0),[s,i]=Z.useState(null);Z.useEffect(()=>{(async()=>{try{const d=await Ge.get("/api/products");e(d.data),n(!1)}catch(d){console.error("Error fetching products:",d),i("Error al cargar los productos."),n(!1)}})()},[]);const a=Z.useMemo(()=>{const c=t.filter(u=>u.category==="Especial"||u.category&&typeof u.category=="object"&&u.category.name==="Especial");return{id:"especiales",title:"Concretos Especiales",subtitle:"Formulados para aplicaciones con requerimientos específicos, donde se necesita una mezcla fluida, de fácil colocación y sin necesidad de vibrado.",description:"Facilitan el trabajo, reducen tiempos de colocación y mejoran la compactación.",heroImageSrc:"/assets/Edificio.png",products:c.length>0?c.map(u=>({id:u.id,title:u.name,description:u.description,f_c:u.resistance,imageSrc:u.image||"/assets/Bloques.png"})):[{id:"relleno-fluido-10",title:"Relleno Fluido 10 kg/cm²",description:"Ideal para relleno de ductos, zanjas o huecos.",f_c:"10 kg/cm²",imageSrc:"/assets/Bloques.png"},{id:"relleno-fluido-20",title:"Relleno Fluido 20 kg/cm²",description:"Mayor resistencia para rellenos estructurales o áreas de difícil acceso.",f_c:"20 kg/cm²",imageSrc:"/assets/Bloques.png"}]}},[t]),o={title:"Aditivos Adicionales",subtitle:"Potencian el desempeño del concreto según las condiciones ambientales o del proyecto.",items:[{title:"Hidrófugo",description:"Aumenta la impermeabilidad y protege contra la humedad.",icon:"droplet"},{title:"Fibra",description:"Reduce el agrietamiento y mejora la durabilidad superficial.",icon:"layers-3"}]};return r?l.jsxs("div",{className:"min-h-screen bg-white dark:bg-dark-primary pt-16",children:[l.jsx(yr,{}),l.jsx("div",{className:"max-w-7xl mx-auto py-12 px-4 text-center",children:l.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"Cargando productos..."})}),l.jsx(hr,{})]}):s?l.jsxs("div",{className:"min-h-screen bg-white dark:bg-dark-primary pt-16",children:[l.jsx(yr,{}),l.jsxs("div",{className:"max-w-7xl mx-auto py-12 px-4 text-center",children:[l.jsxs("h1",{className:"text-3xl font-bold text-red-500 dark:text-red-400",children:["Error: ",s]}),l.jsx(Ft,{to:"/productos",className:"mt-4 text-brand-primary dark:text-green-400 hover:underline",children:"Volver al Catálogo"})]}),l.jsx(hr,{})]}):a?l.jsxs("div",{className:"relative min-h-screen bg-white dark:bg-dark-primary",children:[l.jsx(yr,{}),l.jsxs("main",{className:"pt-32 pb-16",children:[l.jsx(P6,{category:a}),l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[l.jsx(L6,{data:o}),l.jsx(qh,{currentCategoryId:"especiales"})]})]}),l.jsx(hr,{})]}):l.jsxs("div",{className:"min-h-screen bg-white dark:bg-dark-primary pt-16",children:[l.jsx(yr,{}),l.jsxs("div",{className:"max-w-7xl mx-auto py-12 px-4 text-center",children:[l.jsx("h1",{className:"text-3xl font-bold text-red-500 dark:text-red-400",children:"Categoría no encontrada"}),l.jsx(Ft,{to:"/productos",className:"mt-4 text-brand-primary dark:text-green-400 hover:underline",children:"Volver al Catálogo"})]}),l.jsx(hr,{})]})},O6=[{title:"Asesoría Técnica Personalizada",description:"Ofrecemos un acompañamiento completo desde la concepción de tu proyecto. Nuestro equipo de expertos te ayuda a seleccionar el tipo de concreto ideal según tus necesidades estructurales, las condiciones del sitio y tu presupuesto, garantizando la máxima eficiencia y durabilidad.",imageSrc:"/assets/Asesoria.png",imageAlt:"Ingenieros revisando planos de construcción"},{title:"Soluciones en Cada Entrega",description:"No solo entregamos concreto; entregamos tranquilidad. Cada envío es supervisado para cumplir con los más altos estándares de calidad y puntualidad. Coordinamos la logística para adaptarnos al ritmo de tu obra, asegurando que el material llegue en el momento y lugar precisos.",imageSrc:"/assets/Entrega.png",imageAlt:"Camión de premezclado en una obra"},{title:"Servicio de Bomba de Concreto",description:"Facilitamos la colocación del concreto en lugares de difícil acceso, como edificios de gran altura o estructuras complejas. Nuestro servicio de bombeo es seguro, rápido y reduce la necesidad de mano de obra, optimizando el tiempo y los costos de tu proyecto.",imageSrc:"/assets/Bombeo.png",imageAlt:"Bombeo de concreto en una losa de edificio"}],D6=({service:t,reverseLayout:e})=>l.jsxs("div",{className:`flex flex-col ${e?"md:flex-row-reverse":"md:flex-row"} items-center bg-white shadow-lg rounded-lg overflow-hidden mb-12`,children:[l.jsx("div",{className:"w-full md:w-1/2",children:l.jsx("img",{src:t.imageSrc,alt:t.imageAlt,className:"w-full h-64 md:h-full object-cover"})}),l.jsxs("div",{className:"w-full md:w-1/2 p-8 md:p-12",children:[l.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:t.title}),l.jsx("p",{className:"text-gray-700",children:t.description})]})]}),F6=()=>l.jsxs("div",{className:"relative min-h-screen dark:bg-dark-primary",children:[l.jsx(yr,{}),l.jsxs("main",{className:"pt-24 pb-16",children:[l.jsxs("div",{className:"relative h-96 flex items-center justify-center text-white mb-16 shadow-xl overflow-hidden",children:[l.jsx("img",{src:"/assets/Carretera.png",alt:"Fondo de servicios de construcción",className:"absolute inset-0 w-full h-full object-cover"}),l.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-60"}),l.jsxs("div",{className:"relative z-10 text-center px-4",children:[l.jsx("h1",{className:"text-5xl font-extrabold tracking-tight text-white",children:"Nuestros Servicios"}),l.jsx("p",{className:"mt-4 text-xl font-medium",children:"Soluciones integrales para llevar tu proyecto al siguiente nivel."})]})]}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:O6.map((t,e)=>l.jsx(D6,{service:t,reverseLayout:e%2!==0},e))})]}),l.jsx(hr,{})]}),R6=[{year:"1998",title:"Fundación en Manzanillo",description:"Nacimos como una planta familiar para atender proyectos residenciales en la isla de Margarita."},{year:"2008",title:"Expansión Logística",description:"Incorporamos nuestra primera flotilla de camiones mezcladores y el servicio de bombeo para obras verticales."},{year:"2016",title:"Certificación de Calidad",description:"Obtuvimos la certificación nacional que avala la calidad de nuestras mezclas y procesos de producción."},{year:"2024",title:"Impulso Tecnológico",description:"La digitalización de nuestros procesos comerciales nos acerca más a nuestros clientes y socios."}],M6=[{title:"Compromiso con la Calidad",description:"Cada entrega se somete a controles rigurosos para garantizar la resistencia y durabilidad de nuestros concretos.",icon:"🏗️"},{title:"Seguridad Primero",description:"Invertimos en capacitación continua para nuestro personal y aliados en obra, asegurando operaciones sin riesgos.",icon:"🛡️"},{title:"Alianza con el Cliente",description:"Trabajamos mano a mano con constructores, arquitectos e ingenieros para adaptar cada mezcla a sus necesidades.",icon:"🤝"},{title:"Innovación Sostenible",description:"Optimizamos procesos para reducir desperdicios y consumo energético dentro de la planta.",icon:"🌱"}],T6=[{value:"+25",label:"Años impulsando proyectos en Nueva Esparta"},{value:"180+",label:"Obras industriales, residenciales y viales atendidas"},{value:"24/7",label:"Monitoreo y soporte para obras críticas"},{value:"99%",label:"Índice de entregas puntuales en 2024"}],I6=()=>l.jsxs("div",{className:"relative min-h-screen dark:bg-dark-primary",children:[l.jsx(yr,{}),l.jsxs("main",{className:"pt-32 pb-20",children:[l.jsx("section",{className:"relative max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 overflow-hidden",children:l.jsxs("div",{className:"relative rounded-3xl h-80 md:h-96 shadow-2xl",children:[l.jsx("img",{src:"/assets/Toma frontal Planta.jpeg",alt:"Planta de producción de concreto",className:"absolute inset-0 h-full w-full object-cover"}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/70 via-black/40 to-black/70"}),l.jsxs("div",{className:"relative z-10 flex h-full flex-col justify-center px-8 md:px-14 text-white",children:[l.jsx("span",{className:"text-sm uppercase tracking-[0.35em] text-white/80",children:"Quiénes Somos"}),l.jsx("h1",{className:"mt-4 text-4xl md:text-5xl font-extrabold leading-tight text-white",children:"Concreto confiable para construir el futuro de Margarita"}),l.jsx("p",{className:"mt-4 max-w-2xl text-lg text-white/80",children:"Premezclado Manzanillo, C.A. combina experiencia técnica, logística eficiente y asesoría especializada para acompañar cada obra desde la excavación hasta el colado final."})]})]})}),l.jsx("section",{className:"mt-16 max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"bg-white dark:bg-dark-surface rounded-2xl shadow-xl p-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Nuestra Misión"}),l.jsx("p",{className:"text-gray-700 dark:text-gray-200 leading-relaxed",children:"Proveer soluciones de concreto confiables y adaptadas a cada proyecto, con un servicio cercano y flexible que permita a nuestros clientes construir con seguridad, puntualidad y eficiencia."})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-surface rounded-2xl shadow-xl p-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Nuestra Visión"}),l.jsx("p",{className:"text-gray-700 dark:text-gray-200 leading-relaxed",children:"Ser la empresa de referencia en soluciones de concreto del oriente venezolano, integrando innovación, tecnología y procesos sostenibles que eleven el estándar constructivo de la región."})]})]})}),l.jsx("section",{className:"mt-16 bg-white dark:bg-dark-surface",children:l.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[l.jsx("h2",{className:"text-3xl font-bold text-center text-gray-900 dark:text-white",children:"Nuestros Valores nos Guían"}),l.jsx("p",{className:"mt-4 max-w-3xl mx-auto text-center text-gray-600 dark:text-gray-300",children:"Un equipo comprometido, procesos transparentes y decisiones orientadas a la seguridad y la satisfacción de nuestros clientes."}),l.jsx("div",{className:"mt-10 grid grid-cols-1 md:grid-cols-2 gap-8",children:M6.map(t=>l.jsxs("div",{className:"flex items-start gap-4 dark:bg-dark-primary/60 border border-gray-200 dark:border-white/10 rounded-2xl p-6 shadow-sm",children:[l.jsx("span",{className:"text-3xl","aria-hidden":"true",children:t.icon}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:t.title}),l.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300 leading-relaxed",children:t.description})]})]},t.title))})]})}),l.jsx("section",{className:"mt-16 max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"bg-white dark:bg-dark-surface rounded-3xl shadow-xl p-10",children:[l.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white text-center",children:"Resultados que respaldan nuestra trayectoria"}),l.jsx("div",{className:"mt-10 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8",children:T6.map(t=>l.jsxs("div",{className:"flex flex-col items-center justify-center rounded-2xl dark:bg-dark-primary/70 border border-gray-200 dark:border-white/10 p-6 shadow-sm text-center",children:[l.jsx("span",{className:"text-3xl font-extrabold text-brand-primary dark:text-dark-btn",children:t.value}),l.jsx("p",{className:"mt-2 text-sm font-medium text-gray-600 dark:text-gray-300",children:t.label})]},t.label))})]})}),l.jsxs("section",{className:"mt-16 max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:[l.jsx("h2",{className:"text-3xl font-bold text-center text-gray-900 dark:text-white",children:"Nuestra Historia en Breve"}),l.jsx("div",{className:"mt-10 space-y-8",children:R6.map((t,e)=>l.jsxs("div",{className:"relative bg-white dark:bg-dark-surface border border-gray-200 dark:border-white/10 rounded-2xl p-6 shadow-lg overflow-hidden",children:[l.jsx("div",{className:"absolute top-0 left-0 h-full w-1 bg-brand-primary dark:bg-dark-btn"}),l.jsxs("div",{className:"pl-6",children:[l.jsx("span",{className:"inline-block text-sm font-semibold text-brand-primary dark:text-dark-btn uppercase tracking-wide",children:t.year}),l.jsx("h3",{className:"mt-2 text-xl font-bold text-gray-900 dark:text-white",children:t.title}),l.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300 leading-relaxed",children:t.description})]})]},t.year))})]})]}),l.jsx(hr,{})]});var _u={exports:{}},Su,Bm;function B6(){if(Bm)return Su;Bm=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Su=t,Su}var Au,zm;function z6(){if(zm)return Au;zm=1;var t=B6();function e(){}function r(){}return r.resetWarningCache=e,Au=function(){function n(a,o,c,d,u,g){if(g!==t){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}n.isRequired=n;function s(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:r,resetWarningCache:e};return i.PropTypes=i,i},Au}var Um;function U6(){return Um||(Um=1,_u.exports=z6()()),_u.exports}var q6=U6();const Ht=l0(q6);function qm(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Wm(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qm(Object(r),!0).forEach(function(n){V1(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qm(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function kc(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?kc=function(e){return typeof e}:kc=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kc(t)}function V1(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function W6(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function H6(t,e){if(t==null)return{};var r=W6(t,e),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function V6(t,e){return $6(t)||Y6(t,e)||G6(t,e)||X6()}function $6(t){if(Array.isArray(t))return t}function Y6(t,e){var r=t&&(typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"]);if(r!=null){var n=[],s=!0,i=!1,a,o;try{for(r=r.call(t);!(s=(a=r.next()).done)&&(n.push(a.value),!(e&&n.length===e));s=!0);}catch(c){i=!0,o=c}finally{try{!s&&r.return!=null&&r.return()}finally{if(i)throw o}}return n}}function G6(t,e){if(t){if(typeof t=="string")return Hm(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Hm(t,e)}}function Hm(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function X6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Kr=function(e,r,n){var s=!!n,i=Jt.useRef(n);Jt.useEffect(function(){i.current=n},[n]),Jt.useEffect(function(){if(!s||!e)return function(){};var a=function(){i.current&&i.current.apply(i,arguments)};return e.on(r,a),function(){e.off(r,a)}},[s,r,e,i])},J6=function(e){var r=Jt.useRef(e);return Jt.useEffect(function(){r.current=e},[e]),r.current},Bc=function(e){return e!==null&&kc(e)==="object"},Vm="[object Object]",K6=function t(e,r){if(!Bc(e)||!Bc(r))return e===r;var n=Array.isArray(e),s=Array.isArray(r);if(n!==s)return!1;var i=Object.prototype.toString.call(e)===Vm,a=Object.prototype.toString.call(r)===Vm;if(i!==a)return!1;if(!i&&!n)return e===r;var o=Object.keys(e),c=Object.keys(r);if(o.length!==c.length)return!1;for(var d={},u=0;u<o.length;u+=1)d[o[u]]=!0;for(var g=0;g<c.length;g+=1)d[c[g]]=!0;var m=Object.keys(d);if(m.length!==o.length)return!1;var f=e,x=r,v=function(k){return t(f[k],x[k])};return m.every(v)},Z6=function(e,r,n){return Bc(e)?Object.keys(e).reduce(function(s,i){var a=!Bc(r)||!K6(e[i],r[i]);return n.includes(i)?(a&&console.warn("Unsupported prop change: options.".concat(i," is not a mutable property.")),s):a?Wm(Wm({},s||{}),{},V1({},i,e[i])):s},null):null},$1=Jt.createContext(null);$1.displayName="ElementsContext";var Q6=function(e,r){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(r," in an <Elements> provider."));return e};Ht.any,Ht.object;Ht.func.isRequired;var Y1=Jt.createContext(null);Y1.displayName="CheckoutSdkContext";var eA=function(e,r){if(!e)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(r," in an <CheckoutProvider> provider."));return e},tA=Jt.createContext(null);tA.displayName="CheckoutContext";Ht.any,Ht.shape({fetchClientSecret:Ht.func.isRequired,elementsOptions:Ht.object}).isRequired;var $m=function(e){var r=Jt.useContext(Y1),n=Jt.useContext($1);if(r&&n)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return r?eA(r,e):Q6(n,e)},rA=["mode"],nA=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},pr=function(e,r){var n="".concat(nA(e),"Element"),s=function(c){var d=c.id,u=c.className,g=c.options,m=g===void 0?{}:g,f=c.onBlur,x=c.onFocus,v=c.onReady,y=c.onChange,k=c.onEscape,A=c.onClick,D=c.onLoadError,L=c.onLoaderStart,q=c.onNetworksChange,z=c.onConfirm,$=c.onCancel,j=c.onShippingAddressChange,_=c.onShippingRateChange,M=c.onSavedPaymentMethodRemove,S=c.onSavedPaymentMethodUpdate,C=$m("mounts <".concat(n,">")),R="elements"in C?C.elements:null,F="checkoutSdk"in C?C.checkoutSdk:null,V=Jt.useState(null),te=V6(V,2),ne=te[0],se=te[1],K=Jt.useRef(null),Q=Jt.useRef(null);Kr(ne,"blur",f),Kr(ne,"focus",x),Kr(ne,"escape",k),Kr(ne,"click",A),Kr(ne,"loaderror",D),Kr(ne,"loaderstart",L),Kr(ne,"networkschange",q),Kr(ne,"confirm",z),Kr(ne,"cancel",$),Kr(ne,"shippingaddresschange",j),Kr(ne,"shippingratechange",_),Kr(ne,"savedpaymentmethodremove",M),Kr(ne,"savedpaymentmethodupdate",S),Kr(ne,"change",y);var re;v&&(e==="expressCheckout"?re=v:re=function(){v(ne)}),Kr(ne,"ready",re),Jt.useLayoutEffect(function(){if(K.current===null&&Q.current!==null&&(R||F)){var I=null;if(F)switch(e){case"payment":I=F.createPaymentElement(m);break;case"address":if("mode"in m){var Y=m.mode,ee=H6(m,rA);if(Y==="shipping")I=F.createShippingAddressElement(ee);else if(Y==="billing")I=F.createBillingAddressElement(ee);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":I=F.createExpressCheckoutElement(m);break;case"currencySelector":I=F.createCurrencySelectorElement();break;case"taxId":I=F.createTaxIdElement(m);break;default:throw new Error("Invalid Element type ".concat(n,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else R&&(I=R.create(e,m));K.current=I,se(I),I&&I.mount(Q.current)}},[R,F,m]);var P=J6(m);return Jt.useEffect(function(){if(K.current){var I=Z6(m,P,["paymentRequest"]);I&&"update"in K.current&&K.current.update(I)}},[m,P]),Jt.useLayoutEffect(function(){return function(){if(K.current&&typeof K.current.destroy=="function")try{K.current.destroy(),K.current=null}catch{}}},[]),Jt.createElement("div",{id:d,className:u,ref:Q})},i=function(c){$m("mounts <".concat(n,">"));var d=c.id,u=c.className;return Jt.createElement("div",{id:d,className:u})},a=r?i:s;return a.propTypes={id:Ht.string,className:Ht.string,onChange:Ht.func,onBlur:Ht.func,onFocus:Ht.func,onReady:Ht.func,onEscape:Ht.func,onClick:Ht.func,onLoadError:Ht.func,onLoaderStart:Ht.func,onNetworksChange:Ht.func,onConfirm:Ht.func,onCancel:Ht.func,onShippingAddressChange:Ht.func,onShippingRateChange:Ht.func,onSavedPaymentMethodRemove:Ht.func,onSavedPaymentMethodUpdate:Ht.func,options:Ht.object},a.displayName=n,a.__elementType=e,a},gr=typeof window>"u",sA=Jt.createContext(null);sA.displayName="EmbeddedCheckoutProviderContext";pr("auBankAccount",gr);var iA=pr("card",gr);pr("cardNumber",gr);pr("cardExpiry",gr);pr("cardCvc",gr);pr("fpxBank",gr);pr("iban",gr);pr("idealBank",gr);pr("p24Bank",gr);pr("epsBank",gr);pr("payment",gr);pr("expressCheckout",gr);pr("currencySelector",gr);pr("paymentRequestButton",gr);pr("linkAuthentication",gr);pr("address",gr);pr("shippingAddress",gr);pr("paymentMethodMessaging",gr);pr("affirmMessage",gr);pr("afterpayClearpayMessage",gr);pr("taxId",gr);var Cu,Ym;function aA(){if(Ym)return Cu;Ym=1;var t=Object.defineProperty,e=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,n=Object.prototype.hasOwnProperty,s=(Q,re)=>{for(var P in re)t(Q,P,{get:re[P],enumerable:!0})},i=(Q,re,P,I)=>{if(re&&typeof re=="object"||typeof re=="function")for(let Y of r(re))!n.call(Q,Y)&&Y!==P&&t(Q,Y,{get:()=>re[Y],enumerable:!(I=e(re,Y))||I.enumerable});return Q},a=Q=>i(t({},"__esModule",{value:!0}),Q),o=(Q,re,P)=>new Promise((I,Y)=>{var ee=de=>{try{ce(P.next(de))}catch(he){Y(he)}},ie=de=>{try{ce(P.throw(de))}catch(he){Y(he)}},ce=de=>de.done?I(de.value):Promise.resolve(de.value).then(ee,ie);ce((P=P.apply(Q,re)).next())}),c={};s(c,{SubmissionError:()=>L,appendExtraData:()=>R,createClient:()=>ne,getDefaultClient:()=>se,isSubmissionError:()=>D}),Cu=a(c);var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/;function g(Q){Q=String(Q);for(var re,P,I,Y,ee="",ie=0,ce=Q.length%3;ie<Q.length;){if((P=Q.charCodeAt(ie++))>255||(I=Q.charCodeAt(ie++))>255||(Y=Q.charCodeAt(ie++))>255)throw new TypeError("Failed to execute 'btoa' on 'Window': The string to be encoded contains characters outside of the Latin1 range.");re=P<<16|I<<8|Y,ee+=d.charAt(re>>18&63)+d.charAt(re>>12&63)+d.charAt(re>>6&63)+d.charAt(re&63)}return ce?ee.slice(0,ce-3)+"===".substring(ce):ee}function m(Q){if(Q=String(Q).replace(/[\t\n\f\r ]+/g,""),!u.test(Q))throw new TypeError("Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.");Q+="==".slice(2-(Q.length&3));for(var re,P="",I,Y,ee=0;ee<Q.length;)re=d.indexOf(Q.charAt(ee++))<<18|d.indexOf(Q.charAt(ee++))<<12|(I=d.indexOf(Q.charAt(ee++)))<<6|(Y=d.indexOf(Q.charAt(ee++))),P+=I===64?String.fromCharCode(re>>16&255):Y===64?String.fromCharCode(re>>16&255,re>>8&255):String.fromCharCode(re>>16&255,re>>8&255,re&255);return P}var f=()=>navigator.webdriver||!!document.documentElement.getAttribute(m("d2ViZHJpdmVy"))||!!window.callPhantom||!!window._phantom,x=class{constructor(){this.loadedAt=Date.now(),this.webdriver=f()}data(){return{loadedAt:this.loadedAt,webdriver:this.webdriver}}},v=class{constructor(Q){this.kind="success",this.next=Q.next}};function y(Q){return"next"in Q&&typeof Q.next=="string"}var k=class{constructor(Q,re){this.paymentIntentClientSecret=Q,this.resubmitKey=re,this.kind="stripePluginPending"}};function A(Q){if("stripe"in Q&&"resubmitKey"in Q&&typeof Q.resubmitKey=="string"){let{stripe:re}=Q;return typeof re=="object"&&re!=null&&"paymentIntentClientSecret"in re&&typeof re.paymentIntentClientSecret=="string"}return!1}function D(Q){return Q.kind==="error"}var L=class{constructor(...Q){this.kind="error",this.formErrors=[],this.fieldErrors=new Map;var re;for(let P of Q){if(!P.field){this.formErrors.push({code:P.code&&q(P.code)?P.code:"UNSPECIFIED",message:P.message});continue}let I=(re=this.fieldErrors.get(P.field))!=null?re:[];I.push({code:P.code&&$(P.code)?P.code:"UNSPECIFIED",message:P.message}),this.fieldErrors.set(P.field,I)}}getFormErrors(){return[...this.formErrors]}getFieldErrors(Q){var re;return(re=this.fieldErrors.get(Q))!=null?re:[]}getAllFieldErrors(){return Array.from(this.fieldErrors)}};function q(Q){return Q in z}var z={BLOCKED:"BLOCKED",EMPTY:"EMPTY",FILES_TOO_BIG:"FILES_TOO_BIG",FORM_NOT_FOUND:"FORM_NOT_FOUND",INACTIVE:"INACTIVE",NO_FILE_UPLOADS:"NO_FILE_UPLOADS",PROJECT_NOT_FOUND:"PROJECT_NOT_FOUND",TOO_MANY_FILES:"TOO_MANY_FILES"};function $(Q){return Q in j}var j={REQUIRED_FIELD_EMPTY:"REQUIRED_FIELD_EMPTY",REQUIRED_FIELD_MISSING:"REQUIRED_FIELD_MISSING",STRIPE_CLIENT_ERROR:"STRIPE_CLIENT_ERROR",STRIPE_SCA_ERROR:"STRIPE_SCA_ERROR",TYPE_EMAIL:"TYPE_EMAIL",TYPE_NUMERIC:"TYPE_NUMERIC",TYPE_TEXT:"TYPE_TEXT"};function _(Q){return"errors"in Q&&Array.isArray(Q.errors)&&Q.errors.every(re=>typeof re.message=="string")||"error"in Q&&typeof Q.error=="string"}var M="4.0.0",S=Q=>g(JSON.stringify(Q)),C=Q=>{let re=`@formspree/core@${M}`;return Q?`${Q} ${re}`:re};function R(Q,re,P){Q instanceof FormData?Q.append(re,P):Q[re]=P}function F(Q){return Q!==null&&typeof Q=="object"}var V=class{constructor(Q={}){this.project=Q.project,this.stripe=Q.stripe,typeof window<"u"&&(this.session=new x)}submitForm(Q,re){return o(this,arguments,function*(P,I,Y={}){let ee=Y.endpoint||"https://formspree.io",ie=this.project?`${ee}/p/${this.project}/f/${P}`:`${ee}/f/${P}`,ce={Accept:"application/json","Formspree-Client":C(Y.clientName)};this.session&&(ce["Formspree-Session-Data"]=S(this.session.data())),I instanceof FormData||(ce["Content-Type"]="application/json");function de(xe){return o(this,null,function*(){try{let pe=yield(yield fetch(ie,{method:"POST",mode:"cors",body:xe instanceof FormData?xe:JSON.stringify(xe),headers:ce})).json();if(F(pe)){if(_(pe))return Array.isArray(pe.errors)?new L(...pe.errors):new L({message:pe.error});if(A(pe))return new k(pe.stripe.paymentIntentClientSecret,pe.resubmitKey);if(y(pe))return new v({next:pe.next})}return new L({message:"Unexpected response format"})}catch(pe){let Ae=pe instanceof Error?pe.message:`Unknown error while posting to Formspree: ${JSON.stringify(pe)}`;return new L({message:Ae})}})}if(this.stripe&&Y.createPaymentMethod){let xe=yield Y.createPaymentMethod();if(xe.error)return new L({code:"STRIPE_CLIENT_ERROR",field:"paymentMethod",message:"Error creating payment method"});R(I,"paymentMethod",xe.paymentMethod.id);let pe=yield de(I);if(pe.kind==="error")return pe;if(pe.kind==="stripePluginPending"){let Ae=yield this.stripe.handleCardAction(pe.paymentIntentClientSecret);if(Ae.error)return new L({code:"STRIPE_CLIENT_ERROR",field:"paymentMethod",message:"Stripe SCA error"});I instanceof FormData?I.delete("paymentMethod"):delete I.paymentMethod,R(I,"paymentIntent",Ae.paymentIntent.id),R(I,"resubmitKey",pe.resubmitKey);let Pe=yield de(I);return te(Pe),Pe}return pe}let he=yield de(I);return te(he),he})}};function te(Q){let{kind:re}=Q;if(re!=="success"&&re!=="error")throw new Error(`Unexpected submission result (kind: ${re})`)}var ne=Q=>new V(Q),se=()=>(K||(K=ne()),K),K;return Cu}var Wh=aA();function lc(t){let{prefix:e,field:r,errors:n,...s}=t;if(n==null)return null;let i=r?n.getFieldErrors(r):n.getFormErrors();return i.length===0?null:Jt.createElement("div",{...s},e?`${e} `:null,i.map(a=>a.message).join(", "))}var oA=Z.createContext({elements:null});function lA(){return Z.useContext(oA)}var cA=Jt.createContext(null);function dA(){return Z.useContext(cA)??{client:Wh.getDefaultClient()}}var uA="3.0.0",hA=`@formspree/react@${uA}`;function fA(t,e={}){let r=dA(),{client:n=r.client,extraData:s,origin:i}=e,{elements:a}=lA(),{stripe:o}=n;return async function(c){let d=pA(c)?gA(c):c;if(typeof s=="object")for(let[m,f]of Object.entries(s)){let x;typeof f=="function"?x=await f():x=f,x!==void 0&&Wh.appendExtraData(d,m,x)}let u=a?.getElement(iA),g=o&&u?()=>o.createPaymentMethod({type:"card",card:u,billing_details:mA(d)}):void 0;return n.submitForm(t,d,{endpoint:i,clientName:hA,createPaymentMethod:g})}}function pA(t){return"preventDefault"in t&&typeof t.preventDefault=="function"}function gA(t){t.preventDefault();let e=t.currentTarget;if(e.tagName!="FORM")throw new Error("submit was triggered for a non-form element");return new FormData(e)}function mA(t){let e={address:xA(t)};for(let r of["name","email","phone"]){let n=t instanceof FormData?t.get(r):t[r];n&&typeof n=="string"&&(e[r]=n)}return e}function xA(t){let e={};for(let[r,n]of[["address_line1","line1"],["address_line2","line2"],["address_city","city"],["address_country","country"],["address_state","state"],["address_postal_code","postal_code"]]){let s=t instanceof FormData?t.get(r):t[r];s&&typeof s=="string"&&(e[n]=s)}return e}function bA(t,e={}){let[r,n]=Z.useState(null),[s,i]=Z.useState(null),[a,o]=Z.useState(!1),[c,d]=Z.useState(!1),u=fA(t,{client:e.client,extraData:e.data,origin:e.endpoint});return[{errors:r,result:s,submitting:a,succeeded:c},async function(g){o(!0);let m=await u(g);o(!1),Wh.isSubmissionError(m)?(n(m),d(!1)):(n(null),i(m),d(!0))},function(){n(null),i(null),o(!1),d(!1)}]}const yA=()=>{const[t,e]=bA("xldozadq");return l.jsxs("div",{className:"relative min-h-screen dark:bg-dark-primary",children:[l.jsx(yr,{}),l.jsx("main",{className:"pt-32 pb-16",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-gray-900 dark:text-white tracking-tight",children:"Contáctanos"}),l.jsx("p",{className:"mt-4 text-lg text-gray-600 dark:text-white max-w-2xl mx-auto",children:"Estamos aquí para ayudarte. Envíanos un mensaje o utiliza nuestros datos de contacto directo."})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[l.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Envíanos un Mensaje"}),t.succeeded?l.jsxs("div",{className:"text-center py-10 px-6 bg-green-100 rounded-lg",children:[l.jsx("h3",{className:"text-2xl font-bold text-green-800",children:"¡Gracias por tu mensaje!"}),l.jsx("p",{className:"mt-3 text-gray-700",children:"Nos pondremos en contacto contigo pronto."})]}):l.jsxs("form",{onSubmit:e,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Nombre Completo"}),l.jsx("input",{id:"name",type:"text",name:"name",required:!0,className:"mt-1 block w-full px-4 py-2 bg-gray-100 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500"}),l.jsx(lc,{prefix:"Name",field:"name",errors:t.errors,className:"mt-2 text-sm text-red-600"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Correo Electrónico"}),l.jsx("input",{id:"email",type:"email",name:"email",required:!0,className:"mt-1 block w-full px-4 py-2 bg-gray-100 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500"}),l.jsx(lc,{prefix:"Email",field:"email",errors:t.errors,className:"mt-2 text-sm text-red-600"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-700",children:"Asunto"}),l.jsxs("select",{id:"subject",name:"subject",required:!0,className:"mt-1 block w-full px-4 py-2 bg-gray-100 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500",children:[l.jsx("option",{children:"Solicitar una Cotización"}),l.jsx("option",{children:"Asesoría Técnica"}),l.jsx("option",{children:"Información General"}),l.jsx("option",{children:"Otro"})]}),l.jsx(lc,{prefix:"Subject",field:"subject",errors:t.errors,className:"mt-2 text-sm text-red-600"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700",children:"Mensaje"}),l.jsx("textarea",{id:"message",name:"message",rows:"4",required:!0,className:"mt-1 block w-full px-4 py-2 bg-gray-100 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500"}),l.jsx(lc,{prefix:"Message",field:"message",errors:t.errors,className:"mt-2 text-sm text-red-600"})]}),l.jsx("div",{className:"text-right",children:l.jsx("button",{type:"submit",disabled:t.submitting,className:"inline-flex justify-center py-3 px-6 border border-transparent shadow-sm text-base font-medium rounded-md text-white bg-green-700 hover:bg-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Enviar Mensaje"})})]})]}),l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[l.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Información de Contacto"}),l.jsxs("ul",{className:"space-y-4 text-gray-700",children:[l.jsxs("li",{className:"flex items-center",children:[l.jsx(uh,{className:"w-6 h-6 mr-3 text-green-600"}),l.jsx("span",{children:"Sector Guatamare, Av. 31 de Julio, Edif. Cantera Manzanillo, Piso PB, Oficina de Administración, Porlamar, Municipio Arismendi, Estado Nueva Esparta"})]}),l.jsxs("li",{className:"flex items-center",children:[l.jsx(i0,{className:"w-6 h-6 mr-3 text-green-600"}),l.jsx("span",{children:"0295-287.14.22 / 0295-287.08.45"})]}),l.jsxs("li",{className:"flex items-center",children:[l.jsx(a0,{className:"w-6 h-6 mr-3 text-green-600"}),l.jsx("a",{href:"mailto:ventas@premezcladomanzanillo.com",className:"hover:underline",children:"ventas@premezcladomanzanillo.com"})]}),l.jsxs("li",{className:"flex items-center",children:[l.jsx(Zm,{className:"w-6 h-6 mr-3 text-green-600"}),l.jsx("span",{children:"Lunes a Viernes: 8:00 AM - 5:00 PM"})]})]})]}),l.jsx("div",{className:"bg-white h-64 md:h-80 rounded-lg shadow-lg overflow-hidden",children:l.jsx("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3916.1439632329923!2d-63.84625862424858!3d11.02685885449495!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8c318c4491848061%3A0x87374a63840365c2!2sEdificio%20Don%20Guillermo!5e0!3m2!1ses-419!2sve!4v1725230512887!5m2!1ses-419!2sve",width:"100%",height:"100%",style:{border:0},allowFullScreen:"",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",title:"Ubicación de Premezclado Manzanillo"})})]})]})]})}),l.jsx(hr,{})]})},vA=()=>l.jsxs("div",{className:"relative min-h-screen dark:bg-dark-primary",children:[l.jsx(yr,{}),l.jsx("main",{className:"pt-32 pb-16",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-gray-900 tracking-tight",children:"Nuestros Proyectos"}),l.jsx("p",{className:"mt-4 text-lg text-gray-600 max-w-3xl mx-auto",children:"Desde grandes obras de infraestructura hasta edificaciones comerciales y residenciales, nuestro concreto es la base de los proyectos más importantes de la región."})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:H1.map((t,e)=>l.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden transform transition-all duration-300 hover:scale-105",children:[l.jsx("img",{src:t.imgSrc,alt:t.title,className:"w-full h-48 object-cover"}),l.jsxs("div",{className:"p-6",children:[l.jsx("p",{className:"text-sm font-semibold text-green-600 mb-1",children:t.category}),l.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:t.title}),l.jsx("p",{className:"text-gray-700 text-sm",children:t.description})]})]},e))}),l.jsx("div",{className:"mt-16 text-center",children:l.jsxs("div",{className:"inline-block bg-gray-100 p-6 rounded-lg",children:[l.jsx(Hb,{className:"w-12 h-12 mx-auto text-gray-400"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Más proyectos emblemáticos serán añadidos próximamente."})]})})]})}),l.jsx(hr,{})]}),wA=({budget:t,items:e,onUpdateQuantity:r,onRemoveItem:n,onSaveBudget:s,userRoles:i})=>{const a=i.includes("Administrador")||i.includes("Contable"),o=()=>e.reduce((c,d)=>c+d.quantity*d.unitPrice,0);return l.jsxs("div",{className:"bg-white dark:bg-dark-surface p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-800 h-full flex flex-col",children:[l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx(o0,{className:"w-5 h-5 text-brand-primary"}),l.jsx("h2",{className:"text-lg font-black text-gray-800 dark:text-white uppercase tracking-tight",children:"Resumen"})]}),t&&l.jsxs("div",{className:"space-y-1.5 p-3 bg-gray-50 dark:bg-dark-primary/30 rounded-lg border border-gray-100 dark:border-gray-800",children:[l.jsx("h3",{className:"text-sm font-bold text-gray-900 dark:text-gray-100 leading-tight",children:t.title}),l.jsxs("div",{className:"flex items-center gap-2 text-[11px] text-gray-500 dark:text-gray-400",children:[l.jsx(Vb,{size:12,className:"flex-shrink-0"}),l.jsx("span",{className:"truncate",children:t.client?.name})]}),l.jsxs("div",{className:"flex items-center gap-2 text-[11px] text-gray-500 dark:text-gray-400",children:[l.jsx(uh,{size:12,className:"flex-shrink-0"}),l.jsx("span",{className:"truncate",children:t.address})]})]})]}),l.jsx("div",{className:"flex-grow overflow-y-auto space-y-2 pr-1 custom-scrollbar",children:e.length===0?l.jsxs("div",{className:"flex flex-col items-center justify-center h-40 text-gray-400",children:[l.jsx("p",{className:"text-xs",children:"El presupuesto está vacío."}),l.jsx("p",{className:"text-[10px]",children:"Añade productos del catálogo."})]}):e.map(c=>l.jsxs("div",{className:"group relative flex items-center justify-between bg-white dark:bg-dark-primary/60 p-2 rounded-lg border border-gray-100 dark:border-gray-800 hover:border-brand-primary/20 transition-all",children:[l.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[l.jsx("p",{className:"text-xs font-bold text-gray-800 dark:text-gray-100 truncate",children:c.name}),a&&l.jsxs("p",{className:"text-[10px] text-gray-500 font-medium",children:[$r(c.unitPrice)," c/u"]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"number",min:"1",value:c.quantity,onChange:d=>r(c.productId,parseInt(d.target.value,10)||1),className:"w-12 h-7 text-[11px] font-bold rounded-md border-gray-200 dark:bg-dark-surface dark:border-gray-700 text-center focus:ring-1 focus:ring-brand-primary p-0"}),l.jsx("button",{onClick:()=>n(c.productId),className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-all",title:"Eliminar item",children:l.jsx(bn,{className:"h-3.5 w-3.5"})})]})]},c.productId))}),e.length>0&&l.jsxs("div",{className:"mt-4 space-y-3",children:[a&&l.jsxs("div",{className:"flex justify-between items-end p-3 bg-brand-primary/5 dark:bg-brand-primary/10 rounded-xl border border-brand-primary/10",children:[l.jsx("span",{className:"text-[10px] font-black text-brand-primary uppercase tracking-widest",children:"Total Estimado"}),l.jsx("span",{className:"text-xl font-black text-gray-900 dark:text-white leading-none",children:$r(o())})]}),l.jsxs("button",{onClick:s,className:"w-full h-12 flex items-center justify-center gap-2 bg-brand-primary text-white rounded-xl font-black text-xs uppercase tracking-widest hover:bg-brand-mid transition-all shadow-md transform active:scale-[0.98]",children:["Guardar y Continuar",l.jsx($b,{size:14})]})]})]})},kA=()=>{const{id:t}=c0(),e=t2(),{user:r}=Mr(),n=r?.["https://premezcladomanzanillo.com/roles"]||[],[s,i]=Z.useState(null),[a,o]=Z.useState([]),[c,d]=Z.useState(!0),[u,g]=Z.useState(null),m=Z.useCallback(async()=>{try{d(!0);const A=(await Ge.get(`/api/budgets/${t}`)).data;i(A),A.products&&o(A.products.map(D=>({productId:D.product.id,name:D.product.name,quantity:D.quantity,unitPrice:D.unitPrice})))}catch(k){g("No se pudo cargar el presupuesto."),console.error(k)}finally{d(!1)}},[t]);Z.useEffect(()=>{m()},[m]);const f=k=>{o(A=>A.find(L=>L.productId===k.id)?A.map(L=>L.productId===k.id?{...L,quantity:L.quantity+1}:L):[...A,{productId:k.id,name:k.name,quantity:1,unitPrice:k.price}])},x=(k,A)=>{A>0&&o(D=>D.map(L=>L.productId===k?{...L,quantity:A}:L))},v=k=>{o(A=>A.filter(D=>D.productId!==k))},y=async()=>{const k={...s,status:"PENDING",products:a.map(({productId:A,quantity:D,unitPrice:L})=>({productId:A,quantity:D,unitPrice:L}))};try{await Ge.put(`/api/budgets/${t}`,k),e("/budgets")}catch(A){g("No se pudo guardar el presupuesto."),console.error(A)}};return c?l.jsx("div",{className:"p-6 text-center",children:"Cargando constructor..."}):u?l.jsx("div",{className:"p-6 text-center text-red-500",children:u}):l.jsxs("div",{className:"flex h-[calc(100vh-theme(space.24))]",children:[" ",l.jsx("div",{className:"w-2/3 p-6 overflow-y-auto",children:l.jsx(q1,{onAddProduct:f})}),l.jsx("div",{className:"w-1/3 bg-gray-50 dark:bg-dark-primary p-4 border-l border-gray-200 dark:border-gray-700",children:l.jsx(wA,{budget:s,items:a,onUpdateQuantity:x,onRemoveItem:v,onSaveBudget:y,userRoles:n})})]})},NA=()=>{const{user:t,logout:e}=Mr(),r=Vc(),[n,s]=Z.useState(!1),[i,a]=Z.useState(0),[o,c]=Z.useState(!0),[d,u]=Z.useState(!0),[g,m]=Z.useState(!0),[f,x]=Z.useState(!1),v=(t?.["https://premezcladomanzanillo.com/roles"]||[]).map(z=>z.toLowerCase()),y=v.includes("usuario")&&!v.includes("administrador")&&!v.includes("comercial")&&!v.includes("contable")&&!v.includes("operaciones");Z.useEffect(()=>{const z=async()=>{if(t)try{const j=await Ge.get("/api/notifications/unread-count");if(a(j.data.count||0),y){const[_,M,S]=await Promise.all([Ge.get("/api/clients"),Ge.get("/api/payments"),Ge.get("/api/invoices")]);c(_.data.length>0),u(M.data.length>0),m(S.data.length>0)}}catch(j){console.error("Error al obtener datos del Navbar:",j)}};z();const $=setInterval(z,3e4);return()=>clearInterval($)},[t,y]);const[k,A]=Z.useState(localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"));Z.useEffect(()=>{const z=window.document.documentElement;z.classList.remove(k==="dark"?"light":"dark"),z.classList.add(k),localStorage.setItem("theme",k)},[k]);const D=()=>{A(k==="light"?"dark":"light")},q=[{path:"/clients",icon:zc,label:"Clientes",requiredRoles:["Administrador","Comercial","Contable","Usuario"]},{path:"/budgets",icon:s0,label:"Presupuestos",requiredRoles:["Administrador","Comercial","Contable","Usuario"]},{path:"/products-management",icon:ch,label:"Productos",requiredRoles:["Administrador","Contable"]},{path:"/payments",icon:Yb,label:"Comprobantes",requiredRoles:["Administrador","Contable","Usuario"]},{path:"/invoices",icon:o0,label:"Facturas",requiredRoles:["Administrador","Contable","Operaciones","Usuario"]},{path:"/customize",icon:Gb,label:"Personalizar",requiredRoles:["Administrador","Comercial"]},{path:"/reports",icon:Xb,label:"Reportes",requiredRoles:["Administrador","Contable"]},{path:"/admin/roles",icon:t0,label:"Roles",requiredRoles:["Administrador"]}].filter(z=>!(!(!z.requiredRoles||z.requiredRoles.length===0||v.some(j=>z.requiredRoles.map(_=>_.toLowerCase()).includes(j)))||y&&(z.path==="/clients"&&!o||z.path==="/payments"&&!d||z.path==="/invoices"&&!g)));return l.jsx(Kt.nav,{initial:{y:-100},animate:{y:0},className:"fixed w-full top-0 z-50 bg-white/90 dark:bg-dark-primary backdrop-blur-md border-b border-gray-200 dark:border-gray-800 shadow-sm",children:l.jsxs("div",{className:"max-w-[1920px] mx-auto px-4 lg:px-6",children:[l.jsxs("div",{className:"flex items-center h-20 justify-between",children:[l.jsxs(Ft,{to:"/",className:"flex items-center flex-shrink-0 mr-4",children:[l.jsx("img",{src:"/assets/LOGO_PREMEZCLADOS.svg",alt:"Logo",className:"w-14 h-14 md:w-16 md:h-16 object-contain"}),l.jsxs("div",{className:"hidden xl:block ml-2 leading-tight",children:[l.jsx("span",{className:"text-base font-bold text-gray-900 dark:text-white block",children:"Premezclado"}),l.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 block",children:"Manzanillo, C.A."})]})]}),l.jsx("div",{className:"hidden md:flex items-center gap-1 flex-1 justify-center",children:q.map(z=>{const $=z.icon,j=r.pathname===z.path;return l.jsxs(Ft,{to:z.path,className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-all duration-300 transform hover:scale-105 ${j?"bg-brand-primary text-white dark:bg-dark-btn dark:text-white":"text-gray-600 dark:text-gray-300 hover:bg-brand-primary hover:text-white dark:hover:bg-dark-btn"}`,title:z.label,children:[l.jsx($,{className:"w-5 h-5 flex-shrink-0"}),l.jsx("span",{className:"text-sm font-semibold whitespace-nowrap",children:z.label})]},z.path)})}),l.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[l.jsx("button",{onClick:D,className:"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-dark-primary transition-colors border border-transparent",title:"Alternar Tema",children:k==="light"?l.jsx(Gm,{className:"w-5 h-5"}):l.jsx(Xm,{className:"w-5 h-5"})}),l.jsx("button",{onClick:()=>s(!n),className:"md:hidden p-2 rounded-lg text-gray-600 dark:text-gray-300",children:n?l.jsx(Ji,{className:"w-6 h-6"}):l.jsx(ah,{className:"w-6 h-6"})}),t&&l.jsxs("div",{className:"relative group ml-1",children:[l.jsxs("button",{className:"flex items-center p-1 rounded-full hover:bg-gray-100 dark:hover:bg-dark-primary border border-transparent transition-all relative",children:[l.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border-2 border-gray-200 dark:border-gray-700 bg-brand-light flex items-center justify-center shadow-sm",children:t.picture&&!f?l.jsx("img",{src:t.picture,alt:"",className:"w-full h-full object-cover",onError:()=>x(!0)}):l.jsx("span",{className:"text-brand-primary font-bold text-lg",children:t.name?t.name.charAt(0).toUpperCase():"U"})}),i>0&&l.jsx("span",{className:"absolute top-0 right-0 block h-3 w-3 rounded-full bg-red-500 border-2 border-white dark:border-dark-primary h-3 w-3"})]}),l.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-dark-surface rounded-xl shadow-2xl border border-gray-100 dark:border-gray-800 py-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform translate-y-2 group-hover:translate-y-0 z-50",children:[l.jsxs("div",{className:"px-4 py-3 border-b border-gray-100 dark:border-gray-800 mb-1",children:[l.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white truncate",children:t.name}),l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:t.email})]}),l.jsxs("div",{className:"px-1",children:[l.jsxs(Ft,{to:"/dashboard",className:"flex items-center gap-3 px-3 py-2 text-sm font-bold text-gray-700 dark:text-gray-200 rounded-lg hover:bg-brand-primary hover:text-white dark:hover:bg-dark-btn transition-colors",children:[l.jsx(Nc,{className:"w-4 h-4"}),l.jsx("span",{children:"Panel Principal"})]}),v.includes("Administrador")&&l.jsxs(Ft,{to:"/settings",className:"flex items-center gap-3 px-3 py-2 text-sm font-bold text-gray-700 dark:text-gray-200 rounded-lg hover:bg-brand-primary hover:text-white dark:hover:bg-dark-btn transition-colors",children:[l.jsx(r0,{className:"w-4 h-4"}),l.jsx("span",{children:"Configuración"})]}),l.jsxs(Ft,{to:"/notifications",className:"flex items-center justify-between px-3 py-2 text-sm font-bold text-gray-700 dark:text-gray-200 rounded-lg hover:bg-brand-primary hover:text-white dark:hover:bg-dark-btn transition-colors",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Ou,{className:"w-4 h-4"}),l.jsx("span",{children:"Notificaciones"})]}),i>0&&l.jsx("span",{className:"flex items-center justify-center bg-red-500 text-white text-[10px] h-4 min-w-[16px] px-1 rounded-full",children:i})]})]}),l.jsx("div",{className:"my-1 border-t border-gray-100 dark:border-gray-800"}),l.jsx("div",{className:"px-1",children:l.jsxs("button",{onClick:()=>e({logoutParams:{returnTo:window.location.origin}}),className:"w-full flex items-center gap-3 px-3 py-2 text-sm font-bold text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20 rounded-lg transition-all",children:[l.jsx(Pu,{className:"w-4 h-4"}),l.jsx("span",{children:"Cerrar Sesión"})]})})]})]})]})]}),l.jsx(dh,{children:n&&l.jsx(Kt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"md:hidden overflow-hidden bg-white dark:bg-dark-surface border-t border-gray-100 dark:border-gray-800",children:l.jsx("div",{className:"flex flex-col p-4 space-y-1",children:q.map(z=>l.jsxs(Ft,{to:z.path,className:"flex items-center gap-4 p-4 rounded-xl text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-dark-primary font-bold",onClick:()=>s(!1),children:[l.jsx(z.icon,{className:"w-6 h-6"}),l.jsx("span",{children:z.label})]},z.path))})})})]})})},jA=()=>l.jsxs("div",{className:"min-h-screen flex flex-col",children:[l.jsx(NA,{}),l.jsx(Kt.main,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"flex-grow pt-32 md:pt-36",children:l.jsx(hh,{})}),l.jsx(hr,{})]}),_A=()=>{const{getAccessTokenSilently:t}=Mr();return Z.useEffect(()=>{Ty(()=>t())},[t]),l.jsx(hh,{})},SA=()=>{const[t,e]=Z.useState(!1),[r,n]=Z.useState([{role:"assistant",content:"¡Hola! Soy el asistente de Premezclado Manzanillo. ¿En qué puedo ayudarte hoy?"}]),[s,i]=Z.useState(""),[a,o]=Z.useState(!1),c=async()=>{const d=s.trim();if(!d||a)return;const u=[...r,{role:"user",content:d}];n(u),i(""),o(!0);try{const f=(await Ge.post("/api/chat",{messages:u})).data?.content||"Lo siento, hubo un problema al responder.";n(x=>[...x,{role:"assistant",content:f}])}catch{n(m=>[...m,{role:"assistant",content:"No pude conectar con el servicio de chat. Inténtalo más tarde."}])}finally{o(!1)}};return l.jsxs(l.Fragment,{children:[l.jsx(Kt.button,{className:"fixed bottom-4 right-4 bg-brand-primary dark:bg-green-600 text-white shadow-lg hover:bg-brand-dark dark:hover:bg-green-700 transition-colors duration-300 z-[9999] w-16 h-16 flex items-center justify-center rounded-2xl","aria-label":"Abrir chat",whileHover:{scale:1.1},whileTap:{scale:.9},initial:{opacity:0,y:50,rotate:45},animate:{opacity:1,y:0,rotate:45},transition:{duration:.5,delay:1},onClick:()=>e(!0),children:l.jsx(Kt.div,{animate:{rotate:-45},children:l.jsx(Jb,{size:24})})}),t&&l.jsxs("div",{className:"fixed bottom-24 right-4 w-[92vw] max-w-md h-[70vh] bg-white dark:bg-dark-surface border border-gray-200 dark:border-white/10 rounded-2xl shadow-2xl z-[9999] flex flex-col overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-brand-primary text-white dark:bg-dark-btn",children:[l.jsx("span",{className:"font-semibold",children:"Asistente"}),l.jsx("button",{"aria-label":"Cerrar",onClick:()=>e(!1),className:"p-1 rounded hover:bg-white/20",children:l.jsx(Ji,{className:"w-5 h-5"})})]}),l.jsxs("div",{className:"flex-1 overflow-auto p-4 space-y-3",children:[r.map((d,u)=>l.jsx("div",{className:`max-w-[85%] rounded-xl px-3 py-2 text-sm shadow ${d.role==="user"?"ml-auto bg-green-600 text-white":"mr-auto bg-gray-100 dark:bg-dark-primary text-gray-800 dark:text-gray-100"}`,children:d.content},u)),a&&l.jsx("div",{className:"mr-auto bg-gray-100 dark:bg-dark-primary text-gray-800 dark:text-gray-100 max-w-[85%] rounded-xl px-3 py-2 text-sm shadow",children:"Escribiendo…"})]}),l.jsxs("div",{className:"border-t border-gray-200 dark:border-white/10 p-3 flex items-center gap-2",children:[l.jsx("input",{type:"text",placeholder:"Escribe tu mensaje…",className:"flex-1 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-dark-primary px-3 py-2 text-sm text-gray-800 dark:text-gray-100 outline-none",value:s,onChange:d=>i(d.target.value),onKeyDown:d=>{d.key==="Enter"&&c()}}),l.jsxs("button",{onClick:c,disabled:a,className:"inline-flex items-center justify-center rounded-xl bg-brand-primary text-white px-3 py-2 text-sm hover:bg-green-800 disabled:opacity-60",children:[l.jsx(Kb,{className:"w-4 h-4 mr-1"})," Enviar"]})]})]})]})};function AA(){const{pathname:t}=Vc();return Z.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})},[t]),null}const CA=()=>{const{settings:t,updateSetting:e}=Kc(),[r,n]=Z.useState("hero"),[s,i]=Z.useState(!1),[a,o]=Z.useState(!1),[c,d]=Z.useState(null),[u,g]=Z.useState({images:["/assets/Hero.png","/assets/Toma frontal Planta.jpeg","/assets/Toma araña Planta.jpeg","/assets/Toma aerea Planta.jpeg"],texts:["Calidad y resistencia para los proyectos que construyen nuestro futuro.","Tu obra, nuestra prioridad. Concreto premezclado entregado a tiempo.","Innovación en cada mezcla. Soluciones de concreto para desafíos modernos.","Construye con confianza. La base de tu proyecto comienza con nosotros."]}),[m,f]=Z.useState([{id:"estructurales",title:"Concretos Estructurales",description:"Mezclas de alta resistencia para cimentaciones, columnas y losas.",imgSrc:"/assets/Concreto.png"},{id:"pavimentos",title:"Concretos para Pavimentos",description:"Diseñados para soportar cargas dinámicas en vialidades y patios de maniobra.",imgSrc:"/assets/Concreto-Pavimento.png"},{id:"especiales",title:"Concretos Especiales",description:"Rellenos fluidos y mezclas autocompactables para aplicaciones específicas.",imgSrc:"/assets/Edificio.png"}]),[x,v]=Z.useState([{title:"Servicio de Bombeo",description:"Llegamos a cualquier altura.",imgSrc:"/assets/Bombeo.png"},{title:"Asesoría Técnica",description:"Expertos te guían en tu proyecto.",imgSrc:"/assets/Asesoria.png"},{title:"Entrega Express",description:"Garantizamos tu concreto a tiempo.",imgSrc:"/assets/Entrega.png"}]);Z.useEffect(()=>{y()},[]);const y=async()=>{try{i(!0);const{data:z}=await Ge.get("/api/settings");z.hero_config&&g(JSON.parse(z.hero_config)),z.products_config&&f(JSON.parse(z.products_config)),z.services_config&&v(JSON.parse(z.services_config))}catch(z){console.error("Error fetching settings",z)}finally{i(!1)}},k=async(z,$)=>{try{o(!0),await Ge.post("/api/settings",{key:z,value:JSON.stringify($),type:"json"}),d({type:"success",text:"Cambios guardados correctamente."}),setTimeout(()=>d(null),3e3)}catch{d({type:"error",text:"Error al guardar los cambios."})}finally{o(!1)}},A=async z=>{if(!z)return null;try{const $=new FormData;$.append("asset",z);const{data:j}=await Ge.post("/api/settings/upload",$,{headers:{"Content-Type":"multipart/form-data"}});return j.url}catch($){return console.error("Error uploading file",$),d({type:"error",text:"Error al subir la imagen al servidor."}),null}},D=async(z,$)=>{i(!0);const j=await A($);if(j){const _=[...u.images];_[z]=j,g({...u,images:_})}i(!1)},L=()=>{g({images:[...u.images,""],texts:[...u.texts,"Nuevo texto para el banner"]})},q=z=>{const $=u.images.filter((_,M)=>M!==z),j=u.texts.filter((_,M)=>M!==z);g({images:$,texts:j})};return l.jsxs("div",{className:"p-6 max-w-6xl mx-auto dark:bg-dark-primary min-h-screen",children:[l.jsxs("div",{className:"flex items-center justify-between mb-8",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[l.jsx(Zb,{className:"text-brand-primary"}),"Personalización Visual"]}),l.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Modifica el contenido de la landing page en tiempo real."})]}),l.jsx("div",{className:"flex gap-2",children:l.jsx("button",{onClick:y,className:"p-2 text-gray-500 hover:bg-gray-100 rounded-full transition-colors",title:"Recargar",children:l.jsx(Qb,{size:20,className:s?"animate-spin":""})})})]}),c&&l.jsx("div",{className:`mb-6 p-4 rounded-xl flex items-center gap-2 ${c.type==="success"?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200"}`,children:l.jsx("span",{children:c.text})}),l.jsxs("div",{className:"flex space-x-1 bg-gray-100 dark:bg-dark-surface p-1 rounded-xl mb-8 w-fit",children:[l.jsx("button",{onClick:()=>n("hero"),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${r==="hero"?"bg-white dark:bg-dark-primary text-brand-primary shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Carrusel Hero"}),l.jsx("button",{onClick:()=>n("products"),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${r==="products"?"bg-white dark:bg-dark-primary text-brand-primary shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Sección Productos"}),l.jsx("button",{onClick:()=>n("services"),className:`px-6 py-2 rounded-lg text-sm font-bold transition-all ${r==="services"?"bg-white dark:bg-dark-primary text-brand-primary shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Sección Servicios"})]}),l.jsxs("div",{className:"bg-white dark:bg-dark-surface rounded-2xl shadow-xl border border-gray-100 dark:border-gray-800 p-8",children:[r==="hero"&&l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h3",{className:"text-xl font-bold dark:text-white",children:"Imágenes y Textos del Banner Principal"}),l.jsxs("button",{onClick:L,className:"flex items-center gap-2 bg-brand-primary text-white px-4 py-2 rounded-lg hover:bg-green-700 transition",children:[l.jsx(Lu,{size:18})," Añadir Slide"]})]}),l.jsx("div",{className:"grid grid-cols-1 gap-6",children:u.images.map((z,$)=>l.jsxs("div",{className:"flex flex-col md:flex-row gap-6 p-6 bg-gray-50 dark:bg-dark-primary/50 rounded-2xl border border-gray-200 dark:border-gray-700",children:[l.jsx("div",{className:"w-full md:w-64 h-40 rounded-xl overflow-hidden bg-gray-200 dark:bg-gray-800 flex-shrink-0 relative group",children:z?l.jsx("img",{src:z,alt:`Preview ${$}`,className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:l.jsx(n0,{size:40})})}),l.jsxs("div",{className:"flex-1 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Cambiar Imagen del Slide"}),l.jsx("input",{type:"file",accept:"image/*",onChange:j=>D($,j.target.files[0]),className:"w-full text-xs text-gray-500 file:mr-4 file:py-1 file:px-3 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-brand-primary file:text-white hover:file:bg-green-700"}),l.jsxs("p",{className:"mt-1 text-[10px] text-gray-400 truncate",children:["URL: ",z||"Ninguna imagen cargada"]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Frase del Banner"}),l.jsx("textarea",{value:u.texts[$],onChange:j=>{const _=[...u.texts];_[$]=j.target.value,g({...u,texts:_})},className:"w-full rounded-lg border-gray-200 dark:bg-dark-surface dark:border-gray-700 dark:text-white text-sm h-20",placeholder:"Escribe el mensaje impactante aquí..."})]})]}),l.jsx("button",{onClick:()=>q($),className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/10 rounded-lg self-start",children:l.jsx(bn,{size:20})})]},$))}),l.jsx("div",{className:"flex justify-end pt-6 border-t dark:border-gray-700",children:l.jsxs("button",{onClick:()=>k("hero_config",u),disabled:a,className:"flex items-center gap-2 bg-brand-primary text-white px-8 py-3 rounded-xl font-bold hover:bg-green-700 transition shadow-lg disabled:opacity-50",children:[l.jsx(cc,{size:20}),a?"Guardando...":"Guardar Cambios Hero"]})})]}),r==="products"&&l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h3",{className:"text-xl font-bold dark:text-white",children:"Productos Destacados (Landing)"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Estas son las 3 categorías principales que aparecen en el inicio."})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:m.map((z,$)=>l.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-dark-primary/50 rounded-2xl border border-gray-200 dark:border-gray-700 space-y-4",children:[l.jsx("div",{className:"h-40 rounded-xl overflow-hidden bg-gray-200 dark:bg-gray-800",children:l.jsx("img",{src:z.imgSrc,alt:z.title,className:"w-full h-full object-cover"})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Título"}),l.jsx("input",{type:"text",value:z.title,onChange:j=>{const _=[...m];_[$].title=j.target.value,f(_)},className:"w-full rounded-lg border-gray-200 dark:bg-dark-surface dark:border-gray-700 text-sm font-bold"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Descripción"}),l.jsx("textarea",{value:z.description,onChange:j=>{const _=[...m];_[$].description=j.target.value,f(_)},className:"w-full rounded-lg border-gray-200 dark:bg-dark-surface dark:border-gray-700 text-sm h-24"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Cambiar Imagen de Categoría"}),l.jsx("input",{type:"file",accept:"image/*",onChange:async j=>{i(!0);const _=await A(j.target.files[0]);if(_){const M=[...m];M[$].imgSrc=_,f(M)}i(!1)},className:"w-full text-xs text-gray-500 file:mr-2 file:py-1 file:px-2 file:rounded-lg file:border-0 file:text-[10px] file:bg-gray-200"})]})]},$))}),l.jsx("div",{className:"flex justify-end pt-6 border-t dark:border-gray-700",children:l.jsxs("button",{onClick:()=>k("products_config",m),disabled:a,className:"flex items-center gap-2 bg-brand-primary text-white px-8 py-3 rounded-xl font-bold hover:bg-green-700 transition shadow-lg",children:[l.jsx(cc,{size:20}),a?"Guardando...":"Guardar Cambios Productos"]})})]}),r==="services"&&l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h3",{className:"text-xl font-bold dark:text-white",children:"Servicios de la Landing"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Ajusta los 3 servicios principales mostrados."})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:x.map((z,$)=>l.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-dark-primary/50 rounded-2xl border border-gray-200 dark:border-gray-700 space-y-4",children:[l.jsx("div",{className:"h-40 rounded-xl overflow-hidden bg-gray-200 dark:bg-gray-800",children:l.jsx("img",{src:z.imgSrc,alt:z.title,className:"w-full h-full object-cover"})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Título"}),l.jsx("input",{type:"text",value:z.title,onChange:j=>{const _=[...x];_[$].title=j.target.value,v(_)},className:"w-full rounded-lg border-gray-200 dark:bg-dark-surface dark:border-gray-700 text-sm font-bold"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Descripción"}),l.jsx("textarea",{value:z.description,onChange:j=>{const _=[...x];_[$].description=j.target.value,v(_)},className:"w-full rounded-lg border-gray-200 dark:bg-dark-surface dark:border-gray-700 text-sm h-24"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Cambiar Imagen del Servicio"}),l.jsx("input",{type:"file",accept:"image/*",onChange:async j=>{i(!0);const _=await A(j.target.files[0]);if(_){const M=[...x];M[$].imgSrc=_,v(M)}i(!1)},className:"w-full text-xs text-gray-500 file:mr-2 file:py-1 file:px-2 file:rounded-lg file:border-0 file:text-[10px] file:bg-gray-200"})]})]},$))}),l.jsx("div",{className:"flex justify-end pt-6 border-t dark:border-gray-700",children:l.jsxs("button",{onClick:()=>k("services_config",x),disabled:a,className:"flex items-center gap-2 bg-brand-primary text-white px-8 py-3 rounded-xl font-bold hover:bg-green-700 transition shadow-lg",children:[l.jsx(cc,{size:20}),a?"Guardando...":"Guardar Cambios Servicios"]})})]})]})]})},PA=()=>{const t=Vc();return Z.useEffect(()=>{if(t.hash){const e=t.hash.substring(1);setTimeout(()=>{const r=document.getElementById(e);r&&r.scrollIntoView({behavior:"smooth"})},100)}},[t]),null},LA=()=>{const{isAuthenticated:t,isLoading:e,user:r}=Mr();Vc();const n=r?.["https://premezcladomanzanillo.com/roles"]||[];return console.log(`[ProtectedRoute] isLoading: ${e}, isAuthenticated: ${t}, userRoles: ${n}`),e?l.jsx("div",{children:"Cargando..."}):t?l.jsx(hh,{}):l.jsx(s2,{to:"/",replace:!0})},EA=()=>{const{isLoading:t}=Mr();return t?l.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-100 dark:bg-gray-900",children:l.jsx("div",{className:"text-xl font-semibold text-gray-800 dark:text-gray-200",children:"Cargando..."})}):l.jsx(Uy,{children:l.jsx(zy,{children:l.jsxs(r2,{children:[l.jsx(AA,{}),l.jsx(PA,{}),l.jsx(SA,{}),l.jsxs(n2,{children:[l.jsx(Wt,{path:"/",element:l.jsx(v6,{})}),l.jsx(Wt,{path:"/productos",element:l.jsx(N6,{})}),l.jsx(Wt,{path:"/productos/estructurales",element:l.jsx(_6,{})}),l.jsx(Wt,{path:"/productos/pavimentos",element:l.jsx(A6,{})}),l.jsx(Wt,{path:"/productos/especiales",element:l.jsx(E6,{})}),l.jsx(Wt,{path:"/productos/:productId",element:l.jsx(k6,{})}),l.jsx(Wt,{path:"/servicios",element:l.jsx(F6,{})}),l.jsx(Wt,{path:"/nosotros",element:l.jsx(I6,{})}),l.jsx(Wt,{path:"/contacto",element:l.jsx(yA,{})}),l.jsx(Wt,{path:"/proyectos",element:l.jsx(vA,{})}),l.jsx(Wt,{element:l.jsx(LA,{}),children:l.jsxs(Wt,{element:l.jsx(_A,{}),children:[" ",l.jsxs(Wt,{element:l.jsx(jA,{}),children:[" ",l.jsx(Wt,{path:"/dashboard",element:l.jsx(iN,{})}),l.jsx(Wt,{path:"/clients",element:l.jsx(lN,{})}),l.jsx(Wt,{path:"/notifications",element:l.jsx(i6,{})}),l.jsx(Wt,{path:"/budgets/*",element:l.jsx(HS,{})}),l.jsx(Wt,{path:"/dashboard/budgets/build/:id",element:l.jsx(kA,{})}),l.jsx(Wt,{path:"/products-management",element:l.jsx(XS,{})}),l.jsx(Wt,{path:"/payments",element:l.jsx(t6,{})}),l.jsx(Wt,{path:"/invoices",element:l.jsx(r6,{})})," ",l.jsx(Wt,{path:"/admin/roles",element:l.jsx(s6,{})}),l.jsx(Wt,{path:"/customize",element:l.jsx(CA,{})}),l.jsx(Wt,{path:"/reports",element:l.jsx(o6,{})}),l.jsx(Wt,{path:"/settings",element:l.jsx(h6,{})})]})]})})]})]})})})},OA=o2.createRoot(document.getElementById("root")),G1="dev-bellooswaldo.us.auth0.com",X1="fbMisV5lJPnJT35f14NZLI0rQIy4wj7p";console.log("Auth0 Domain:",G1);console.log("Auth0 Client ID:",X1);OA.render(l.jsx(Z.StrictMode,{children:l.jsx(i2,{domain:G1,clientId:X1,authorizationParams:{redirect_uri:window.location.origin,audience:"https://premezclados-api.com",scope:"openid profile email read:permissions"},children:l.jsx(EA,{})})}));export{Ot as _};
